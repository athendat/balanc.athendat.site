"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[1152],{51973:(v,_,a)=>{a.d(_,{a:()=>O});var e=a(54438),n=a(89417),u=a(75351),C=a(21413),l=a(56977),x=a(46601),E=a(36596),m=a(94794),D=a(95416),p=a(88834),b=a(59042),g=a(32102),M=a(5946),h=a(99213),B=a(30450);function k(i,c){1&i&&(e.j41(0,"h2",3),e.EFF(1," Agregar Marca "),e.k0s())}function R(i,c){1&i&&(e.j41(0,"h2",3),e.EFF(1," Editar Marca "),e.k0s())}function F(i,c){if(1&i&&(e.j41(0,"div",5)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"h6",12),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",13),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.brand.name||"Sin nombre")}}function I(i,c){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",26,0),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(2);return e.Njj(r.openCropperDialog(o))}),e.k0s(),e.j41(3,"label",27),e.nrm(4,"mat-icon",28),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function P(i,c){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",29),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.removeImage())}),e.nrm(2,"mat-icon",30),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function j(i,c){if(1&i&&e.nrm(0,"img",25),2&i){const t=e.XpG(2);e.Y8G("src",t.brandForm.get("logo").value,e.B4B)}}function A(i,c){if(1&i&&(e.j41(0,"div",6)(1,"div",14)(2,"form",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",18),e.k0s()(),e.j41(8,"div",16)(9,"mat-form-field",17)(10,"mat-label"),e.EFF(11,"Descripci\xf3n"),e.k0s(),e.j41(12,"textarea",19),e.EFF(13,"                    "),e.k0s()()(),e.j41(14,"div",20)(15,"span",21),e.EFF(16,"Estado"),e.k0s(),e.j41(17,"mat-slide-toggle",22),e.EFF(18),e.k0s()(),e.j41(19,"div",23)(20,"div",24),e.DNE(21,I,5,3,"div")(22,P,3,1,"div"),e.k0s(),e.DNE(23,j,1,1,"img",25),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.brandForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Nombre del Marca"),e.R7$(5),e.Y8G("formControlName","description"),e.R7$(5),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===t.brandForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(3),e.vxM(21,t.brandForm.get("logo").value?-1:21),e.R7$(),e.vxM(22,t.brandForm.get("logo").value?22:-1),e.R7$(),e.vxM(23,t.brandForm.get("logo").value?23:-1)}}function L(i,c){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.updateBrand())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.brandForm.invalid)}}function T(i,c){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.createBrand())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.brandForm.invalid)}}function y(i,c){if(1&i&&(e.j41(0,"div",7),e.qex(1),e.j41(2,"button",31),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,L,2,2,"button",32)(5,T,2,2,"button",32),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let O=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this.imageChangedEvent="",this.croppedImage="",this._unsubscribeAll=new C.B,this._brandsService=(0,e.WQX)(E.m),this._fuseConfirmationService=(0,e.WQX)(x.G),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(n.ok),this._dialogRef=(0,e.WQX)(u.CP),this._snackBar=(0,e.WQX)(D.UG),this._imagesService=(0,e.WQX)(M.M),this.dialogMode=t.dialogMode,this.brand=t.brand}ngOnInit(){this.brandForm=this._formBuilder.group({id:[null],name:[null,[n.k0.required,n.k0.minLength(3),n.k0.maxLength(255)]],description:[null,[n.k0.minLength(3),n.k0.maxLength(255)]],active:[],logo:[null]}),"edit"===this.dialogMode&&this.brandForm.patchValue(this.brand)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBrand(){const t=this.brandForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._brandsService.createBrand(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&this._snackBar.openFromComponent(m.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.createBrand.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck(),this._dialogRef.close()})})}updateBrand(){const t=this.brandForm.getRawValue();delete t.slug,this._fuseConfirmationService.open({title:"Actualizar Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._brandsService.updateBrand(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&(this._snackBar.openFromComponent(m.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateBrand.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck(),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}openCropperDialog(t){if(0===t.target.files.length)return;const s=t.target.files[0];this._imagesService.validMaxMBSize(s,2)&&this._imagesService.validImageType(s)&&this._imagesService.openCropperDialog(t,!1).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._imagesService.uploadImage("List",s).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{if(this.brandForm.get("logo").setValue(r.imageUrl),this.brand.logo=r.imageUrl,"edit"===this.dialogMode){const d=this.brand;delete d.slug,this._brandsService.updateBrand(d).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:f})=>{f&&(this._snackBar.openFromComponent(m.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:f.updateBrand.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck())})}else this._changeDetectorRef.markForCheck()},r=>{console.warn(r)})})}removeImage(){const t=this.brandForm.get("logo").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._imagesService.removeImage(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{if(this.brandForm.get("logo").setValue(null),this.brand.logo=null,"edit"===this.dialogMode){const d=this.brand;delete d.slug,this._brandsService.updateBrand(d).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(f=>{this._snackBar.openFromComponent(m.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}})})}static#e=this.\u0275fac=function(s){return new(s||i)(e.rXU(u.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-brand-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"formControlName"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mt-8","overflow-hidden","bg-gray-200","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,"object-contain","w-full","h-full",3,"src"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-red-700",3,"svgIcon"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(s,o){1&s&&(e.j41(0,"div",1),e.qex(1),e.j41(2,"div",2),e.DNE(3,k,2,0,"h2",3)(4,R,2,0,"h2",3),e.k0s(),e.bVm(),e.j41(5,"div",4),e.qex(6),e.DNE(7,F,9,1,"div",5),e.bVm(),e.qex(8),e.DNE(9,A,24,11,"div",6),e.bVm(),e.k0s(),e.DNE(10,y,6,3,"div",7),e.k0s()),2&s&&(e.R7$(3),e.vxM(3,"add"===o.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===o.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===o.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==o.data.dialogMode?10:-1))},dependencies:[p.Hl,p.$z,p.iY,u.tx,g.RG,g.rl,g.nJ,b.fS,b.fg,n.X1,n.qT,n.me,n.BC,n.cb,n.YS,n.tU,n.j4,n.JD,B.sG,h.m_,h.An],encapsulation:2})}return i})()},57084:(v,_,a)=>{a.d(_,{m:()=>e});class e{}}}]);