"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[1998],{41784:(I,b,a)=>{a.d(b,{y:()=>p});var u=a(42495),x=a(94748),l=a(19212);function v(f,g){1&f&&(l.TgZ(0,"div",0),l.Hsn(1),l.qZA(),l.TgZ(2,"div",1),l.Hsn(3,1),l.qZA())}function d(f,g){1&f&&(l.TgZ(0,"div",3),l.Hsn(1,3),l.qZA()),2&f&&l.Q6J("@expandCollapse",void 0)}function e(f,g){if(1&f&&(l.Hsn(0,2),l.YNc(1,d,2,1,"div",2)),2&f){const m=l.oxw();l.xp6(),l.um2(1,m.expanded?1:-1)}}const T=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],n=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let p=(()=>{class f{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(m){"expanded"in m&&(this.expanded=(0,u.Ig)(m.expanded.currentValue)),"flippable"in m&&(this.flippable=(0,u.Ig)(m.flippable.currentValue))}static#e=this.\u0275fac=function(h){return new(h||f)};static#t=this.\u0275cmp=l.Xpm({type:f,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(h,C){2&h&&l.Tol(C.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[l.TTD,l.jDz],ngContentSelectors:n,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(h,C){1&h&&(l.F$t(T),l.YNc(0,v,4,0)(1,e,2,1)),2&h&&(l.um2(0,C.flippable?0:-1),l.xp6(),l.um2(1,C.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:x.L}})}return f})()},61998:(I,b,a)=>{a.r(b),a.d(b,{default:()=>Ke});var u=a(30617),x=a(64190),l=a(41784),v=a(78645),d=a(59773),e=a(19212);let T=(()=>{class o{constructor(t,i,r){this._activatedRoute=t,this._changeDetectorRef=i,this._router=r,this.merchantId="",this._unsubscribeAll=new v.x}ngOnInit(){this._activatedRoute.params.pipe((0,d.R)(this._unsubscribeAll)).subscribe(({merchantId:t})=>{void 0!==t&&(this.merchantId=t,this._changeDetectorRef.markForCheck())})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(x.gz),e.Y36(e.sBO),e.Y36(x.F0))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["ath-crm"]],standalone:!0,features:[e.jDz],decls:38,vars:2,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],["routerLink","/dashboard",1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-2","lg:grid-cols-4","gap-y-12","sm:gap-x-4"],["routerLink","/modules/crm/customers",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["routerLink","/modules/crm/contacts",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Gesti\xf3n de clientes"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Gesti\xf3n de clientes "),e.qZA()()()(),e.TgZ(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",12),e._uU(24," M\xf3dulos "),e.qZA(),e.TgZ(25,"div",16)(26,"fuse-card",17)(27,"div",18)(28,"div",19),e._uU(29,"Clientes"),e.qZA(),e.TgZ(30,"div",20),e._uU(31,"listado de Clientes(Negocios)"),e.qZA()()(),e.TgZ(32,"fuse-card",21)(33,"div",18)(34,"div",19),e._uU(35,"Contactos"),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"listado de contactos"),e.qZA()()()()()()()()),2&i&&(e.xp6(9),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(5),e.Q6J("svgIcon","mat_solid:chevron_left"))},dependencies:[x.rH,u.Ps,u.Hw,l.y],encapsulation:2,changeDetection:0})}return o})();var n=a(56223),p=a(22939),f=a(96814),g=a(32296),m=a(64170),h=a(24516),C=a(3305),F=a(98525),N=a(84221),E=a(33963),M=a(57482),J=a(56278),A=a(42090),S=a(76459),P=a(93217),B=a(95407),Y=a(23680);const w=o=>({"cursor-not-allowed":o});function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createCustomer())}),e._UZ(1,"mat-icon",51),e.TgZ(2,"span",52),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,w,t.customerForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:save")}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateCustomer())}),e._UZ(1,"mat-icon",51),e.TgZ(2,"span",52),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,w,t.customerForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:refresh")}}function j(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del cliente es obligatorio. "),e.qZA())}function O(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del cliente debe contener entre 3 y 255 caracteres. "),e.qZA())}function G(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del cliente no debe contener n\xfameros. "),e.qZA())}function K(o,s){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(),e.Oqu(t)}}function V(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger el giro del cliente "),e.qZA())}function W(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger el tipo de cliente "),e.qZA())}function X(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n tributaria debe poseer 11 d\xedgitos. "),e.qZA())}function ee(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n tributaria debe poseer solo n\xfameros. "),e.qZA())}function te(o,s){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij("",t.fullname," ")}}function oe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger el comercial que atender\xe1 a este cliente "),e.qZA())}function re(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor del cr\xe9dito debe ser un n\xfamero positivo "),e.qZA())}function ne(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Cargo"),e.qZA())}function ie(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del contacto es obligatorio. "),e.qZA())}function ae(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Nombre"),e.qZA())}function se(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del contacto es obligatorio. "),e.qZA())}function le(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Primer apellido"),e.qZA())}function me(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido es obligatorio. "),e.qZA())}function ce(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Segundo apellido"),e.qZA())}function de(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El segundo apellido es obligatorio. "),e.qZA())}function ue(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"No. Identidad"),e.qZA())}function pe(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fono"),e.qZA())}function fe(o,s){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Correo electr\xf3nico"),e.qZA())}const ge=o=>({"mt-6":o});function he(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",58)(2,"mat-form-field",59),e.YNc(3,ne,2,0,"mat-label"),e._UZ(4,"input",60),e.YNc(5,ie,2,0,"mat-error"),e.qZA(),e.TgZ(6,"mat-form-field",59),e.YNc(7,ae,2,0,"mat-label"),e._UZ(8,"input",60),e.YNc(9,se,2,0,"mat-error"),e.qZA(),e.TgZ(10,"mat-form-field",59),e.YNc(11,le,2,0,"mat-label"),e._UZ(12,"input",60),e.YNc(13,me,2,0,"mat-error"),e.qZA(),e.TgZ(14,"mat-form-field",59),e.YNc(15,ce,2,0,"mat-label"),e._UZ(16,"input",60),e.YNc(17,de,2,0,"mat-error"),e.qZA(),e.TgZ(18,"mat-form-field",59),e.YNc(19,ue,2,0,"mat-label"),e._UZ(20,"input",61),e.qZA(),e.TgZ(21,"mat-form-field",62)(22,"mat-label"),e._uU(23,"Permisos"),e.qZA(),e.TgZ(24,"mat-select",63)(25,"mat-option",35),e._uU(26,"Recoger"),e.qZA(),e.TgZ(27,"mat-option",35),e._uU(28,"Firmar"),e.qZA()()(),e.TgZ(29,"mat-form-field",59),e.YNc(30,pe,2,0,"mat-label"),e._UZ(31,"input",60),e.qZA(),e.TgZ(32,"mat-form-field",59),e.YNc(33,fe,2,0,"mat-label"),e._UZ(34,"input",64),e.qZA()(),e.ynx(35),e.TgZ(36,"div",65)(37,"button",66),e.NdJ("click",function(){const c=e.CHM(t).$index,_=e.oxw(2);return e.KtG(_.removeContactField(c))}),e._UZ(38,"mat-icon",55),e.qZA()(),e.BQk(),e.qZA()}if(2&o){const t=s.$implicit,i=s.$index;e.xp6(3),e.um2(3,0===i?3:-1),e.xp6(),e.Q6J("type","text")("formControl",t.get("title")),e.xp6(),e.um2(5,t.get("title").hasError("required")?5:-1),e.xp6(2),e.um2(7,0===i?7:-1),e.xp6(),e.Q6J("type","text")("formControl",t.get("name")),e.xp6(),e.um2(9,t.get("name").hasError("required")?9:-1),e.xp6(2),e.um2(11,0===i?11:-1),e.xp6(),e.Q6J("type","text")("formControl",t.get("lastname1")),e.xp6(),e.um2(13,t.get("lastname1").hasError("required")?13:-1),e.xp6(2),e.um2(15,0===i?15:-1),e.xp6(),e.Q6J("type","text")("formControl",t.get("lastname2")),e.xp6(),e.um2(17,t.get("lastname2").hasError("required")?17:-1),e.xp6(2),e.um2(19,0===i?19:-1),e.xp6(),e.Q6J("type","text")("formControl",t.get("idNumber")),e.xp6(4),e.Q6J("formControl",t.get("abilities"))("required",!0),e.xp6(),e.Q6J("value","recoger"),e.xp6(2),e.Q6J("value","firmar"),e.xp6(3),e.um2(30,0===i?30:-1),e.xp6(),e.Q6J("type","tel")("formControl",t.get("phone")),e.xp6(2),e.um2(33,0===i?33:-1),e.xp6(),e.Q6J("type","email")("formControl",t.get("email")),e.xp6(2),e.Q6J("ngClass",e.VKq(31,ge,0===i)),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header",22)(2,"mat-panel-title",23)(3,"div",24),e._uU(4," Personas de contacto "),e.qZA()()(),e.TgZ(5,"div",53),e.SjG(6,he,39,33,"div",67,e.x6l),e.TgZ(8,"div",54),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addContactField())}),e._UZ(9,"mat-icon",55),e.TgZ(10,"span",56),e._uU(11," Agregar Contacto "),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(),e.Q6J("collapsedHeight","56px"),e.xp6(5),e.wJu(t.customerForm.get("contacts").controls),e.xp6(3),e.Q6J("svgIcon","mat_solid:add_circle")}}function xe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function Ce(o,s){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(),e.hij(" ",t," ")}}function ve(o,s){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.city),e.xp6(),e.hij(" ",t.city," ")}}function be(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo n\xfameros. "),e.qZA())}function Ze(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El c\xf3digo postal debe poseer solo 5 d\xedgitos. "),e.qZA())}function ye(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.qZA())}function Te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createCustomer())}),e._UZ(1,"mat-icon",51),e.TgZ(2,"span",52),e._uU(3,"Guardar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,w,t.customerForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:save")}}function Fe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateCustomer())}),e._UZ(1,"mat-icon",51),e.TgZ(2,"span",52),e._uU(3,"Actualizar"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.customerForm.invalid)("ngClass",e.VKq(3,w,t.customerForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:refresh")}}let Ae=(()=>{class o{constructor(){this.customerId=e.qHZ.required(),this.cities=[],this.commercials=[],this.customers=[],this.isNew=!1,this.states=[],this.stateSelected="",this.merchantDomains=["Agricultura y Agroindustria","Alimentaci\xf3n y Bebidas","Automoci\xf3n","Bienes Ra\xedces e Inmobiliaria","Comercio Minorista","Construcci\xf3n y Arquitectura","Educaci\xf3n y Formaci\xf3n","Energ\xeda y Medio Ambiente","Entretenimiento y Eventos","Finanzas y Servicios Bancarios","Salud, Belleza y Cuidado de Personal","Industria Manufacturera","Inform\xe1tica y Tecnolog\xeda","Medios de Comunicaci\xf3n y Publicidad","Moda y Textiles","Servicios Profesionales (abogados, contadores, consultores, etc)","Telecomunicaciones","Transporte y Log\xedstica","Turismo y Hosteler\xeda"],this._changeDetectorRef=(0,e.f3M)(e.sBO),this._customersService=(0,e.f3M)(S.v),this._formBuilder=(0,e.f3M)(n.qu),this._fuseConfirmationService=(0,e.f3M)(J.R),this._locationService=(0,e.f3M)(P.a),this._router=(0,e.f3M)(x.F0),this._snackBar=(0,e.f3M)(p.ux),this._unsubscribeAll=new v.x,this.store=(0,e.f3M)(N.yh)}ngOnInit(){this.customerForm=this._formBuilder.group({id:new n.NI(this.customerId),name:new n.NI(null,[n.kI.required,n.kI.minLength(2),n.kI.maxLength(255)]),domain:new n.NI(null,[n.kI.minLength(3),n.kI.maxLength(255)]),nit:new n.NI(null,[n.kI.maxLength(11),n.kI.minLength(11)]),type:new n.NI(null,[n.kI.required]),commercialId:new n.NI(null),email:new n.NI(null),phone:new n.NI(null),credit:new n.NI(0,[n.kI.required,n.kI.min(0)]),address:new n.NI(null,[n.kI.minLength(3),n.kI.maxLength(255)]),country:new n.NI({value:"Cuba",disabled:!0},[n.kI.required]),state:new n.NI(null),city:new n.NI({disabled:!0,value:null}),zip:new n.NI(null,[n.kI.minLength(4),n.kI.maxLength(5)]),contacts:this._formBuilder.array([])}),"new"!==this.customerId()&&(this.customerWindowsMode="edit",this.store.select(E.H5).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.customer=t,this.customerForm.patchValue(t)})),this.store.select(M.ri).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.commercials=t,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.states=t,this._changeDetectorRef.markForCheck()}),this.customerForm.get("state")?.valueChanges.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this._getCitiesByState(t),this.customerForm.get("city").enable(),this._changeDetectorRef.markForCheck()}),this.customerForm.get("email")?.valueChanges.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{""===t&&this.customerForm.get("email").setValue(null),this._changeDetectorRef.markForCheck()}),this.customerForm.get("phone")?.valueChanges.pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{""===t&&this.customerForm.get("phone").setValue(null),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addContactField(){const t=this._formBuilder.group({title:new n.NI(null,[n.kI.required]),name:new n.NI(null,[n.kI.required]),lastname1:new n.NI(null,[n.kI.required]),lastname2:new n.NI(null),abilities:new n.NI([]),idNumber:new n.NI(null,[n.kI.maxLength(11),n.kI.minLength(11)]),email:new n.NI(null,[n.kI.email]),phone:new n.NI(null)});this.customerForm.get("contacts").push(t),this._changeDetectorRef.markForCheck()}removeContactField(t){this.customerForm.get("contacts").removeAt(t),this._changeDetectorRef.markForCheck()}createCustomer(){let t=this.customerForm.getRawValue();delete t.id,delete t.contacts,this._fuseConfirmationService.open({title:"Crear cliente",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._customersService.createCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/crm/customers")}),this._changeDetectorRef.markForCheck()})}updateCustomer(){let t=this.customerForm.getRawValue();delete t.contacts,this._fuseConfirmationService.open({title:"Actualizar cliente",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._customersService.updateCustomer(t).subscribe(c=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/crm/customers")}),this._changeDetectorRef.markForCheck()})}_getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).subscribe(i=>{this.cities=i,this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["customer-form"]],inputs:{customerId:[e.lbL.SignalBased,"customerId"]},standalone:!0,features:[e.jDz],decls:156,vars:58,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/crm/customers",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white bg-gradient-to-r hover:bg-gradient-to-l from-primary-500 to-primary-900 hover:shadow-lg","mat-raised-button","",3,"disabled","ngClass"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","gap-y-3","gap-x-6","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full","mat-fuse-dense"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["required","",3,"formControlName"],[1,"w-full"],["value","natural"],["value","juridica"],["matInput","",3,"type","formControlName","maxlength","minlength"],[3,"formControlName"],[3,"value"],["type","number","matInput","",3,"formControlName","min"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","gap-y-3","gap-x-6","sm:grid-cols-2","md:grid-cols-4"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","formControlName"],[1,"pt-8","pb-8","pl-4","pr-4","border-t-2"],[1,"grid","w-full","gap-y-3","gap-x-6","sm:grid-cols-4"],["value","Cuba"],[1,"w-full","fuse-mat-emphasized-affix"],["type","text","matInput","","maxlength","5","minlength","4",3,"formControlName"],[1,"sm:col-span-4"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName","minLength","maxlength"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","hover:bg-gradient-to-l","from-primary-500","to-primary-900","hover:shadow-lg",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"w-full","pt-8","pb-8","pl-4","pr-4","border-t-2"],[1,"inline-flex","items-center","px-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"relative","flex","flex-col","w-full","sm:flex-row"],[1,"grid","w-full","grid-cols-1","gap-3","sm:grid-cols-4"],[1,"fuse-mat-dense"],["matInput","",3,"type","formControl"],["matInput","","minlength","11","maxlength","11",3,"type","formControl"],[1,"w-full","fuse-mat-dense"],["multiple","",3,"formControl","required"],["matInput","","maxlength","250",3,"type","formControl"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar contacto",1,"w-8","h-8","min-h-8",3,"click"],["class","relative flex flex-col w-full sm:flex-row"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Ventas"),e.qZA()(),e.TgZ(12,"div",4),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Clientes"),e.qZA()(),e.TgZ(16,"div",4),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19,"Nuevo"),e.qZA()()(),e.TgZ(20,"div",10)(21,"a",11),e._UZ(22,"mat-icon",6),e.TgZ(23,"span",12),e._uU(24,"Regresar"),e.qZA()()()(),e.TgZ(25,"div",13)(26,"div",14),e._uU(27," Nuevo Cliente "),e.qZA()()(),e.TgZ(28,"div",15),e.YNc(29,H,4,5,"button",16)(30,$,4,5,"button",16),e.qZA()(),e.TgZ(31,"div",17)(32,"div",18)(33,"form",19)(34,"mat-accordion",20)(35,"mat-expansion-panel",21)(36,"mat-expansion-panel-header",22)(37,"mat-panel-title",23)(38,"div",24),e._uU(39," Informaci\xf3n General "),e.qZA()()(),e.TgZ(40,"div",25)(41,"div",26)(42,"mat-form-field",27)(43,"mat-label"),e._uU(44,"Nombre"),e.qZA(),e._UZ(45,"input",28),e.YNc(46,j,2,0,"mat-error")(47,O,2,0,"mat-error")(48,G,2,0,"mat-error"),e.qZA()(),e.TgZ(49,"div",26)(50,"mat-form-field",27)(51,"mat-label"),e._uU(52,"Giro del cliente"),e.qZA(),e.TgZ(53,"mat-select",29),e.SjG(54,K,2,2,"mat-option",35,e.x6l),e.qZA(),e.YNc(56,V,2,0,"mat-error"),e.qZA()(),e.TgZ(57,"div",26)(58,"mat-form-field",30)(59,"mat-label"),e._uU(60,"Tipo de cliente"),e.qZA(),e.TgZ(61,"mat-select",29)(62,"mat-option",31),e._uU(63,"Persona Natural"),e.qZA(),e.TgZ(64,"mat-option",32),e._uU(65,"Persona Jur\xeddica"),e.qZA()(),e.YNc(66,W,2,0,"mat-error"),e.qZA()(),e.TgZ(67,"div",26)(68,"mat-form-field",27)(69,"mat-label"),e._uU(70,"N\xfamero de Identificaci\xf3n Tributaria"),e.qZA(),e._UZ(71,"input",33),e.YNc(72,X,2,0,"mat-error")(73,ee,2,0,"mat-error"),e.qZA()(),e.TgZ(74,"div",26)(75,"mat-form-field",30)(76,"mat-label"),e._uU(77,"Comercial"),e.qZA(),e.TgZ(78,"mat-select",34)(79,"mat-option",35),e._uU(80,"Seleccionar"),e.qZA(),e.SjG(81,te,2,2,"mat-option",35,e.x6l),e.qZA(),e.YNc(83,oe,2,0,"mat-error"),e.qZA()(),e.TgZ(84,"div",26)(85,"mat-form-field",30)(86,"mat-label"),e._uU(87,"Cr\xe9dito"),e.qZA(),e._UZ(88,"input",36),e.YNc(89,re,2,0,"mat-error"),e.qZA()()()(),e.TgZ(90,"mat-expansion-panel")(91,"mat-expansion-panel-header",22)(92,"mat-panel-title",23)(93,"div",24),e._uU(94," Informaci\xf3n de contacto "),e.qZA()()(),e.TgZ(95,"div",37)(96,"div",26)(97,"mat-form-field",27)(98,"mat-label"),e._uU(99,"Tel\xe9fono"),e.qZA(),e._UZ(100,"mat-icon",38)(101,"input",39),e.qZA()(),e.TgZ(102,"div",26)(103,"mat-form-field",27)(104,"mat-label"),e._uU(105,"Correo electr\xf3nico"),e.qZA(),e._UZ(106,"mat-icon",38)(107,"input",39),e.qZA()()()(),e.YNc(108,_e,12,2,"mat-expansion-panel"),e.TgZ(109,"mat-expansion-panel")(110,"mat-expansion-panel-header",22)(111,"mat-panel-title",23)(112,"div",24),e._uU(113," Domicilio "),e.qZA()()(),e.TgZ(114,"div",40)(115,"div",41)(116,"div",26)(117,"mat-form-field",27)(118,"mat-label"),e._uU(119,"Pa\xeds"),e.qZA(),e.TgZ(120,"mat-select",29)(121,"mat-option",42),e._uU(122,"Cuba"),e.qZA()(),e.YNc(123,xe,2,0,"mat-error"),e.qZA()(),e.TgZ(124,"div",26)(125,"mat-form-field",27)(126,"mat-label"),e._uU(127,"Provincia"),e.qZA(),e.TgZ(128,"mat-select",34),e.SjG(129,Ce,2,2,"mat-option",35,e.x6l),e.qZA()()(),e.TgZ(131,"div",26)(132,"mat-form-field",27)(133,"mat-label"),e._uU(134,"Municipio"),e.qZA(),e.TgZ(135,"mat-select",34),e.SjG(136,ve,2,2,"mat-option",35,e.x6l),e.qZA()()(),e.TgZ(138,"div",26)(139,"mat-form-field",43)(140,"mat-label"),e._uU(141,"C\xf3digo Postal"),e.qZA(),e._UZ(142,"input",44),e.YNc(143,be,2,0,"mat-error")(144,Ze,2,0,"mat-error"),e.qZA()(),e.TgZ(145,"div",45)(146,"mat-form-field",46)(147,"mat-label"),e._uU(148,"Direcci\xf3n"),e.qZA(),e._UZ(149,"mat-icon",38)(150,"textarea",47),e.YNc(151,ye,2,0,"mat-error"),e.qZA()()()()()()()()(),e.TgZ(152,"div",48)(153,"div",49),e.YNc(154,Te,4,5,"button",16)(155,Fe,4,5,"button",16),e.qZA()()()),2&i&&(e.xp6(9),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(),e.Q6J("svgIcon","mat_solid:chevron_left"),e.xp6(7),e.um2(29,"new"===r.customerId()?29:-1),e.xp6(),e.um2(30,"new"!==r.customerId()?30:-1),e.xp6(3),e.Q6J("formGroup",r.customerForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del cliente"),e.xp6(),e.um2(46,r.customerForm.get("name").hasError("required")?46:-1),e.xp6(),e.um2(47,r.customerForm.get("name").hasError("maxlength")||r.customerForm.get("name").hasError("minlength")?47:-1),e.xp6(),e.um2(48,r.customerForm.get("name").hasError("pattern")?48:-1),e.xp6(5),e.Q6J("formControlName","domain"),e.xp6(),e.wJu(r.merchantDomains),e.xp6(2),e.um2(56,r.customerForm.get("type").hasError("required")?56:-1),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(5),e.um2(66,r.customerForm.get("type").hasError("required")?66:-1),e.xp6(5),e.Q6J("type","text")("formControlName","nit")("maxlength",11)("minlength",11),e.xp6(),e.um2(72,r.customerForm.get("nit").hasError("maxlength")||r.customerForm.get("nit").hasError("minlength")?72:-1),e.xp6(),e.um2(73,r.customerForm.get("nit").hasError("pattern")?73:-1),e.xp6(5),e.Q6J("formControlName","commercialId"),e.xp6(),e.Q6J("value",null),e.xp6(2),e.wJu(r.commercials),e.xp6(2),e.um2(83,r.customerForm.get("commercialId").hasError("required")?83:-1),e.xp6(5),e.Q6J("formControlName","credit")("min",0),e.xp6(),e.um2(89,r.customerForm.get("credit").hasError("min")?89:-1),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("svgIcon","mat_solid:phone"),e.xp6(),e.Q6J("type","tel")("formControlName","phone"),e.xp6(5),e.Q6J("svgIcon","mat_solid:alternate_email"),e.xp6(),e.Q6J("type","email")("formControlName","email"),e.xp6(),e.um2(108,"juridica"===r.customerForm.get("type").value?108:-1),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(10),e.Q6J("formControlName","country"),e.xp6(3),e.um2(123,r.customerForm.get("country").hasError("required")?123:-1),e.xp6(5),e.Q6J("formControlName","state"),e.xp6(),e.wJu(r.states),e.xp6(6),e.Q6J("formControlName","city"),e.xp6(),e.wJu(r.cities),e.xp6(6),e.Q6J("formControlName","zip"),e.xp6(),e.um2(143,r.customerForm.get("zip").hasError("onlyNumber")?143:-1),e.xp6(),e.um2(144,r.customerForm.get("zip").hasError("minLength")||r.customerForm.get("zip").hasError("maxLength")?144:-1),e.xp6(5),e.Q6J("svgIcon","mat_solid:home"),e.xp6(),e.Q6J("formControlName","address")("minLength",3)("maxlength",255),e.xp6(),e.um2(151,r.customerForm.get("address").hasError("maxlength")||r.customerForm.get("address").hasError("minlength")?151:-1),e.xp6(3),e.um2(154,"new"===r.customerId()?154:-1),e.xp6(),e.um2(155,"new"!==r.customerId()?155:-1))},dependencies:[g.ot,g.lW,g.RK,C.To,C.pp,C.ib,C.yz,C.yK,m.lN,m.KE,m.hX,m.TO,m.qo,u.Ps,u.Hw,h.c,h.Nt,F.LD,B.PQ,F.gD,Y.ey,f.mk,n.UX,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.wO,n.nD,n.qQ,n.oH,n.sg,n.u,x.rH],encapsulation:2,changeDetection:0})}return o})();var U=a(21476),Q=a(82599),q=a(13566),we=a(22096),Ie=a(63019),Ue=a(83620),D=a(94664),L=a(37398),y=a(16676),qe=a(36236),Z=a(57069),ke=a(83604),Ne=a(53374),Ee=a(29643),Je=a(77988),R=a(55940);const Se=(o,s)=>s.id;function Qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",31),e.NdJ("change",function(r){e.CHM(t);const c=e.oxw(),_=c.$implicit,k=c.$index,Ve=e.oxw(4);return e.KtG(Ve.updateCustomerStatus(r,_,k))}),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.Q6J("checked",t.active)("color","primary")}}function De(o,s){1&o&&e._UZ(0,"mat-spinner",32),2&o&&e.Q6J("diameter",20)("color","primary")}const Le=o=>["/modules/crm/customers",o];function Re(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",21),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA(),e.TgZ(5,"div",21),e._uU(6),e.qZA(),e.TgZ(7,"div",21),e._uU(8),e.qZA(),e.TgZ(9,"div",25),e.YNc(10,Qe,1,2,"mat-slide-toggle",26)(11,De,1,2),e.qZA(),e.TgZ(12,"div",27)(13,"button",28),e._UZ(14,"mat-icon",29),e.qZA(),e.TgZ(15,"button",30),e.NdJ("click",function(){const c=e.CHM(t).$implicit,_=e.oxw(4);return e.KtG(_.removeCustomer(c.id))}),e._UZ(16,"mat-icon",29),e.qZA()()()}if(2&o){const t=s.$implicit,i=s.$index,r=e.oxw(4);e.xp6(2),e.hij(" ",t.code," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.nit," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(2),e.um2(10,r.isSlideLoading&&r.selectedSlide===i?11:10),e.xp6(3),e.Q6J("routerLink",e.VKq(8,Le,t.id)),e.xp6(),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function ze(o,s){1&o&&e.SjG(0,Re,17,10,"div",33,Se),2&o&&e.wJu(s)}const Me=o=>({"pointer-events-none":o}),Pe=()=>[5,10,25,100];function Be(o,s){if(1&o&&(e.TgZ(0,"div",19)(1,"div",20)(2,"div",21),e._uU(3," C\xf3digo "),e.qZA(),e.TgZ(4,"div",22),e._uU(5," Cliente "),e.qZA(),e.TgZ(6,"div",21),e._uU(7," CI \xf3 NIT "),e.qZA(),e.TgZ(8,"div",21),e._uU(9," Tel\xe9fono "),e.qZA(),e.TgZ(10,"div",21),e._uU(11," Activo "),e.qZA(),e.TgZ(12,"div",21),e._uU(13," Acciones "),e.qZA()(),e.YNc(14,ze,2,0),e.ALo(15,"async"),e.qZA(),e._UZ(16,"mat-paginator",23)),2&o){const t=e.oxw(2);let i;e.xp6(14),e.um2(14,(i=e.lcZ(15,7,t.customers$))?14:-1,i),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Me,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,Pe))("showFirstLastButtons",!0)}}function Ye(o,s){1&o&&(e.TgZ(0,"div",34),e._uU(1," \xa1No se ha registrado ning\xfan cliente! "),e.qZA())}function He(o,s){1&o&&e.YNc(0,Be,17,12)(1,Ye,2,0),2&o&&e.um2(0,s.length>0?0:1)}const $e=()=>["/modules/crm/customers/new"];Z.vfs=qe.I.vfs;let je=(()=>{class o{constructor(){this.customers$=(0,we.of)([]),this.isLoading=!1,this.searchInputControl=new n.NI,this.isSlideLoading=!1,this.selectedSlide=null,this.user=null,this.merchant=null,this._unsubscribeAll=new v.x,this._customersService=(0,e.f3M)(S.v),this._changeDetectorRef=(0,e.f3M)(e.sBO),this._fuseConfirmationService=(0,e.f3M)(J.R),this._snackBar=(0,e.f3M)(p.ux),this.store=(0,e.f3M)(N.yh)}ngOnInit(){this.store.select(Ne.rk).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(Ee.Qs).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.customers$=this.store.select(E.p6),this.store.select(ke.B).pipe((0,d.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,d.R)(this._unsubscribeAll),(0,Ue.b)(300),(0,D.w)(t=>(this.isLoading=!0,this._customersService.findAllCustomers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,L.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,d.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Ie.T)(this._sort.sortChange,this._paginator.page).pipe((0,D.w)(()=>(this.isLoading=!0,this._customersService.findAllCustomers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,L.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updateCustomerStatus(t,i,r){this.isSlideLoading=!0,this.selectedSlide=r,this._customersService.updateCustomerStatus({id:i.id,active:t.checked}).subscribe(({data:c})=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.updatedCustomer,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}removeCustomer(t){this._fuseConfirmationService.open({title:"Eliminar cliente",message:"\xbfEst\xe1s seguro de que deseas eliminar este cliente?",actions:{confirm:{label:"S\xed",color:"warn"},cancel:{label:"No"}}}).afterClosed().subscribe(r=>{r&&this._customersService.removeCustomer(t).subscribe(({data:c})=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:3e3,data:{message:c.removeCustomer.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})})})}generateReport(t){}generatePDF(t="open",i,r){let c={header:{text:`Listado de clientes ${i?"activos":"inactivos"}.`,style:"header",marginTop:5},content:[{lineHeight:1.3,table:{headerRows:1,widths:[80,"*",100,100,100,100],body:[[{text:"C\xf3d.",style:"table_header"},{text:"Clientes",style:"table_header",alignment:"left"},{text:"NIT",style:"table_header",alignment:"center"},{text:"Tel\xe9fono",style:"table_header"},{text:"Correo",style:"table_header"},{text:"Tipo",style:"table_header"}],...r.map(_=>[{style:"table_body",text:_.code,alignment:"center"},{style:"table_body",text:_.name},{style:"table_body",text:_.nit},{style:"table_body",text:" item.phone",alignment:"center"},{style:"table_body",text:_.email,alignment:"center"},{style:"table_body",text:_.type,alignment:"center"}])]},layout:"lightHorizontalLines"}],footer:(_,k)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${this.user.fullname} | Esta informaci\xf3n es exclusiva de ${this.merchant.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${_.toString()}/${k} - Fecha de impresi\xf3n ${y().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10}},pageOrientation:"landscape",pageSize:"LETTER",watermark:{text:this.merchant.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Listado de clientes ${i?"activos":"inactivos"}.`,author:`${this.user.fullname}`,creationDate:y().toDate(),modDate:y().toDate(),producer:this.merchant.name}};switch(t){case t="download":Z.createPdf(c).download();break;case t="open":Z.createPdf(c).open();break;case t="print":Z.createPdf(c).print()}}printCustomerDataSheet(t="open",i){let r={header:{text:"Ficha de cliente",style:"header",marginTop:5},content:[{lineHeight:1.3,table:{headerRows:1,widths:["*","*","*","*","*","*"],body:[[{style:"table_header",alignment:"left",text:"Nombre del Cliente: "+i.name,colSpan:6},{},{},{},{},{}],[{},{style:"table_header",alignment:"left",text:"NIT: "+i.nit,colSpan:2},{},{}],[{},{style:"table_header",alignment:"left",text:"Correo electr\xf3nico: "+i.email,colSpan:4},{},{},{}],[{style:"table_header",text:"Personas de contacto",colSpan:6},{},{},{},{},{}],[{style:"table_header",text:"Cargo"},{style:"table_header",text:"Nombre y Apellidos"},{style:"table_header",text:"N\xfamero de Identidad"},{style:"table_header",text:"Tel\xe9fono"},{style:"table_header",text:"Correo"},{style:"table_header",text:"Puede"}]]}}],footer:(c,_)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${this.user.fullname} | Esta informaci\xf3n es exclusiva de ${this.merchant.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${c.toString()}/${_} - Fecha de impresi\xf3n ${y().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10}},pageOrientation:"landscape",pageSize:"LETTER",watermark:{text:this.merchant.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Ficha de cliente",author:`${this.user.fullname}`,creationDate:y().toDate(),modDate:y().toDate(),producer:this.merchant.name}};switch(t){case t="download":Z.createPdf(r).download();break;case t="open":Z.createPdf(r).open();break;case t="print":Z.createPdf(r).print()}}trackByFn(t,i){return t||i.id}_abilities(t){let i="";return t.forEach(r=>i=i+r.toUpperCase()+", "),i}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["customers"]],viewQuery:function(i,r){if(1&i&&(e.Gf(U.NW,5),e.Gf(q.YE,5)),2&i){let c;e.iGM(c=e.CRH())&&(r._paginator=c.first),e.iGM(c=e.CRH())&&(r._sort=c.first)}},standalone:!0,features:[e.jDz],decls:30,vars:13,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"routerLink"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","customers-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"text-center","hiddem","sm:block"],[1,"hiddem","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","customers-grid","md:px-8"],[1,"flex","items-center","justify-center","w-full","hiddem","sm:block"],[3,"checked","color"],[1,"flex","flex-row","justify-center","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[3,"checked","color","change"],[3,"diameter","color"],["class","grid items-center gap-4 px-6 py-3 border-b customers-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ventas"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Clientes"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Clientes "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Registrar Cliente"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,He,2,1),e.ALo(29,"async"),e.qZA()()()),2&i){let c;e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",r.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(),e.Q6J("routerLink",e.DdM(12,$e)),e.xp6(),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(5),e.um2(28,(c=e.lcZ(29,10,r.customers$))?28:-1,c)}},dependencies:[f.Ov,g.ot,g.lW,m.lN,m.KE,m.qo,u.Ps,u.Hw,h.c,h.Nt,U.TU,U.NW,q.JX,q.YE,Je.Tx,Q.rP,Q.Rr,R.Cq,R.Ou,f.mk,n.UX,n.Fj,n.JJ,n.oH,x.rH],styles:[".customers-grid{grid-template-columns:200px auto 200px 200px 75px 100px}\n"],encapsulation:2,changeDetection:0})}return o})();var z=a(86006),Oe=a(9427),Ge=a(31451);const Ke=[{path:"",component:T},{path:"customers",component:je,resolve:{customers:z.GO}},{path:"customers/:customerId",component:Ae,resolve:{currencies:Oe.x,employee:Ge.pO,customer:z.Q7}}]},33963:(I,b,a)=>{a.d(b,{H5:()=>l,p6:()=>v});var u=a(84221);const x=d=>d.customers,l=(0,u.P1)(x,d=>d.customer),v=(0,u.P1)(x,d=>d.customers)},31451:(I,b,a)=>{a.d(b,{Q:()=>e,ci:()=>T,pO:()=>n});var u=a(19212),x=a(58504),l=a(26306),v=a(62637),d=a(64190);let e=(()=>{class p{constructor(g,m){this._employeesService=g,this._router=m}resolve(g,m){return this._employeesService.findAllEmployees().pipe((0,l.K)(h=>this._router.navigateByUrl("/dashboard")))}static#e=this.\u0275fac=function(m){return new(m||p)(u.LFG(v.M),u.LFG(d.F0))};static#t=this.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})(),T=(()=>{class p{constructor(g,m){this._employeesService=g,this._router=m}resolve(g,m){const h=g.params.employeeId;return"new"===h?null:this._employeesService.findEmployeeById(h).pipe((0,l.K)(C=>{const F=m.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(F),(0,x._)(C)}))}static#e=this.\u0275fac=function(m){return new(m||p)(u.LFG(v.M),u.LFG(d.F0))};static#t=this.\u0275prov=u.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})();const n=(p,f)=>(0,u.f3M)(v.M).findActiveEmployees()}}]);