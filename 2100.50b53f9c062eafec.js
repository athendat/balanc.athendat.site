"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2100],{3899:(ve,W,l)=>{l.d(W,{o:()=>r});const r=(0,l(59640).Mz)(_=>_.rates,_=>_.rates)},25910:(ve,W,l)=>{l.d(W,{f:()=>Q});var e=l(54438),F=l(96697),r=l(25558),_=l(88141),R=l(96354),p=l(53473),k=l(59640),M=l(98216),y=l(28610),T=l(3899);const P=p.J1`
    mutation CreateRate($createRateInput: CreateRateInput!) {
        createRate(createRateInput: $createRateInput) {

            ok
            message

            rate {
                id
                active
                userId
                date
                name
                value

                currencyRefId
                currencyRef {
                    id
                    name
                    iso
                }

                currencyBaseId
                currencyBase {
                    id
                    name
                    iso
                }
            }

        }
    }
`,w=p.J1`
    mutation UpdateRate($updateRateInput: UpdateRateInput!) {
        updateRate(updateRateInput: $updateRateInput) {
            ok
            message

            rate {
                id
                active
                userId
                date
                name
                value

                currencyRefId
                currencyRef {
                    id
                    name
                    iso
                }

                currencyBaseId
                currencyBase {
                    id
                    name
                    iso
                }
            }
        }
    }
`,I=p.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateRateStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }

    }
`,X=p.J1`
    mutation RemoveRate($removeRateId: String!) {
        removeRate(id: $removeRateId) {
            ok
            message
        }
    }
`,j=p.J1`
    query FindAllRates($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllRates(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length,
                size,
                page,
                lastPage,
                startIndex,
                endIndex
            }

            rates {
                id
                active
                userId
                date
                name
                value

                currencyRefId
                currencyRef {
                    id
                    name
                    iso
                }

                currencyBaseId
                currencyBase {
                    id
                    name
                    iso
                }
            }
        }
    }
`,A=p.J1`
    query FindActiveByBaseId($currencyBaseId: String!) {
        findActiveByBaseId(currencyBaseId: $currencyBaseId) {
            id
            active
            date
            name
            value
            currencyRefId

            currencyRef {
                id
                iso
            }

            currencyBaseId

            currencyBase {
                id
                iso
            }
        }
    }
`,J=p.J1`
    query FindActiveRateByBaseIdForAthendatPlatform($currencyBaseId: String!) {
        getActiveRateByBaseIdForAthendatPlatform(currencyBaseId: $currencyBaseId) {
            id
            active
            date
            name
            value
            currencyRefId

            currencyRef {
                id
                iso
            }

            currencyBaseId

            currencyBase {
                id
                iso
            }
        }
    }
`,f=p.J1`
    query FindRateById($findRateByIdId: String!) {
        findRateById(id: $findRateByIdId) {
            ok
            message

            rate {
                id
                active
                userId
                date
                name
                value

                currencyRefId
                currencyRef {
                    id
                    name
                    iso
                }

                currencyBaseId
                currencyBase {
                    id
                    name
                    iso
                }
            }
        }
    }
`;let Q=(()=>{class B{constructor(){this.apolloProvider=(0,e.WQX)(p.Ic),this.store=(0,e.WQX)(k.il),this._apollo=this.apolloProvider.use("BALANC")}createRate(v){return this.store.select(T.o).pipe((0,F.s)(1),(0,r.n)(u=>this._apollo.mutate({mutation:P,variables:{createRateInput:v},errorPolicy:"all"}).pipe((0,_.M)(({data:L})=>{const E=structuredClone(u);E.push(L.createRate.rate),this.store.dispatch((0,y.CD)({rates:E}))}))))}getRates(v=0,u=10,L="name",E="asc",$=""){return this._apollo.query({query:j,errorPolicy:"all",variables:{page:v,size:u,sort:L,order:E,search:$}}).pipe((0,_.M)(({data:G})=>{this.store.dispatch((0,M.Bp)({pagination:G.findAllRates.pagination})),this.store.dispatch((0,y.CD)({rates:G.findAllRates.rates}))}))}findActiveByBaseId(v){return this._apollo.query({query:A,variables:{currencyBaseId:v},errorPolicy:"all"}).pipe((0,R.T)(({data:u})=>u?u.findActiveByBaseId:[]),(0,_.M)(u=>{u&&this.store.dispatch((0,y.CD)({rates:u}))}))}getActiveRateByBaseIdForAthendatPlatform(v){return this._apollo.query({query:J,variables:{currencyBaseId:v},errorPolicy:"all"}).pipe((0,R.T)(({data:u})=>u?u.getActiveRateByBaseIdForAthendatPlatform:null),(0,_.M)(u=>{u&&this.store.dispatch((0,y.r$)({rate:u}))}))}getRateById(v){return this._apollo.query({query:f,variables:{findRateByIdId:v},errorPolicy:"all"}).pipe((0,_.M)(({data:u})=>{this.store.dispatch((0,y.r$)({rate:u.findRateById.rate}))}))}updateRate(v){return this.store.select(T.o).pipe((0,F.s)(1),(0,r.n)(u=>this._apollo.mutate({mutation:w,variables:{updateRateInput:v},errorPolicy:"all"}).pipe((0,_.M)(({data:L})=>{const E=structuredClone(u);E[u.findIndex(G=>G.id===v.id)]=L.updateRate.rate,this.store.dispatch((0,y.CD)({rates:E}))}))))}updateRateStatus(v){return this.store.select(T.o).pipe((0,F.s)(1),(0,r.n)(u=>this._apollo.mutate({mutation:I,variables:{updateEntityStatusInput:v},errorPolicy:"all"}).pipe((0,_.M)(({})=>{const E=structuredClone(u);E[u.findIndex(G=>G.id===v.id)].active=v.active,this.store.dispatch((0,y.CD)({rates:E}))}))))}removeRate(v){return this.store.select(T.o).pipe((0,F.s)(1),(0,r.n)(u=>this._apollo.mutate({mutation:X,variables:{removeRateId:v},errorPolicy:"all"}).pipe((0,_.M)(({data:L})=>{if(L){const E=structuredClone(u),$=u.findIndex(G=>G.id===v);E.splice($,1),this.store.dispatch((0,y.CD)({rates:E}))}}))))}static#e=this.\u0275fac=function(u){return new(u||B)};static#t=this.\u0275prov=e.jDH({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})()},52100:(ve,W,l)=>{l.r(W),l.d(W,{default:()=>bn});var e=l(54438),F=l(60177),r=l(89417),_=l(88834),R=l(75351),p=l(32102),k=l(99213),M=l(59042),y=l(96695),T=l(9183),P=l(30450),w=l(95416),I=l(2042),X=l(51188),j=l(21413),A=l(7673),J=l(57786),f=l(56977),Q=l(70152),B=l(99172),Y=l(25558),v=l(96354),u=l(59640),L=l(3899),E=l(47413),$=l(46601),G=l(67398),le=l(91401),N=l(94794),me=l(25910),V=l(82798),H=l(25084),q=l(86600);function te(i,s){1&i&&(e.j41(0,"h2",3),e.EFF(1," Agregar tasa de cambio "),e.k0s())}function Ce(i,s){1&i&&(e.j41(0,"h2",3),e.EFF(1," Editar tasa de cambio "),e.k0s())}function xe(i,s){if(1&i&&(e.j41(0,"div",5)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"h6",12),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",13),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.rate.name||"Sin nombre")}}function Fe(i,s){if(1&i&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.iso," ")}}function be(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La moneda de referencia es obligatoria "),e.k0s())}function ce(i,s){if(1&i&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.iso," ")}}function ke(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La moneda base es obligatoria "),e.k0s())}function Re(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre de la tasa es obligatorio "),e.k0s())}function ye(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La fecha de la tasa es obligatoria "),e.k0s())}function Ee(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El valor de la tasa es obligatorio "),e.k0s())}function Me(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",6)(1,"div",14)(2,"form",15)(3,"mat-form-field",16)(4,"mat-label"),e.EFF(5,"Moneda de referencia"),e.k0s(),e.j41(6,"mat-select",17),e.bIt("selectionChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.currencyRefChange(n.value))}),e.Z7z(7,Fe,2,2,"mat-option",18,e.fX1),e.k0s(),e.DNE(9,be,2,0,"mat-error"),e.j41(10,"mat-hint"),e.EFF(11,"La moneda de referencia es la primera en el par."),e.k0s()(),e.j41(12,"mat-form-field",16)(13,"mat-label"),e.EFF(14,"Moneda base"),e.k0s(),e.j41(15,"mat-select",17),e.bIt("selectionChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.currencyBaseChange(n.value))}),e.Z7z(16,ce,2,2,"mat-option",18,e.fX1),e.k0s(),e.DNE(18,ke,2,0,"mat-error"),e.j41(19,"mat-hint"),e.EFF(20,"La moneda base es la segunda en el par."),e.k0s()(),e.j41(21,"mat-form-field",16)(22,"mat-label"),e.EFF(23,"Nombre"),e.k0s(),e.nrm(24,"input",19),e.j41(25,"mat-hint"),e.EFF(26,"Ejemplo: USD/CUP"),e.k0s(),e.DNE(27,Re,2,0,"mat-error"),e.k0s(),e.j41(28,"mat-form-field",16)(29,"mat-label"),e.EFF(30,"Fecha de la tasa"),e.k0s(),e.nrm(31,"input",20),e.j41(32,"mat-hint"),e.EFF(33,"DD/MM/YYYY"),e.k0s(),e.nrm(34,"mat-datepicker-toggle",21)(35,"mat-datepicker",null,0),e.DNE(37,ye,2,0,"mat-error"),e.k0s(),e.j41(38,"mat-form-field",16)(39,"mat-label"),e.EFF(40,"Valor"),e.k0s(),e.nrm(41,"input",22),e.DNE(42,Ee,2,0,"mat-error"),e.k0s()()()()}if(2&i){const t=e.sdS(36),o=e.XpG();e.R7$(2),e.Y8G("formGroup",o.rateForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","currencyRefId")("required",!0),e.R7$(),e.Dyx(o.currencies),e.R7$(2),e.vxM(9,o.rateForm.get("currencyRefId").hasError("required")?9:-1),e.R7$(6),e.Y8G("formControlName","currencyBaseId")("required",!0),e.R7$(),e.Dyx(o.currencies),e.R7$(2),e.vxM(18,o.rateForm.get("currencyBaseId").hasError("required")?18:-1),e.R7$(6),e.Y8G("formControlName","name")("placeholder","Ejemplo: USD/CUP"),e.R7$(3),e.vxM(27,o.rateForm.get("name").hasError("required")?27:-1),e.R7$(4),e.Y8G("matDatepicker",t)("formControlName","date")("max",o.maxDate)("required",!0),e.R7$(3),e.Y8G("for",t),e.R7$(3),e.vxM(37,o.rateForm.get("date").hasError("required")?37:-1),e.R7$(4),e.Y8G("formControlName","value")("placeholder","1.000000"),e.R7$(),e.vxM(42,o.rateForm.get("value").hasError("required")?42:-1)}}function $e(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateRate())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.rateForm.invalid)}}function Ne(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",25),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createRate())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.rateForm.invalid)}}function Ie(i,s){if(1&i&&(e.j41(0,"div",7)(1,"button",23),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,$e,2,2,"button",24)(4,Ne,2,2,"button",24),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let je=(()=>{class i{constructor(t){this.data=t,this.currencies=[],this.maxDate=new Date,this.dialogMode="view",this._unsubscribeAll=new j.B,this._ratesService=(0,e.WQX)(me.f),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)($.G),this._dialogRef=(0,e.WQX)(R.CP),this._snackBar=(0,e.WQX)(w.UG),this.store=(0,e.WQX)(u.il),this.dialogMode=t.dialogMode,this.rate=t.rate}ngOnInit(){this.rateForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ({value:null,disabled:!0},[r.k0.maxLength(32)]),date:new r.MJ(new Date),value:new r.MJ(1,[r.k0.min(0)]),currencyRefId:new r.MJ(null,[r.k0.maxLength(100)]),currencyBaseId:new r.MJ(null,[r.k0.maxLength(100)])}),"edit"===this.dialogMode&&this.rateForm.patchValue(this.rate),this.store.select(le.y$).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.currencies=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}currencyRefChange(t){const o=this.currencies.find(h=>h.id===t),n=this.currencies.find(h=>h.id===this.rateForm.get("currencyBaseId").value),a=n?n.iso:"",c=`${o.iso}/${a}`;this.rateForm.get("name").setValue(c),o.iso===a?(this.rateForm.get("value").setValue(1),this.rateForm.get("value").disable()):this.rateForm.get("value").enable()}currencyBaseChange(t){const o=this.currencies.find(h=>h.id===t),n=this.currencies.find(h=>h.id===this.rateForm.get("currencyRefId").value),a=n?n.iso:"",c=`${a}/${o.iso}`;this.rateForm.get("name").setValue(c),o.iso===a?(this.rateForm.get("value").setValue(1),this.rateForm.get("value").disable()):this.rateForm.get("value").enable()}closeDialog(){this._dialogRef.close()}createRate(){let t=this.rateForm.getRawValue();t=(0,G.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear tasa de cambio",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._ratesService.createRate(t).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({data:a})=>{a&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.createRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())})})}updateRate(){const t=this.rateForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar tasa de cambio",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._ratesService.updateRate(t).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({data:a})=>{a&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(R.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-rate-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[["offerDate",""],[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col","px-1","pt-4","mt-4","border-t"],[1,"grid","w-full","grid-cols-1","gap-5","mt-3","sm:grid-cols-2",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-dense"],[3,"selectionChange","formControlName","required"],[3,"value"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["matInput","",3,"matDatepicker","formControlName","max","required"],["matIconSuffix","",3,"for"],["matInput","","type","number","required","","min","0",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,te,2,0,"h2",3)(3,Ce,2,0,"h2",3),e.k0s(),e.j41(4,"div",4),e.DNE(5,xe,9,1,"div",5)(6,Me,43,20,"div",6),e.k0s(),e.DNE(7,Ie,5,3,"div",7),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[R.hM,R.tx,p.RG,p.rl,p.nJ,p.MV,p.TL,p.yw,M.fS,M.fg,V.Ve,V.VO,q.wT,_.Hl,_.$z,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.tU,r.VZ,r.j4,r.JD,H.X6,H.Vh,H.bZ,H.bU],encapsulation:2})}return i})();class Ge{}const Se=(i,s)=>s.id,De=i=>({"pointer-events-none":i}),Te=()=>[10,25,50,100];function Pe(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",34),e.bIt("change",function(n){e.eBV(t);const a=e.XpG(),c=a.$implicit,h=a.$index,D=e.XpG(2);return e.Njj(D.updateRateStatus(n,c,h))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function de(i,s){1&i&&e.nrm(0,"mat-spinner",30),2&i&&e.Y8G("diameter",20)("color","primary")}function we(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",27),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.EFF(4),e.k0s(),e.j41(5,"div",22),e.EFF(6),e.k0s(),e.j41(7,"div",28),e.EFF(8),e.nI1(9,"number"),e.k0s(),e.j41(10,"div",28),e.DNE(11,Pe,1,2,"mat-slide-toggle",29)(12,de,1,2,"mat-spinner",30),e.k0s(),e.j41(13,"div",31)(14,"button",32),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.openDialog(n,"edit"))}),e.nrm(15,"mat-icon",33),e.k0s(),e.j41(16,"button",32),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.deleteRate(n))}),e.nrm(17,"mat-icon",33),e.k0s()()()}if(2&i){const t=s.$implicit,o=s.$index,n=e.XpG(2);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.currencyRef.iso," "),e.R7$(2),e.SpI(" ",t.currencyBase.iso," "),e.R7$(2),e.SpI(" ",e.i5U(9,8,t.value,"1.4-4")," "),e.R7$(3),e.vxM(11,n.isSlideLoading&&n.selectedSlide===o?-1:11),e.R7$(),e.vxM(12,n.isSlideLoading&&n.selectedSlide===o?12:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Ae(i,s){if(1&i&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21),e.EFF(3," Nombre "),e.k0s(),e.j41(4,"div",22),e.EFF(5," Referencia "),e.k0s(),e.j41(6,"div",22),e.EFF(7," Base "),e.k0s(),e.j41(8,"div",23),e.EFF(9," Valor "),e.k0s(),e.j41(10,"div",23),e.EFF(11," Activo "),e.k0s(),e.j41(12,"div",24),e.EFF(13," Acciones "),e.k0s()(),e.Z7z(14,we,18,11,"div",25,Se),e.nrm(16,"mat-paginator",26),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(6),e.Y8G("mat-sort-header","value"),e.R7$(2),e.Y8G("mat-sort-header","active"),e.R7$(4),e.Dyx(t.rates),e.R7$(2),e.Y8G("ngClass",e.eq3(9,De,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(11,Te))("showFirstLastButtons",!0)}}function pe(i,s){1&i&&(e.j41(0,"div",35),e.EFF(1," \xa1No hay tasas de cambio creadas para el negocio!"),e.k0s())}let Be=(()=>{class i{constructor(){this.rate=new Ge,this.rates=[],this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new j.B,this._ratesService=(0,e.WQX)(me.f),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(R.bZ),this._fuseConfirmationService=(0,e.WQX)($.G),this._snackBar=(0,e.WQX)(w.UG),this.store=(0,e.WQX)(u.il)}ngOnInit(){this.store.select(L.o).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.rates=t,this._changeDetectorRef.markForCheck()}),this.store.select(E.Dz).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,Q.B)(300),(0,B.Z)(null),(0,Y.n)(t=>null!==t?(this.isLoading=!0,this._ratesService.getRates(0,10,"name","asc",t)):(0,A.of)()),(0,v.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,J.h)(this._sort.sortChange,this._paginator.page).pipe((0,Y.n)(()=>(this.isLoading=!0,this._ratesService.getRates(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,v.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteRate(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la tasa de cambio: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,f.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._ratesService.removeRate(t.id).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({data:a})=>{a&&this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateRateStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._ratesService.updateRateStatus({id:o.id,active:t.checked}).subscribe(({data:a})=>{this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateRateStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(je,{data:{rate:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-rates"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(I.B4,5)),2&o){let a;e.mGM(a=e.lsd())&&(n._paginator=a.first),e.mGM(a=e.lsd())&&(n._sort=a.first)}},standalone:!0,features:[e.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","rates-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-4","text-right"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","rates-grid","md:px-8"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"text-left"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tasas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tasas de cambio "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.openDialog(n.rate,"add")}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Ae,17,12,"div",19)(29,pe,2,0),e.k0s()()()),2&o&&(e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,n.rates.length>0?28:29))},dependencies:[F.QX,_.Hl,_.$z,p.RG,p.rl,p.JW,k.m_,k.An,M.fS,M.fg,y.Ou,y.iy,T.D6,T.LG,P.mV,P.sG,I.NQ,I.B4,I.aE,F.YU,r.X1,r.me,r.BC,r.l_,X.Wk],styles:[".rates-grid[_ngcontent-%COMP%]{grid-template-columns:300px 100px 70px 70px 70px 80px}@media (min-width: 600px){.rates-grid[_ngcontent-%COMP%]{grid-template-columns:15% 15% 15% 15% 15% auto}}"],changeDetection:0})}return i})();var Ye=l(64109),z=l(47358),Xe=l(45024),Le=l(69532),ie=l(87122),oe=l(60850),ue=l(67336),ne=l(27115),Ve=l(10953);const ae=(0,u.Mz)(i=>i.mPermissions,i=>i.permissions);var Oe=l(84412),m=l(96697),d=l(45312),g=l(21626);const x=d.c.API_URL;let C=(()=>{class i{constructor(t,o){this.store=t,this._httpClient=o,this.dataChange=new Oe.t([])}get data$(){return this.dataChange.asObservable()}getRootNavigationNodes(){return this._httpClient.get(`${x}/navigation/tree`).pipe((0,v.T)(t=>(this.dataChange.next(t.dataArr),t)))}createNavigation(t){return this.data$.pipe((0,m.s)(1),(0,Y.n)(o=>this._httpClient.post(`${x}/navigation`,t).pipe((0,v.T)(n=>{if(n.data.parentId){for(const a of o)if(this.addChildren(a,n.data))break}else{for(let c=n.data.position;c<o.length;c++)o[c].item.position++;o.push({item:n.data,children:[]}),o.sort((c,h)=>c.item.position-h.item.position)}return this.dataChange.next(o),n}))))}updateNavigation(t){return this.data$.pipe((0,m.s)(1),(0,Y.n)(o=>this._httpClient.patch(`${x}/navigation/${t.id}`,t).pipe((0,v.T)(n=>(this.updateChildren(o,n.data),this.dataChange.next(o),n)))))}removeNavigation(t){return this.data$.pipe((0,m.s)(1),(0,Y.n)(o=>this._httpClient.delete(`${x}/navigation/${t}`).pipe((0,v.T)(n=>{let a=!1;for(const c of o)if(this.removeChildrenNode(c,t)){a=!0;break}if(!a)for(let c=0;c<o.length;c++)o[c].item.id===t&&o.splice(c,1);return this.dataChange.next(o),n}))))}addChildren(t,o){if(t.item.id===o.parentId){const n={item:o,children:[]};for(let a=o.position;a<t.children.length;a++)t.children[a].item.position++;return t.children.push(n),t.children.sort((a,c)=>a.item.position-c.item.position),!0}for(const n of t.children)if(this.addChildren(n,o))return!0;return!1}addChildrenNode(t,o){if(t.item.id===o.item.parentId){for(let n=o.item.position;n<t.children.length;n++)t.children[n].item.position++;return t.children.push(o),t.children.sort((n,a)=>n.item.position-a.item.position),!0}for(const n of t.children)if(this.addChildrenNode(n,o))return!0;return!1}updateChildren(t,o){let n=null;for(const c of t)if(n=this.removeChildrenNode(c,o.id),n){n.item=o;break}let a=!1;if(n)for(const c of t)if(this.addChildrenNode(c,n)){a=!0;break}if(!a){for(let c=0;c<t.length;c++)t[c].item.id===o.id&&(n=t[c],n.item=o,t.splice(c,1));if(n)for(const c of t)if(this.addChildrenNode(c,n)){a=!0;break}if(!a){for(let c=o.position;c<t.length;c++)t[c].item.position++;t.push(n),t.sort((c,h)=>c.item.position-h.item.position)}}}removeChildrenNode(t,o){for(let n=0;n<t.children.length;n++){const a=t.children[n];if(a.item.id===o){const h=t.children[n];t.children.splice(n,1);for(let D=0;D<t.children.length;D++)t.children[D].item.position=D;return h}const c=this.removeChildrenNode(a,o);if(c)return c}return null}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(u.il),e.KVO(g.Qq))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var b=l(82765),O=l(36471);const K=i=>({"text-center":i}),Qe=i=>({"cursor-not-allowed":i});function ot(i,s){if(1&i&&(e.j41(0,"h2",8),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI("Agregar este elemento a ",t.parentNavigation.title,"")}}function nt(i,s){1&i&&(e.j41(0,"h2",8),e.EFF(1,"Agregar elemento"),e.k0s())}function at(i,s){1&i&&(e.j41(0,"h2",8),e.EFF(1,"Editar elemento"),e.k0s())}function st(i,s){if(1&i&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("ngClass",e.eq3(3,K,"root"===t.id))("value",t.id),e.R7$(),e.SpI(" ",t.title," ")}}function rt(i,s){1&i&&(e.j41(0,"mat-option",21),e.EFF(1," Aside "),e.k0s()),2&i&&e.Y8G("value","aside")}function lt(i,s){1&i&&(e.j41(0,"mat-option",21),e.EFF(1," Group "),e.k0s()),2&i&&e.Y8G("value","group")}function mt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar el tipo de elemento de navegaci\xf3n. "),e.k0s())}function ct(i,s){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t+1," ")}}function dt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar el orden del elemento de navegaci\xf3n. "),e.k0s())}function pt(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"Orden"),e.k0s(),e.j41(3,"mat-select",26),e.Z7z(4,ct,2,2,"mat-option",21,e.fX1),e.k0s(),e.DNE(6,dt,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","position")("placeholder","Orden"),e.R7$(),e.Dyx(t.positions),e.R7$(2),e.vxM(6,t.navigationForm.get("position").hasError("required")?6:-1)}}function ut(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo del elemento de navegaci\xf3n es obligatorio. "),e.k0s())}function gt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function ht(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"T\xedtulo"),e.k0s(),e.nrm(3,"input",27),e.DNE(4,ut,2,0,"mat-error")(5,gt,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.R7$(),e.vxM(4,t.navigationForm.get("title").hasError("required")?4:-1),e.R7$(),e.vxM(5,t.navigationForm.get("title").hasError("maxLength")||t.navigationForm.get("title").hasError("minLength")?5:-1)}}function _t(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El subt\xedtulo no debe superar los 255 caracteres. "),e.k0s())}function ft(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"SubT\xedtulo"),e.k0s(),e.nrm(3,"input",28),e.DNE(4,_t,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","subtitle")("placeholder","SubT\xedtulo")("maxLength",255),e.R7$(),e.vxM(4,t.navigationForm.get("title").hasError("maxLength")?4:-1)}}function vt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Tooltip no debe superar los 255 caracteres. "),e.k0s())}function Ct(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"Tooltip"),e.k0s(),e.nrm(3,"input",29),e.DNE(4,vt,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","tooltip")("placeholder","Tooltip")("maxLength",255),e.R7$(),e.vxM(4,t.navigationForm.get("tooltip").hasError("maxLength")?4:-1)}}function xt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El \xcdcono no debe superar los 255 caracteres. "),e.k0s())}function Ft(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"\xcdcono"),e.k0s(),e.nrm(3,"input",28),e.DNE(4,xt,2,0,"mat-error"),e.j41(5,"mat-hint"),e.EFF(6,"Ejemplo: heroicons_solid:information-circle"),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","icon")("placeholder","SVG \xcdcono")("maxLength",1e3),e.R7$(),e.vxM(4,t.navigationForm.get("icon").hasError("maxLength")?4:-1)}}function bt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El enlace no debe superar los 1000 caracteres. "),e.k0s())}function kt(i,s){if(1&i&&(e.j41(0,"mat-form-field",19)(1,"mat-label"),e.EFF(2,"Enlace"),e.k0s(),e.nrm(3,"input",28),e.DNE(4,bt,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","link")("placeholder","Enlace - ruta")("maxLength",1e3),e.R7$(),e.vxM(4,t.navigationForm.get("link").hasError("maxLength")?4:-1)}}function Rt(i,s){1&i&&(e.j41(0,"mat-form-field",33)(1,"mat-select",34)(2,"mat-option",21),e.EFF(3," Blank "),e.k0s(),e.j41(4,"mat-option",21),e.EFF(5," Self "),e.k0s(),e.j41(6,"mat-option",21),e.EFF(7," Parent "),e.k0s(),e.j41(8,"mat-option",21),e.EFF(9," Top "),e.k0s()()()),2&i&&(e.R7$(),e.Y8G("formControlName","target")("placeholder","Target"),e.R7$(),e.Y8G("value","_blank"),e.R7$(2),e.Y8G("value","_self"),e.R7$(2),e.Y8G("value","_parent"),e.R7$(2),e.Y8G("value","_top"))}function yt(i,s){if(1&i&&(e.j41(0,"div",22)(1,"span",30),e.EFF(2),e.k0s(),e.j41(3,"div",31),e.nrm(4,"mat-checkbox",32,2),e.DNE(6,Rt,10,6,"mat-form-field",33),e.k0s()()),2&i){const t=e.sdS(5);e.R7$(2),e.JRh(t.checked?"Target":"Enlace externo?"),e.R7$(2),e.Y8G("color","primary")("formControlName","externalLink"),e.R7$(2),e.vxM(6,t.checked?6:-1)}}function Et(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del t\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function Mt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del subt\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function $t(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del \xedcono del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function Nt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del wrapper del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function It(i,s){if(1&i&&(e.j41(0,"form",36)(1,"mat-form-field",19)(2,"mat-label"),e.EFF(3,"T\xedtulo"),e.k0s(),e.nrm(4,"input",37),e.DNE(5,Et,2,0,"mat-error"),e.k0s(),e.j41(6,"mat-form-field",19)(7,"mat-label"),e.EFF(8,"SubT\xedtulo"),e.k0s(),e.nrm(9,"input",37),e.DNE(10,Mt,2,0,"mat-error"),e.k0s(),e.j41(11,"mat-form-field",19)(12,"mat-label"),e.EFF(13,"Icono"),e.k0s(),e.nrm(14,"input",37),e.DNE(15,$t,2,0,"mat-error"),e.k0s(),e.j41(16,"mat-form-field",19)(17,"mat-label"),e.EFF(18,"Wrapper"),e.k0s(),e.nrm(19,"input",37),e.DNE(20,Nt,2,0,"mat-error"),e.k0s()()),2&i){const t=e.XpG(3);e.Y8G("formGroupName","classes"),e.R7$(4),e.Y8G("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.R7$(),e.vxM(5,t.navigationForm.get("classes").get("title").hasError("maxLength")||t.navigationForm.get("classes").get("title").hasError("minLength")?5:-1),e.R7$(4),e.Y8G("formControlName","subtitle")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.R7$(),e.vxM(10,t.navigationForm.get("classes").get("subtitle").hasError("maxLength")||t.navigationForm.get("classes").get("subtitle").hasError("minLength")?10:-1),e.R7$(4),e.Y8G("formControlName","icon")("type","text")("placeholder","Icono")("minLength",3)("maxLength",255),e.R7$(),e.vxM(15,t.navigationForm.get("classes").get("icon").hasError("maxLength")||t.navigationForm.get("classes").get("icon").hasError("minLength")?15:-1),e.R7$(4),e.Y8G("formControlName","wrapper")("type","text")("placeholder","Wrapper")("minLength",3)("maxLength",255),e.R7$(),e.vxM(20,t.navigationForm.get("classes").get("wrapper").hasError("maxLength")||t.navigationForm.get("classes").get("wrapper").hasError("minLength")?20:-1)}}function jt(i,s){if(1&i&&(e.j41(0,"div",23)(1,"mat-checkbox",35,3)(3,"span",30),e.EFF(4),e.k0s()(),e.DNE(5,It,21,25,"form",36),e.k0s()),2&i){const t=e.sdS(2),o=e.XpG(2);e.R7$(),e.Y8G("color","primary")("checked",o.selectedNavigation&&o.selectedNavigation.classes&&(o.selectedNavigation.classes.title||o.selectedNavigation.classes.subtitle||o.selectedNavigation.classes.icon||o.selectedNavigation.classes.wrapper)),e.R7$(3),e.SpI(" ",t.checked?"Clases":"Agregar clases css?",""),e.R7$(),e.vxM(5,t.checked?5:-1)}}function Gt(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del t\xedtulo del elemento de navegaci\xf3n debe poseer entre 1 y 255 caracteres. "),e.k0s())}function St(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Las clases del subt\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.k0s())}function Dt(i,s){if(1&i&&(e.j41(0,"form",36)(1,"mat-form-field",19)(2,"mat-label"),e.EFF(3,"T\xedtulo"),e.k0s(),e.nrm(4,"input",37),e.DNE(5,Gt,2,0,"mat-error"),e.k0s(),e.j41(6,"mat-form-field",19)(7,"mat-label"),e.EFF(8,"Clases"),e.k0s(),e.nrm(9,"input",37),e.DNE(10,St,2,0,"mat-error"),e.k0s()()),2&i){const t=e.XpG(3);e.Y8G("formGroupName","badge"),e.R7$(4),e.Y8G("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",1)("maxLength",255),e.R7$(),e.vxM(5,t.navigationForm.get("badge").get("title").hasError("maxLength")||t.navigationForm.get("badge").get("title").hasError("minLength")?5:-1),e.R7$(4),e.Y8G("formControlName","classes")("type","text")("placeholder","Classes")("minLength",3)("maxLength",255),e.R7$(),e.vxM(10,t.navigationForm.get("badge").get("classes").hasError("maxLength")||t.navigationForm.get("badge").get("classes").hasError("minLength")?10:-1)}}function Tt(i,s){if(1&i&&(e.j41(0,"div",24)(1,"mat-checkbox",35,3)(3,"span",30),e.EFF(4),e.k0s()(),e.DNE(5,Dt,11,13,"form",36),e.k0s()),2&i){const t=e.sdS(2),o=e.XpG(2);e.R7$(),e.Y8G("color","primary")("checked",o.selectedNavigation&&o.selectedNavigation.badge&&(o.selectedNavigation.badge.title||o.selectedNavigation.classes)),e.R7$(3),e.JRh(t.checked?"Badge":"Agregar badge ?"),e.R7$(),e.vxM(5,t.checked?5:-1)}}function Pt(i,s){1&i&&(e.j41(0,"div",22)(1,"span",30),e.EFF(2,"ExactMatch"),e.k0s(),e.nrm(3,"mat-slide-toggle",38),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formControlName","exactMatch")("color","primary"))}function wt(i,s){if(1&i&&(e.j41(0,"div",22)(1,"span",30),e.EFF(2,"Estado"),e.k0s(),e.j41(3,"mat-slide-toggle",38),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===t.navigationForm.get("active").value?"Activo":"Inactivo"," ")}}function At(i,s){1&i&&(e.j41(0,"div",22)(1,"span",30),e.EFF(2,"Deshabilitado"),e.k0s(),e.nrm(3,"mat-slide-toggle",38),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formControlName","disabled")("color","primary"))}function Bt(i,s){1&i&&(e.j41(0,"div",22)(1,"span",30),e.EFF(2,"P\xfablico"),e.k0s(),e.nrm(3,"mat-slide-toggle",38),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formControlName","public")("color","primary"))}function Yt(i,s){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.name," ")}}function Xt(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-chip",42),e.bIt("removed",function(){const n=e.eBV(t).$implicit,a=e.XpG(3);return e.Njj(a.removePermission(n))}),e.j41(1,"div",43),e.EFF(2),e.k0s(),e.j41(3,"button",44),e.nrm(4,"mat-icon",45),e.k0s()()}if(2&i){const t=s.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("svgIcon","mat_solid:cancel")}}function Lt(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-form-field",25)(1,"mat-label"),e.EFF(2,"Permisos"),e.k0s(),e.nrm(3,"input",39),e.j41(4,"mat-autocomplete",40,4),e.bIt("optionSelected",function(n){e.eBV(t);const a=e.XpG(2);return e.Njj(a.addMPermission(n.option.value))}),e.Z7z(6,Yt,2,2,"mat-option",21,e.fX1),e.nI1(8,"async"),e.k0s(),e.j41(9,"mat-chip-grid",41,5),e.Z7z(11,Xt,5,2,"mat-chip",null,e.fX1),e.k0s()()}if(2&i){const t=e.sdS(5),o=e.sdS(10),n=e.XpG(2);e.R7$(3),e.Y8G("formControl",n.searchMPermissionControl)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matAutocomplete",t),e.R7$(3),e.Dyx(e.bMT(8,4,n.filteredMPermissions)),e.R7$(5),e.Dyx(n.selectedMPermissions)}}function Vt(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",10)(1,"div",12)(2,"form",13)(3,"div",14)(4,"mat-form-field",15)(5,"mat-label"),e.EFF(6,"Padre"),e.k0s(),e.nrm(7,"input",16),e.j41(8,"mat-autocomplete",17,0),e.bIt("optionSelected",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedNavigationOption(n))}),e.Z7z(10,st,2,5,"mat-option",18,e.fX1),e.nI1(12,"async"),e.k0s()(),e.j41(13,"mat-form-field",19)(14,"mat-label"),e.EFF(15,"Tipo"),e.k0s(),e.j41(16,"mat-select",20,1),e.bIt("selectionChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.navigationTypeChange(n.value))}),e.DNE(18,rt,2,1,"mat-option",21),e.j41(19,"mat-option",21),e.EFF(20," Basic "),e.k0s(),e.j41(21,"mat-option",21),e.EFF(22," Collapsable "),e.k0s(),e.j41(23,"mat-option",21),e.EFF(24," Divider "),e.k0s(),e.DNE(25,lt,2,1,"mat-option",21),e.j41(26,"mat-option",21),e.EFF(27," Spacer "),e.k0s()(),e.DNE(28,mt,2,0,"mat-error"),e.k0s(),e.DNE(29,pt,7,3,"mat-form-field",19)(30,ht,6,7,"mat-form-field",19)(31,ft,5,4,"mat-form-field",19)(32,Ct,5,4,"mat-form-field",19)(33,Ft,7,4,"mat-form-field",19)(34,kt,5,4,"mat-form-field",19)(35,yt,7,4,"div",22)(36,jt,6,4,"div",23)(37,Tt,6,4,"div",24)(38,Pt,4,2,"div",22)(39,wt,5,3,"div",22)(40,At,4,2,"div",22)(41,Bt,4,2,"div",22)(42,Lt,13,6,"mat-form-field",25),e.k0s()()()()}if(2&i){const t=e.sdS(9),o=e.sdS(17),n=e.XpG();e.R7$(2),e.Y8G("formGroup",n.navigationForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","parentId")("type","text")("matAutocomplete",t),e.R7$(),e.Y8G("displayWith",n.displayFn.bind(n)),e.R7$(2),e.Dyx(e.bMT(12,29,n.filteredNavigations)),e.R7$(6),e.Y8G("formControlName","type")("placeholder","Tipo"),e.R7$(2),e.vxM(18,null===n.parentNavigation?18:-1),e.R7$(),e.Y8G("value","basic"),e.R7$(2),e.Y8G("value","collapsable"),e.R7$(2),e.Y8G("value","divider"),e.R7$(2),e.vxM(25,null===n.parentNavigation?25:-1),e.R7$(),e.Y8G("value","spacer"),e.R7$(2),e.vxM(28,n.navigationForm.get("type").hasError("required")?28:-1),e.R7$(),e.vxM(29,n.positions.length>1?29:-1),e.R7$(),e.vxM(30,"divider"!==o.value&&"spacer"!==o.value?30:-1),e.R7$(),e.vxM(31,"divider"!==o.value&&"spacer"!==o.value?31:-1),e.R7$(),e.vxM(32,"divider"!==o.value&&"spacer"!==o.value?32:-1),e.R7$(),e.vxM(33,"divider"!==o.value&&"spacer"!==o.value?33:-1),e.R7$(),e.vxM(34,"divider"!==o.value&&"spacer"!==o.value?34:-1),e.R7$(),e.vxM(35,"divider"!==o.value&&"spacer"!==o.value?35:-1),e.R7$(),e.vxM(36,"divider"!==o.value&&"spacer"!==o.value?36:-1),e.R7$(),e.vxM(37,"divider"!==o.value&&"spacer"!==o.value?37:-1),e.R7$(),e.vxM(38,"divider"!==o.value&&"spacer"!==o.value?38:-1),e.R7$(),e.vxM(39,"divider"!==o.value&&"spacer"!==o.value?39:-1),e.R7$(),e.vxM(40,"divider"!==o.value&&"spacer"!==o.value?40:-1),e.R7$(),e.vxM(41,"basic"===o.value?41:-1),e.R7$(),e.vxM(42,"basic"===n.navigationForm.get("type").value&&!0!==n.navigationForm.get("public").value?42:-1)}}function zt(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateNavigation())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.navigationForm.invalid)("ngClass",e.eq3(3,Qe,t.navigationForm.invalid))}}function Ot(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",48),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createNavigation())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.navigationForm.invalid)("ngClass",e.eq3(3,Qe,t.navigationForm.invalid))}}function Qt(i,s){if(1&i&&(e.j41(0,"div",11),e.qex(1),e.j41(2,"button",46),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,zt,2,5,"button",47)(5,Ot,2,5,"button",47),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Ut=(()=>{class i{constructor(t){this.data=t,this.allNavigations=[],this.mPermissions=[],this.navigations=[],this.position=0,this.positions=[],this.searchMPermissionControl=new r.MJ,this.selectedMPermissions=[],this.selectedNavigationType="",this.separatorKeysCodes=[ue.Fm,ue.KE],this._athConfirmationService=(0,e.WQX)($.G),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialogRef=(0,e.WQX)(R.CP),this._formBuilder=(0,e.WQX)(r.ze),this._fuseMediaWatcherService=(0,e.WQX)(ne.F),this._navigationService=(0,e.WQX)(C),this._snackBar=(0,e.WQX)(w.UG),this._unsubscribeAll=new j.B,this.store=(0,e.WQX)(u.il),this.dialogMode=t.dialogMode,this.selectedNavigation=t.navigation,this.parentNavigation=t.parentNavigation}ngOnInit(){this.store.select(Ve.O4).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.allNavigations=[...t],this.filterNavigation(t),this.calcPositions(!1)}),this.store.select(ae).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.mPermissions=t}),this.navigationForm=this._formBuilder.group({id:[null],position:[this.position,[r.k0.required]],title:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],subtitle:[null,[r.k0.maxLength(255)]],type:["basic",[r.k0.required,r.k0.minLength(5),r.k0.maxLength(255)]],tooltip:[null,[r.k0.maxLength(255)]],link:[null,r.k0.maxLength(1e3)],externalLink:[!1],target:[null,[r.k0.minLength(4),r.k0.maxLength(255)]],level:[0,[r.k0.required]],icon:[null,[r.k0.maxLength(255)]],parentId:[null,[r.k0.required]],classes:this._formBuilder.group({title:["",[r.k0.minLength(3),r.k0.maxLength(255)]],subtitle:["",[r.k0.maxLength(255)]],icon:["",[r.k0.maxLength(255)]],wrapper:["",[r.k0.maxLength(255)]]}),badge:this._formBuilder.group({title:["",[r.k0.minLength(1),r.k0.maxLength(255)]],classes:["",r.k0.maxLength(1e3)]}),active:[!0],disabled:[!1],exactMatch:[!1],public:[!1]}),this.filteredNavigations=this.navigationForm.get("parentId").valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,Q.B)(100),(0,B.Z)(" "),(0,Y.n)(t=>(0,A.of)(t?this.navigations.filter(o=>o.title.toLocaleLowerCase().includes(t.toLocaleLowerCase())):this.navigations))),this.filteredMPermissions=this.searchMPermissionControl.valueChanges.pipe((0,B.Z)(""),(0,Q.B)(400),(0,Y.n)(t=>(0,A.of)(this.mPermissions.filter("string"==typeof t&&t?o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&!this.selectedMPermissions.some(n=>n.id===o.id):o=>!this.selectedMPermissions.some(n=>n.id===o.id))))),this._fuseMediaWatcherService.onMediaChange$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md"),this._changeDetectorRef.detectChanges()}),this._fillNavigationData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectedNavigationOption(t){const o=t.option.value;this.parentNavigation=this.navigations.find(n=>n.id===o),"root"===this.parentNavigation.id&&(this.parentNavigation=null),this.filterNavigation(this.allNavigations),this.calcPositions(!0),this.navigationForm.get("position").setValue(this.position),this._changeDetectorRef.markForCheck()}navigationTypeChange(t){"divider"===t||"spacer"===t?(this.navigationForm.reset(),this.navigationForm.get("title").setValue(t.toUpperCase()),this.navigationForm.get("type").setValue(t),this.navigationForm.get("position").setValue(this.position),this.navigationForm.get("active").setValue(!0),this.navigationForm.get("disabled").setValue(!1),this.navigationForm.get("level").setValue(this.parentNavigation?this.parentNavigation.level+1:0),this.parentNavigation?this.navigationForm.get("parentId").setValue(this.parentNavigation.id):this.navigationForm.get("parentId").setValue("root")):("divider"===this.selectedNavigationType||"spacer"===this.selectedNavigationType)&&(this.navigationForm.get("level").setValue(this.parentNavigation?this.parentNavigation.level+1:0),this._fillNavigationData()),this._changeDetectorRef.markForCheck(),this.selectedNavigationType=t}createNavigation(){const t=this.navigationForm.getRawValue();delete t.id,this.parentNavigation&&"root"!==this.parentNavigation.id?t.level=this.parentNavigation.level+1:t.parentId=null,t.permissionsId=t.public?[]:this.selectedMPermissions.map(n=>n.id),!t.classes.title&&!t.classes.subtitle&&!t.classes.icon&&!t.classes.wrapper&&delete t.classes,!t.badge.title&&!t.badge.classes&&delete t.badge,this._athConfirmationService.open({title:"Crear elemento navigational",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._navigationService.createNavigation(t).subscribe(a=>{this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog()})})}updateNavigation(){const t=this.navigationForm.getRawValue();this.parentNavigation&&"root"!==this.parentNavigation.id?t.level=this.parentNavigation.level+1:t.parentId=null,!t.classes.title&&!t.classes.subtitle&&!t.classes.icon&&!t.classes.wrapper&&(t.classes=null),!t.badge.title&&!t.badge.classes&&(t.badge=null),t.permissionsId=t.public?[]:this.selectedMPermissions.map(n=>n.id),this._athConfirmationService.open({title:"Actualizar elemento navigational",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._navigationService.updateNavigation(t).subscribe(a=>{this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog()})})}addMPermission(t){this.searchMPermissionControl.setValue(""),this.selectedMPermissions.push(t),this._changeDetectorRef.markForCheck()}removePermission(t){const o=this.selectedMPermissions.indexOf(t);o>=0&&this.selectedMPermissions.splice(o,1)}displayFn(t){const o=this.navigations.find(n=>n.id===t);return o?o.title:""}closeDialog(){this._dialogRef.close()}_fillNavigationData(){if("edit"===this.dialogMode){this.navigationForm.patchValue(this.selectedNavigation);for(const t of this.selectedNavigation.permissionsId){const o=this.mPermissions.find(n=>n.id===t);o&&this.selectedMPermissions.push(o)}this.selectedNavigationType=this.selectedNavigation.type,this.parentNavigation||this.navigationForm.get("parentId").setValue("root")}"add"===this.dialogMode&&(this.parentNavigation&&this.navigationForm.get("parentId").setValue(this.parentNavigation.id),this.parentNavigation||this.navigationForm.get("parentId").setValue("root"),this.selectedNavigationType=this.navigationForm.get("type").value)}filterNavigation(t){return this.selectedNavigation?"edit"===this.dialogMode&&(this.navigations=[...t.filter(o=>this.selectedNavigation.id!==o.id&&"basic"!==o.type&&"divider"!==o.type&&"spacer"!==o.type)]):this.navigations=[...t.filter(o=>"basic"!==o.type&&"divider"!==o.type&&"spacer"!==o.type)],this.navigations.push({level:-1,id:"root",type:"group",title:"----Principal----"}),this.navigations.sort((o,n)=>o.level-n.level)}calcPositions(t){if(this.positions=[],this.position=0,this.parentNavigation&&this.parentNavigation.children&&this.parentNavigation.children.length>0){for(let o=0;o<this.parentNavigation.children.length;o++)this.positions.push(o);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}if(!this.parentNavigation){const o=this.allNavigations.filter(n=>null===n.parentId);for(let n=0;n<o.length;n++)this.positions.push(n);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(R.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["navigation-dialog"]],standalone:!0,features:[e.aNF],decls:10,vars:5,consts:[["auto","matAutocomplete"],["typeOptions",""],["externalLink",""],["addClasses",""],["autoP","matAutocomplete"],["permissionsChipGrid",""],[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",1,"text-2xl"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","md:grid-cols-3"],[1,"fuse-mat-no-subscript"],["matInput","","placeholder","Elemento padre","aria-label","Number",3,"formControlName","type","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected","displayWith"],[3,"ngClass","value"],[1,"w-full"],["required","",3,"selectionChange","formControlName","placeholder"],[3,"value"],[1,"flex","flex-col"],[1,"items-center","mt-3","sm:col-span-2","md:col-span-3"],[1,"items-center","-mt-2","sm:col-span-2","md:col-span-3"],["appearance","fill",1,"w-full","mt-2","sm:col-span-2","md:col-span-3"],["required","",3,"formControlName","placeholder"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],["matInput","",3,"formControlName","placeholder","maxLength"],["matInput","","require","",3,"formControlName","placeholder","maxLength"],[1,"font-medium"],[1,"flex","flex-row"],[1,"mt-1","sm:mt-2",3,"color","formControlName"],[1,"w-full","mt-1"],[3,"formControlName","placeholder"],[1,"mb-1",3,"color","checked"],[1,"grid","grid-cols-1","gap-2","py-4","mt-2","border-y","gap-x-4","sm:grid-cols-2","md:grid-cols-3",3,"formGroupName"],["matInput","",3,"formControlName","type","placeholder","minLength","maxLength"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],["placeholder","Agregar permiso...",1,"w-full",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["aria-label","Agregar permiso"],[3,"removed"],[1,"truncate","max-w-16","sm:max-w-24"],["matChipRemove","",1,"w-5","h-5"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass"],["mat-flat-button","",3,"click","color","disabled","ngClass"]],template:function(o,n){1&o&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"div",7),e.DNE(3,ot,2,1,"h2",8)(4,nt,2,0,"h2",8)(5,at,2,0,"h2",8),e.k0s(),e.bVm(),e.j41(6,"div",9),e.qex(7),e.DNE(8,Vt,43,31,"div",10),e.bVm(),e.k0s(),e.DNE(9,Qt,6,3,"div",11),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.dialogMode&&n.parentNavigation?3:-1),e.R7$(),e.vxM(4,"add"!==n.dialogMode||n.parentNavigation?-1:4),e.R7$(),e.vxM(5,"edit"===n.dialogMode?5:-1),e.R7$(3),e.vxM(8,"view"!==n.dialogMode?8:-1),e.R7$(),e.vxM(9,"view"!==n.data.dialogMode?9:-1))},dependencies:[F.Jj,oe.jL,oe.$3,q.wT,oe.pN,_.Hl,_.$z,b.g7,b.So,O.YN,O.Jl,O.HW,O.D7,O.Zv,R.hM,R.tx,R.BI,p.RG,p.rl,p.nJ,p.MV,p.TL,k.m_,k.An,M.fS,M.fg,V.Ve,V.VO,P.mV,P.sG,F.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.l_,r.j4,r.JD,r.$R],encapsulation:2,changeDetection:0})}return i})();var Ue=l(39198),Wt=l(85943);class Jt{}const Zt=(i,s)=>({dark:i,"bg-white":s}),We=(i,s)=>({"bg-gray-800 dark:bg-white":i,"bg-gray-700 dark:bg-neutral-50":s}),Ht=(i,s)=>({"bg-gray-400":i,"bg-primary-500":s});function qt(i,s){if(1&i&&e.nrm(0,"mat-icon",41),2&i){const t=e.XpG().$implicit;e.Y8G("svgIcon",t.item.icon)}}function Kt(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-tree-node",36),e.bIt("mouseenter",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseEnterLeave(n.item.id))})("mouseleave",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseEnterLeave(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseOver(n.item.id))}),e.j41(1,"div",37)(2,"div",38),e.nrm(3,"div",39),e.k0s(),e.j41(4,"span",40),e.EFF(5),e.k0s()(),e.j41(6,"div",31),e.DNE(7,qt,1,1,"mat-icon",41),e.k0s(),e.j41(8,"span",31),e.EFF(9),e.k0s(),e.nrm(10,"span"),e.j41(11,"div",42)(12,"button",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.createNavigation(n))}),e.nrm(13,"mat-icon",41),e.k0s(),e.j41(14,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.editNavigation(n))}),e.nrm(15,"mat-icon",41),e.k0s(),e.j41(16,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.deleteNavigation(a.flatNodeMap.get(n)))}),e.nrm(17,"mat-icon",41),e.k0s()()()}if(2&i){const t=s.$implicit,o=e.XpG(2);e.Y8G("ngClass",e.l_i(9,We,t.item.id===o.selectedNavigationId,t.item.id===o.overNavigationId)),e.R7$(3),e.Y8G("ngClass",e.l_i(12,Ht,"spacer"===t.item.type||"divider"===t.item.type,"spacer"!==t.item.type&&"divider"!==t.item.type)),e.R7$(2),e.JRh(t.item.title),e.R7$(2),e.vxM(7,t.item.icon?7:-1),e.R7$(2),e.JRh(t.item.type),e.R7$(3),e.Y8G("disabled","basic"===t.item.type||"divider"===t.item.type||"spacer"===t.item.type),e.R7$(),e.Y8G("svgIcon","mat_solid:add"),e.R7$(2),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function ei(i,s){if(1&i&&e.nrm(0,"mat-icon",41),2&i){const t=e.XpG().$implicit;e.Y8G("svgIcon",t.item.icon)}}function ti(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-tree-node",36),e.bIt("mouseenter",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseEnterLeave(n.item.id))})("mouseleave",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseEnterLeave(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.mouseOver(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.dobleClick(n))}),e.j41(1,"div",37)(2,"button",45),e.nrm(3,"mat-icon",41),e.k0s(),e.j41(4,"span",46),e.EFF(5),e.k0s()(),e.j41(6,"div",31),e.DNE(7,ei,1,1,"mat-icon",41),e.k0s(),e.j41(8,"span",31),e.EFF(9),e.k0s(),e.j41(10,"span",31),e.EFF(11),e.k0s(),e.j41(12,"div",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.dobleClick(n))}),e.j41(13,"button",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.createNavigation(n))}),e.nrm(14,"mat-icon",41),e.k0s(),e.j41(15,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.editNavigation(n))}),e.nrm(16,"mat-icon",41),e.k0s(),e.j41(17,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.deleteNavigation(a.flatNodeMap.get(n)))}),e.nrm(18,"mat-icon",41),e.k0s()()()}if(2&i){const t=s.$implicit,o=e.XpG(2);e.Y8G("ngClass",e.l_i(11,We,t.item.id===o.selectedNavigationId,t.item.id===o.overNavigationId)),e.R7$(2),e.BMQ("aria-label","Expandir "+t.item.title),e.R7$(),e.Y8G("svgIcon",o.treeControl.isExpanded(t)?"mat_solid:expand_more":"mat_solid:chevron_right"),e.R7$(2),e.JRh(t.item.title),e.R7$(2),e.vxM(7,t.item.icon?7:-1),e.R7$(2),e.JRh(t.item.type),e.R7$(2),e.JRh(o.flatNodeMap.get(t).children.length),e.R7$(2),e.Y8G("disabled","basic"===t.item.type||"divider"===t.item.type||"spacer"===t.item.type),e.R7$(),e.Y8G("svgIcon","mat_solid:add"),e.R7$(2),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function ii(i,s){if(1&i&&(e.j41(0,"div",29)(1,"div",30),e.EFF(2," T\xedtulo "),e.k0s(),e.j41(3,"div",31),e.EFF(4," Icono "),e.k0s(),e.j41(5,"div",31),e.EFF(6," Tipo "),e.k0s(),e.j41(7,"div",31),e.EFF(8," #.Elementos "),e.k0s(),e.j41(9,"div",32),e.EFF(10," Acciones "),e.k0s()(),e.j41(11,"mat-tree",33),e.DNE(12,Kt,18,15,"mat-tree-node",34)(13,ti,19,14,"mat-tree-node",35),e.k0s()),2&i){const t=e.XpG();e.R7$(11),e.Y8G("dataSource",t.dataSource)("treeControl",t.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",t.hasChild)}}function oi(i,s){1&i&&(e.j41(0,"div",48),e.EFF(1," \xa1No se ha creado ning\xfan elemento a\xfan! "),e.k0s())}let ni=(()=>{class i{constructor(){this.checklistSelection=new Xe.CB(!0),this.dialog=(0,e.WQX)(R.bZ),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this._changeDetectorRef=(0,e.WQX)(e.gRc),this._fuseConfigService=(0,e.WQX)(Wt.V),this._fuseConfirmationService=(0,e.WQX)($.G),this._fuseMediaWatcherService=(0,e.WQX)(ne.F),this._fuseNavigationService=(0,e.WQX)(Ue.L5),this._navigationService=(0,e.WQX)(C),this._snackBar=(0,e.WQX)(w.UG),this._unsubscribeAll=new j.B,this.store=(0,e.WQX)(u.il),this.getLevel=t=>t.level,this.isExpandable=t=>t.expandable,this.getChildren=t=>t.children,this.hasChild=(t,o)=>o.expandable||"collapsable"===o.item.type||"group"===o.item.type||"aside"===o.item.type,this.hasNoContent=(t,o)=>""===o.item.title,this.transformer=(t,o)=>{const n=this.nestedNodeMap.get(t),a=n&&n.item===t.item?n:new Jt;return a.item=t.item,a.level=o,a.expandable=!!t.children?.length,this.flatNodeMap.set(a,t),this.nestedNodeMap.set(t,a),a},this.treeFlattener=new z.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new Ye.XW(this.getLevel,this.isExpandable),this.dataSource=new z.zw(this.treeControl,this.treeFlattener)}ngOnInit(){this._navigationService.data$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.dataSource.data=t;const n={children:[],type:"aside"};this.transformToFuseNavigationFormat({item:null,children:t},n);const a=this.getNavigations(n,[]);this.navigations=a,this.fuseNavigationItems=n.children,this.store.dispatch((0,Le.i1)({navigations:a})),this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md")}),this._fuseConfigService.config$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.config=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(a=>this.checklistSelection.isSelected(a))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(a=>this.checklistSelection.isSelected(a))&&!this.descendantsAllSelected(t)}mouseEnterLeave(t){this.selectedNavigationId=t===this.selectedNavigationId?"":t}mouseOver(t){this.overNavigationId=t===this.overNavigationId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}createNavigation(t){if(t){const o={item:t.item,children:this.flatNodeMap.get(t).children},n={...t.item,children:[]};this.transformToFuseNavigationFormat(o,n),this._openDialog(n,null,"add")}else this._openDialog(null,null,"add")}editNavigation(t){let o=this.navigations.find(n=>n.id===t.item.parentId);o=void 0===o?null:o,this._openDialog(o,t.item,"edit")}deleteNavigation(t){this._fuseConfirmationService.open({title:"Eliminar Elemento",message:`\xbfEst\xe1 seguro que desea eliminar a ${t.item.title}? ${t.children.length>0?"Este elemento posee otros elementos":""}.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._navigationService.removeNavigation(t.item.id).subscribe(a=>{this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}toggleNavigation(t){const o=this._fuseNavigationService.getComponent(t);o&&o.toggle()}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}_openDialog(t,o,n){this.dialog.open(Ut,{data:{parentNavigation:t,navigation:o,dialogMode:n},disableClose:!0,panelClass:"ath-nrp-dialog-panel"})}transformToFuseNavigationFormat(t,o){for(const n of t.children){const a={...n.item};n.children&&n.children.length>0&&(a.children=[],this.transformToFuseNavigationFormat(n,a)),o.children.push(a)}}getNavigations(t,o){for(const n of t.children)n.active=!1,n.children&&n.children.length>0&&this.getNavigations(n,o),o.push({...n});return o.sort((n,a)=>n.level-a.level)}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-navigation"]],standalone:!0,features:[e.aNF],decls:44,vars:19,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","my-2","sm:hidden"],["mat-icon-button","",1,"",3,"click"],[3,"svgIcon"],[1,"flex","flex-row-reverse","flex-wrap","items-center","justify-end","mt-2","sm:flex-row","sm:mt-0","shrink-0","sm:ml-4"],["mat-flat-button","",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_solid:close_fullscreen"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_solid:expand"],["mat-icon-button","",1,"hidden","ml-6","sm:flex",3,"click"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[1,"h-full","min-h-full","overflow-x-auto","border","print:hidden",3,"ngClass","mode","name","opened","autoCollapse","inner","transparentOverlay","position","navigation"],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","navigation-tree-table","xl:px-8","text-md","text-secondary","bg-gray-50","dark:bg-gray-900"],[1,"ml-6","xl:ml-0"],[1,"text-center"],[1,"pr-4","mr-6","text-right","xl:mr-0"],[3,"dataSource","treeControl"],["class","grid navigation-tree-table  gap-4 relative py-1.5  border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],["class","grid navigation-tree-table gap-4 relative  py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"grid","navigation-tree-table","gap-4","relative","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"mouseenter","mouseleave","click","ngClass"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],["matTreeNodeToggle","","mat-icon-button","","color","primary",1,"flex","items-center","justify-center","w-10","h-10"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"cursor-default","whitespace-nowrap"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"a",6),e.EFF(8,"Inicio"),e.k0s()(),e.j41(9,"div",5),e.nrm(10,"mat-icon",7),e.j41(11,"a",8),e.EFF(12,"Navegaci\xf3n"),e.k0s()()(),e.j41(13,"div",9)(14,"a",10),e.nrm(15,"mat-icon",7),e.j41(16,"span",11),e.EFF(17,"Regresar"),e.k0s()()()(),e.j41(18,"div",12)(19,"div",13),e.EFF(20," Gesti\xf3n de navegaci\xf3n "),e.k0s()()(),e.j41(21,"div",14)(22,"button",15),e.bIt("click",function(){return n.toggleNavigation("settingNavigation")}),e.nrm(23,"mat-icon",16),e.k0s()(),e.j41(24,"div",17)(25,"button",18),e.bIt("click",function(){return n.createNavigation(null)}),e.nrm(26,"mat-icon",16),e.j41(27,"span",19),e.EFF(28,"Nuevo"),e.k0s()(),e.j41(29,"button",20),e.bIt("click",function(){return n.collapseAll()}),e.nrm(30,"mat-icon",21),e.j41(31,"span",22),e.EFF(32,"Contraer"),e.k0s()(),e.j41(33,"button",23),e.bIt("click",function(){return n.expandAll()}),e.nrm(34,"mat-icon",24),e.j41(35,"span",22),e.EFF(36,"Expandir"),e.k0s()(),e.j41(37,"button",25),e.bIt("click",function(){return n.toggleNavigation("settingNavigation")}),e.nrm(38,"mat-icon",16),e.k0s()()(),e.j41(39,"div",26)(40,"div",27),e.DNE(41,ii,14,3)(42,oi,2,0),e.k0s()()(),e.nrm(43,"fuse-vertical-navigation",28),e.k0s()),2&o&&(e.R7$(10),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(8),e.Y8G("svgIcon","mat_solid:menu"),e.R7$(3),e.Y8G("svgIcon","mat_solid:add"),e.R7$(12),e.Y8G("svgIcon","mat_solid:menu"),e.R7$(3),e.vxM(41,n.dataSource.data.length>0?41:42),e.R7$(2),e.Y8G("ngClass",e.l_i(16,Zt,"dark"===n.config.scheme,"dark"!==n.config.scheme))("mode",n.isScreenSmall?"over":"side")("name","settingNavigation")("opened",!n.isScreenSmall)("autoCollapse",!0)("inner",!1)("transparentOverlay",!0)("position","left")("navigation",n.fuseNavigationItems))},dependencies:[Ue.Xs,_.Hl,_.$z,_.iY,p.RG,M.fS,k.m_,k.An,z.jH,z.yI,z.yF,z.pO,z.lQ,z.d6,F.YU,X.Wk],encapsulation:2,data:{animation:ie.X},changeDetection:0})}return i})();var U=l(53473),Z=l(88141),Je=l(98216),ee=l(67046);const ai=U.J1`
    query MPermissions {
        mPermissions {
            id
            name
            description
            mandatory
        }
    }
`,si=U.J1`
    query PaginatedMPermissions($page: Int, $size: Int, $sort: String, $order: Order, $search: String ) {
        paginatedMPermissions(page: $page, size: $size, sort: $sort, order: $order, search: $search ) {

        ok
        message

        pagination {
            length
            size
            page
            lastPage
            startIndex
            endIndex
        }

        items {
            id
            parentId
            name
            level
            slug
            description
            mandatory

            permissions {
                id
                name
                slug
                description
            }
        }
        }
    }
`,ri=U.J1`
    query PermissionsNinModules {
        permissionsNinModules {
            id
            name
            description
            mandatory
        }
    }
`,li=U.J1`
    mutation CreateMPermissions($createMPermissionInput: CreateMPermissionInput!, $createMPermissionsInput: [CreateMPermissionInput!]) {
        createMPermissions(createMPermissionInput: $createMPermissionInput, createMPermissionsInput: $createMPermissionsInput ) {
            ok
            message

            permission {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
                }
            }
        }
    }
`,mi=U.J1`
    mutation UpdateMPermissions($updateMPermissionInput: UpdateMPermissionInput!, $updateMPermissionsInput: [UpdateMPermissionInput!]) {
        updateMPermissions(updateMPermissionInput: $updateMPermissionInput, updateMPermissionsInput: $updateMPermissionsInput) {

            ok
            message

            permission {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
                }
            }
        }
    }
`,ci=U.J1`
    mutation PaginatedRemoveMPermission($removeMPermissionById: String!, $page: Int, $size: Int, $sort: String, $order: Order, $search: String ) {
        paginatedRemoveMPermission(id: $removeMPermissionById, page: $page, size: $size, sort: $sort, order: $order, search: $search ) {

            ok
            message

            pagination {
                length
                size
                page
                lastPage
                startIndex
                endIndex
            }

            items {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
            }
            }
        }
    }
`;let se=(()=>{class i{constructor(){this.apolloProvider=(0,e.WQX)(U.Ic),this.store=(0,e.WQX)(u.il),this._apollo=this.apolloProvider.use("BALANC")}createMPermission(t,o){return this._apollo.mutate({mutation:li,variables:{createMPermissionInput:t,createMPermissionsInput:o},errorPolicy:"all"}).pipe((0,v.T)(({data:n})=>n?n.createMPermissions:null),(0,Z.M)(n=>{n&&this.store.dispatch((0,ee.Vr)({permission:n.permission}))}))}getPaginatedMPermissions(t=0,o=500,n="name",a="asc",c=null){return this._apollo.query({query:si,errorPolicy:"all",variables:{page:t,size:o,sort:n,order:a,search:c}}).pipe((0,Z.M)(({data:h})=>{h&&(this.store.dispatch((0,Je.Bp)({pagination:h.paginatedMPermissions.pagination})),this.store.dispatch((0,ee.jb)({permissions:h.paginatedMPermissions.items})))}))}getMPermissions(){return this._apollo.query({query:ai,errorPolicy:"all"}).pipe((0,Z.M)(({data:t})=>{t&&this.store.dispatch((0,ee.jb)({permissions:t.mPermissions}))}))}getPermissionsNinModules(){return this._apollo.query({query:ri,errorPolicy:"all"}).pipe((0,Z.M)(({data:t})=>{t&&this.store.dispatch((0,ee.jb)({permissions:t.permissionsNinModules}))}))}updatePermission(t,o){return this._apollo.mutate({mutation:mi,variables:{updateMPermissionInput:t,updateMPermissionsInput:o},errorPolicy:"all"}).pipe((0,v.T)(({data:n})=>n?n.updateMPermissions:null),(0,Z.M)(n=>{n&&this.store.dispatch((0,ee.LA)({permission:n.permission}))}))}removePermission(t,o=0,n=500,a="name",c="desc",h=null){return this._apollo.mutate({mutation:ci,variables:{removeMPermissionById:t.toString(),page:o,size:n,sort:a,order:c,search:h},errorPolicy:"all"}).pipe((0,Z.M)(({data:D})=>{D&&(this.store.dispatch((0,Je.Bp)({pagination:D.paginatedRemoveMPermission.pagination})),this.store.dispatch((0,ee.kM)({id:t})))}))}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ze=i=>({"cursor-not-allowed":i});function di(i,s){1&i&&(e.j41(0,"h2",3),e.EFF(1,"Agregar subm\xf3dulo"),e.k0s())}function pi(i,s){1&i&&(e.j41(0,"h2",3),e.EFF(1,"Editar subm\xf3dulo"),e.k0s())}function ui(i,s){1&i&&(e.j41(0,"h2",3),e.EFF(1,"Detalles del subm\xf3dulo"),e.k0s())}function gi(i,s){1&i&&e.nrm(0,"div",5)}function hi(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del subm\xf3dulo es obligatorio. "),e.k0s())}function _i(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del subm\xf3dulo debe contener entre 3 y 255 caracteres. "),e.k0s())}function fi(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La descripci\xf3n debe contener al menos 5 caracteres. "),e.k0s())}function vi(i,s){if(1&i&&(e.j41(0,"div",6)(1,"div",8)(2,"form",9)(3,"mat-form-field",10)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",11),e.DNE(7,hi,2,0,"mat-error")(8,_i,2,0,"mat-error"),e.k0s(),e.j41(9,"div",12)(10,"mat-form-field",13)(11,"mat-label"),e.EFF(12,"Descripci\xf3n"),e.k0s(),e.nrm(13,"mat-icon",14)(14,"textarea",15,0),e.DNE(16,fi,2,0,"mat-error"),e.j41(17,"mat-hint",16),e.EFF(18),e.k0s()()(),e.j41(19,"mat-checkbox",17),e.EFF(20," Obligatorio "),e.k0s()()()()),2&i){const t=e.sdS(15),o=e.XpG();e.R7$(2),e.Y8G("formGroup",o.mPermissionForm)("autocomplete","off"),e.R7$(4),e.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del subm\xf3dulo"),e.R7$(),e.vxM(7,o.mPermissionForm.get("name").hasError("required")?7:-1),e.R7$(),e.vxM(8,o.mPermissionForm.get("name").hasError("maxlength")||o.mPermissionForm.get("name").hasError("minlength")?8:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:notes"),e.R7$(),e.Y8G("formControlName","description")("rows",3)("spellcheck",!1)("minlength",5)("maxlength",1e3),e.R7$(2),e.vxM(16,o.mPermissionForm.get("description").hasError("minlength")?16:-1),e.R7$(2),e.SpI(" Total de caracteres ",t.value.length," / 1000 "),e.R7$(),e.Y8G("color","primary")("formControlName","mandatory")}}function Ci(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updatePermission())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.mPermissionForm.invalid)("ngClass",e.eq3(3,Ze,t.mPermissionForm.invalid))}}function xi(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createMPermission())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.mPermissionForm.invalid)("ngClass",e.eq3(3,Ze,t.mPermissionForm.invalid))}}function Fi(i,s){if(1&i&&(e.j41(0,"div",7)(1,"button",18),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,Ci,2,5,"button",19)(4,xi,2,5,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let bi=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialogRef=(0,e.WQX)(R.CP),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)($.G),this._mPermissionsService=(0,e.WQX)(se),this._snackBar=(0,e.WQX)(w.UG),this._unsubscribeAll=new j.B,this.selectedMPermission=t.mPermission,this.dialogMode=t.dialogMode}ngOnInit(){this.mPermissionForm=this._formBuilder.group({id:[null],parentId:[null],name:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],mandatory:[!1],description:["",[r.k0.minLength(5),r.k0.maxLength(1e3)]]}),this._fillMPermissionData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createMPermission(){const t=this.mPermissionForm.getRawValue();delete t.id,delete t.parentId,this._fuseConfirmationService.open({title:"Crear Subm\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._mPermissionsService.createMPermission(t,null).subscribe(a=>{a&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}updatePermission(){const t=this.mPermissionForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Subm\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._mPermissionsService.updatePermission(t,null).subscribe(a=>{a&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}trackByFn(t,o){return o.id||t}closeDialog(){this._dialogRef.close()}_fillMPermissionData(){"edit"===this.dialogMode&&this.mPermissionForm.patchValue(this.selectedMPermission)}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(R.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["m-permission-dialog"]],standalone:!0,features:[e.aNF],decls:9,vars:6,consts:[["desc",""],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-6",3,"formGroup","autocomplete"],[1,"fuse-mat-dense"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"pt-2","sm:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","minlength","maxlength"],[1,"text-right"],[1,"mt-6","mb-0",3,"color","formControlName"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass"],["mat-flat-button","",3,"click","color","disabled","ngClass"]],template:function(o,n){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,di,2,0,"h2",3)(3,pi,2,0,"h2",3)(4,ui,2,0,"h2",3),e.k0s(),e.j41(5,"div",4),e.DNE(6,gi,1,0,"div",5)(7,vi,21,19,"div",6),e.k0s(),e.DNE(8,Fi,5,3,"div",7),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,n.data.mPermission&&n.data.mPermission.id&&"edit"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,n.data.mPermission&&n.data.mPermission.id&&"view"===n.data.dialogMode?4:-1),e.R7$(2),e.vxM(6,"view"===n.data.dialogMode?6:-1),e.R7$(),e.vxM(7,7),e.R7$(),e.vxM(8,"view"!==n.data.dialogMode?8:-1))},dependencies:[_.Hl,_.$z,b.g7,b.So,R.hM,R.tx,p.RG,p.rl,p.nJ,p.MV,p.TL,p.JW,k.m_,k.An,M.fS,M.fg,F.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.xh,r.tU,r.j4,r.JD],encapsulation:2,changeDetection:0})}return i})();const ki=i=>({"pointer-events-none":i}),Ri=()=>[10,25,50,100];function yi(i,s){1&i&&e.nrm(0,"mat-icon",31),2&i&&e.Y8G("svgIcon","mat_solid:done")}function Ei(i,s){1&i&&e.nrm(0,"mat-icon",32),2&i&&e.Y8G("svgIcon","mat_solid:close")}function Mi(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",28)(1,"div",29),e.EFF(2),e.k0s(),e.j41(3,"div",29),e.EFF(4),e.k0s(),e.j41(5,"div",29),e.EFF(6),e.k0s(),e.j41(7,"div",30),e.DNE(8,yi,1,1,"mat-icon",31)(9,Ei,1,1,"mat-icon",32),e.k0s(),e.j41(10,"div",33)(11,"button",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.editMPermission(n))}),e.nrm(12,"mat-icon",35),e.k0s(),e.j41(13,"button",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.deleteMPermission(n))}),e.nrm(14,"mat-icon",35),e.k0s()()()}if(2&i){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.slug," "),e.R7$(2),e.SpI(" ",t.description," "),e.R7$(2),e.vxM(8,t.mandatory?8:-1),e.R7$(),e.vxM(9,t.mandatory?-1:9),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function $i(i,s){1&i&&e.Z7z(0,Mi,15,7,"div",28,e.BUC().trackByFn,!0),2&i&&e.Dyx(s)}function Ni(i,s){if(1&i&&(e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.EFF(3," Nombre "),e.k0s(),e.j41(4,"div",24),e.EFF(5," Slug "),e.k0s(),e.j41(6,"div",25),e.EFF(7," Descripci\xf3n "),e.k0s(),e.j41(8,"div",26),e.EFF(9," Obligatorio "),e.k0s(),e.j41(10,"div",27),e.EFF(11," Acciones "),e.k0s()(),e.DNE(12,$i,2,0),e.nI1(13,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(2),e.Y8G("mat-sort-header","slug"),e.R7$(4),e.Y8G("mat-sort-header","mandatory"),e.R7$(4),e.vxM(12,(t=e.bMT(13,4,o.modules$))?12:-1,t)}}function Ii(i,s){if(1&i&&(e.j41(0,"div",36),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado grupos!":"\xa1No se ha creado ning\xfan grupo a\xfan!","")}}function ji(i,s){1&i&&e.DNE(0,Ni,14,6,"div",22)(1,Ii,2,1),2&i&&e.vxM(0,s.length>0?0:1)}function Gi(i,s){if(1&i&&e.nrm(0,"mat-paginator",21),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(6,ki,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(8,Ri))("showFirstLastButtons",!0)}}let Si=(()=>{class i{constructor(){this.dialog=(0,e.WQX)(R.bZ),this.isLoading=!1,this.searchInputControl=new r.MJ(null),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._fuseConfirmationService=(0,e.WQX)($.G),this._moduleService=(0,e.WQX)(se),this._snackBar=(0,e.WQX)(w.UG),this._unsubscribeAll=new j.B,this.store=(0,e.WQX)(u.il)}ngOnInit(){this.modules$=this.store.select(ae),this.store.select(E.Dz).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,Q.B)(300),(0,B.Z)(null),(0,Y.n)(t=>null!==t?(this.isLoading=!0,this._moduleService.getPaginatedMPermissions(0,10,"name","asc",t)):(0,A.of)()),(0,v.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,J.h)(this._sort.sortChange,this._paginator.page).pipe((0,Y.n)(()=>(this.isLoading=!0,this._moduleService.getPaginatedMPermissions(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,v.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createMPermission(){this._openDialog(null,"add")}editMPermission(t){this._openDialog(t,"edit")}deleteMPermission(t){this._fuseConfirmationService.open({title:"Eliminar Submodule",message:`\xbfEst\xe1 seguro que desea eliminar el grupo ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._moduleService.removePermission(t.id,this.pagination.page,this.pagination.size,"name","desc").subscribe(({errors:a})=>{a||this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"data.paginatedRemoveMPermission.message",title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}_openDialog(t,o){this.dialog.open(bi,{data:{mPermission:t,dialogMode:o},disableClose:!0,panelClass:"ath-nrp-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-m-permissions"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(I.B4,5)),2&o){let a;e.mGM(a=e.lsd())&&(n._paginator=a.first),e.mGM(a=e.lsd())&&(n._sort=a.first)}},standalone:!0,features:[e.aNF],decls:34,vars:15,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","sm:mt-0","shrink-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","m-permissions-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,""],[1,"",3,"mat-sort-header"],[1,"pr-4","text-right"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","m-permissions-table","md:px-8"],[1,"truncate"],[1,"mr-4","text-center"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",4),e.nrm(9,"mat-icon",6),e.j41(10,"a",7),e.EFF(11,"Subm\xf3dulos"),e.k0s()()(),e.j41(12,"div",8)(13,"a",9),e.nrm(14,"mat-icon",6),e.j41(15,"span",10),e.EFF(16,"Regresar"),e.k0s()()()(),e.j41(17,"div",11)(18,"div",12),e.EFF(19," Gesti\xf3n de subm\xf3dulos "),e.k0s()()(),e.j41(20,"div",13)(21,"mat-form-field",14),e.nrm(22,"mat-icon",15)(23,"input",16),e.k0s(),e.j41(24,"button",17),e.bIt("click",function(){return n.createMPermission()}),e.nrm(25,"mat-icon",18),e.j41(26,"span",19),e.EFF(27,"Nuevo"),e.k0s()()()(),e.j41(28,"div",20)(29,"div",20),e.DNE(30,ji,2,1),e.nI1(31,"async"),e.k0s(),e.DNE(32,Gi,1,9,"mat-paginator",21),e.nI1(33,"async"),e.k0s()()),2&o){let a;e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar"),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(30,(a=e.bMT(31,11,n.modules$))?30:-1,a),e.R7$(2),e.vxM(32,e.bMT(33,13,n.modules$).length>0?32:-1)}},dependencies:[F.Jj,_.Hl,_.$z,p.RG,p.rl,p.JW,k.m_,k.An,M.fS,M.fg,y.Ou,y.iy,P.mV,I.NQ,I.B4,I.aE,F.YU,r.X1,r.me,r.BC,r.l_,X.Wk],encapsulation:2,data:{animation:ie.X},changeDetection:0})}return i})();var He=l(41791),qe=l(66407);const Di=()=>["new"],Ti=()=>["USD "],Pi=i=>[i],wi=i=>({"pointer-events-none":i}),Ai=()=>[10,25,50,100];function Bi(i,s){1&i&&e.nrm(0,"mat-icon",33),2&i&&e.Y8G("svgIcon","mat_solid:done")}function Yi(i,s){1&i&&e.nrm(0,"mat-icon",34),2&i&&e.Y8G("svgIcon","mat_solid:close")}function Xi(i,s){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",42),e.bIt("change",function(n){e.eBV(t);const a=e.XpG(),c=a.$implicit,h=a.$index,D=e.XpG(4);return e.Njj(D.updateGModuleStatus(n,c,h))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Li(i,s){1&i&&e.nrm(0,"mat-spinner",37),2&i&&e.Y8G("diameter",20)("color","primary")}function Vi(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",29)(1,"div",30),e.EFF(2),e.k0s(),e.j41(3,"div",30),e.EFF(4),e.k0s(),e.j41(5,"div",31),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"div",32),e.DNE(9,Bi,1,1,"mat-icon",33)(10,Yi,1,1,"mat-icon",34),e.k0s(),e.j41(11,"div",35),e.DNE(12,Xi,1,2,"mat-slide-toggle",36)(13,Li,1,2,"mat-spinner",37),e.k0s(),e.j41(14,"div",38)(15,"button",39),e.nrm(16,"mat-icon",40),e.k0s(),e.j41(17,"button",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(4);return e.Njj(a.deleteGModule(n))}),e.nrm(18,"mat-icon",40),e.k0s()()()}if(2&i){const t=s.$implicit,o=s.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.description," "),e.R7$(2),e.SpI(" ",e.i5U(7,10,t.price,e.lJ4(13,Ti))," "),e.R7$(3),e.vxM(9,t.mandatory?9:-1),e.R7$(),e.vxM(10,t.mandatory?-1:10),e.R7$(2),e.vxM(12,n.isLoading&&n.selectedSlide===o?-1:12),e.R7$(),e.vxM(13,n.isLoading&&n.selectedSlide===o?13:-1),e.R7$(2),e.Y8G("routerLink",e.eq3(14,Pi,t.id)),e.R7$(),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function zi(i,s){1&i&&e.Z7z(0,Vi,19,16,"div",29,e.BUC().trackByFn,!0),2&i&&e.Dyx(s)}function Oi(i,s){if(1&i&&(e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.EFF(3," Nombre "),e.k0s(),e.j41(4,"div",25),e.EFF(5," Descripci\xf3n "),e.k0s(),e.j41(6,"div",26),e.EFF(7," precio "),e.k0s(),e.j41(8,"div",27)(9,"span"),e.EFF(10," Obligatorio"),e.k0s()(),e.j41(11,"div",27)(12,"span"),e.EFF(13,"Activo"),e.k0s()(),e.j41(14,"div",28),e.EFF(15," Acciones "),e.k0s()(),e.DNE(16,zi,2,0),e.nI1(17,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(4),e.Y8G("mat-sort-header","prise"),e.R7$(2),e.Y8G("mat-sort-header","mandatory"),e.R7$(3),e.Y8G("mat-sort-header","active"),e.R7$(5),e.vxM(16,(t=e.bMT(17,5,o.modules$))?16:-1,t)}}function Qi(i,s){if(1&i&&(e.j41(0,"div",43),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado m\xf3dulos!":"\xa1No se ha creado ning\xfan m\xf3dulo a\xfan!","")}}function Ui(i,s){1&i&&e.DNE(0,Oi,18,7,"div",22)(1,Qi,2,1),2&i&&e.vxM(0,s.length>0?0:1)}function Wi(i,s){if(1&i&&e.nrm(0,"mat-paginator",21),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(6,wi,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(8,Ai))("showFirstLastButtons",!0)}}let Ji=(()=>{class i{constructor(t,o,n,a,c,h){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._snackBar=n,this.dialog=a,this._moduleService=c,this.store=h,this.searchInputControl=new r.MJ(null),this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new j.B}ngOnInit(){this.modules$=this.store.select(He.Nh),this.store.select(E.Dz).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,Q.B)(300),(0,B.Z)(null),(0,Y.n)(t=>null!==t?(this.isLoading=!0,this._moduleService.getGModules(0,10,"name","asc",t)):(0,A.of)()),(0,v.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,J.h)(this._sort.sortChange,this._paginator.page).pipe((0,Y.n)(()=>(this.isLoading=!0,this._moduleService.getGModules(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,v.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updateGModuleStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._moduleService.updateGModuleStatus({id:o.id,active:t.checked}).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(a=>{a&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1),this._changeDetectorRef.markForCheck()})}deleteGModule(t){this._fuseConfirmationService.open({title:"Eliminar m\xf3dulo",message:`\xbfEst\xe1 seguro que desea eliminar el m\xf3dulo ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._moduleService.removeGModule(t.id,this.pagination.page,this.pagination.size,"name","desc").pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({data:a})=>{a&&this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.paginatedRemoveGModule.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU($.G),e.rXU(w.UG),e.rXU(R.bZ),e.rXU(qe.K),e.rXU(u.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-g-module"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(I.B4,5)),2&o){let a;e.mGM(a=e.lsd())&&(n._paginator=a.first),e.mGM(a=e.lsd())&&(n._sort=a.first)}},standalone:!0,features:[e.aNF],decls:34,vars:17,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","sm:mt-0","shrink-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"routerLink"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","g-modules-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,""],[1,"flex","justify-end",3,"mat-sort-header"],[1,"flex","items-center","justify-center",3,"mat-sort-header"],[1,"pr-1","text-right"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","g-modules-table","md:px-8"],[1,"truncate"],[1,"mr-4","text-right"],[1,"mr-4","text-center"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",4),e.nrm(9,"mat-icon",6),e.j41(10,"a",7),e.EFF(11,"M\xf3dulos"),e.k0s()()(),e.j41(12,"div",8)(13,"a",9),e.nrm(14,"mat-icon",6),e.j41(15,"span",10),e.EFF(16,"Regresar"),e.k0s()()()(),e.j41(17,"div",11)(18,"div",12),e.EFF(19," Gesti\xf3n de m\xf3dulos "),e.k0s()()(),e.j41(20,"div",13)(21,"mat-form-field",14),e.nrm(22,"mat-icon",15)(23,"input",16),e.k0s(),e.j41(24,"button",17),e.nrm(25,"mat-icon",18),e.j41(26,"span",19),e.EFF(27,"Nuevo"),e.k0s()()()(),e.j41(28,"div",20)(29,"div",20),e.DNE(30,Ui,2,1),e.nI1(31,"async"),e.k0s(),e.DNE(32,Wi,1,9,"mat-paginator",21),e.nI1(33,"async"),e.k0s()()),2&o){let a;e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar m\xf3dulo"),e.R7$(),e.Y8G("routerLink",e.lJ4(16,Di)),e.R7$(),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(30,(a=e.bMT(31,12,n.modules$))?30:-1,a),e.R7$(2),e.vxM(32,e.bMT(33,14,n.modules$).length>0?32:-1)}},dependencies:[F.Jj,F.oe,_.Hl,_.$z,p.RG,p.rl,p.JW,k.m_,k.An,M.fS,M.fg,y.Ou,y.iy,T.D6,T.LG,P.mV,P.sG,I.NQ,I.B4,I.aE,F.YU,r.X1,r.me,r.BC,r.l_,X.Wk],styles:[".g-modules-table{grid-template-columns:100px 300px 100px 80px 80px auto}@media (min-width: 960px){.g-modules-table{grid-template-columns:20% 30% 110px 100px 100px auto}}@media (min-width: 1280px){.g-modules-table{grid-template-columns:20% 40% 120px 100px 100px auto}}\n"],encapsulation:2,data:{animation:ie.X},changeDetection:0})}return i})();var re=l(9454),Zi=l(65478);const ge=i=>({"cursor-not-allowed":i});function Hi(i,s){1&i&&(e.j41(0,"div",5),e.nrm(1,"mat-icon",7),e.j41(2,"a",56),e.EFF(3,"Nuevo"),e.k0s()()),2&i&&(e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_right"))}function qi(i,s){1&i&&(e.j41(0,"span"),e.EFF(1,"Nuevo M\xf3dulo"),e.k0s())}function Ki(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI("Informaci\xf3n de ",t.selectedGModule.name,"")}}function eo(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createGModule())}),e.nrm(1,"mat-icon",58),e.j41(2,"span",59),e.EFF(3,"Guardar"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.gModuleForm.invalid)("ngClass",e.eq3(3,ge,t.gModuleForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:save")}}function to(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateGModule())}),e.nrm(1,"mat-icon",58),e.j41(2,"span",59),e.EFF(3,"Actualizar"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.gModuleForm.invalid)("ngClass",e.eq3(3,ge,t.gModuleForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:refresh")}}function io(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del m\xf3dulo es obligatorio. "),e.k0s())}function oo(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del m\xf3dulo debe contener entre 3 y 255 caracteres. "),e.k0s())}function no(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El precio del m\xf3dulo es obligatorio "),e.k0s())}function ao(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El precio del m\xf3dulo debe ser mayor que 0 "),e.k0s())}function so(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El priceo del m\xf3dulo es obligatorio "),e.k0s())}function ro(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El precio del m\xf3dulo debe ser mayor que 0 "),e.k0s())}function lo(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La descripci\xf3n del m\xf3dulo debe contener al menos 5 caracteres. "),e.k0s())}function mo(i,s){1&i&&(e.j41(0,"mat-label"),e.EFF(1,"Nombre"),e.k0s())}function co(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre de la caracter\xedstica es obligatorio "),e.k0s())}function po(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El nombre de la caracter\xedstica debe contener entre 3 y 255 caracteres. "),e.k0s())}function uo(i,s){1&i&&(e.j41(0,"mat-label"),e.EFF(1,"Descripci\xf3n"),e.k0s())}function go(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1," La descripci\xf3n de la caracter\xedstica debe contener entre 3 y 1000 caracteres. "),e.k0s())}function ho(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",46)(1,"mat-form-field",60),e.DNE(2,mo,2,0,"mat-label"),e.nrm(3,"input",61),e.DNE(4,co,2,0,"mat-error")(5,po,2,0,"mat-error"),e.k0s(),e.j41(6,"mat-form-field",62),e.DNE(7,uo,2,0,"mat-label"),e.nrm(8,"mat-icon",40)(9,"textarea",63),e.DNE(10,go,2,0,"mat-error"),e.k0s(),e.qex(11),e.j41(12,"div",64)(13,"button",65),e.bIt("click",function(){const n=e.eBV(t).$index,a=e.XpG();return e.Njj(a.removeFeatureField(n))}),e.nrm(14,"mat-icon",48),e.k0s()(),e.bVm(),e.k0s()}if(2&i){const t=s.$implicit,o=s.$index;e.R7$(2),e.vxM(2,0===o?2:-1),e.R7$(),e.Y8G("formControl",t.get("name"))("minlength",3)("maxlength",255)("placeholder","Nombre de la caracter\xedstica"),e.R7$(),e.vxM(4,t.get("name").hasError("required")?4:-1),e.R7$(),e.vxM(5,t.get("name").hasError("maxlength")||t.get("name").hasError("minlength")?5:-1),e.R7$(2),e.vxM(7,0===o?7:-1),e.R7$(),e.Y8G("svgIcon","mat_solid:subject"),e.R7$(),e.Y8G("formControl",t.get("description"))("placeholder","Descripci\xf3n de la caracter\xedstica")("minLength",3)("maxLength",1e3),e.R7$(),e.vxM(10,t.get("description").hasError("maxlength")||t.get("description").hasError("minlength")?10:-1),e.R7$(4),e.Y8G("svgIcon","mat_solid:delete")}}function _o(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",53)(1,"div",66)(2,"mat-checkbox",67),e.bIt("change",function(n){const a=e.eBV(t).$index,c=e.XpG();return e.Njj(c.markModule(n,a))}),e.k0s(),e.j41(3,"span",68),e.EFF(4),e.k0s()(),e.j41(5,"div",69),e.EFF(6),e.k0s()()}if(2&i){const t=s.$implicit;e.R7$(2),e.Y8G("color","primary")("checked",t.checked),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.description," ")}}function fo(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createGModule())}),e.nrm(1,"mat-icon",58),e.j41(2,"span",59),e.EFF(3,"Guardar"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.gModuleForm.invalid)("ngClass",e.eq3(3,ge,t.gModuleForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:save")}}function vo(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",57),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateGModule())}),e.nrm(1,"mat-icon",58),e.j41(2,"span",59),e.EFF(3,"Actualizar"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",t.gModuleForm.invalid)("ngClass",e.eq3(3,ge,t.gModuleForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:refresh")}}let Co=(()=>{class i{constructor(){this.mPermissions=[],this._activatedRoute=(0,e.WQX)(X.nX),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)($.G),this._gModulesService=(0,e.WQX)(qe.K),this._router=(0,e.WQX)(X.Ix),this._snackBar=(0,e.WQX)(w.UG),this._unsubscribeAll=new j.B,this.store=(0,e.WQX)(u.il)}ngOnInit(){this.store.select(ae).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.mPermissions=[...t].map(o=>({...o,checked:!1}))}),this.store.select(He.oy).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.selectedGModule=t}),this.gModuleForm=this._formBuilder.group({id:[""],name:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],active:[!0],price:[0,[r.k0.required,r.k0.min(0),r.k0.max(999999999),r.k0.maxLength(9)]],uom:["mes",[r.k0.required]],mandatory:[!1],features:this._formBuilder.array([]),description:["",[r.k0.minLength(5),r.k0.maxLength(1e3)]]}),this._activatedRoute.params.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({gModuleId:t})=>{this.windowsMode="new"===t?"new":"edit",this._fillGModuleData(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addFeatureField(){const t=this._formBuilder.group({name:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],description:["",[r.k0.minLength(5),r.k0.maxLength(1e3)]]});this.gModuleForm.get("features").push(t),this._changeDetectorRef.markForCheck()}removeFeatureField(t){this.gModuleForm.get("features").removeAt(t),this._changeDetectorRef.markForCheck()}createGModule(){let t=this.gModuleForm.getRawValue();t.permissionsId=this.mPermissions.filter(n=>!0===n.checked).map(n=>n.id),t=(0,G.A)(t,"id"),this._fuseConfirmationService.open({title:"Crear M\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._gModulesService.createGModule(t).subscribe(({errors:a})=>{a||(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"M\xf3dulo creado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/settings/g-modules"))})})}updateGModule(){const t=this.gModuleForm.getRawValue();t.permissionsId=this.mPermissions.filter(n=>!0===n.checked).map(n=>n.id),this._fuseConfirmationService.open({title:"Actualizar M\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._gModulesService.updateGModule(t).subscribe(({errors:a})=>{a||(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"M\xf3dulo actualizado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/settings/g-modules"))})})}markModule(t,o){this.mPermissions[o].checked=t.checked,this._changeDetectorRef.markForCheck()}trackByFn(t,o){return o.id||t}_fillGModuleData(){if("edit"===this.windowsMode){this.gModuleForm.patchValue(this.selectedGModule),this.gModuleForm.get("features").clear();const t=[];this.selectedGModule.features.length>0&&this.selectedGModule.features.forEach(n=>{t.push(this._formBuilder.group({name:[n.name,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],description:[n.description,[r.k0.minLength(5),r.k0.maxLength(1e3)]]}))}),t.forEach(n=>{this.gModuleForm.get("features").push(n)});const o=[...this.selectedGModule.permissions].map(n=>({...n,checked:!0}));this.mPermissions=[...o,...this.mPermissions]}}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["g-module-detail"]],standalone:!0,features:[e.aNF],decls:121,vars:54,consts:[["desc",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/settings/g-modules/",1,"ml-1","text-primary-500","hover:underline"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","px-4","pt-8","pb-8","border-t-2","sm:grid-cols-3","gap-y-3","gap-x-6"],[1,"flex","flex-col","sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"hidden","w-full","grid-cols-3","md:grid"],[1,"col-span-2"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matSuffix","","required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","items-center"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"md:hidden"],[1,"sm:col-span-3","md:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",1,"sm:h-26",3,"formControlName","rows","spellcheck","minlength","maxlength"],[1,"text-right"],[1,"mb-2","sm:mb-0","sm:mt-3",3,"color","formControlName"],[1,"flex","flex-col","md:hidden"],[1,"flex","flex-col","w-full","px-4","pt-8","pb-8","space-y-4","border-t-2"],[1,"grid","sm:grid-cols-8","gap-y-3","gap-x-6"],[1,"inline-flex","items-center","px-4","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","flex-col","w-full","px-4","pt-8","pb-8","border-t-2"],[1,"flex","flex-col"],[1,"flex","flex-wrap","w-full","gap-4","sm:grid","sm:grid-cols-3","md:grid-cols-4"],[1,"w-full","p-3","overflow-hidden","border","border-dashed","rounded-sm","sm:w-auto","border-primary-700","max-h-30"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"ml-1","text-primary-500"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click","disabled","ngClass"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex-auto","sm:col-span-2"],["type","text","matInput","","required","",3,"formControl","minlength","maxlength","placeholder"],[1,"flex-auto","w-full","sm:col-span-5","fuse-mat-textarea"],["matInput","","matInput","","matTextareaAutosize","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","self-end","w-10","mb-2","sm:items-center","sm:pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"flex","flex-row","h-6"],[3,"change","color","checked"],[1,"font-medium","truncate"],[1,"whitespace-pre-line","text-md","text-hint","line-clamp-3"]],template:function(o,n){if(1&o){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",5),e.nrm(9,"mat-icon",7),e.j41(10,"a",8),e.EFF(11,"M\xf3dulos de m\xf3dulos"),e.k0s()(),e.DNE(12,Hi,4,1,"div",5),e.k0s(),e.j41(13,"div",9)(14,"a",10),e.nrm(15,"mat-icon",7),e.j41(16,"span",11),e.EFF(17,"Regresar"),e.k0s()()()(),e.j41(18,"div",12)(19,"div",13),e.DNE(20,qi,2,0,"span")(21,Ki,2,1,"span"),e.k0s()()(),e.j41(22,"div",14),e.DNE(23,eo,4,5,"button",15)(24,to,4,5,"button",15),e.k0s()(),e.j41(25,"div",16)(26,"div",17)(27,"form",18)(28,"mat-accordion",19)(29,"mat-expansion-panel",20)(30,"mat-expansion-panel-header",21)(31,"mat-panel-title",22)(32,"div",23),e.EFF(33," Informaci\xf3n General "),e.k0s()()(),e.j41(34,"div",24)(35,"div",25)(36,"mat-form-field",26)(37,"mat-label"),e.EFF(38,"Nombre"),e.k0s(),e.nrm(39,"input",27),e.DNE(40,io,2,0,"mat-error")(41,oo,2,0,"mat-error"),e.k0s(),e.j41(42,"div",28)(43,"mat-form-field",29)(44,"mat-label"),e.EFF(45,"Precio"),e.k0s(),e.j41(46,"span",30),e.EFF(47,"$"),e.k0s(),e.nrm(48,"input",31),e.j41(49,"mat-select",32)(50,"mat-select-trigger"),e.EFF(51),e.k0s(),e.j41(52,"mat-option",33),e.EFF(53," Empleado"),e.k0s(),e.j41(54,"mat-option",33),e.EFF(55," Mes"),e.k0s()(),e.DNE(56,no,2,0,"mat-error")(57,ao,2,0,"mat-error"),e.k0s(),e.j41(58,"div",34)(59,"span",35),e.EFF(60,"Estado"),e.k0s(),e.j41(61,"mat-slide-toggle",36),e.EFF(62),e.k0s()()()(),e.j41(63,"mat-form-field",37)(64,"mat-label"),e.EFF(65,"Precio"),e.k0s(),e.j41(66,"span",30),e.EFF(67,"$"),e.k0s(),e.nrm(68,"input",31),e.j41(69,"mat-select",32)(70,"mat-select-trigger"),e.EFF(71),e.k0s(),e.j41(72,"mat-option",33),e.EFF(73," Empleado"),e.k0s(),e.j41(74,"mat-option",33),e.EFF(75," Mes"),e.k0s()(),e.DNE(76,so,2,0,"mat-error")(77,ro,2,0,"mat-error"),e.k0s(),e.j41(78,"div",38)(79,"mat-form-field",39)(80,"mat-label"),e.EFF(81,"Descripci\xf3n del M\xf3dulo"),e.k0s(),e.nrm(82,"mat-icon",40)(83,"textarea",41,0),e.DNE(85,lo,2,0,"mat-error"),e.j41(86,"mat-hint",42),e.EFF(87),e.k0s()()(),e.j41(88,"mat-checkbox",43),e.EFF(89," Obligatorio"),e.k0s(),e.j41(90,"div",44)(91,"span",35),e.EFF(92,"Estado"),e.k0s(),e.j41(93,"mat-slide-toggle",36),e.EFF(94),e.k0s()()()(),e.j41(95,"mat-expansion-panel")(96,"mat-expansion-panel-header",21)(97,"mat-panel-title",22)(98,"div",23),e.EFF(99," Caracter\xedsticas "),e.k0s()()(),e.j41(100,"div",45),e.Z7z(101,ho,15,15,"div",46,n.trackByFn,!0),e.j41(103,"div",47),e.bIt("click",function(){return e.eBV(a),e.Njj(n.addFeatureField())}),e.nrm(104,"mat-icon",48),e.j41(105,"span",49),e.EFF(106,"Agregar caracter\xedstica"),e.k0s()()()(),e.j41(107,"mat-expansion-panel")(108,"mat-expansion-panel-header",21)(109,"mat-panel-title",22)(110,"div",23),e.EFF(111," Subm\xf3dulos "),e.k0s()()(),e.j41(112,"div",50)(113,"div",51)(114,"div",52),e.Z7z(115,_o,7,4,"div",53,e.fX1),e.k0s()()()()()()()(),e.j41(117,"div",54)(118,"div",55),e.DNE(119,fo,4,5,"button",15)(120,vo,4,5,"button",15),e.k0s()()()}if(2&o){const a=e.sdS(84);e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(3),e.vxM(12,"new"===n.windowsMode?12:-1),e.R7$(2),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(5),e.vxM(20,"new"===n.windowsMode?20:-1),e.R7$(),e.vxM(21,"edit"===n.windowsMode&&n.selectedGModule?21:-1),e.R7$(2),e.vxM(23,"new"===n.windowsMode?23:-1),e.R7$(),e.vxM(24,"new"!==n.windowsMode?24:-1),e.R7$(3),e.Y8G("formGroup",n.gModuleForm)("autocomplete","off"),e.R7$(2),e.Y8G("expanded",!0),e.R7$(),e.Y8G("collapsedHeight","56px"),e.R7$(9),e.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del m\xf3dulo"),e.R7$(),e.vxM(40,n.gModuleForm.get("name").hasError("required")?40:-1),e.R7$(),e.vxM(41,n.gModuleForm.get("name").hasError("maxlength")||n.gModuleForm.get("name").hasError("minlength")?41:-1),e.R7$(7),e.Y8G("formControlName","price"),e.R7$(),e.Y8G("formControlName","uom"),e.R7$(2),e.SpI(" / ",n.gModuleForm.get("uom").value," "),e.R7$(),e.Y8G("value","empleado"),e.R7$(2),e.Y8G("value","mes"),e.R7$(2),e.vxM(56,n.gModuleForm.get("price").hasError("required")?56:-1),e.R7$(),e.vxM(57,n.gModuleForm.get("price").hasError("min")?57:-1),e.R7$(4),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===n.gModuleForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(6),e.Y8G("formControlName","price"),e.R7$(),e.Y8G("formControlName","uom"),e.R7$(2),e.SpI(" / ",n.gModuleForm.get("uom").value," "),e.R7$(),e.Y8G("value","empleado"),e.R7$(2),e.Y8G("value","mes"),e.R7$(2),e.vxM(76,n.gModuleForm.get("price").hasError("required")?76:-1),e.R7$(),e.vxM(77,n.gModuleForm.get("price").hasError("min")?77:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:subject"),e.R7$(),e.Y8G("formControlName","description")("rows",3)("spellcheck",!1)("minlength",5)("maxlength",1e3),e.R7$(2),e.vxM(85,n.gModuleForm.get("description").hasError("minlength")?85:-1),e.R7$(2),e.SpI("Total de caracteres ",a.value.length," / 1000"),e.R7$(),e.Y8G("color","primary")("formControlName","mandatory"),e.R7$(5),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===n.gModuleForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(2),e.Y8G("collapsedHeight","56px"),e.R7$(5),e.Dyx(n.gModuleForm.get("features").controls),e.R7$(3),e.Y8G("svgIcon","mat_solid:add_circle"),e.R7$(4),e.Y8G("collapsedHeight","56px"),e.R7$(7),e.Dyx(n.mPermissions),e.R7$(4),e.vxM(119,"new"===n.windowsMode?119:-1),e.R7$(),e.vxM(120,"new"!==n.windowsMode?120:-1)}},dependencies:[_.Hl,_.$z,_.iY,b.g7,b.So,re.MY,re.BS,re.GK,re.Z2,re.WN,p.RG,p.rl,p.nJ,p.MV,p.TL,p.JW,p.yw,k.m_,k.An,M.fS,M.fg,V.Ve,Zi.uv,V.VO,V.$2,q.wT,P.mV,P.sG,F.YU,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.xh,r.tU,r.VZ,r.zX,r.l_,r.j4,r.JD,X.Wk],encapsulation:2,changeDetection:0})}return i})();const Fo=(0,u.Mz)(i=>i.traces,i=>i.traces),bo=(i,s,t,o)=>({"text-blue-300":i,"text-red-300":s,"text-yellow-300":t,"text-white":o});function ko(i,s){if(1&i&&(e.j41(0,"span",13),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=s.$implicit;e.Y8G("ngClass",e.ziG(8,bo,"INFO"===t.type,"ERROR"===t.type,"SUCCESS"===t.type,"START"===t.type)),e.R7$(),e.LHq(" ",e.i5U(2,5,t.createdAt,"dd/MM/yy hh:mm a")," - [",t.serviceName,"] - ",t.type," - ",t.description," ")}}let Ro=(()=>{class i{constructor(){this.traces=[],this._unsubscribeAll=new j.B,this._changeDetectorRef=(0,e.WQX)(e.gRc),this.store=(0,e.WQX)(u.il)}ngOnInit(){this.store.select(Fo).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.traces=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-traces"]],standalone:!0,features:[e.aNF],decls:23,vars:2,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"flex","flex-auto","p-6","overflow-hidden"],[1,"bg-slate-900","rounded-md","p-3","w-full","flex","flex-col","overflow-hidden","sm:overflow-y-auto"],[1,"hover:bg-card","px-1","cursor-default","rounded-sm","text-xs","hover:text-md","transition-all","ease-in-out","duration-300",3,"ngClass"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Trazas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Registro de Trazas "),e.k0s()()(),e.nrm(18,"div",10),e.k0s(),e.j41(19,"div",11)(20,"div",12),e.Z7z(21,ko,3,13,"span",13,e.fX1),e.k0s()()()),2&o&&(e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(9),e.Dyx(n.traces))},dependencies:[F.vh,k.m_,k.An,F.YU],encapsulation:2})}return i})();var yo=l(23301);let Eo=(()=>{class i{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getPaginatedMPermissions()}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(se))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Mo=(()=>{class i{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getMPermissions()}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(se))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),$o=(()=>{class i{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getPermissionsNinModules()}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(se))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),No=(()=>{class i{constructor(t){this._navigationService=t}resolve(t,o){return this._navigationService.getRootNavigationNodes()}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(C))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Io=l(71411),Ke=l(6319),jo=l(26276);const Go=U.J1`
    query FindTraces {
        findTraces {
            ok
            message

            traces {
                createdAt
                description
                id
                merchant {
                    name
                }
                merchantId
                serviceName
                type
                user {
                    name
                    lastname1
                    lastname2
                    fullname
                }
                userId
            }
        }
    }
`;let So=(()=>{class i{constructor(t,o){this.apolloProvider=t,this.store=o,this._apollo=this.apolloProvider.use(d.c.GRAPHQL_PROVIDER)}findTraces(){return this._apollo.query({query:Go,errorPolicy:"all"}).pipe((0,Z.M)(({data:t})=>{this.store.dispatch((0,jo.Ht)({traces:t.findTraces.traces}))}))}static#e=this.\u0275fac=function(o){return new(o||i)(e.KVO(U.Ic),e.KVO(u.il))};static#t=this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var he=l(90882),To=l(70980),S=l(44136),_e=l(5864),Po=l(71997),et=l(82946),tt=l(14823),wo=l(10223);function Ao(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Este campo es obligatorio"),e.k0s())}function Bo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("La longitud m\xednima es de ",t.minlength," caracteres")}}function Yo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("La longitud m\xe1xima es de ",t.maxlength," caracteres")}}function Xo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.JRh(t.matchError)}}function Lo(i,s){if(1&i&&(e.j41(0,"mat-form-field",9)(1,"mat-label"),e.EFF(2),e.k0s(),e.nrm(3,"input",10),e.DNE(4,Ao,2,0,"mat-error")(5,Bo,2,1,"mat-error")(6,Yo,2,1,"mat-error")(7,Xo,2,1,"mat-error"),e.j41(8,"mat-hint"),e.EFF(9),e.k0s()()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("subscriptSizing","dynamic"),e.R7$(2),e.JRh(t.title),e.R7$(),e.Y8G("formControlName",t.name)("required",t.required)("minlength",t.minlength)("maxlength",t.maxlength),e.R7$(),e.vxM(4,o.moduleSettingsForm.get(t.name).hasError("required")?4:-1),e.R7$(),e.vxM(5,o.moduleSettingsForm.get(t.name).hasError("minlength")?5:-1),e.R7$(),e.vxM(6,o.moduleSettingsForm.get(t.name).hasError("maxlength")?6:-1),e.R7$(),e.vxM(7,o.moduleSettingsForm.get(t.name).hasError("pattern")?7:-1),e.R7$(2),e.JRh(null==t?null:t.description)}}function Vo(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Este campo es obligatorio"),e.k0s())}function zo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("La longitud m\xednima es de ",t.minlength," caracteres")}}function Oo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("La longitud m\xe1xima es de ",t.maxlength," caracteres")}}function Qo(i,s){if(1&i&&(e.j41(0,"mat-form-field",11)(1,"mat-label"),e.EFF(2),e.k0s(),e.nrm(3,"textarea",12),e.DNE(4,Vo,2,0,"mat-error")(5,zo,2,1,"mat-error")(6,Oo,2,1,"mat-error"),e.j41(7,"mat-hint"),e.EFF(8),e.k0s()()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("subscriptSizing","dynamic"),e.R7$(2),e.JRh(t.title),e.R7$(),e.Y8G("formControlName",t.name)("required",t.required)("minlength",t.minlength)("maxlength",t.maxlength),e.R7$(),e.vxM(4,o.moduleSettingsForm.get(t.name).hasError("required")?4:-1),e.R7$(),e.vxM(5,o.moduleSettingsForm.get(t.name).hasError("minlength")?5:-1),e.R7$(),e.vxM(6,o.moduleSettingsForm.get(t.name).hasError("maxlength")?6:-1),e.R7$(2),e.JRh(null==t?null:t.description)}}function Uo(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Este campo es obligatorio"),e.k0s())}function Wo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("El valor m\xednimo es de ",t.min,"")}}function Jo(i,s){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG(3).$implicit;e.R7$(),e.SpI("El Valor m\xe1xima es de ",t.max,"")}}function Zo(i,s){if(1&i&&(e.j41(0,"mat-form-field",13)(1,"mat-label"),e.EFF(2),e.k0s(),e.nrm(3,"input",14),e.DNE(4,Uo,2,0,"mat-error")(5,Wo,2,1,"mat-error")(6,Jo,2,1,"mat-error"),e.j41(7,"mat-hint"),e.EFF(8),e.k0s()()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("subscriptSizing","dynamic"),e.R7$(2),e.JRh(t.title),e.R7$(),e.Y8G("formControlName",t.name)("required",t.required)("min",t.min)("max",t.max),e.R7$(),e.vxM(4,o.moduleSettingsForm.get(t.name).hasError("required")?4:-1),e.R7$(),e.vxM(5,o.moduleSettingsForm.get(t.name).hasError("min")?5:-1),e.R7$(),e.vxM(6,o.moduleSettingsForm.get(t.name).hasError("max")?6:-1),e.R7$(2),e.JRh(null==t?null:t.description)}}function Ho(i,s){if(1&i&&(e.j41(0,"mat-checkbox",15),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2).$implicit;e.Y8G("matTooltip",null==t?null:t.description)("formControlName",t.name),e.R7$(),e.JRh(t.title)}}function qo(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Este campo es obligatorio"),e.k0s())}function Ko(i,s){if(1&i&&(e.j41(0,"mat-form-field",9)(1,"mat-label"),e.EFF(2),e.k0s(),e.nrm(3,"input",16),e.DNE(4,qo,2,0,"mat-error"),e.j41(5,"mat-hint"),e.EFF(6),e.k0s()()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("subscriptSizing","dynamic"),e.R7$(2),e.JRh(t.title),e.R7$(),e.Y8G("formControlName",t.name)("required",t.required),e.R7$(),e.vxM(4,o.moduleSettingsForm.get(t.name).hasError("required")?4:-1),e.R7$(2),e.JRh(null==t?null:t.description)}}function en(i,s){if(1&i&&(e.j41(0,"mat-option",18),e.EFF(1),e.k0s()),2&i){const t=s.$implicit;e.Y8G("value",t.name),e.R7$(),e.JRh(t.title)}}function tn(i,s){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Este campo es obligatorio"),e.k0s())}function on(i,s){if(1&i&&(e.j41(0,"mat-form-field",9)(1,"mat-label"),e.EFF(2),e.k0s(),e.j41(3,"mat-select",17),e.Z7z(4,en,2,2,"mat-option",18,e.fX1),e.k0s(),e.DNE(6,tn,2,0,"mat-error"),e.j41(7,"mat-hint"),e.EFF(8),e.k0s()()),2&i){const t=e.XpG(2).$implicit,o=e.XpG(3);e.Y8G("subscriptSizing","dynamic"),e.R7$(2),e.JRh(t.title),e.R7$(),e.Y8G("formControlName",t.name)("required",t.required),e.R7$(),e.Dyx(t.selectList),e.R7$(2),e.vxM(6,o.moduleSettingsForm.get(t.name).hasError("required")?6:-1),e.R7$(2),e.JRh(null==t?null:t.description)}}function nn(i,s){if(1&i&&e.DNE(0,Lo,10,11)(1,Qo,9,10)(2,Zo,9,10)(3,Ho,2,3)(4,Ko,7,6)(5,on,9,6),2&i){let t;const o=e.XpG().$implicit;e.vxM(0,"string"===(t=o.type)?0:"text"===t?1:"number"===t?2:"boolean"===t?3:"date"===t?4:"select"===t?5:-1)}}function an(i,s){if(1&i&&e.DNE(0,nn,6,1),2&i){const t=s.$implicit,o=e.XpG().$implicit;e.vxM(0,t.section===o?0:-1)}}function sn(i,s){if(1&i&&(e.j41(0,"div",6),e.EFF(1),e.k0s(),e.j41(2,"div",7),e.Z7z(3,an,1,1,null,null,e.fX1),e.k0s(),e.nrm(5,"mat-divider",8)),2&i){const t=s.$implicit,o=e.XpG(2);e.R7$(),e.JRh(t),e.R7$(2),e.Dyx(o.setting.fieldSettings)}}function rn(i,s){1&i&&(e.j41(0,"span"),e.EFF(1," Actualizar "),e.k0s())}function ln(i,s){1&i&&e.nrm(0,"mat-progress-spinner",5),2&i&&e.Y8G("diameter",24)("mode","indeterminate")}function mn(i,s){if(1&i){const t=e.RV6();e.j41(0,"form",2),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateSettings())}),e.Z7z(1,sn,6,1,null,null,e.fX1),e.j41(3,"div",3)(4,"button",4),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateSettings())}),e.DNE(5,rn,2,0,"span")(6,ln,1,2,"mat-progress-spinner",5),e.k0s()()()}if(2&i){const t=e.XpG();e.Y8G("formGroup",t.moduleSettingsForm),e.R7$(),e.Dyx(t.sections),e.R7$(3),e.Y8G("disabled",t.moduleSettingsForm.invalid)("color","primary"),e.R7$(),e.vxM(5,t.moduleSettingsForm.disabled?-1:5),e.R7$(),e.vxM(6,t.moduleSettingsForm.disabled?6:-1)}}let cn=(()=>{class i{constructor(t,o,n,a){this._changeDetectorRef=t,this._formBuilder=o,this._settingsService=n,this._snackBar=a,this.sections=[],this.setting=null,this._unsubscribeAll=new j.B,this._fuseConfirmationService=(0,e.WQX)($.G),this._store=(0,e.WQX)(u.il)}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}setSetting(t){_e.H.IsNullOrEmpty(t)||(this.setting=t,this.sections=[...new Set(this.setting.fieldSettings.map(o=>o?.section))],_e.H.IsNullOrEmpty(this.moduleSettingsForm)||this.moduleSettingsForm.reset(),this.createForm())}updateSettings(){const t=[];Object.keys(this.moduleSettingsForm.value).forEach(a=>{const c=this.moduleSettingsForm.value[a],h={id:this.setting.fieldSettings.find(D=>D.name===a&&D.id).id,type:"boolean"==typeof c?S.wI.boolean:"number"==typeof c?S.wI.number:S.wI.string,valueString:"string"==typeof c?c:null,valueNumber:"number"==typeof c?c:null,valueBoolean:"boolean"==typeof c?c:null,valueDate:c instanceof Date?c:null,valueList:Array.isArray(c)?c:null};t.push(h)});const o={settingId:this.setting.id,fieldSettings:t};this._fuseConfirmationService.open({title:"Actualizar Configuraci\xf3n",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,f.Q)(this._unsubscribeAll)).subscribe(a=>{"confirmed"===a&&this._settingsService.updateFieldSettingsValues(o).pipe((0,f.Q)(this._unsubscribeAll),(0,To.j)(()=>{this._changeDetectorRef.markForCheck()})).subscribe(({data:c})=>{c&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:c.updateFieldSettingsValues.message,type:"success",svgIcon:"mat_solid:done"}}),this.updateSettingsInStore())})})}createForm(){const t={};this.setting.fieldSettings.forEach(o=>{const n=[];o.required&&n.push(r.k0.required),(o.type===S.wI.string||o.type===S.wI.text||o.type===S.wI.select)&&o.maxlength&&n.push(r.k0.maxLength(o.maxlength)),(o.type===S.wI.string||o.type===S.wI.text||o.type===S.wI.select)&&o.minlength&&n.push(r.k0.minLength(o.minlength)),o.type===S.wI.number&&o.min&&n.push(r.k0.min(o.min)),o.type===S.wI.number&&o.max&&n.push(r.k0.max(o.max)),o.match&&n.push(r.k0.pattern(o.match)),t[o.name]=S.H6.getFieldSettingValue(o)}),this.moduleSettingsForm=this._formBuilder.group(t),this._changeDetectorRef.markForCheck()}updateSettingsInStore(){const t=this.moduleSettingsForm.value;this.setting.fieldSettings.forEach(o=>{"boolean"==typeof t[o.name]&&(o.valueBoolean=t[o.name]),"number"==typeof t[o.name]&&(o.valueNumber=t[o.name]),"string"==typeof t[o.name]&&(o.valueString=t[o.name]),t[o.name]instanceof Date&&(o.valueDate=t[o.name]),Array.isArray(t[o.name])&&(o.valueList=t[o.name])}),this.setting.type===S.OP.user&&this._store.dispatch((0,et.P1)({setting:this.setting})),this.setting.type===S.OP.merchant&&this._store.dispatch((0,et.Qf)({setting:this.setting}))}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(r.ze),e.rXU(wo.h),e.rXU(w.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-module-settings"]],standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[[1,"w-full","h-full","max-w-3xl"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"flex","items-center","justify-end"],["type","submit","mat-flat-button","","type","button",1,"ml-4",3,"click","disabled","color"],[3,"diameter","mode"],[1,"text-xl"],[1,"grid","gap-6","m-8","sm:grid-cols-4"],[1,"my-4"],[1,"sm:col-span-2",3,"subscriptSizing"],["matInput","","type","text",3,"formControlName","required","minlength","maxlength"],[1,"sm:col-span-4",3,"subscriptSizing"],["matInput","",3,"formControlName","required","minlength","maxlength"],[3,"subscriptSizing"],["matInput","","type","number",3,"formControlName","required","min","max"],["color","primary",3,"matTooltip","formControlName"],["matInput","","type","date",3,"formControlName","required"],[3,"formControlName","required"],[3,"value"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.DNE(1,mn,7,5,"form",1),e.k0s()),2&o&&(e.R7$(),e.vxM(1,n.setting?1:-1))},dependencies:[_.Hl,_.$z,p.RG,p.rl,p.nJ,p.MV,p.TL,k.m_,M.fS,M.fg,V.Ve,V.VO,q.wT,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.xh,r.tU,r.VZ,r.zX,r.j4,r.JD,b.g7,b.So,T.D6,T.LG,Po.q,tt.uc,tt.oV],encapsulation:2,changeDetection:0})}return i})();var fe=l(96850),it=l(14715);const dn=["drawer"],pn=["moduleSettings"],un=(i,s)=>({"hover:bg-gray-100 dark:hover:bg-hover":i,"bg-primary-50 dark:bg-hover":s}),gn=(i,s)=>({"text-hint":i,"text-primary dark:text-primary-500":s}),hn=i=>({"text-primary dark:text-primary-500":i});function _n(i,s){1&i&&e.eu8(0)}function fn(i,s){if(1&i&&e.DNE(0,_n,1,0,"ng-container",23),2&i){e.XpG();const t=e.sdS(16);e.Y8G("ngTemplateOutlet",t)}}function vn(i,s){1&i&&e.eu8(0)}function Cn(i,s){if(1&i&&e.DNE(0,vn,1,0,"ng-container",23),2&i){e.XpG();const t=e.sdS(16);e.Y8G("ngTemplateOutlet",t)}}function xn(i,s){}function Fn(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goToPanel(n))}),e.nrm(1,"mat-icon",25),e.j41(2,"div",26)(3,"div",27),e.EFF(4),e.k0s(),e.j41(5,"div",28),e.EFF(6),e.k0s()()()}if(2&i){const t=s.$implicit,o=e.XpG();e.Y8G("ngClass",e.l_i(6,un,!o.selectedPanel||o.selectedPanel!==t.id,o.selectedPanel&&o.selectedPanel.id===t.id)),e.R7$(),e.Y8G("ngClass",e.l_i(9,gn,!o.selectedPanel||o.selectedPanel.id!==t.id,o.selectedPanel&&o.selectedPanel.id===t.id))("svgIcon",t.icon),e.R7$(2),e.Y8G("ngClass",e.eq3(12,hn,o.selectedPanel&&o.selectedPanel.id===t.id)),e.R7$(),e.SpI(" ",t.title," "),e.R7$(2),e.SpI(" ",t.description," ")}}const bn=[{path:"",component:(()=>{class i{constructor(t,o,n){this._changeDetectorRef=t,this._fuseMediaWatcherService=o,this.store=n,this.drawerMode="side",this.drawerOpened=!0,this.panels=[],this.selectedPanel="",this.selectedTapIndex=0,this.userSettings=[],this.merchantSettings=[],this._unsubscribeAll=new j.B}ngOnInit(){this.store.select(it.VL).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.userSettings=t,this.onTabChanged(0)}),this.store.select(it.mU).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(t=>{this.merchantSettings=t}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{t.includes("lg")?(this.drawerMode="side",this.drawerOpened=!0):(this.drawerMode="over",this.drawerOpened=!1),this._changeDetectorRef.markForCheck()}),this.goToPanel(this.panels[0])}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onTabChanged(t){const o=0===t?this.userSettings:this.merchantSettings,n=[...new Set(o.map(a=>a.module))];this.panels=n.map(a=>{const c=o.find(h=>h.moduleId===(_e.H.IsNullOrEmpty(a)?null:a.id));return{id:_e.H.IsNullOrEmpty(a)?null:a.id,title:a?a.name:"General",icon:c.icon,description:c.description,setting:c}}),this.panels.length>0&&t!==this.selectedTapIndex&&this.goToPanel(this.panels[0]),this.selectedTapIndex=t,this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges()}goToPanel(t){this.selectedPanel=t,this.moduleSettingsComponent.setSetting(t.setting),"over"===this.drawerMode&&this.drawer.close()}trackByFn(t,o){return o.id||t}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(ne.F),e.rXU(u.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings"]],viewQuery:function(o,n){if(1&o&&(e.GBs(dn,5),e.GBs(pn,7)),2&o){let a;e.mGM(a=e.lsd())&&(n.drawer=a.first),e.mGM(a=e.lsd())&&(n.moduleSettingsComponent=a.first)}},standalone:!0,features:[e.aNF],decls:30,vars:6,consts:[["drawer",""],["panelLinks",""],["moduleSettings",""],[1,"flex","flex-col","w-full","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden"],[1,"flex-auto","sm:h-full"],[1,"sm:w-96","dark:bg-gray-900",3,"autoFocus","mode","opened"],[1,"flex","items-center","justify-between","m-8","mb-4","mr-6","sm:mt-10"],[1,"text-4xl","font-extrabold","leading-none","tracking-tight"],[1,"lg:hidden"],["mat-icon-button","",3,"click"],[3,"svgIcon"],[3,"selectedIndexChange"],["label","Usuario",1,"p-6","md:p-8","max-w-screen-xl"],["matTabContent",""],["label","Negocio",1,"p-6","md:p-8","max-w-screen-xl"],[1,"flex","flex-col","border-t","border-b","divide-y"],[1,"flex","px-8","py-5","cursor-pointer",3,"ngClass"],[1,"flex","flex-col"],[1,"flex-auto","px-6","pb-12","pt-9","md:p-8","md:pb-12","lg:p-12"],[1,"flex","items-center"],["mat-icon-button","",1,"-ml-2","lg:hidden",3,"click"],[1,"ml-2","text-3xl","font-bold","leading-none","tracking-tight","lg:ml-0"],[1,"mt-8"],[4,"ngTemplateOutlet"],[1,"flex","px-8","py-5","cursor-pointer",3,"click","ngClass"],[3,"ngClass","svgIcon"],[1,"ml-3"],[1,"font-medium","leading-6",3,"ngClass"],[1,"mt-0.5","text-secondary"]],template:function(o,n){if(1&o){const a=e.RV6();e.j41(0,"div",3)(1,"mat-drawer-container",4)(2,"mat-drawer",5,0)(4,"div",6)(5,"div",7),e.EFF(6,"Ajustes"),e.k0s(),e.j41(7,"div",8)(8,"button",9),e.bIt("click",function(){e.eBV(a);const h=e.sdS(3);return e.Njj(h.close())}),e.nrm(9,"mat-icon",10),e.k0s()()(),e.j41(10,"mat-tab-group",11),e.bIt("selectedIndexChange",function(h){return e.eBV(a),e.Njj(n.onTabChanged(h))}),e.j41(11,"mat-tab",12),e.DNE(12,fn,1,1,"ng-template",13),e.k0s(),e.j41(13,"mat-tab",14),e.DNE(14,Cn,1,1,"ng-template",13),e.k0s()(),e.DNE(15,xn,0,0,"ng-template",null,1,e.C5r),e.j41(17,"div",15),e.Z7z(18,Fn,7,14,"div",16,n.trackByFn,!0),e.k0s()(),e.j41(20,"mat-drawer-content",17)(21,"div",18)(22,"div",19)(23,"button",20),e.bIt("click",function(){e.eBV(a);const h=e.sdS(3);return e.Njj(h.toggle())}),e.nrm(24,"mat-icon",10),e.k0s(),e.j41(25,"div",21),e.EFF(26),e.k0s()(),e.j41(27,"div",22),e.nrm(28,"app-module-settings",null,2),e.k0s()()()()()}2&o&&(e.R7$(2),e.Y8G("autoFocus",!1)("mode",n.drawerMode)("opened",n.drawerOpened),e.R7$(7),e.Y8G("svgIcon","mat_solid:close"),e.R7$(9),e.Dyx(n.panels),e.R7$(6),e.Y8G("svgIcon","mat_solid:menu"),e.R7$(2),e.SpI(" ",null==n.selectedPanel?null:n.selectedPanel.title," "))},dependencies:[he.vg,he.qe,he.$C,he.$l,k.m_,k.An,F.YU,cn,fe.RI,fe.$L,fe.mq,fe.T8,F.T3],encapsulation:2,changeDetection:0})}return i})()},{path:"g-modules",component:Ji,resolve:{modules:Ke.$t}},{path:"g-modules/:gModuleId",component:Co,resolve:{permissions:$o,gModule:Ke.Yn}},{path:"m-permissions",component:Si,resolve:{mPermissions:Eo}},{path:"navigations",component:ni,resolve:{mPermissions:Mo,navigation:No}},{path:"rates",component:Be,resolve:{currencies:yo.p,rates:Io.Q}},{path:"traces",component:Ro,resolve:{traces:(i,s)=>(0,e.WQX)(So).findTraces()}},{path:"merchant",loadChildren:()=>Promise.all([l.e(8049),l.e(3240),l.e(8527),l.e(2076),l.e(9609)]).then(l.bind(l,59609)),title:"Gesti\xf3n del negocio"},{path:"roles",loadChildren:()=>Promise.all([l.e(2076),l.e(2050)]).then(l.bind(l,2050)),title:"Gesti\xf3n Roles y Permisos"}]},67398:(ve,W,l)=>{l.d(W,{A:()=>Oe});const F=function e(m,d){for(var g=-1,x=null==m?0:m.length,C=Array(x);++g<x;)C[g]=d(m[g],g,m);return C};var r=l(71252),_=l(43744),R=l(45281),p=l(42661);const y=function M(m){return"symbol"==typeof m||(0,p.A)(m)&&"[object Symbol]"==(0,R.A)(m)};var T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/;var X=l(72291);function A(m,d){if("function"!=typeof m||null!=d&&"function"!=typeof d)throw new TypeError("Expected a function");var g=function(){var x=arguments,C=d?d.apply(this,x):x[0],b=g.cache;if(b.has(C))return b.get(C);var O=m.apply(this,x);return g.cache=b.set(C,O)||b,O};return g.cache=new(A.Cache||X.A),g}A.Cache=X.A;const J=A;var Y=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g;const L=function Q(m){var d=J(m,function(x){return 500===g.size&&g.clear(),x}),g=d.cache;return d}(function(m){var d=[];return 46===m.charCodeAt(0)&&d.push(""),m.replace(Y,function(g,x,C,b){d.push(C?b.replace(v,"$1"):x||g)}),d});var E=l(6944),G=E.A?E.A.prototype:void 0,le=G?G.toString:void 0;const me=function N(m){if("string"==typeof m)return m;if((0,_.A)(m))return F(m,N)+"";if(y(m))return le?le.call(m):"";var d=m+"";return"0"==d&&1/m==-1/0?"-0":d},H=function V(m){return null==m?"":me(m)},te=function q(m,d){return(0,_.A)(m)?m:function w(m,d){if((0,_.A)(m))return!1;var g=typeof m;return!("number"!=g&&"symbol"!=g&&"boolean"!=g&&null!=m&&!y(m))||P.test(m)||!T.test(m)||null!=d&&m in Object(d)}(m,d)?[m]:L(H(m))},ce=function be(m){if("string"==typeof m||y(m))return m;var d=m+"";return"0"==d&&1/m==-1/0?"-0":d},$e=function Me(m,d){return d.length<2?m:function ke(m,d){for(var g=0,x=(d=te(d,m)).length;null!=m&&g<x;)m=m[ce(d[g++])];return g&&g==x?m:void 0}(m,function ye(m,d,g){var x=-1,C=m.length;d<0&&(d=-d>C?0:C+d),(g=g>C?C:g)<0&&(g+=C),C=d>g?0:g-d>>>0,d>>>=0;for(var b=Array(C);++x<C;)b[x]=m[x+d];return b}(d,0,-1))},Ie=function Ne(m,d){return d=te(d,m),null==(m=$e(m,d))||delete m[ce(function Ce(m){var d=null==m?0:m.length;return d?m[d-1]:void 0}(d))]};var je=l(77517),Ge=l(74294);const De=function Se(m){return(0,Ge.A)(m)?void 0:m};var Te=l(70563),Pe=l(66513),de=E.A?E.A.isConcatSpreadable:void 0;const Ae=function we(m){return(0,_.A)(m)||(0,Pe.A)(m)||!!(de&&m&&m[de])},Be=function pe(m,d,g,x,C){var b=-1,O=m.length;for(g||(g=Ae),C||(C=[]);++b<O;){var K=m[b];d>0&&g(K)?d>1?pe(K,d-1,g,x,C):(0,Te.A)(C,K):x||(C[C.length]=K)}return C},z=function Ye(m){return null!=m&&m.length?Be(m,1):[]};var Xe=l(90178),Le=l(45974);var ue=l(57372);const Oe=function ie(m){return(0,Le.A)((0,Xe.A)(m,void 0,z),m+"")}(function(m,d){var g={};if(null==m)return g;var x=!1;d=F(d,function(b){return b=te(b,m),x||(x=b.length>1),b}),(0,je.A)(m,(0,ue.A)(m),g),x&&(g=(0,r.A)(g,7,De));for(var C=d.length;C--;)Ie(g,d[C]);return g})}}]);