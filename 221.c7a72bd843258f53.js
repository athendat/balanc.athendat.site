"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[221],{49576:(tt,N,c)=>{c.r(N),c.d(N,{default:()=>un});var k=c(51188),t=c(54438);let D=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-accounting"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[k.n3],encapsulation:2})}return n})();var v=c(60177),_=c(55542),g=c(88834),l=c(99213),S=c(9183),E=c(30450),L=c(14823),B=c(47358);class nt{}var ot=c(64109),it=c(45024),C=c(75351),G=c(95416),h=c(89079),vt=c(85943),m=c(46601),b=c(27115),u=c(94794),s=c(89417),j=c(60850),F=c(82798),M=c(86600),A=c(59042),p=c(32102),bt=c(7673),P=c(70152),_t=c(99172),X=c(96354),y=c(59640),J=c(19669),V=c(41017);const xt=(n,r)=>r.id,dt=n=>({"cursor-not-allowed":n});function Ct(n,r){1&n&&(t.j41(0,"h2",3),t.EFF(1,"Agregar cuenta"),t.k0s())}function Ft(n,r){1&n&&(t.j41(0,"h2",3),t.EFF(1,"Editar cuenta"),t.k0s())}function At(n,r){if(1&n&&(t.j41(0,"mat-option",13),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e),t.R7$(),t.Lme(" ",e.no," - ",e.name," ")}}function yt(n,r){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El t\xedtulo de la cuenta es obligatorio. "),t.k0s())}function Et(n,r){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El t\xedtulo del elemento de cuenta debe poseer entre 1 y 10 caracteres. "),t.k0s())}function It(n,r){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El t\xedtulo de la cuenta es obligatorio. "),t.k0s())}function Tt(n,r){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El t\xedtulo del elemento de cuenta debe poseer entre 3 y 255 caracteres. "),t.k0s())}function jt(n,r){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Debe seleccionar la naturaleza de la cuenta. "),t.k0s())}function $t(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"div",7)(2,"form",8)(3,"div",9)(4,"mat-form-field",10)(5,"mat-label"),t.EFF(6,"Padre"),t.k0s(),t.nrm(7,"input",11),t.j41(8,"mat-autocomplete",12,0),t.bIt("optionSelected",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.onSelectAccount(i))}),t.j41(10,"mat-option",13),t.EFF(11,"Sin Padre"),t.k0s(),t.Z7z(12,At,2,3,"mat-option",13,xt),t.nI1(14,"async"),t.k0s()(),t.j41(15,"mat-form-field",10)(16,"mat-label"),t.EFF(17,"N\xfamero de la cuenta"),t.k0s(),t.nrm(18,"input",14),t.DNE(19,yt,2,0,"mat-error")(20,Et,2,0,"mat-error"),t.k0s(),t.j41(21,"mat-form-field",10)(22,"mat-label"),t.EFF(23,"Nombre de la cuenta"),t.k0s(),t.nrm(24,"input",15),t.DNE(25,It,2,0,"mat-error")(26,Tt,2,0,"mat-error"),t.k0s(),t.j41(27,"mat-form-field",16)(28,"mat-label"),t.EFF(29,"Naturaleza"),t.k0s(),t.j41(30,"mat-select",17)(31,"mat-option",18),t.EFF(32,"Acreedora"),t.k0s(),t.j41(33,"mat-option",19),t.EFF(34,"Deudora"),t.k0s(),t.j41(35,"mat-option",20),t.EFF(36,"Mixta"),t.k0s()(),t.DNE(37,jt,2,0,"mat-error"),t.k0s()()()()()}if(2&n){const e=t.sdS(9),o=t.XpG();t.R7$(2),t.Y8G("formGroup",o.accountForm)("autocomplete","off"),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","parent")("type","text")("matAutocomplete",e),t.R7$(),t.Y8G("displayWith",o.displayFn),t.R7$(2),t.Y8G("value",null),t.R7$(2),t.Dyx(t.bMT(14,26,o.filteredAccounts$)),t.R7$(3),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","no")("type","text")("placeholder","N\xfamero de la cuenta")("maxLength",10),t.R7$(),t.vxM(19,o.accountForm.get("no").hasError("required")?19:-1),t.R7$(),t.vxM(20,o.accountForm.get("no").hasError("maxLength")||o.accountForm.get("no").hasError("minLength")?20:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","name")("type","text")("placeholder","Nombre de la cuenta")("minLength",3)("maxLength",255),t.R7$(),t.vxM(25,o.accountForm.get("name").hasError("required")?25:-1),t.R7$(),t.vxM(26,o.accountForm.get("name").hasError("maxLength")||o.accountForm.get("name").hasError("minLength")?26:-1),t.R7$(4),t.Y8G("formControlName","type")("placeholder","Seleccione una opci\xf3n"),t.R7$(7),t.vxM(37,o.accountForm.get("type").hasError("required")?37:-1)}}function Rt(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateAccount())}),t.EFF(1," Actualizar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("disabled",e.accountForm.invalid)("ngClass",t.eq3(3,dt,e.accountForm.invalid))}}function Bt(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.createAccount())}),t.EFF(1," Agregar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("disabled",e.accountForm.invalid)("ngClass",t.eq3(3,dt,e.accountForm.invalid))}}function Gt(n,r){if(1&n&&(t.j41(0,"div",6)(1,"button",21),t.EFF(2," Cancelar "),t.k0s(),t.DNE(3,Rt,2,5,"button",22)(4,Bt,2,5,"button",22),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("matDialogClose","cancelled"),t.R7$(2),t.vxM(3,"edit"===e.data.dialogMode?3:-1),t.R7$(),t.vxM(4,"add"===e.data.dialogMode?4:-1)}}let St=(()=>{class n{#t=(0,t.WQX)(V.u);#e=(0,t.WQX)(t.gRc);#n=(0,t.WQX)(t.abz);#i=(0,t.WQX)(C.CP);#a=(0,t.WQX)(s.ze);#o=(0,t.WQX)(m.G);#r=(0,t.WQX)(G.UG);#s=(0,t.WQX)(y.il);constructor(e){this.data=e,this.dialogMode=e.dialogMode,this.account=e.account,this.parentId=e.parentId}ngOnInit(){if(this.#s.select(J.N8).pipe((0,h.pQ)(this.#n)).subscribe(({accounts:e})=>{this.accounts=e,this.filteredAccounts$=(0,bt.of)(e),this.#e.markForCheck()}),this.accountForm=this.#a.group({id:new s.MJ(null),no:new s.MJ(null,[s.k0.required,s.k0.minLength(1),s.k0.maxLength(10)]),name:new s.MJ(null,[s.k0.required,s.k0.minLength(3),s.k0.maxLength(255)]),parentId:new s.MJ(null),parent:new s.MJ(null),type:new s.MJ(null,[s.k0.required])}),this.account&&this.accountForm.patchValue(this.account),this.parentId){this.accountForm.get("parentId").setValue(this.parentId);const e=this.accounts.find(o=>o.id===this.parentId);this.accountForm.get("parent").setValue(e)}this.filteredAccounts$=this.accountForm.get("parent").valueChanges.pipe((0,h.pQ)(this.#n),(0,P.B)(100),(0,_t.Z)(""),(0,X.T)(e=>("string"==typeof e?e:e?.name)?this.accounts.filter(i=>i.name.toLocaleLowerCase().includes(e.toLocaleLowerCase())):this.accounts)),this.accountForm.get("parent").valueChanges.pipe((0,h.pQ)(this.#n)).subscribe(e=>{this.#e.markForCheck()})}createAccount(){const e=this.accountForm.getRawValue();delete e.id,delete e.parent,this.#o.open({title:"Crear cuenta",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#t.createAccount(e).pipe((0,h.pQ)(this.#n)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.createAccount.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.#e.markForCheck(),this.#i.close()})})}updateAccount(){const e=this.accountForm.getRawValue();delete e.parent,this.#o.open({title:"Actualizar cuenta",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#t.updateAccount(e).pipe((0,h.pQ)(this.#n)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateAccount.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.#e.markForCheck(),this.#i.close()})})}displayFn(e){return e?`${e.no} - ${e.name}`:"Sin Padre"}onSelectAccount(e){const{id:o}=e.option.value;this.accountForm.get("parentId").setValue(o)}static#c=this.\u0275fac=function(o){return new(o||n)(t.rXU(C.Vh))};static#l=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-account-dialog"]],standalone:!0,features:[t.aNF],decls:7,vars:4,consts:[["auto","matAutocomplete"],[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",1,"text-2xl"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-between","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"flex","flex-col","gap-6"],[1,"fuse-mat-dense",3,"subscriptSizing"],["matInput","","placeholder","Elemento padre","aria-label","Elemento padre",3,"formControlName","type","matAutocomplete"],[3,"optionSelected","displayWith"],[3,"value"],["matInput","","required","",3,"formControlName","type","placeholder","maxLength"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],[1,"fuse-mat-dense"],["required","",3,"formControlName","placeholder"],["value","acreedora"],["value","deudora"],["value","mixta"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass"],["mat-flat-button","",3,"click","color","disabled","ngClass"]],template:function(o,i){1&o&&(t.j41(0,"div",1)(1,"div",2),t.DNE(2,Ct,2,0,"h2",3)(3,Ft,2,0,"h2",3),t.k0s(),t.j41(4,"div",4),t.DNE(5,$t,38,28,"div",5),t.k0s(),t.DNE(6,Gt,5,3,"div",6),t.k0s()),2&o&&(t.R7$(2),t.vxM(2,"add"===i.dialogMode?2:-1),t.R7$(),t.vxM(3,"edit"===i.dialogMode?3:-1),t.R7$(2),t.vxM(5,"view"!==i.dialogMode?5:-1),t.R7$(),t.vxM(6,"view"!==i.data.dialogMode?6:-1))},dependencies:[v.Jj,j.jL,j.$3,M.wT,j.pN,g.Hl,g.$z,C.tx,C.BI,p.RG,p.rl,p.nJ,p.TL,l.m_,A.fS,A.fg,M.Sy,M.pZ,F.Ve,F.VO,E.mV,v.YU,s.X1,s.qT,s.me,s.BC,s.cb,s.YS,s.j4,s.JD],encapsulation:2,changeDetection:0})}return n})();function wt(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-slide-toggle",45),t.bIt("change",function(i){t.eBV(e);const a=t.XpG().$implicit,f=t.XpG(2);return t.Njj(f.updateAccountStatus(i,a,a.item.id))}),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("checked",e.item.active)("color","primary")}}function Nt(n,r){1&n&&t.nrm(0,"mat-spinner",40),2&n&&t.Y8G("diameter",20)("color","primary")}function Dt(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-tree-node",30),t.bIt("mouseenter",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.mouseEnterLeave(i.item.id))})("mouseleave",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.mouseEnterLeave(i.item.id))})("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.mouseOver(i.item.id))})("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.dobleClick(i))}),t.j41(1,"div",31)(2,"button",32),t.nrm(3,"mat-icon",33),t.k0s()(),t.j41(4,"div",34)(5,"span",35),t.EFF(6),t.k0s()(),t.j41(7,"div",31)(8,"span",36),t.EFF(9),t.k0s()(),t.j41(10,"div",37),t.EFF(11),t.nI1(12,"titlecase"),t.k0s(),t.j41(13,"div",37),t.EFF(14),t.k0s(),t.j41(15,"div",38),t.DNE(16,wt,1,2,"mat-slide-toggle",39)(17,Nt,1,2,"mat-spinner",40),t.k0s(),t.j41(18,"div",41)(19,"button",42),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.createAccount(i))}),t.nrm(20,"mat-icon",33),t.k0s(),t.j41(21,"button",43),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.editAccount(i))}),t.nrm(22,"mat-icon",33),t.k0s(),t.j41(23,"button",44),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.removeAccount(i.item.id))}),t.nrm(24,"mat-icon",33),t.k0s()()()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.R7$(2),t.Y8G("disabled",0===o.flatNodeMap.get(e).children.length),t.BMQ("aria-label","Expandir "+e.item.name),t.R7$(),t.Y8G("svgIcon",o.treeControl.isExpanded(e)?"mat_solid:expand_more":"mat_solid:chevron_right"),t.R7$(3),t.JRh(e.item.no),t.R7$(3),t.JRh(e.item.name),t.R7$(2),t.SpI(" ",t.bMT(12,14,e.item.type)," "),t.R7$(3),t.SpI(" ",o.flatNodeMap.get(e).children.length," "),t.R7$(2),t.vxM(16,o.isLoading&&o.selectedSlide===e.item.id?-1:16),t.R7$(),t.vxM(17,o.isLoading&&o.selectedSlide===e.item.id?17:-1),t.R7$(2),t.Y8G("disabled",e.item.parentId),t.R7$(),t.Y8G("svgIcon","mat_solid:add"),t.R7$(2),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(),t.Y8G("disabled",e.item.hasChild),t.R7$(),t.Y8G("svgIcon","mat_solid:delete")}}function Mt(n,r){if(1&n&&(t.j41(0,"div",25),t.nrm(1,"div"),t.j41(2,"div",26),t.EFF(3," No. "),t.k0s(),t.j41(4,"div",27),t.EFF(5," Nombre "),t.k0s(),t.j41(6,"div",26),t.EFF(7," Naturaleza "),t.k0s(),t.j41(8,"div",26),t.EFF(9," Subcuentas "),t.k0s(),t.j41(10,"div",26),t.EFF(11," Estado "),t.k0s(),t.j41(12,"div",26),t.EFF(13," Acciones "),t.k0s()(),t.j41(14,"mat-tree",28),t.DNE(15,Dt,25,16,"mat-tree-node",29),t.k0s()),2&n){const e=t.XpG();t.R7$(14),t.Y8G("dataSource",e.dataSource)("treeControl",e.treeControl)}}function Xt(n,r){1&n&&(t.j41(0,"div",46),t.EFF(1," \xa1No se ha creado ninguna cuenta a\xfan! "),t.k0s())}let Yt=(()=>{class n{#t;#e;#n;#i;#a;#o;#r;#s;constructor(){this.accounts=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new it.CB(!0),this.isLoading=!1,this.selectedSlide=null,this.dialog=(0,t.WQX)(C.bZ),this.#t=(0,t.WQX)(V.u),this.#e=(0,t.WQX)(t.gRc),this.#n=(0,t.WQX)(t.abz),this.#i=(0,t.WQX)(vt.V),this.#a=(0,t.WQX)(m.G),this.#o=(0,t.WQX)(b.F),this.#r=(0,t.WQX)(G.UG),this.#s=(0,t.WQX)(y.il),this.getLevel=e=>e.level,this.isExpandable=e=>e.expandable,this.getChildren=e=>e.children,this.hasChild=(e,o)=>o.expandable,this.hasNoContent=(e,o)=>""===o.item.name,this.transformer=(e,o)=>{const i=this.nestedNodeMap.get(e),a=i&&i.item===e.item?i:new nt;return a.item=e.item,a.level=o,a.expandable=!!e.children?.length,this.flatNodeMap.set(a,e),this.nestedNodeMap.set(e,a),a},this.treeFlattener=new B.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new ot.XW(this.getLevel,this.isExpandable),this.dataSource=new B.zw(this.treeControl,this.treeFlattener)}ngOnInit(){this.#s.select(J.N8).pipe((0,h.pQ)(this.#n)).subscribe(({accountsNodes:o})=>{this.dataSource.data=o,this.#e.markForCheck()}),this.#o.onMediaChange$.pipe((0,h.pQ)(this.#n)).subscribe(({matchingAliases:e})=>{this.isScreenSmall=!e.includes("md")})}createAccount(e){e?this.#c(null,e.item.id,"add"):this.#c(null,null,"add")}editAccount(e){let o=this.accounts.find(i=>i.id===e.item.parentId);o=void 0===o?null:o,this.#c(e.item,e.item.parentId,"edit")}updateAccountStatus(e,o,i){this.isLoading=!0,this.selectedSlide=i,this.#t.updateAccountStatus({active:e.checked,id:o.item.id}).pipe((0,h.pQ)(this.#n)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateAccountStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this.#e.markForCheck()}),this.#e.markForCheck()}removeAccount(e){this.#a.open({title:"Eliminar cuenta",message:"\xbfEsta seguro que desea eliminar esta cuenta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#t.removeAccount(e).pipe((0,h.pQ)(this.#n)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeAccount.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.#e.markForCheck()})})}mouseEnterLeave(e){this.selectedAccountId=e===this.selectedAccountId?"":e}mouseOver(e){this.overAccountId=e===this.overAccountId?"":e}dobleClick(e){this.treeControl.isExpanded(e)?this.treeControl.collapse(e):this.treeControl.expand(e)}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}#c(e,o=null,i){this.dialog.open(St,{data:{account:e,parentId:o,dialogMode:i},disableClose:!0,panelClass:"ath-nrp-dialog-panel"})}static#l=this.\u0275fac=function(o){return new(o||n)};static#d=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-accounts"]],standalone:!0,features:[t.aNF],decls:42,vars:6,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","flex-row-reverse","flex-wrap","items-center","mt-2","lg:justify-end","sm:flex-row","lg:mt-0","shrink-0","lg:ml-4"],["mat-raised-button","",1,"text-white","lg:ml-4","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_solid:unfold_less"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_solid:unfold_more"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","accounts-tree-nodes","xl:pr-8","text-md","text-secondary","bg-gray-50","dark:bg-gray-900"],[1,"text-center"],[1,""],[3,"dataSource","treeControl"],["matTreeNodePadding","","class","grid accounts-tree-nodes gap-4 relative cursor-pointer py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"mouseenter","mouseleave","click",4,"matTreeNodeDef"],["matTreeNodePadding","",1,"grid","accounts-tree-nodes","gap-4","relative","cursor-pointer","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"mouseenter","mouseleave","click"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],["mat-icon-button","","matTreeNodeToggle","","color","primary",3,"disabled"],[1,"icon-size-5",3,"svgIcon"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center","justify-center"],[1,"cursor-default"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"text-center"],[1,"flex","items-center","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right"],["mat-stroked-button","","matTooltip","Agregar Subcuenta",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],["mat-stroked-button","","matTooltip","Editar Cuenta",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Eliminar Cuenta",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"a",6),t.EFF(8,"Inicio"),t.k0s()(),t.j41(9,"div",5),t.nrm(10,"mat-icon",7),t.j41(11,"a",8),t.EFF(12,"Contabilidad"),t.k0s()(),t.j41(13,"div",5),t.nrm(14,"mat-icon",7),t.j41(15,"a",8),t.EFF(16,"Libro de Cuentas"),t.k0s()()(),t.j41(17,"div",9)(18,"a",10),t.nrm(19,"mat-icon",7),t.j41(20,"span",11),t.EFF(21,"Regresar"),t.k0s()()()(),t.j41(22,"div",12)(23,"div",13),t.EFF(24," Libro de Cuentas "),t.k0s()()(),t.j41(25,"div",14)(26,"button",15),t.bIt("click",function(){return i.createAccount(null)}),t.nrm(27,"mat-icon",16),t.j41(28,"span",17),t.EFF(29,"Nueva"),t.k0s()(),t.j41(30,"button",18),t.bIt("click",function(){return i.collapseAll()}),t.nrm(31,"mat-icon",19),t.j41(32,"span",20),t.EFF(33,"Contraer"),t.k0s()(),t.j41(34,"button",21),t.bIt("click",function(){return i.expandAll()}),t.nrm(35,"mat-icon",22),t.j41(36,"span",20),t.EFF(37,"Expandir"),t.k0s()()()(),t.j41(38,"div",23)(39,"div",24),t.DNE(40,Mt,16,2)(41,Xt,2,0),t.k0s()()()()),2&o&&(t.R7$(10),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(8),t.Y8G("svgIcon","mat_solid:add"),t.R7$(13),t.vxM(40,i.dataSource.data&&i.dataSource.data.length>0?40:41))},dependencies:[_.uv,g.Hl,g.$z,g.iY,l.m_,l.An,S.D6,S.LG,E.mV,E.sG,L.uc,L.oV,B.jH,B.yI,B.yF,B.pO,B.lQ,B.d6,k.Wk,v.PV],styles:[".accounts-tree-nodes[_ngcontent-%COMP%]{grid-template-columns:20px 60px 300px 100px 100px 80px 150px}@media (min-width: 960px){.accounts-tree-nodes[_ngcontent-%COMP%]{grid-template-columns:20px 60px 300px 100px 100px 100px 150px}}"],changeDetection:0})}return n})();var w=c(96695),$=c(2042),z=c(21413),at=c(57786),d=c(56977),I=c(25558),mt=c(61911),st=c(47413),ut=c(63729),Qt=c(70819),zt=c(25941),U=c(88007),Lt=c(91401);const rt=(n,r)=>r.id;function Vt(n,r){1&n&&(t.j41(0,"h2",2),t.EFF(1," Agregar Cuenta Bancaria "),t.k0s())}function Wt(n,r){1&n&&(t.j41(0,"h2",2),t.EFF(1," Editar Cuenta Bancaria "),t.k0s())}function Pt(n,r){if(1&n&&(t.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),t.EFF(6,"Nombre"),t.k0s(),t.j41(7,"span",12),t.EFF(8),t.k0s()()()()()()),2&n){const e=t.XpG();t.R7$(8),t.JRh(e.data.bank.name||"Sin nombre")}}function Jt(n,r){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function Ut(n,r){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.iso)}}function Ot(n,r){if(1&n&&(t.j41(0,"mat-option",18),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme("",e.no," - ",e.name,"")}}function qt(n,r){if(1&n&&(t.j41(0,"mat-optgroup",22),t.Z7z(1,Ot,2,3,"mat-option",18,t.fX1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("label",e.name),t.R7$(),t.Dyx(e.children)}}function Zt(n,r){if(1&n&&(t.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),t.EFF(5,"Nombre"),t.k0s(),t.nrm(6,"input",16),t.k0s(),t.j41(7,"mat-form-field",15)(8,"mat-label"),t.EFF(9,"Banco"),t.k0s(),t.j41(10,"mat-select",17),t.Z7z(11,Jt,2,2,"mat-option",18,rt),t.k0s()(),t.j41(13,"mat-form-field",15)(14,"mat-label"),t.EFF(15,"N\xfamero de cuenta"),t.k0s(),t.nrm(16,"input",19),t.k0s(),t.j41(17,"mat-form-field",15)(18,"mat-label"),t.EFF(19,"Beneficiario"),t.k0s(),t.nrm(20,"input",20),t.k0s(),t.j41(21,"mat-form-field",15)(22,"mat-label"),t.EFF(23,"Moneda"),t.k0s(),t.j41(24,"mat-select",17),t.Z7z(25,Ut,2,2,"mat-option",18,rt),t.k0s()(),t.j41(27,"mat-form-field",15)(28,"mat-label"),t.EFF(29,"Cuenta Contable"),t.k0s(),t.j41(30,"mat-select",21),t.Z7z(31,qt,3,1,"mat-optgroup",22,rt),t.k0s(),t.j41(33,"mat-hint"),t.EFF(34,"Cuenta contable asociada a la moneda"),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(2),t.Y8G("formGroup",e.bankAccountForm)("autocomplete","off"),t.R7$(4),t.Y8G("formControlName","name")("placeholder","Nombre de la cuenta"),t.R7$(4),t.Y8G("formControlName","bankId")("placeholder","Seleccione un banco"),t.R7$(),t.Dyx(e.banks),t.R7$(5),t.Y8G("formControlName","no")("placeholder","0000 0000 0000 0000"),t.R7$(4),t.Y8G("formControlName","beneficiary"),t.R7$(4),t.Y8G("formControlName","currencyId")("placeholder","Seleccione una moneda"),t.R7$(),t.Dyx(e.currencies),t.R7$(5),t.Y8G("formControlName","accountId")("placeholder","Seleccione una cuenta"),t.R7$(),t.Dyx(e.accounts)}}function Ht(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updateBankAccount())}),t.EFF(1," Actualizar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("disabled",e.bankAccountForm.invalid)}}function Kt(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.createBankAccount())}),t.EFF(1," Agregar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("disabled",e.bankAccountForm.invalid)}}function te(n,r){if(1&n&&(t.j41(0,"div",6)(1,"button",23),t.EFF(2," Cancelar "),t.k0s(),t.DNE(3,Ht,2,2,"button",24)(4,Kt,2,2,"button",24),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("matDialogClose","cancelled"),t.R7$(2),t.vxM(3,"edit"===e.data.dialogMode?3:-1),t.R7$(),t.vxM(4,"add"===e.data.dialogMode?4:-1)}}let ee=(()=>{class n{#t;#e;#n;#i;#a;#o;#r;#s;constructor(e){this.data=e,this.dialogMode="view",this.#t=(0,t.WQX)(U.S),this.#e=(0,t.WQX)(t.gRc),this.#n=(0,t.WQX)(C.CP),this.#i=(0,t.WQX)(s.ok),this.#a=(0,t.WQX)(m.G),this.#o=(0,t.WQX)(G.UG),this.#r=(0,t.WQX)(y.il),this.#s=new z.B,this.dialogMode=e.dialogMode,this.bankAccount=e.bankAccount}ngOnInit(){this.bankAccountForm=this.#i.group({id:[null],name:[null,[s.k0.required,s.k0.minLength(3),s.k0.maxLength(255)]],bankId:[null,[s.k0.required]],no:[null,[s.k0.required,s.k0.minLength(3),s.k0.maxLength(20)]],beneficiary:[null,[s.k0.minLength(3),s.k0.maxLength(255)]],currencyId:[null,[s.k0.required]],accountId:[null]}),this.#r.select(J.N8).pipe((0,d.Q)(this.#s)).subscribe(({accounts:e})=>{this.accounts=e,console.log(e),this.#e.markForCheck()}),this.#r.select(zt._S).pipe((0,d.Q)(this.#s)).subscribe(e=>{this.banks=e,this.#e.markForCheck()}),this.#r.select(Lt.y$).pipe((0,d.Q)(this.#s)).subscribe(e=>{this.currencies=e,this.#e.markForCheck()}),"edit"===this.dialogMode&&(console.log(this.bankAccount),this.bankAccountForm.patchValue(this.bankAccount))}ngOnDestroy(){this.#s.next(null),this.#s.complete()}closeDialog(){this.#n.close()}createBankAccount(){const e=this.bankAccountForm.getRawValue();delete e.id,this.#a.open({title:"Crear banco",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.Q)(this.#s)).subscribe(i=>{"confirmed"===i&&this.#t.createBankAccount(e).pipe((0,d.Q)(this.#s)).subscribe(({data:a})=>{a&&this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.createBankAccount.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#e.markForCheck(),this.#n.close()})})}updateBankAccount(){const e=this.bankAccountForm.getRawValue();delete e.slug,this.#a.open({title:"Actualizar banco",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#t.updateBankAccount(e).pipe((0,d.Q)(this.#s)).subscribe(({data:a})=>{a&&(this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateBankAccount.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#e.markForCheck(),this.#n.close())}),this.#e.markForCheck()})}static#c=this.\u0275fac=function(o){return new(o||n)(t.rXU(C.Vh))};static#l=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-bankAccount-dialog"]],standalone:!0,features:[t.aNF],decls:8,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-between","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col","pt-3"],[1,"grid","w-full","grid-cols-1","gap-3","sm:grid-cols-2",3,"formGroup","autocomplete"],[1,"fuse-mat-dense"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName","placeholder"],[3,"value"],["matInput","","type","text","required","","maxlength","20",3,"formControlName","placeholder"],["matInput","","type","text","required","","maxlength","20",3,"formControlName"],[3,"formControlName","placeholder"],[3,"label"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,Vt,2,0,"h2",2)(3,Wt,2,0,"h2",2),t.k0s(),t.j41(4,"div",3),t.DNE(5,Pt,9,1,"div",4)(6,Zt,35,13,"div",5),t.k0s(),t.DNE(7,te,5,3,"div",6),t.k0s()),2&o&&(t.R7$(2),t.vxM(2,"add"===i.data.dialogMode?2:-1),t.R7$(),t.vxM(3,"edit"===i.data.dialogMode?3:-1),t.R7$(2),t.vxM(5,"view"===i.data.dialogMode?5:-1),t.R7$(),t.vxM(6,6),t.R7$(),t.vxM(7,"view"!==i.data.dialogMode?7:-1))},dependencies:[g.Hl,g.$z,C.tx,p.RG,p.rl,p.nJ,p.MV,l.m_,A.fS,A.fg,F.Ve,F.VO,M.wT,M.D7,s.X1,s.qT,s.me,s.BC,s.cb,s.YS,s.tU,s.j4,s.JD],encapsulation:2})}return n})();class ne{}const oe=(n,r)=>r.id,ie=n=>({"pointer-events-none":n}),ae=()=>[5,10,25,100];function se(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-slide-toggle",37),t.bIt("change",function(i){t.eBV(e);const a=t.XpG(),f=a.$implicit,x=a.$index,lt=t.XpG(2);return t.Njj(lt.updateBankAccountStatus(i,f,x))}),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("checked",e.active)("color","primary")}}function re(n,r){1&n&&t.nrm(0,"mat-spinner",32),2&n&&t.Y8G("diameter",20)("color","primary")}function ce(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"div",27),t.EFF(2),t.k0s(),t.j41(3,"div",28)(4,"div",29),t.EFF(5),t.k0s()(),t.j41(6,"div",28)(7,"div",29),t.EFF(8),t.k0s()(),t.j41(9,"div",28)(10,"div",29),t.EFF(11),t.k0s()(),t.j41(12,"div",28)(13,"div",29),t.EFF(14),t.nI1(15,"number"),t.k0s()(),t.j41(16,"div",30),t.DNE(17,se,1,2,"mat-slide-toggle",31)(18,re,1,2,"mat-spinner",32),t.k0s(),t.j41(19,"div",33)(20,"button",34),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.updateBankAccount(i))}),t.nrm(21,"mat-icon",35),t.k0s(),t.j41(22,"button",36),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteBankAccount(i))}),t.nrm(23,"mat-icon",35),t.k0s()()()}if(2&n){const e=r.$implicit,o=r.$index,i=t.XpG(2);t.R7$(2),t.SpI(" ",e.name," "),t.R7$(3),t.JRh(e.no),t.R7$(3),t.JRh(e.beneficiary),t.R7$(3),t.JRh((null==e.bank?null:e.bank.abbr)||""),t.R7$(3),t.Lme("",t.i5U(15,10,e.balance,"1.2-2")," ",(null==e.currency?null:e.currency.iso)||"",""),t.R7$(3),t.vxM(17,i.isLoading&&i.selectedSlide===o?-1:17),t.R7$(),t.vxM(18,i.isLoading&&i.selectedSlide===o?18:-1),t.R7$(3),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(2),t.Y8G("svgIcon","mat_solid:delete")}}function le(n,r){if(1&n&&(t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.EFF(3,"Nombre"),t.k0s(),t.j41(4,"div",22),t.EFF(5," N\xfamero de Cuenta "),t.k0s(),t.j41(6,"div",22),t.EFF(7," Beneficiario "),t.k0s(),t.j41(8,"div",22),t.EFF(9," Banco "),t.k0s(),t.j41(10,"div",22),t.EFF(11," Moneda "),t.k0s(),t.j41(12,"div",23),t.EFF(13," Activo "),t.k0s(),t.j41(14,"div",24),t.EFF(15,"Acciones"),t.k0s()(),t.Z7z(16,ce,24,13,"div",25,oe),t.k0s(),t.nrm(18,"mat-paginator",26)),2&n){const e=t.XpG();t.R7$(2),t.Y8G("mat-sort-header","name"),t.R7$(14),t.Dyx(e.bankAccounts),t.R7$(2),t.Y8G("ngClass",t.eq3(7,ie,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.lJ4(9,ae))("showFirstLastButtons",!0)}}function de(n,r){1&n&&(t.j41(0,"div",38),t.EFF(1,"\xa1No se ha creado ninguna cuenta bancaria!"),t.k0s())}let me=(()=>{class n{constructor(){this.bankAccounts=[],this.flashMessage=null,this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.merchantInputControl=new s.MJ,this.searchInputControl=new s.MJ,this.selectedSlide=null,this.user=null,this.#t=new z.B,this.#e=(0,t.WQX)(U.S),this.#n=(0,t.WQX)(m.G),this.#i=(0,t.WQX)(t.gRc),this.#a=(0,t.WQX)(C.bZ),this.#o=(0,t.WQX)(G.UG),this.store=(0,t.WQX)(y.il)}#t;#e;#n;#i;#a;#o;ngOnInit(){this.store.select(ut.SW).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.user=e,this.#i.markForCheck()}),this.store.select(Qt.Xb).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.merchant=e,this.#i.markForCheck()}),this.store.select(mt.b4).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.bankAccounts=e,this.#i.markForCheck()}),this.store.select(st.D).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.pagination=e,this.#i.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,d.Q)(this.#t),(0,P.B)(300),(0,I.n)(e=>(this.isLoading=!0,this.#e.getBankAccounts(this.pagination.page,this.pagination.size,this._sort.active,this._sort.direction,e))),(0,X.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this.#i.markForCheck(),this._sort.sortChange.pipe((0,d.Q)(this.#t)).subscribe(()=>{this._paginator.pageIndex=0}),(0,at.h)(this._sort.sortChange,this._paginator.page).pipe((0,I.n)(()=>(this.isLoading=!0,this.#e.getBankAccounts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,X.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this.#t.next(null),this.#t.complete()}createBankAccount(){this.#r(new ne,"add")}updateBankAccount(e){this.#r(e,"edit")}updateBankAccountStatus(e,o,i){this.isLoading=!0,this.selectedSlide=i,this.#e.updateBankAccountStatus({id:o.id,active:e.checked}).subscribe(({data:a})=>{this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateBankAccountStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this.#i.markForCheck()})}deleteBankAccount(e){this.#n.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la cuenta bancaria: ${e.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.Q)(this.#t)).subscribe(i=>{"confirmed"===i&&this.#e.removeBankAccount(e.id).pipe((0,d.Q)(this.#t)).subscribe(({data:a})=>{a&&(this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeBankAccount.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck())})})}#r(e,o){this.#a.open(ee,{data:{bankAccount:e,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#s=this.\u0275fac=function(o){return new(o||n)};static#c=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-bankAccount-accounts"]],viewQuery:function(o,i){if(1&o&&(t.GBs(w.iy,5),t.GBs($.B4,5)),2&o){let a;t.mGM(a=t.lsd())&&(i._paginator=a.first),t.mGM(a=t.lsd())&&(i._sort=a.first)}},standalone:!0,features:[t.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","bank-accounts-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-left","md:block"],[1,"hidden","mr-4","text-center","lg:block"],[1,"hidden","sm:block"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","bank-accounts-grid","md:px-8"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",5),t.nrm(8,"mat-icon",6),t.j41(9,"a",7),t.EFF(10,"Contabilidad"),t.k0s()(),t.j41(11,"div",5),t.nrm(12,"mat-icon",6),t.j41(13,"a",7),t.EFF(14,"Cuentas Bancarias"),t.k0s()()(),t.j41(15,"div",8)(16,"h2",9),t.EFF(17," Cuentas Bancarias "),t.k0s()()(),t.j41(18,"div",10)(19,"mat-form-field",11),t.nrm(20,"mat-icon",12)(21,"input",13),t.k0s(),t.j41(22,"button",14),t.bIt("click",function(){return i.createBankAccount()}),t.nrm(23,"mat-icon",15),t.j41(24,"span",16),t.EFF(25,"Agregar"),t.k0s()()()(),t.j41(26,"div",17)(27,"div",18),t.DNE(28,le,19,10)(29,de,2,0),t.k0s()()()),2&o&&(t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),t.R7$(2),t.Y8G("svgIcon","mat_solid:add"),t.R7$(5),t.vxM(28,i.bankAccounts.length>0?28:29))},dependencies:[v.QX,s.YN,s.me,s.BC,g.Hl,g.$z,p.RG,p.rl,p.JW,l.m_,l.An,A.fS,A.fg,w.Ou,w.iy,S.D6,S.LG,E.mV,E.sG,$.NQ,$.B4,$.aE,v.YU,s.X1,s.l_,k.Wk],styles:[".bank-accounts-grid{grid-template-columns:200px 200px auto 200px 100px 100px 100px}\n"],encapsulation:2,changeDetection:0})}return n})();const pt=n=>n.transactions,O=((0,y.Mz)(pt,n=>n.transaction),(0,y.Mz)(pt,n=>n.transactions));var q=c(25084),Y=c(96697),R=c(88141),T=c(73512),Z=c(14958);const ue=T.J1`
    mutation CreateTransaction($createTransactionInput: CreateTransactionInput!) {
        createTransaction(createTransactionInput: $createTransactionInput) {
            ok,
            message,

            transaction {
                id
                userId
                merchantId
                no
                type
                description
                amount
                fromBankAccountId
                toBankAccountId
                isAccounted
                date
                conceptId
                documentId
                documentType
                concept {
                    name
                }
                toBankAccount{
                    name
                    no
                }
                fromBankAccount{
                    name
                    no
                }
            }
        }
    }
`,pe=T.J1`
    query FindAllTransactions($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllTransactions(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            transactions {
                id
                userId
                merchantId
                no
                type
                description
                amount
                fromBankAccountId
                toBankAccountId
                isAccounted
                date
                conceptId
                documentId
                documentType
                concept {
                    name
                }
                toBankAccount{
                    name
                    no
                }
                fromBankAccount{
                    name
                    no
                }
            }
        }
    }
`,he=T.J1`
    mutation UpdateTransaction($updateTransactionInput: UpdateTransactionInput!) {
        updateTransaction(updateTransactionInput: $updateTransactionInput) {
            ok,
            message,

            transaction {
                id
                userId
                merchantId
                no
                type
                description
                amount
                fromBankAccountId
                toBankAccountId
                isAccounted
                date
                conceptId
                documentId
                documentType
                concept {
                    name
                }
                toBankAccount{
                    name
                    no
                }
                fromBankAccount{
                    name
                    no
                }
            }
        }
    }
`,ge=T.J1`
    mutation RemoveTransaction($transactionId: String!) {
        removeTransaction(id: $transactionId) {
            ok,
            message,
        }
    }
`;var ht=c(98216);let ct=(()=>{class n{#t;#e=(0,t.WQX)(T.Ic);#n=(0,t.WQX)(y.il);constructor(){this.#t=this.#e.use("BALANC")}createTransaction(e){return this.#n.select(O).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:ue,variables:{createTransactionInput:e},errorPolicy:"all"}).pipe((0,R.M)(({data:i})=>{let a=structuredClone(o);a.push(i.createTransaction.transaction),this.#n.dispatch((0,Z.As)({transactions:a}))}))))}findTransactions(e=0,o=20,i="code",a="asc",f=""){return this.#t.query({query:pe,errorPolicy:"all",variables:{page:e,size:o,sort:i,order:a,search:f}}).pipe((0,R.M)(({data:x})=>{this.#n.dispatch((0,ht.Bp)({pagination:x.findAllTransactions.pagination})),this.#n.dispatch((0,Z.As)({transactions:x.findAllTransactions.transactions}))}))}updateTransaction(e){return this.#n.select(O).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:he,variables:{updateTransactionInput:e},errorPolicy:"all"}).pipe((0,R.M)(({data:i})=>{const a=structuredClone(o),f=a.findIndex(x=>x.id==x.id);a[f]=i.updateTransaction.transaction,this.#n.dispatch((0,Z.As)({transactions:a}))}))))}removeTransaction(e){return this.#n.select(O).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:ge,variables:{transactionId:e},errorPolicy:"all"}).pipe((0,R.M)(()=>{const i=structuredClone(o),a=o.findIndex(f=>f.id===e);i.splice(a,1),this.#n.dispatch((0,Z.As)({transactions:i}))}))))}static#i=this.\u0275fac=function(o){return new(o||n)};static#a=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const H=(n,r)=>r.id;function fe(n,r){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function ke(n,r){if(1&n&&t.Z7z(0,fe,2,2,"mat-option",21,H),2&n){const e=t.XpG(2);t.Dyx(e.expenseAccounts)}}function ve(n,r){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function be(n,r){if(1&n&&t.Z7z(0,ve,2,2,"mat-option",21,H),2&n){const e=t.XpG(2);t.Dyx(e.incomeAccounts)}}function _e(n,r){if(1&n&&(t.j41(0,"mat-form-field",8)(1,"mat-label"),t.EFF(2,"Concepto"),t.k0s(),t.j41(3,"mat-select",20),t.DNE(4,ke,2,0)(5,be,2,0),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("formControlName","conceptId")("required",e.requireConcept)("placeholder","Seleccione el concepto"),t.R7$(),t.vxM(4,"gasto"===e.transactionForm.get("type").value?4:-1),t.R7$(),t.vxM(5,"ingreso"===e.transactionForm.get("type").value?5:-1)}}function xe(n,r){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function Ce(n,r){if(1&n&&(t.j41(0,"mat-form-field",8)(1,"mat-label"),t.EFF(2,"Cuenta de Origen"),t.k0s(),t.j41(3,"mat-select",22),t.Z7z(4,xe,2,2,"mat-option",21,H),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("formControlName","fromBankAccountId")("placeholder","Seleccione una cuenta")("required",e.requireFromBankAccountId),t.R7$(),t.Dyx(e.bankAccounts)}}function Fe(n,r){if(1&n&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(e.name)}}function Ae(n,r){if(1&n&&(t.j41(0,"mat-form-field",8)(1,"mat-label"),t.EFF(2,"Cuenta de Destino"),t.k0s(),t.j41(3,"mat-select",22),t.Z7z(4,Fe,2,2,"mat-option",21,H),t.k0s()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("formControlName","toBankAccountId")("placeholder","Seleccione una cuenta")("required",e.requireToBankAccountId),t.R7$(),t.Dyx(e.bankAccounts)}}function ye(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateTransaction())}),t.EFF(1," Actualizar "),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("color","primary")("disabled",e.transactionForm.invalid)}}function Ee(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createTransaction())}),t.EFF(1," Agregar "),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("color","primary")("disabled",e.transactionForm.invalid)}}let Ie=(()=>{class n{#t;#e;#n;#i;#a;#o;#r;#s;#c;constructor(e){this.data=e,this.dialogMode="add",this.requireConcept=!1,this.requireFromBankAccountId=!1,this.requireToBankAccountId=!0,this.#t=(0,t.WQX)(t.gRc),this.#e=(0,t.WQX)(t.abz),this.#n=(0,t.WQX)(C.CP),this.#i=(0,t.WQX)(s.ok),this.#a=(0,t.WQX)(m.G),this.#o=(0,t.WQX)(G.UG),this.#r=(0,t.WQX)(y.il),this.#s=(0,t.WQX)(ct),this.#c=new z.B,this.dialogMode=e.dialogMode,this.transaction=e.transaction}ngOnInit(){this.transactionForm=this.#i.group({id:new s.MJ(null),date:new s.MJ(null,[s.k0.required]),type:new s.MJ("ingreso",[s.k0.required]),conceptId:new s.MJ(null),description:new s.MJ(null,[s.k0.required,s.k0.maxLength(255)]),amount:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.maxLength(20)]),fromBankAccountId:new s.MJ(null),toBankAccountId:new s.MJ(null)}),this.#r.select(mt.b4).pipe((0,h.pQ)(this.#e)).subscribe(e=>{this.bankAccounts=e,this.fromBankAccounts=e,this.toBankAccounts=e,this.#t.markForCheck()}),this.#r.select(J.a_).pipe((0,h.pQ)(this.#e)).subscribe(({expenseAccounts:e,incomeAccounts:o})=>{this.expenseAccounts=e,this.incomeAccounts=o,this.#t.markForCheck()}),"edit"===this.dialogMode&&this.transactionForm.patchValue(this.transaction),this.transactionForm.get("type").valueChanges.pipe((0,h.pQ)(this.#e)).subscribe(e=>{this.toBankAccounts=this.bankAccounts,this.fromBankAccounts=this.bankAccounts,this.transactionForm.get("conceptId").reset(),this.transactionForm.get("fromBankAccountId").reset(),this.transactionForm.get("toBankAccountId").reset(),"transferencia"===e&&(this.requireConcept=!1,this.requireFromBankAccountId=!0,this.requireToBankAccountId=!0),"ingreso"===e&&(this.requireConcept=!0,this.requireFromBankAccountId=!1,this.requireToBankAccountId=!0),"gasto"===e&&(this.requireConcept=!0,this.requireFromBankAccountId=!0,this.requireToBankAccountId=!1),this.#t.markForCheck()}),this.transactionForm.get("fromBankAccountId").valueChanges.pipe((0,h.pQ)(this.#e)).subscribe(e=>{this.toBankAccounts=this.bankAccounts.filter(o=>o.id!==e),this.#t.markForCheck()}),this.transactionForm.get("toBankAccountId").valueChanges.pipe((0,h.pQ)(this.#e)).subscribe(e=>{this.fromBankAccounts=this.bankAccounts.filter(o=>o.id!==e),this.#t.markForCheck()})}ngOnDestroy(){this.#c.next(null),this.#c.complete()}closeDialog(){this.#n.close()}createTransaction(){const e=this.transactionForm.getRawValue();delete e.id,this.#a.open({title:"Crear transacci\xf3n",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,h.pQ)(this.#e)).subscribe(i=>{"confirmed"===i&&this.#s.createTransaction(e).pipe((0,h.pQ)(this.#e)).subscribe(({data:a})=>{a&&this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.createTransaction.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#t.markForCheck(),this.#n.close()})})}updateTransaction(){const e=this.transactionForm.getRawValue();delete e.slug,this.#a.open({title:"Actualizar transacci\xf3n",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#s.updateTransaction(e).pipe((0,h.pQ)(this.#e)).subscribe(({data:a})=>{a&&(this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateTransaction.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#t.markForCheck(),this.#n.close())}),this.#t.markForCheck()})}static#l=this.\u0275fac=function(o){return new(o||n)(t.rXU(C.Vh))};static#d=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-transaction-dialog"]],standalone:!0,features:[t.aNF],decls:43,vars:16,consts:[["picker",""],[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col","pt-3"],[1,"grid","w-full","grid-cols-1","gap-3","sm:grid-cols-2",3,"formGroup","autocomplete"],[1,"fuse-mat-dense"],["matInput","","required","",3,"matDatepicker","formControlName"],["matIconSuffix","",3,"for"],["required","",3,"formControlName"],["value","ingreso"],["value","gasto"],["value","transferencia"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","type","number","required","","maxlength","20",3,"formControlName"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-between","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],[3,"formControlName","required","placeholder"],[3,"value"],[3,"formControlName","placeholder","required"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,i){if(1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"h2",3),t.EFF(3),t.k0s()(),t.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"form",7)(8,"mat-form-field",8)(9,"mat-label"),t.EFF(10,"Fecha"),t.k0s(),t.nrm(11,"input",9),t.j41(12,"mat-hint"),t.EFF(13,"DD/MM/YYYY"),t.k0s(),t.nrm(14,"mat-datepicker-toggle",10)(15,"mat-datepicker",null,0),t.k0s(),t.j41(17,"mat-form-field",8)(18,"mat-label"),t.EFF(19,"Tipo"),t.k0s(),t.j41(20,"mat-select",11)(21,"mat-option",12),t.EFF(22,"Ingreso"),t.k0s(),t.j41(23,"mat-option",13),t.EFF(24,"Gasto"),t.k0s(),t.j41(25,"mat-option",14),t.EFF(26,"Transferencia"),t.k0s()()(),t.DNE(27,_e,6,5,"mat-form-field",8),t.j41(28,"mat-form-field",8)(29,"mat-label"),t.EFF(30,"Descripci\xf3n"),t.k0s(),t.nrm(31,"input",15),t.k0s(),t.j41(32,"mat-form-field",8)(33,"mat-label"),t.EFF(34,"Importe"),t.k0s(),t.nrm(35,"input",16),t.k0s(),t.DNE(36,Ce,6,3,"mat-form-field",8)(37,Ae,6,3,"mat-form-field",8),t.k0s()()()(),t.j41(38,"div",17)(39,"button",18),t.EFF(40," Cancelar "),t.k0s(),t.DNE(41,ye,2,2,"button",19)(42,Ee,2,2,"button",19),t.k0s()()),2&o){const a=t.sdS(16);t.R7$(3),t.SpI(" ","add"===i.data.dialogMode?"Agregar":"Editar"," Transacci\xf3n "),t.R7$(4),t.Y8G("formGroup",i.transactionForm)("autocomplete","off"),t.R7$(4),t.Y8G("matDatepicker",a)("formControlName","date"),t.R7$(3),t.Y8G("for",a),t.R7$(6),t.Y8G("formControlName","type"),t.R7$(7),t.vxM(27,"transferencia"!==i.transactionForm.get("type").value?27:-1),t.R7$(4),t.Y8G("formControlName","description")("placeholder","Descripci\xf3n de la transacci\xf3n"),t.R7$(4),t.Y8G("formControlName","amount"),t.R7$(),t.vxM(36,"gasto"===i.transactionForm.get("type").value||"transferencia"===i.transactionForm.get("type").value?36:-1),t.R7$(),t.vxM(37,"ingreso"===i.transactionForm.get("type").value||"transferencia"===i.transactionForm.get("type").value?37:-1),t.R7$(2),t.Y8G("matDialogClose","cancelled"),t.R7$(2),t.vxM(41,"edit"===i.data.dialogMode?41:-1),t.R7$(),t.vxM(42,"add"===i.data.dialogMode?42:-1)}},dependencies:[g.Hl,g.$z,q.X6,q.Vh,q.bZ,q.bU,C.tx,p.RG,p.rl,p.nJ,p.MV,p.yw,l.m_,A.fS,A.fg,F.Ve,F.VO,M.wT,s.X1,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.tU,s.j4,s.JD],encapsulation:2})}return n})();const Te=(n,r)=>r.id,je=n=>({"pointer-events-none":n}),$e=()=>[5,10,25,100],Re=(n,r,e)=>({"bg-green-600 text-black":n,"bg-red-600":r,"bg-blue-600":e});function Be(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"div",22),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"div",24),t.EFF(5),t.k0s(),t.j41(6,"div",22)(7,"span",27),t.EFF(8),t.nI1(9,"uppercase"),t.k0s()(),t.j41(10,"div",24),t.EFF(11),t.k0s(),t.j41(12,"div",22),t.EFF(13),t.nI1(14,"number"),t.k0s(),t.j41(15,"div",28),t.EFF(16),t.k0s(),t.j41(17,"div",29)(18,"button",30),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.updateTransaction(i))}),t.nrm(19,"mat-icon",31),t.k0s(),t.j41(20,"button",32),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteTransaction(i))}),t.nrm(21,"mat-icon",31),t.k0s()()()}if(2&n){const e=r.$implicit;t.R7$(2),t.SpI(" ",t.i5U(3,9,e.date,"dd/MM/yyyy")," "),t.R7$(3),t.SpI(" ",e.no," "),t.R7$(2),t.Y8G("ngClass",t.sMw(17,Re,"ingreso"===e.type,"gasto"===e.type,"transferencia"===e.type)),t.R7$(),t.SpI(" ",t.bMT(9,12,e.type)," "),t.R7$(3),t.SpI(" ",(null==e.concept?null:e.concept.name)||""," "),t.R7$(2),t.SpI(" ",t.i5U(14,14,e.amount,"1.2-2")," "),t.R7$(3),t.SpI(" ",e.description||""," "),t.R7$(3),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(2),t.Y8G("svgIcon","mat_solid:delete")}}function Ge(n,r){if(1&n&&(t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.EFF(3," Fecha "),t.k0s(),t.j41(4,"div",21),t.EFF(5," N\xfamero "),t.k0s(),t.j41(6,"div",22),t.EFF(7," Tipo "),t.k0s(),t.j41(8,"div",23),t.EFF(9," Concepto "),t.k0s(),t.j41(10,"div",22),t.EFF(11," Importe "),t.k0s(),t.j41(12,"div",23),t.EFF(13," Descripci\xf3n "),t.k0s(),t.j41(14,"div",24),t.EFF(15,"Acciones"),t.k0s()(),t.Z7z(16,Be,22,21,"div",25,Te),t.k0s(),t.nrm(18,"mat-paginator",26)),2&n){const e=t.XpG();t.R7$(2),t.Y8G("mat-sort-header","date"),t.R7$(2),t.Y8G("mat-sort-header","no"),t.R7$(12),t.Dyx(e.transactions),t.R7$(2),t.Y8G("ngClass",t.eq3(8,je,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.lJ4(10,$e))("showFirstLastButtons",!0)}}function Se(n,r){1&n&&(t.j41(0,"div",33),t.EFF(1," \xa1No se ha creado ninguna transacci\xf3n! "),t.k0s())}let we=(()=>{class n{constructor(){this.transactions=[],this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new s.MJ,this.selectedSlide=null,this.#t=new z.B,this.#e=(0,t.WQX)(ct),this.#n=(0,t.WQX)(m.G),this.#i=(0,t.WQX)(t.gRc),this.#a=(0,t.WQX)(C.bZ),this.#o=(0,t.WQX)(G.UG),this.store=(0,t.WQX)(y.il)}#t;#e;#n;#i;#a;#o;ngOnInit(){this.store.select(O).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.transactions=e,this.#i.markForCheck()}),this.store.select(st.D).pipe((0,d.Q)(this.#t)).subscribe(e=>{this.pagination=e,this.#i.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,d.Q)(this.#t),(0,P.B)(300),(0,I.n)(e=>(this.isLoading=!0,this.#e.findTransactions(this.pagination.page,this.pagination.size,this.sort.active,this.sort.direction,e))),(0,X.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this.sort&&this.paginator&&(this.sort.sort({id:"name",start:"asc",disableClear:!0}),this.#i.markForCheck(),this.sort.sortChange.pipe((0,d.Q)(this.#t)).subscribe(()=>{this.paginator.pageIndex=0}),(0,at.h)(this.sort.sortChange,this.paginator.page).pipe((0,I.n)(()=>(this.isLoading=!0,this.#e.findTransactions(this.paginator.pageIndex,this.paginator.pageSize,this.sort.active,this.sort.direction))),(0,X.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this.#t.next(null),this.#t.complete()}createTransaction(){this.#r(null,"add")}updateTransaction(e){this.#r(e,"edit")}deleteTransaction(e){this.#n.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la transacci\xf3n: ${e.no}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.Q)(this.#t)).subscribe(i=>{"confirmed"===i&&this.#e.removeTransaction(e.id).pipe((0,d.Q)(this.#t)).subscribe(({data:a})=>{a&&(this.#o.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeTransaction.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck())})})}#r(e,o){this.#a.open(Ie,{data:{transaction:e,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#s=this.\u0275fac=function(o){return new(o||n)};static#c=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-Transaction-accounts"]],viewQuery:function(o,i){if(1&o&&(t.GBs(w.iy,5),t.GBs($.B4,5)),2&o){let a;t.mGM(a=t.lsd())&&(i.paginator=a.first),t.mGM(a=t.lsd())&&(i.sort=a.first)}},standalone:!0,features:[t.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-800","hover:bg-gradient-to-bl",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","transactions-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"text-left"],[1,""],[1,"grid","items-center","gap-4","px-6","py-3","border-b","transactions-grid","md:px-8"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"px-2.5","py-1","rounded-full","text-xs","font-semibold","tracking-wide",3,"ngClass"],[1,"line-clamp-3"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",5),t.nrm(8,"mat-icon",6),t.j41(9,"a",7),t.EFF(10,"Contabilidad"),t.k0s()(),t.j41(11,"div",5),t.nrm(12,"mat-icon",6),t.j41(13,"a",7),t.EFF(14,"Transacciones"),t.k0s()()(),t.j41(15,"div",8)(16,"h2",9),t.EFF(17," Transacciones "),t.k0s()()(),t.j41(18,"div",10)(19,"mat-form-field",11),t.nrm(20,"mat-icon",12)(21,"input",13),t.k0s(),t.j41(22,"button",14),t.bIt("click",function(){return i.createTransaction()}),t.nrm(23,"mat-icon",15),t.j41(24,"span",16),t.EFF(25,"Agregar"),t.k0s()()()(),t.j41(26,"div",17)(27,"div",18),t.DNE(28,Ge,19,11)(29,Se,2,0),t.k0s()()()),2&o&&(t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),t.R7$(2),t.Y8G("svgIcon","mat_solid:add"),t.R7$(5),t.vxM(28,i.transactions.length>0?28:29))},dependencies:[v.vh,v.QX,s.YN,s.me,s.BC,g.Hl,g.$z,p.RG,p.rl,p.JW,l.m_,l.An,A.fS,A.fg,w.Ou,w.iy,S.D6,E.mV,$.NQ,$.B4,$.aE,v.YU,s.X1,s.l_,k.Wk,v.Pc],styles:[".transactions-grid{grid-template-columns:75px 120px 120px 250px 100px auto 100px}\n"],encapsulation:2,changeDetection:0})}return n})(),Ne=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-panel"]],standalone:!0,features:[t.aNF],decls:2,vars:0,template:function(o,i){1&o&&(t.j41(0,"p"),t.EFF(1,"panel works!"),t.k0s())},encapsulation:2})}return n})();const gt=(n,r)=>(0,t.WQX)(V.u).findAccountsNodes();var Xe=c(90377),Ye=c(23301);const ft=n=>n.entries,W=((0,y.Mz)(ft,n=>n.entry),(0,y.Mz)(ft,n=>n.entries));var Q=c(27554);const Ve=T.J1`
    mutation CreateEntry($createEntryInput: CreateEntryInput!) {
        createEntry(createEntryInput: $createEntryInput) {
            ok,
            message,

            entry {
                id
                active
                name
                description
                type
                annotations {
                    description
                    hasTo {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                    toHave {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                }
            }
        }
    }
`,We=T.J1`
    query FindAllEntries($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllEntries(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            entries {
                id
                active
                name
                description
                type
                annotations {
                    description
                    hasTo {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                    toHave {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                }
            }
        }
    }
`,Pe=T.J1`
    query FindActiveEntries {
        findActiveEntries {
            ok
            message

            entries {
                id
                active
                name
                description
                type
                annotations {
                    description
                    hasTo {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                    toHave {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                }
            }
        }
    }
`,Je=T.J1`
    query FindEntryById($findEntryByIdId: String!) {
        findEntryById(id: $findEntryByIdId) {
            ok
            message

            entry {
                id
                active
                name
                description
                type
                annotations {
                    description
                    hasTo {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                    toHave {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                }
            }
        }
    }
`,Ue=T.J1`
    mutation UpdateEntry($updateEntryInput: UpdateEntryInput!) {
        updateEntry(updateEntryInput: $updateEntryInput) {
            ok,
            message,

            entry {
                id
                active
                name
                description
                type
                annotations {
                    description
                    hasTo {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                    toHave {
                        accountId
                        percent
                        account {
                            name
                            no
                        }
                    }
                }
            }
        }
    }
`,Oe=T.J1`
    mutation UpdateEntryStatus($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateEntryStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok,
            message
        }
    }
`,qe=T.J1`
    mutation RemoveEntry($EntryId: String!) {
        removeEntry(id: $EntryId) {
            ok,
            message,
        }
    }
`;let K=(()=>{class n{#t;#e=(0,t.WQX)(T.Ic);#n=(0,t.WQX)(y.il);constructor(){this.#t=this.#e.use("BALANC")}createEntry(e){return this.#n.select(W).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:Ve,variables:{createEntryInput:e},errorPolicy:"all"}).pipe((0,R.M)(({data:i})=>{const a=structuredClone(o);a.push(i.createEntry.entry),this.#n.dispatch((0,Q.vT)({entries:a}))}))))}findAllEntries(e=0,o=20,i="code",a="asc",f=""){return this.#t.query({query:We,errorPolicy:"all",variables:{page:e,size:o,sort:i,order:a,search:f}}).pipe((0,R.M)(({data:x})=>{this.#n.dispatch((0,ht.Bp)({pagination:x.findAllEntries.pagination})),this.#n.dispatch((0,Q.vT)({entries:x.findAllEntries.entries}))}))}findActiveEntries(){return this.#t.query({query:Pe,errorPolicy:"all"}).pipe((0,R.M)(({data:e})=>{this.#n.dispatch((0,Q.vT)({entries:e.findActiveEntries.entries}))}))}findEntryById(e){return this.#t.query({query:Je,variables:{findEntryByIdId:e},errorPolicy:"all"}).pipe((0,R.M)(({data:o})=>{this.#n.dispatch((0,Q.RY)({entry:o.findEntryById.entry}))}))}updateEntry(e){return this.#n.select(W).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:Ue,variables:{updateEntryInput:e},errorPolicy:"all"}).pipe((0,R.M)(({data:i})=>{const a=structuredClone(o);a[o.findIndex(x=>x.id===e.id)]=i.updateEntry.entry,this.#n.dispatch((0,Q.vT)({entries:a}))}))))}updateEntriesStatus(e){return this.#n.select(W).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:Oe,variables:{updateEntityStatusInput:e},errorPolicy:"all"}).pipe((0,R.M)(()=>{const i=structuredClone(o);i[o.findIndex(f=>f.id===e.id)].active=e.active,this.#n.dispatch((0,Q.vT)({entries:i}))}))))}removeEntry(e){return this.#n.select(W).pipe((0,Y.s)(1),(0,I.n)(o=>this.#t.mutate({mutation:qe,variables:{removeEntryId:e},errorPolicy:"all"}).pipe((0,R.M)(({})=>{const a=structuredClone(o),f=o.findIndex(x=>x.id===e);a.splice(f,1),this.#n.dispatch((0,Q.vT)({entries:a}))}))))}static#i=this.\u0275fac=function(o){return new(o||n)};static#a=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ze=(n,r)=>r.id,He=n=>({"pointer-events-none":n}),Ke=()=>[5,10,25,100];function tn(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-slide-toggle",37),t.bIt("change",function(i){t.eBV(e);const a=t.XpG(),f=a.$implicit,x=a.$index,lt=t.XpG(2);return t.Njj(lt.updateEntriesStatus(i,f,x))}),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("checked",e.active)("color","primary")}}function en(n,r){1&n&&t.nrm(0,"mat-spinner",32),2&n&&t.Y8G("diameter",20)("color","primary")}function nn(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"div",27),t.EFF(2),t.k0s(),t.j41(3,"div",28)(4,"div",29),t.EFF(5),t.k0s()(),t.j41(6,"div",28),t.nrm(7,"div",29),t.k0s(),t.j41(8,"div",28),t.nrm(9,"div",29),t.k0s(),t.j41(10,"div",28),t.nrm(11,"div",29),t.k0s(),t.j41(12,"div",30),t.DNE(13,tn,1,2,"mat-slide-toggle",31)(14,en,1,2,"mat-spinner",32),t.k0s(),t.j41(15,"div",33)(16,"button",34),t.nrm(17,"mat-icon",35),t.k0s(),t.j41(18,"button",36),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.deleteEntry(i))}),t.nrm(19,"mat-icon",35),t.k0s()()()}if(2&n){const e=r.$implicit,o=r.$index,i=t.XpG(2);t.R7$(2),t.SpI(" ",e.name," "),t.R7$(3),t.JRh(e.description),t.R7$(8),t.vxM(13,i.isLoading&&i.selectedSlide===o?-1:13),t.R7$(),t.vxM(14,i.isLoading&&i.selectedSlide===o?14:-1),t.R7$(2),t.Y8G("routerLink",e.id),t.R7$(),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(2),t.Y8G("svgIcon","mat_solid:delete")}}function on(n,r){if(1&n&&(t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.EFF(3,"Nombre"),t.k0s(),t.j41(4,"div",22),t.EFF(5," Descripci\xf3n "),t.k0s(),t.j41(6,"div",22),t.EFF(7," Tipo "),t.k0s(),t.nrm(8,"div",22)(9,"div",22),t.j41(10,"div",23),t.EFF(11," Activo "),t.k0s(),t.j41(12,"div",24),t.EFF(13,"Acciones"),t.k0s()(),t.Z7z(14,nn,20,7,"div",25,Ze),t.k0s(),t.nrm(16,"mat-paginator",26)),2&n){const e=t.XpG();t.R7$(2),t.Y8G("mat-sort-header","name"),t.R7$(12),t.Dyx(e.entries),t.R7$(2),t.Y8G("ngClass",t.eq3(7,He,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.lJ4(9,Ke))("showFirstLastButtons",!0)}}function an(n,r){1&n&&(t.j41(0,"div",38),t.EFF(1," \xa1No se ha creado ning\xfan asiento tipo! "),t.k0s())}const kt=n=>({"cursor-not-allowed":n});function ln(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createEntry())}),t.nrm(1,"mat-icon",27),t.j41(2,"span",28),t.EFF(3,"Guardar"),t.k0s()()}if(2&n){const e=t.XpG();t.Y8G("disabled",e.entryForm.invalid)("ngClass",t.eq3(3,kt,e.entryForm.invalid)),t.R7$(),t.Y8G("svgIcon","mat_solid:save")}}function dn(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateEntry())}),t.nrm(1,"mat-icon",27),t.j41(2,"span",28),t.EFF(3,"Actualizar"),t.k0s()()}if(2&n){const e=t.XpG();t.Y8G("disabled",e.entryForm.invalid)("ngClass",t.eq3(3,kt,e.entryForm.invalid)),t.R7$(),t.Y8G("svgIcon","mat_solid:refresh")}}function mn(n,r){if(1&n&&(t.j41(0,"mat-option",29),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.viewValue)}}const un=[{path:"",component:D,children:[{path:"panel",component:Ne,resolve:{}},{path:"accounts",component:Yt,resolve:{accounts:gt}},{path:"entries",component:(()=>{class n{constructor(){this.entries=[],this.flashMessage=null,this.isLoading=!1,this.isSlideLoading=!1,this.merchantInputControl=new s.MJ,this.searchInputControl=new s.MJ,this.selectedSlide=null,this.user=null,this.#t=(0,t.WQX)(t.gRc),this.#e=(0,t.WQX)(K),this.#n=(0,t.WQX)(m.G),this.#i=(0,t.WQX)(G.UG),this.#a=(0,t.WQX)(y.il),this.#o=new z.B}#t;#e;#n;#i;#a;#o;ngOnInit(){this.#a.select(ut.SW).pipe((0,d.Q)(this.#o)).subscribe(e=>{this.user=e,this.#t.markForCheck()}),this.#a.select(W).pipe((0,d.Q)(this.#o)).subscribe(e=>{this.entries=e,this.#t.markForCheck()}),this.#a.select(st.D).pipe((0,d.Q)(this.#o)).subscribe(e=>{this.pagination=e,this.#t.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,d.Q)(this.#o),(0,P.B)(300),(0,I.n)(e=>(this.isLoading=!0,this.#e.findAllEntries(this.pagination.page,this.pagination.size,this._sort.active,this._sort.direction,e))),(0,X.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this.#t.markForCheck(),this._sort.sortChange.pipe((0,d.Q)(this.#o)).subscribe(()=>{this._paginator.pageIndex=0}),(0,at.h)(this._sort.sortChange,this._paginator.page).pipe((0,I.n)(()=>(this.isLoading=!0,this.#e.findAllEntries(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,X.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this.#o.next(null),this.#o.complete()}updateEntriesStatus(e,o,i){this.isLoading=!0,this.selectedSlide=i,this.#e.updateEntriesStatus({id:o.id,active:e.checked}).subscribe(({data:a})=>{this.#i.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateEntriesStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this.#t.markForCheck()})}deleteEntry(e){this.#n.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el asiento tipo: ${e.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,d.Q)(this.#o)).subscribe(i=>{"confirmed"===i&&this.#e.removeEntry(e.id).pipe((0,d.Q)(this.#o)).subscribe(({data:a})=>{a&&(this.#i.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeEntry.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#t.markForCheck())})})}static#r=this.\u0275fac=function(o){return new(o||n)};static#s=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-entries"]],viewQuery:function(o,i){if(1&o&&(t.GBs(w.iy,5),t.GBs($.B4,5)),2&o){let a;t.mGM(a=t.lsd())&&(i._paginator=a.first),t.mGM(a=t.lsd())&&(i._sort=a.first)}},standalone:!0,features:[t.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","new",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","bank-accounts-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-left","md:block"],[1,"hidden","mr-4","text-center","lg:block"],[1,"hidden","sm:block"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","bank-accounts-grid","md:px-8"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",5),t.nrm(8,"mat-icon",6),t.j41(9,"a",7),t.EFF(10,"Contabilidad"),t.k0s()(),t.j41(11,"div",5),t.nrm(12,"mat-icon",6),t.j41(13,"a",7),t.EFF(14,"Asientos Tipo"),t.k0s()()(),t.j41(15,"div",8)(16,"h2",9),t.EFF(17," Asientos Tipo "),t.k0s()()(),t.j41(18,"div",10)(19,"mat-form-field",11),t.nrm(20,"mat-icon",12)(21,"input",13),t.k0s(),t.j41(22,"button",14),t.nrm(23,"mat-icon",15),t.j41(24,"span",16),t.EFF(25,"Agregar"),t.k0s()()()(),t.j41(26,"div",17)(27,"div",18),t.DNE(28,on,17,10)(29,an,2,0),t.k0s()()()),2&o&&(t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),t.R7$(2),t.Y8G("svgIcon","mat_solid:add"),t.R7$(5),t.vxM(28,i.entries.length>0?28:29))},dependencies:[s.YN,s.me,s.BC,g.Hl,g.$z,p.RG,p.rl,p.JW,l.m_,l.An,A.fS,A.fg,w.Ou,w.iy,S.D6,S.LG,E.mV,E.sG,$.NQ,$.B4,$.aE,v.YU,s.X1,s.l_,k.Wk],styles:[".entries-grid{grid-template-columns:200px 200px auto 200px 100px 100px 100px}\n"],encapsulation:2,changeDetection:0})}return n})(),resolve:{entries:(n,r)=>(0,t.WQX)(K).findAllEntries()}},{path:"entries/:entryId",component:(()=>{class n{constructor(){this.isLoading=!1,this.editMode=!1,this.entryId="new",this.selectedEntry=null,this.#t=(0,t.WQX)(k.nX),this.#e=(0,t.WQX)(t.gRc),this.#n=(0,t.WQX)(K),this.#i=(0,t.WQX)(s.ok),this.#a=(0,t.WQX)(m.G),this.#o=(0,t.WQX)(k.Ix),this.#r=(0,t.WQX)(G.UG),this.#s=new z.B,this.#c=(0,t.WQX)(y.il)}#t;#e;#n;#i;#a;#o;#r;#s;#c;ngOnInit(){this.entryForm=this.#i.group({id:new s.MJ(""),name:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),eventName:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),type:new s.MJ("",[s.k0.required]),description:new s.MJ("",[s.k0.required,s.k0.maxLength(255)]),annotations:new s.Yp([])})}ngOnDestroy(){this.#s.next(null),this.#s.complete()}createEntry(){const e=this.entryForm.getRawValue();delete e.id,this.#a.open({title:"Crear familia de asientos tipo",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#n.createEntry(e).pipe((0,d.Q)(this.#s)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:a.createEntry.message,type:"success",svgIcon:"mat_solid:done"}}),this.#o.navigateByUrl("/modules/accounting/entries")}),this.#e.markForCheck()})}updateEntry(){const e=this.entryForm.getRawValue();this.#a.open({title:"Actualizar asiento tipo",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.#n.updateEntry(e).pipe((0,d.Q)(this.#s)).subscribe(({data:a})=>{this.#r.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:a.updateEntry.message,type:"success",svgIcon:"mat_solid:done"}}),this.#o.navigateByUrl("/modules/accounting/entries")}),this.#e.markForCheck()})}static#l=this.\u0275fac=function(o){return new(o||n)};static#d=this.\u0275cmp=t.VBU({type:n,selectors:[["accounting-entry-details"]],standalone:!0,features:[t.aNF],decls:46,vars:17,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","gap-5","p-3","overflow-y-auto","bg-cover","sm:absolute","sm:inset-0","dark:bg-transparent"],[1,"z-20","flex","flex-col","bg-transparent","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-5"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/accounting/entries",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","items-center","mt-6","shrink-0","lg:mt-0","lg:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"disabled","ngClass"],[1,"flex","flex-auto"],[1,"flex","flex-col","w-full","p-4","space-y-5","rounded-md","shadow-md","bg-card","sm:p-6",3,"formGroup","autocomplete"],[1,"w-full","py-2","border-b"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-col","w-full","gap-3","md:flex-row"],[1,"flex","flex-col","w-full","md:w-1/2"],[1,"fuse-mat-dense"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"w-full","md:w-1/2"],[1,"w-full","fuse-mat-dense"],["matInput","","required","","maxlength","250","rows","8",3,"formControlName","placeholder"],[1,"flex","flex-col","w-full","space-y-3"],[1,"flex","flex-row","w-full","gap-3"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click","disabled","ngClass"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"value"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",5),t.nrm(9,"mat-icon",6),t.j41(10,"a",7),t.EFF(11,"Asientos Tipo"),t.k0s()(),t.j41(12,"div",5),t.nrm(13,"mat-icon",6),t.j41(14,"a",8),t.EFF(15),t.k0s()()()()(),t.j41(16,"div",9),t.DNE(17,ln,4,5,"button",10)(18,dn,4,5,"button",10),t.k0s()(),t.j41(19,"div",11)(20,"form",12)(21,"div",13)(22,"h2",14),t.EFF(23),t.k0s()(),t.j41(24,"div",15)(25,"div",16)(26,"mat-form-field",17)(27,"mat-label"),t.EFF(28,"Nombre"),t.k0s(),t.nrm(29,"input",18),t.k0s(),t.j41(30,"mat-form-field",17)(31,"mat-label"),t.EFF(32,"Nombre del evento"),t.k0s(),t.nrm(33,"input",18),t.k0s(),t.j41(34,"mat-form-field",17)(35,"mat-label"),t.EFF(36,"Tipo"),t.k0s(),t.j41(37,"mat-select",19),t.DNE(38,mn,2,2,"mat-option",20),t.k0s()()(),t.j41(39,"div",21)(40,"mat-form-field",22)(41,"mat-label"),t.EFF(42,"Descripci\xf3n"),t.k0s(),t.nrm(43,"textarea",23),t.k0s()()(),t.j41(44,"div",24),t.nrm(45,"div",25),t.k0s()()()()),2&o&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(2),t.SpI(" ","new"===i.entryId?"Crear Asiento Tipo":(null==i.selectedEntry?null:i.selectedEntry.name)||""," "),t.R7$(2),t.vxM(17,i.editMode?-1:17),t.R7$(),t.vxM(18,i.editMode?18:-1),t.R7$(2),t.Y8G("formGroup",i.entryForm)("autocomplete","off"),t.R7$(3),t.SpI(" ","new"===i.entryId?"Crear asiento tipo":(null==i.selectedEntry?null:i.selectedEntry.name)||""," "),t.R7$(6),t.Y8G("formControlName","name")("placeholder","Nombre del asiento"),t.R7$(4),t.Y8G("formControlName","eventName")("placeholder","Nombre del evento"),t.R7$(4),t.Y8G("formControlName","type")("placeholder","Seleccione un tipo"),t.R7$(),t.Y8G("ngForOf",i.entryTypes),t.R7$(5),t.Y8G("formControlName","description")("placeholder","Descripci\xf3n del asiento"))},dependencies:[j.jL,_.uv,M.wT,g.Hl,g.$z,p.RG,p.rl,p.nJ,l.m_,l.An,A.fS,A.fg,F.Ve,F.VO,L.uc,v.YU,s.X1,s.qT,s.me,s.BC,s.cb,s.YS,s.tU,s.j4,s.JD,k.Wk],encapsulation:2})}return n})(),resolve:{entry:(n,r)=>{const e=n.params.entryId;return e&&"new"!==e?(0,t.WQX)(K).findEntryById(e):{}},accounts:gt}},{path:"bank-accounts",component:me,resolve:{accounts:(n,r)=>(0,t.WQX)(V.u).findBankCashAccounts(),bankAccounts:(n,r)=>(0,t.WQX)(U.S).getBankAccounts(),banks:Xe._,currencies:Ye.I}},{path:"transactions",component:we,resolve:{bankAccounts:(n,r)=>(0,t.WQX)(U.S).findActiveBankAccounts(),transactions:(n,r)=>(0,t.WQX)(ct).findTransactions(),concepts:(n,r)=>(0,t.WQX)(V.u).findConceptsAccounts()}}]}]},19669:(tt,N,c)=>{c.d(N,{N8:()=>v,a_:()=>g});var k=c(59640);const t=l=>l.accounts,v=((0,k.Mz)(t,l=>l.account),(0,k.Mz)(t,l=>({accounts:l.accounts,accountsNodes:l.accountsNodes}))),g=((0,k.Mz)(t,l=>l.accountsNodes),(0,k.Mz)(t,l=>({expenseAccounts:l.expenseAccounts,incomeAccounts:l.incomeAccounts})))},25941:(tt,N,c)=>{c.d(N,{_S:()=>v});var k=c(59640);const t=_=>_.banks,v=((0,k.Mz)(t,_=>_.bank),(0,k.Mz)(t,_=>_.banks))},98872:(tt,N,c)=>{c.d(N,{n:()=>G});var k=c(54438),t=c(73512),D=c(96697),v=c(25558),_=c(88141),g=c(59640),l=c(58600),S=c(98216),E=c(25941);const L=t.J1`
    mutation CreateBank($createBankInput: CreateBankInput!) {
        createBank(createBankInput: $createBankInput) {

            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }

        }
    }
`,B=t.J1`
    mutation UpdateBank($updateBankInput: UpdateBankInput!) {
        updateBank(updateBankInput: $updateBankInput) {
            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }
        }
    }
`,et=t.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateBankStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }

    }
`,nt=t.J1`
    mutation RemoveBank($removeBankId: String!) {
        removeBank(id: $removeBankId) {
            ok
            message
        }
    }
`,ot=t.J1`
    query FindAllBanks($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllBanks(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            banks {
                id
                active
                name
                description
                slug
            }
        }
    }
`,it=t.J1`
    query FindActiveBanks($search: String!, $size: Int!) {
        findActiveBanks(search: $search, size: $size) {
            ok
            message

            banks {
                id
                name
                slug
            }
        }
    }
`,C=t.J1`
    query FindBankById($findBankByIdId: String!) {
        findBankById(id: $findBankByIdId) {
            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }
        }
    }
`;let G=(()=>{class h{constructor(){this.apolloProvider=(0,k.WQX)(t.Ic),this.store=(0,k.WQX)(g.il),this._apollo=this.apolloProvider.use("BALANC")}createBank(m){return this.store.select(E._S).pipe((0,D.s)(1),(0,v.n)(b=>this._apollo.mutate({mutation:L,variables:{createBankInput:m},errorPolicy:"all"}).pipe((0,_.M)(({data:u})=>{const s=structuredClone(b);s.push(u.createBank.bank),this.store.dispatch((0,l.Sn)({banks:s}))}))))}getBanks(m=0,b=20,u="code",s="asc",j=""){return this._apollo.query({query:ot,errorPolicy:"all",variables:{page:m,size:b,sort:u,order:s,search:j}}).pipe((0,_.M)(({data:F})=>{this.store.dispatch((0,S.Bp)({pagination:F.findAllBanks.pagination})),this.store.dispatch((0,l.Sn)({banks:F.findAllBanks.banks}))}))}findActiveBanks(m="",b=50){return this._apollo.query({query:it,errorPolicy:"all",variables:{search:m,size:b}}).pipe((0,_.M)(({data:u})=>{this.store.dispatch((0,l.Sn)({banks:u.findActiveBanks.banks}))}))}getBankById(m){return this._apollo.query({query:C,variables:{findBankByIdId:m},errorPolicy:"all"}).pipe((0,_.M)(({data:b})=>{this.store.dispatch((0,l.Vk)({bank:b.findBankById.bank}))}))}updateBank(m){return this.store.select(E._S).pipe((0,D.s)(1),(0,v.n)(b=>this._apollo.mutate({mutation:B,variables:{updateBankInput:m},errorPolicy:"all"}).pipe((0,_.M)(({data:u})=>{const s=structuredClone(b);s[b.findIndex(F=>F.id===m.id)]=u.updateBank.bank,this.store.dispatch((0,l.Sn)({banks:s}))}))))}updateBankStatus(m){return this.store.select(E._S).pipe((0,D.s)(1),(0,v.n)(b=>this._apollo.mutate({mutation:et,variables:{updateEntityStatusInput:m},errorPolicy:"all"}).pipe((0,_.M)(()=>{const u=structuredClone(b);u[b.findIndex(j=>j.id===m.id)].active=m.active,this.store.dispatch((0,l.Sn)({banks:u}))}))))}removeBank(m){return this.store.select(E._S).pipe((0,D.s)(1),(0,v.n)(b=>this._apollo.mutate({mutation:nt,variables:{removeBankId:m},errorPolicy:"all"}).pipe((0,_.M)(({})=>{const s=structuredClone(b),j=b.findIndex(F=>F.id===m);s.splice(j,1),this.store.dispatch((0,l.Sn)({banks:s}))}))))}static#t=this.\u0275fac=function(b){return new(b||h)};static#e=this.\u0275prov=k.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);