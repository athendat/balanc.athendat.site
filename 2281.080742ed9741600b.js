"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2281],{42281:(Tt,j,l)=>{l.r(j),l.d(j,{default:()=>Zt});var A=l(64190),e=l(19212);let K=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["box"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[A.lC],encapsulation:2})}return o})();var T=l(22939),S=l(17700),U=l(78645),m=l(59773),z=l(86903),I=l(84221),F=l(79059),q=l(56278),a=l(56223),V=l(6990),N=l(42090),g=l(64170),f=l(24516),_=l(32296),D=l(12813),W=l(56263);function X(o,r){1&o&&(e.TgZ(0,"h2",12),e._uU(1," Editar monto inicial de caja "),e.qZA())}function ee(o,r){1&o&&(e.TgZ(0,"h2",12),e._uU(1," Devoluci\xf3n de efectivo de caja "),e.qZA())}function te(o,r){1&o&&(e.TgZ(0,"h2",12),e._uU(1," Pr\xe9stamo de efectivo de caja "),e.qZA())}function oe(o,r){1&o&&(e.TgZ(0,"h2",12),e._uU(1," Gasto de efectivo de caja "),e.qZA())}function ie(o,r){1&o&&(e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2,"Motivo"),e.qZA(),e._UZ(3,"textarea",13),e.qZA()),2&o&&(e.xp6(3),e.Q6J("formControlName","reason"))}let ne=(()=>{class o{constructor(t,n,i,s,d,x){this.data=t,this._boxService=n,this._changeDetectorRef=i,this._dialogRef=s,this._formBuilder=d,this._fuseConfirmationService=x,this._unsubscribeAll=new U.x,this._snackBar=(0,e.f3M)(T.ux),this.dialogMode=t.dialogMode,this.boxMovementType=this.data.boxMovementType}ngOnInit(){this.boxMovementForm=this._formBuilder.group({id:new a.NI,amount:new a.NI(null,[a.kI.required,a.kI.min(0),a.kI.maxLength(9)]),reason:new a.NI(null,[a.kI.maxLength(250)])})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBoxMovement(){let t=this.boxMovementForm.getRawValue();t=(0,V.omit)(t,["id"]),t.movementType=this.boxMovementType,this._fuseConfirmationService.open({title:"Crear movimiento",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._boxService.createBoxMovement(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:s})=>{s&&(this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Movimiento creado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this.closeDialog()),this._changeDetectorRef.markForCheck()})})}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(S.WI),e.Y36(D.k),e.Y36(e.sBO),e.Y36(S.so),e.Y36(a.qu),e.Y36(q.R))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["box-admin-dialog"]],standalone:!0,features:[e.jDz],decls:19,vars:12,consts:[[1,"relative","px-6","pt-5","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-start","border-b"],["class","text-xl font-semibold","mat-dialog-title",""],["mat-dialog-content","",1,"flex","mt-4","flex-col","items-center","flex-auto","w-full","border-b"],[1,"flex","flex-col","w-full",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-4"],[1,"w-full"],["matInput","","type","number",3,"formControlName","required"],["class","w-full"],["mat-dialog-actions","",1,"flex","items-center","justify-between","w-full","pt-2","pb-3"],["mat-button","",3,"color","click"],["mat-button","",3,"disabled","color","click"],["mat-dialog-title","",1,"text-xl","font-semibold"],["matInput","","cdkTextareaAutosize","","maxlength","250","rows","4",3,"formControlName"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,X,2,0,"h2",2)(3,ee,2,0,"h2",2)(4,te,2,0,"h2",2)(5,oe,2,0,"h2",2),e.qZA(),e.TgZ(6,"div",3)(7,"form",4)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Monto"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.YNc(13,ie,4,1,"mat-form-field",8),e.qZA()()(),e.TgZ(14,"div",9)(15,"button",10),e.NdJ("click",function(){return i.closeDialog()}),e._uU(16,"Cancelar"),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return i.createBoxMovement()}),e._uU(18," Guardar "),e.qZA()()()),2&n&&(e.xp6(2),e.um2(2,"initial"===i.boxMovementType?2:-1),e.xp6(),e.um2(3,"return"===i.boxMovementType?3:-1),e.xp6(),e.um2(4,"loan"===i.boxMovementType?4:-1),e.xp6(),e.um2(5,"spent"===i.boxMovementType?5:-1),e.xp6(2),e.Q6J("formGroup",i.boxMovementForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","amount")("required",!0),e.xp6(),e.um2(13,"initial"!==i.boxMovementType?13:-1),e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("disabled",i.boxMovementForm.invalid)("color","primary"))},dependencies:[g.lN,g.KE,g.hX,f.c,f.Nt,W.IC,_.ot,_.lW,a.UX,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u],encapsulation:2,changeDetection:0})}return o})();var p=l(96814),b=l(77988),v=l(30617),ae=l(95407);function re(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBox(!0))}),e._UZ(1,"mat-icon",17),e._uU(2," Abrir caja con saldo anterior "),e.qZA(),e.TgZ(3,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBox(!1))}),e._UZ(4,"mat-icon",17),e._uU(5," Abrir caja sin saldo "),e.qZA()}2&o&&(e.xp6(),e.Q6J("svgIcon","mat_solid:key"),e.xp6(3),e.Q6J("svgIcon","mat_solid:key"))}function se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("initial"))}),e._UZ(1,"mat-icon",17),e._uU(2," Editar monto inicial "),e.qZA(),e.TgZ(3,"button",42),e._UZ(4,"mat-icon",17),e._uU(5," Cerrar caja "),e.qZA()}2&o&&(e.xp6(),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(3),e.Q6J("svgIcon","mat_solid:lock"))}function le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",43)(1,"span",16),e._uU(2,"Movimientos de caja"),e.qZA(),e._UZ(3,"mat-icon",17),e.qZA(),e.TgZ(4,"mat-menu",null,44)(6,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("return"))}),e._UZ(7,"mat-icon",17),e._uU(8," Devoluci\xf3n "),e.qZA(),e.TgZ(9,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("loan"))}),e._UZ(10,"mat-icon",17),e._uU(11," Pr\xe9stamo "),e.qZA(),e.TgZ(12,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("spent"))}),e._UZ(13,"mat-icon",17),e._uU(14," Gasto "),e.qZA(),e.TgZ(15,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("depot"))}),e._UZ(16,"mat-icon",17),e._uU(17," Dep\xf3sito "),e.qZA(),e.TgZ(18,"button",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openBoxAdminDialog("extraction"))}),e._UZ(19,"mat-icon",17),e._uU(20," Extracci\xf3n "),e.qZA()()}if(2&o){const t=e.MAs(5);e.Q6J("matMenuTriggerFor",t),e.xp6(3),e.Q6J("svgIcon","mat_solid:expand_more"),e.xp6(4),e.Q6J("svgIcon","mat_solid:settings_backup_restore"),e.xp6(3),e.Q6J("svgIcon","mat_solid:real_estate_agent"),e.xp6(3),e.Q6J("svgIcon","mat_solid:paid"),e.xp6(3),e.Q6J("svgIcon","mat_solid:south_west"),e.xp6(3),e.Q6J("svgIcon","mat_solid:north_east")}}function de(o,r){if(1&o&&(e.TgZ(0,"div",49)(1,"div",50),e._UZ(2,"div",51),e.TgZ(3,"div",52),e._uU(4),e.qZA()(),e.TgZ(5,"div",53),e._uU(6),e.ALo(7,"percent"),e.qZA()()),2&o){const t=r.$implicit,n=r.$index,i=e.oxw(2);e.xp6(2),e.Udp("background-color",i.boxMovementDistribution.colors[n]),e.xp6(2),e.Oqu(i.data.labels[n]),e.xp6(2),e.hij(" ",e.xi3(7,4,t/i.data.total,"1.2-2")," ")}}function me(o,r){if(1&o&&(e.TgZ(0,"div",45)(1,"div",46),e._UZ(2,"apx-chart",47),e.qZA(),e.TgZ(3,"div",48),e.SjG(4,de,8,7,"div",54,e.x6l),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("chart",t.boxMovementDistribution.chart)("colors",t.boxMovementDistribution.colors)("labels",t.boxMovementDistribution.labels)("plotOptions",t.boxMovementDistribution.plotOptions)("series",t.boxMovementDistribution.series)("states",t.boxMovementDistribution.states)("tooltip",t.boxMovementDistribution.tooltip),e.xp6(2),e.wJu(t.data.series)}}let ce=(()=>{class o{constructor(){this.balance=0,this.box=null,this.data={total:0,series:[0,0,0,0,0,0,0],labels:["Monto Inicial","Ingresos","Devoluciones","Prestamos","Gastos","Dep\xf3sitos","Extracciones"],colors:["#64748B","#22C55E","#EF4444","#EAB308","#06B6D4","#3f10cd","#ff498b"]},this._boxService=(0,e.f3M)(D.k),this._changeDetectorRef=(0,e.f3M)(e.sBO),this._dialog=(0,e.f3M)(S.uw),this._fuseConfirmationService=(0,e.f3M)(q.R),this._router=(0,e.f3M)(A.F0),this._snackBar=(0,e.f3M)(T.ux),this._unsubscribeAll=new U.x,this.store=(0,e.f3M)(I.yh)}ngOnInit(){window.Apex={chart:{events:{mounted:(t,n)=>{this._fixSvgFill(t.el)},updated:(t,n)=>{this._fixSvgFill(t.el)}}}},this.store.select(F.dK).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.box=t,this.box&&(this.data.total=t.initial+t.income+t.return+t.loan+t.spent+t.depot-t.extraction,this.data.series=[t.initial,t.income,t.return,t.loan,t.spent,t.depot,t.extraction],this.balance=t.initial+t.income+t.depot-t.extraction-t.return-t.loan-t.spent,this._prepareChartData()),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}openBox(t){this._fuseConfirmationService.open({title:"Abrir caja.",message:"\xbfEst\xe1 seguro que desea abrir la caja",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._boxService.openBox(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.openBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}openBoxAdminDialog(t){this._dialog.open(ne,{data:{boxMovementType:t},width:"90%",maxWidth:"400px",panelClass:"ath-dialog-panel",disableClose:!0})}trackByFn(t,n){return n.id||t}_fixSvgFill(t){const n=this._router.url;Array.from(t.querySelectorAll("*[fill]")).filter(i=>-1!==i.getAttribute("fill").indexOf("url(")).forEach(i=>{const s=i.getAttribute("fill");i.setAttribute("fill",`url(${n}${s.slice(s.indexOf("#"))}`)})}_prepareChartData(){this.boxMovementDistribution={chart:{animations:{speed:400,animateGradually:{enabled:!1}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"donut",sparkline:{enabled:!0}},colors:this.data.colors,labels:this.data.labels,plotOptions:{pie:{customScale:.9,expandOnClick:!1,donut:{size:"0%"}}},series:this.data.series,states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{enabled:!0,fillSeriesColor:!1,theme:"dark",custom:({seriesIndex:t,w:n})=>`<div class="flex items-center h-8 min-h-8 max-h-8 px-3">\n                                                     <div class="w-3 h-3 rounded-full" style="background-color: ${n.config.colors[t]};"></div>\n                                                     <div class="ml-2 text-md leading-none">${n.config.labels[t]}:</div>\n                                                     <div class="ml-2 text-md font-bold leading-none">${(n.config.series[t]/this.data.total*100).toFixed(2)}%</div>\n                                                 </div>`}}}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["box-admin"]],standalone:!0,features:[e.jDz],decls:117,vars:55,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-col","gap-2","md:flex-row"],[1,"font-mono"],[1,"px-2.5","rounded-full","bg-primary-500"],[1,"flex","flex-col","items-center","gap-2","mt-6","md:flex-row","shrink-0","lg:mt-0","lg:ml-4"],[1,""],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-yellow-500","to-yellow-600",3,"matMenuTriggerFor"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"svgIcon"],["optionsMenu","matMenu"],[1,"flex","flex-auto","overflow-hidden","overflow-y-scroll"],[1,"grid","w-full","grid-cols-1","gap-2","p-8","md:grid-cols-2"],[1,"flex","flex-col","border","divide-y"],[1,"grid","w-full","grid-cols-3"],[1,"flex","items-center","justify-center"],[1,"leading-10","rounded-full","h-7","w-7","bg-slate-500"],[1,"font-semibold","leading-10","uppercase"],[1,"font-mono","leading-10","text-center"],[1,"leading-10","bg-green-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-red-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-yellow-500","rounded-full","h-7","w-7"],[1,"leading-10","rounded-full","h-7","w-7","bg-cyan-500"],[1,"w-auto","font-semibold","leading-10","uppercase"],[1,"leading-10","bg-blue-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-pink-500","rounded-full","h-7","w-7"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-green-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-green-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-red-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-red-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","uppercase","dark:text-slate-500"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","dark:text-slate-500"],["class","flex flex-row flex-auto p-6 overflow-hidden shadow bg-card rounded-2xl"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLink","/box/closer"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"matMenuTriggerFor"],["movementsMenu","matMenu"],[1,"flex","flex-row","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","flex-col","flex-auto","w-1/2","mt-6","h-44"],[1,"flex","items-center","justify-center","flex-auto","w-full","h-full",3,"chart","colors","labels","plotOptions","series","states","tooltip"],[1,"w-1/2","divide-y"],[1,"grid","grid-cols-2","py-3"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","flex-0"],[1,"ml-3","truncate"],[1,"font-mono","font-medium","text-right"],["class","grid grid-cols-2 py-3"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Caja"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Administraci\xf3n"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Administraci\xf3n de caja "),e.qZA(),e.TgZ(18,"div",10)(19,"span",11),e._uU(20),e.ALo(21,"date"),e.qZA(),e.TgZ(22,"span",12),e._uU(23),e.ALo(24,"titlecase"),e.qZA()()()(),e.TgZ(25,"div",13)(26,"div",14)(27,"button",15)(28,"span",16),e._uU(29,"Opciones"),e.qZA(),e._UZ(30,"mat-icon",17),e.qZA(),e.TgZ(31,"mat-menu",null,18),e.YNc(33,re,6,2)(34,se,6,2),e.qZA()(),e.YNc(35,le,21,7),e.qZA()(),e.TgZ(36,"div",19)(37,"div",20)(38,"div",21)(39,"div",22)(40,"div",23),e._UZ(41,"div",24),e.qZA(),e.TgZ(42,"div",25),e._uU(43,"Monto inicial"),e.qZA(),e.TgZ(44,"div",26),e._uU(45),e.ALo(46,"currency"),e.qZA()(),e.TgZ(47,"div",22)(48,"div",23),e._UZ(49,"div",27),e.qZA(),e.TgZ(50,"div",25),e._uU(51,"Ingresos"),e.qZA(),e.TgZ(52,"div",26),e._uU(53),e.ALo(54,"currency"),e.qZA()(),e.TgZ(55,"div",22)(56,"div",23),e._UZ(57,"div",28),e.qZA(),e.TgZ(58,"div",25),e._uU(59,"Devoluciones"),e.qZA(),e.TgZ(60,"div",26),e._uU(61),e.ALo(62,"currency"),e.qZA()(),e.TgZ(63,"div",22)(64,"div",23),e._UZ(65,"div",29),e.qZA(),e.TgZ(66,"div",25),e._uU(67,"Pr\xe9stamos"),e.qZA(),e.TgZ(68,"div",26),e._uU(69),e.ALo(70,"currency"),e.qZA()(),e.TgZ(71,"div",22)(72,"div",23),e._UZ(73,"div",30),e.qZA(),e.TgZ(74,"div",31),e._uU(75,"Gastos"),e.qZA(),e.TgZ(76,"div",26),e._uU(77),e.ALo(78,"currency"),e.qZA()(),e.TgZ(79,"div",22)(80,"div",23),e._UZ(81,"div",32),e.qZA(),e.TgZ(82,"div",31),e._uU(83,"Dep\xf3sitos"),e.qZA(),e.TgZ(84,"div",26),e._uU(85),e.ALo(86,"currency"),e.qZA()(),e.TgZ(87,"div",22)(88,"div",23),e._UZ(89,"div",33),e.qZA(),e.TgZ(90,"div",31),e._uU(91,"Extracciones"),e.qZA(),e.TgZ(92,"div",26),e._uU(93),e.ALo(94,"currency"),e.qZA()(),e.TgZ(95,"div",22),e._UZ(96,"div",14),e.TgZ(97,"div",34),e._uU(98,"Ingresos Totales "),e.qZA(),e.TgZ(99,"div",35),e._uU(100),e.ALo(101,"currency"),e.qZA()(),e.TgZ(102,"div",22),e._UZ(103,"div",14),e.TgZ(104,"div",36),e._uU(105,"Egresos Totales"),e.qZA(),e.TgZ(106,"div",37),e._uU(107),e.ALo(108,"currency"),e.qZA()(),e.TgZ(109,"div",22),e._UZ(110,"div",14),e.TgZ(111,"div",38),e._uU(112,"Saldo"),e.qZA(),e.TgZ(113,"div",39),e._uU(114),e.ALo(115,"currency"),e.qZA()()(),e.YNc(116,me,6,7,"div",40),e.qZA()()()),2&n){const s=e.MAs(32);e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.hij(" Fecha de caja: ",e.xi3(21,20,i.box.open,"dd/MM/YYYY")," "),e.xp6(3),e.hij(" ",e.lcZ(24,23,i.box.status)," "),e.xp6(4),e.Q6J("matMenuTriggerFor",s),e.xp6(3),e.Q6J("svgIcon","mat_solid:expand_more"),e.xp6(3),e.um2(33,"cerrada"===i.box.status?33:-1),e.xp6(),e.um2(34,"abierta"===i.box.status?34:-1),e.xp6(),e.um2(35,"abierta"===i.box.status?35:-1),e.xp6(10),e.Oqu(e.xi3(46,25,i.data.series[0],"$ ")),e.xp6(8),e.Oqu(e.xi3(54,28,i.data.series[1],"$ ")),e.xp6(8),e.Oqu(e.xi3(62,31,i.data.series[2],"$ ")),e.xp6(8),e.Oqu(e.xi3(70,34,i.data.series[3],"$ ")),e.xp6(8),e.Oqu(e.xi3(78,37,i.data.series[4],"$ ")),e.xp6(8),e.Oqu(e.xi3(86,40,i.data.series[5],"$ ")),e.xp6(8),e.Oqu(e.xi3(94,43,i.data.series[6],"$ ")),e.xp6(7),e.Oqu(e.xi3(101,46,i.data.series[0]+i.data.series[1]+i.data.series[5],"$ ")),e.xp6(7),e.hij(" ",e.xi3(108,49,i.data.series[2]+i.data.series[3]+i.data.series[4]+i.data.series[6],"$ ")," "),e.xp6(7),e.Oqu(e.xi3(115,52,i.data.series[0]+i.data.series[1]-i.data.series[2]-i.data.series[3]-i.data.series[4]+i.data.series[5]-i.data.series[6],"$ ")),e.xp6(2),e.um2(116,i.data.total>0?116:-1)}},dependencies:[p.H9,p.uU,_.ot,_.lW,v.Ps,v.Hw,b.Tx,ae.PQ,b.VK,b.OP,b.p6,z.X,z.x,p.Zx,p.rS,A.rH],encapsulation:2,changeDetection:0})}return o})();var ue=l(15861),C=l(21476),Z=l(13566),$=l(22096),H=l(63019),Y=l(83620),B=l(94664),w=l(37398),O=l(27763),G=l(83604),pe=l(53374),ge=l(29643),M=l(16676),P=l(36236),L=l(57069);let be=(()=>{class o{constructor(){L.vfs=P.I.vfs}boxCloseReport(t,n,i){const s=[],d=`Cierre de caja ${M(t.close).format("DD/MM/yy hh:mm a")}`,x=[{text:"Informaci\xf3n General",style:"header"},{text:`Local: ${t.terminal.location.name}`,style:"subheader"},{text:`Nombre de la Caja: ${t.terminal.name}`,style:"subheader"},{text:`Usuario: ${t.user.fullname}`,style:"subheader"},{text:`Total Inicial: ${t.initial.toFixed(2)}`,style:"subheader"},{text:`Ingresos: ${t.income.toFixed(2)}`,style:"subheader"},{text:`Devoluciones: ${t.return.toFixed(2)}`,style:"subheader"},{text:`Pr\xe9stamos: ${t.loan.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${t.spent.toFixed(2)}`,style:"subheader"},{text:`Dep\xf3sitos: ${t.depot.toFixed(2)}`,style:"subheader"},{text:`Extracciones: ${t.extraction.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${t.spent.toFixed(2)}`,style:"subheader"},{text:`Total Final: ${(t.initial+t.income+t.depot-t.return-t.loan-t.spent-t.extraction).toFixed(2)}`,style:"subheader"}],E=[{marginTop:10,columns:[{text:"Billetes",style:"header"},{text:"Monedas",style:"header"}]},{columns:[{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Billetes de 1",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b1,style:"table_body"},{text:(1*t.cashDistribution?.b1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 3",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b3,style:"table_body"},{text:(3*t.cashDistribution?.b3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 5",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b5,style:"table_body"},{text:(5*t.cashDistribution?.b5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 10",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b10,style:"table_body"},{text:(10*t.cashDistribution?.b10).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 20",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b20,style:"table_body"},{text:(20*t.cashDistribution?.b20).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 50",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b50,style:"table_body"},{text:(50*t.cashDistribution?.b50).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 100",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b100,style:"table_body"},{text:(100*t.cashDistribution?.b100).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 200",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b200,style:"table_body"},{text:(200*t.cashDistribution?.b200).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 500",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b500,style:"table_body"},{text:(500*t.cashDistribution?.b500).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 1000",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b1000,style:"table_body"},{text:(1e3*t.cashDistribution?.b1000).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(c,u)=>.7,vLineWidth:(c,u)=>0,hLineColor:(c,u)=>"#eeeeee"}},{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Monedas de 1",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m1,style:"table_body"},{text:(1*t.cashDistribution?.m1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 3",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m3,style:"table_body"},{text:(3*t.cashDistribution?.m3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 5",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m5,style:"table_body"},{text:(5*t.cashDistribution?.m5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.01",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c1,style:"table_body"},{text:(.01*t.cashDistribution?.c1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.02",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c2,style:"table_body"},{text:(.02*t.cashDistribution?.c2).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.05",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c5,style:"table_body"},{text:(.05*t.cashDistribution?.c5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.20",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c20,style:"table_body"},{text:(.2*t.cashDistribution?.c20).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(c,u)=>.7,vLineWidth:(c,u)=>0,hLineColor:(c,u)=>"#eeeeee"}}]}],yt=t.boxMovements.reduce((c,u)=>{const J=u.movementType,y=c.findIndex(R=>R.movementType===J);return-1===y?c.push({movementType:J,movements:[u]}):c[y].movements.push(u),c},[]),Q=[[{text:"MOVIMIENTOS DE CAJA",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"Tipo",style:"table_header"},{text:"N\xba",style:"table_header"},{text:"Monto",style:"table_header"},{text:"Motivo",style:"table_header"}]];for(const c of yt){let u="";switch(c.movementType){case"initial":u="Inicial";break;case"return":u="Devoluciones";break;case"loan":u="Pr\xe9stamos";break;case"spent":u="Gastos";break;case"depot":u="Dep\xf3sitos";break;case"extraction":u="Extracciones"}const J=[{rowSpan:c.movements.length,text:u,alignment:"left",style:"table_body"},{text:c.movements[0].no,style:"table_body"},{text:c.movements[0].amount.toFixed(2),style:"table_body"},{text:c.movements[0].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];Q.push(J);for(let y=1;y<c.movements.length;y++){const R=[{text:"",alignment:"center"},{text:c.movements[y].no,style:"table_body"},{text:c.movements[y].amount.toFixed(2),style:"table_body"},{text:c.movements[y].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];Q.push(R)}}const Ct=[{table:{headerRows:2,widths:[60,100,60,"*"],body:Q},layout:{hLineWidth:(c,u)=>.7,vLineWidth:(c,u)=>.7,hLineColor:(c,u)=>"#eeeeee",vLineColor:(c,u)=>"#eeeeee"},marginTop:30}];s.push(x,E),t.boxMovements.length>0&&s.push(Ct);const At={header:{text:d,style:"header",marginTop:5},content:s,footer:(c,u)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${i.fullname} | Esta informaci\xf3n es exclusiva de ${n.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${c.toString()}/${u} - Fecha de impresi\xf3n ${M().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},subheader:{fontSize:14,bold:!0,marginBottom:2,alignment:"left",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_footer:{fontSize:12,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10,alignment:"center"}},pageOrientation:"portrait",pageSize:"LETTER",watermark:{text:n.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:d,author:`${i.fullname}`,creationDate:M().toDate(),modDate:M().toDate(),producer:n.name}};L.createPdf(At).open()}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();L.vfs=P.I.vfs;var xe=l(48420),he=l(70456),_e=l(76676);const fe=(o,r)=>({"bg-primary-500":o,"bg-red-500":r});function ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",24),e._uU(2),e.qZA(),e.TgZ(3,"div",21),e._uU(4),e.qZA(),e.TgZ(5,"div",21),e._uU(6),e.qZA(),e.TgZ(7,"div",25),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",25),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",25),e._uU(14),e.ALo(15,"date"),e.qZA(),e.TgZ(16,"div",25),e._uU(17),e.ALo(18,"currency"),e.qZA(),e.TgZ(19,"div",21)(20,"span",26),e._uU(21),e.ALo(22,"uppercase"),e.qZA()(),e.TgZ(23,"div",27)(24,"button",28),e._UZ(25,"mat-icon",29),e.qZA(),e.TgZ(26,"mat-menu",30,31)(28,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.boxCloseReport(s))}),e._uU(29,"Resumen de caja"),e.qZA(),e.TgZ(30,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.saleProductsReport(s.id))}),e._uU(31,"Ventas por productos"),e.qZA(),e.TgZ(32,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.salesByCategoriesProducts(s.id))}),e._uU(33,"Ventas por categor\xedas"),e.qZA(),e.TgZ(34,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.printBoxAndSales(s.id))}),e._uU(35,"Resumen de caja y ventas"),e.qZA()(),e.TgZ(36,"button",34),e._UZ(37,"mat-icon",29),e.qZA(),e.TgZ(38,"mat-menu",30,35)(40,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.printIPV(s.id))}),e._uU(41,"Ventas por productos"),e.qZA(),e.TgZ(42,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.printIPVCategories(s.id))}),e._uU(43,"Ventas por categor\xedas"),e.qZA(),e.TgZ(44,"button",33),e.NdJ("click",function(){const s=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.printBoxAndSales(s.id))}),e._uU(45,"Resumen de caja y ventas"),e.qZA()()()()}if(2&o){const t=r.$implicit,n=e.MAs(27),i=e.MAs(39);e.xp6(2),e.hij(" ",t.no," "),e.xp6(2),e.hij(" ",t.terminal.location.name," "),e.xp6(2),e.hij(" ",t.terminal.name," "),e.xp6(2),e.hij(" ",e.xi3(9,15,t.open,"dd/MM/yyyy HH:mm:ss")," "),e.xp6(3),e.hij(" ",e.xi3(12,18,t.initial,"$ ")," "),e.xp6(3),e.hij(" ",e.xi3(15,21,t.close,"dd/MM/yyyy HH:mm:ss")," "),e.xp6(3),e.hij(" ",e.xi3(18,24,t.initial+t.income-t.return-t.loan-t.spent,"$ ")," "),e.xp6(3),e.Q6J("ngClass",e.WLB(29,fe,"abierta"===t.status,"cerrada"===t.status)),e.xp6(),e.hij(" ",e.lcZ(22,27,t.status)," "),e.xp6(3),e.Q6J("matMenuTriggerFor",n),e.xp6(),e.Q6J("svgIcon","mat_solid:request_page"),e.xp6(3),e.Q6J("disabled","abierta"===t.status),e.xp6(8),e.Q6J("matMenuTriggerFor",i)("disabled","abierta"===t.status),e.xp6(),e.Q6J("svgIcon","mat_solid:print")}}function Ze(o,r){1&o&&e.SjG(0,ve,46,32,"div",36,e.QCX().trackByFn),2&o&&e.wJu(r)}const ye=o=>({"pointer-events-none":o}),Ce=()=>[10,25,50,100];function Ae(o,r){if(1&o&&(e.TgZ(0,"div",18)(1,"div",19)(2,"div",20),e._uU(3," No. "),e.qZA(),e.TgZ(4,"div",21),e._uU(5," Unidad "),e.qZA(),e.TgZ(6,"div",21),e._uU(7," Caja "),e.qZA(),e.TgZ(8,"div",21),e._uU(9," Fecha Apertura "),e.qZA(),e.TgZ(10,"div",21),e._uU(11," Monto Apertura "),e.qZA(),e.TgZ(12,"div",21),e._uU(13," Fecha Cierre "),e.qZA(),e.TgZ(14,"div",21),e._uU(15," Monto Cierre "),e.qZA(),e.TgZ(16,"div",21),e._uU(17," Estado "),e.qZA(),e.TgZ(18,"div",21),e._uU(19," Acciones "),e.qZA()(),e.YNc(20,Ze,2,0),e.ALo(21,"async"),e.qZA(),e._UZ(22,"mat-paginator",22)),2&o){const t=e.oxw(2);let n;e.xp6(2),e.Q6J("mat-sort-header","no"),e.xp6(18),e.um2(20,(n=e.lcZ(21,8,t.boxes$))?20:-1,n),e.xp6(2),e.Q6J("ngClass",e.VKq(10,ye,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,Ce))("showFirstLastButtons",!0)}}function Te(o,r){1&o&&(e.TgZ(0,"div",37),e._uU(1," \xa1No se ha registrado ning\xfan cierre de caja! "),e.qZA())}function Ue(o,r){1&o&&e.YNc(0,Ae,23,13)(1,Te,2,0),2&o&&e.um2(0,r.length>0?0:1)}let qe=(()=>{class o{constructor(){this.boxes$=(0,$.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.searchInputControl=new a.NI,this.selectedSlide=null,this.user=null,this._boxReportsService=(0,e.f3M)(be),this._boxService=(0,e.f3M)(D.k),this._changeDetectorRef=(0,e.f3M)(e.sBO),this._fuseConfirmationService=(0,e.f3M)(q.R),this._documentsService=(0,e.f3M)(xe.S),this._snackBar=(0,e.f3M)(T.ux),this._unsubscribeAll=new U.x,this.store=(0,e.f3M)(I.yh),this._printerService=(0,e.f3M)(he.v),this._salesService=(0,e.f3M)(_e.M)}ngOnInit(){this.store.select(ge.Qs).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.store.select(pe.rk).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.boxes$=this.store.select(F.OV),this.store.select(G.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,Y.b)(300),(0,B.w)(t=>(this.isLoading=!0,this._boxService.getBoxes(0,this.pagination.size,"no","desc",t))),(0,w.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,H.T)(this._sort.sortChange,this._paginator.page).pipe((0,B.w)(()=>(this.isLoading=!0,this._boxService.getBoxes(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,w.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,O.Re)())}boxCloseReport(t){this._boxService.getBoxById(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:n})=>{t&&this._boxReportsService.boxCloseReport(n.findBoxById.box,this.merchant,this.user)})}saleProductsReport(t){this._salesService.getIpvSaleResume(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{if(n){const i=n.products.filter(d=>d.quantity>0).map(d=>({Producto:d?.name,Cantidad:d.quantity,Precio:d.priceAvg,Cajero:n.employeeName}));this._documentsService.generateIpvProducts(i,{start:n.openedAt,end:n.closedAT},this.merchant,[{name:n.locationName}],this.user,n.cashPaid,n.cardPaid)}})}salesByCategoriesProducts(t){this._salesService.getIpvSaleResumeCategory(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{n&&this._documentsService.generateSalesByCategoriesProducts(n,this.merchant,this.user)})}trackByFn(t,n){return t||n.id}printIPV(t){this._salesService.getIpvSaleResume(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{n&&this._printerService.printIpvSalesResumeTicket(n).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}printIPVCategories(t){this._salesService.getIpvSaleResumeCategory(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{n&&this._printerService.printIpvSalesResumeCategoryTicket(n).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}printBoxAndSales(t){this._boxService.getBoxSaleResume(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{n&&this._printerService.printBoxSaleResumeTicket(n).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}generateTicketDocument(t){var n=this;return(0,ue.Z)(function*(){n._documentsService.generateTicketDocument(t,n.merchant,n.user)})()}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["box-history"]],viewQuery:function(n,i){if(1&n&&(e.Gf(C.NW,5),e.Gf(Z.YE,5)),2&n){let s;e.iGM(s=e.CRH())&&(i._paginator=s.first),e.iGM(s=e.CRH())&&(i._sort=s.first)}},standalone:!0,features:[e.jDz],decls:27,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/box/admin",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,""],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","boxes-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","boxes-grid","md:px-8"],[1,"hiddem","sm:blockfont-mono"],[1,"font-mono","text-center","hiddem","sm:block"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],[1,"flex","flex-row","justify-center","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["xPosition","before"],["reportsMenu1","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor","disabled"],["reportsMenu","matMenu"],["class","grid items-center gap-4 px-6 py-3 border-b boxes-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Caja"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Cierres de Caja"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Cierres de Caja "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e._UZ(22,"div",15),e.qZA()(),e.TgZ(23,"div",16)(24,"div",17),e.YNc(25,Ue,2,1),e.ALo(26,"async"),e.qZA()()()),2&n){let s;e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),e.xp6(4),e.um2(25,(s=e.lcZ(26,8,i.boxes$))?25:-1,s)}},dependencies:[_.ot,_.lW,g.lN,g.KE,g.qo,f.c,f.Nt,v.Ps,v.Hw,p.mk,a.UX,a.Fj,a.JJ,a.oH,p.Ov,Z.JX,Z.YE,Z.nU,p.uU,p.H9,p.gd,b.Tx,b.VK,b.OP,b.p6,C.TU,C.NW],encapsulation:2,changeDetection:0})}return o})();var h=function(o){return o.initial="initial",o.income="income",o.return="return",o.loan="loan",o.spent="spent",o.depot="depot",o.extraction="extraction",o}(h||{});class ke{constructor(r=10,t=1){this.length=0,this.startIndex=1,this.size=r,this.page=t}}const Fe=o=>({"text-red-500":o});function Be(o,r){if(1&o&&(e.TgZ(0,"div",29)(1,"div",30),e._uU(2),e.qZA(),e.TgZ(3,"div",30),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.qZA(),e.TgZ(8,"div",30),e._uU(9),e.ALo(10,"currency"),e.qZA(),e.TgZ(11,"div",27)(12,"span",32),e._uU(13),e.qZA()()()),2&o){const t=r.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",t.no," "),e.xp6(2),e.hij(" ",e.xi3(5,7,t.createdAt,"dd/MM/yyyy HH:mm:ss")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Fe,null===t.reason)),e.xp6(),e.hij(" ",t.reason||"Sin motivo"," "),e.xp6(2),e.hij(" ",e.xi3(10,10,t.amount,"$ ")," "),e.xp6(3),e.Q6J("ngClass",n.movementClass(t.movementType)),e.xp6(),e.hij(" ",n.translateMovementType(t.movementType)," ")}}function we(o,r){1&o&&e.SjG(0,Be,14,15,"div",33,e.QCX().trackByFn),2&o&&e.wJu(r)}const Me=o=>({"pointer-events-none":o}),Je=()=>[5,10,25,100];function Se(o,r){if(1&o&&(e.TgZ(0,"div",23)(1,"div",24)(2,"div",25),e._uU(3," No. "),e.qZA(),e.TgZ(4,"div",25),e._uU(5," Fecha "),e.qZA(),e.TgZ(6,"div",26),e._uU(7," Motivo "),e.qZA(),e.TgZ(8,"div",25),e._uU(9," Monto "),e.qZA(),e.TgZ(10,"div",27),e._uU(11," Tipo de Movimiento "),e.qZA()(),e.YNc(12,we,2,0),e.ALo(13,"async"),e.qZA(),e._UZ(14,"mat-paginator",28)),2&o){const t=e.oxw(2);let n;e.xp6(2),e.Q6J("mat-sort-header","no"),e.xp6(2),e.Q6J("mat-sort-header","createdAt"),e.xp6(2),e.Q6J("mat-sort-header","reason"),e.xp6(2),e.Q6J("mat-sort-header","amount"),e.xp6(4),e.um2(12,(n=e.lcZ(13,11,t.boxMovements$))?12:-1,n),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Me,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(15,Je))("showFirstLastButtons",!0)}}function Ne(o,r){1&o&&(e.TgZ(0,"div",34),e._uU(1," \xa1No se ha registrado ning\xfan movimiento de caja! "),e.qZA())}function Le(o,r){1&o&&e.YNc(0,Se,15,16)(1,Ne,2,0),2&o&&e.um2(0,r.length>0?0:1)}let Ee=(()=>{class o{constructor(t,n,i,s,d){this._boxService=t,this._changeDetectorRef=n,this._fuseConfirmationService=i,this._snackBar=s,this.store=d,this.boxMovements$=(0,$.of)([]),this.isLoading=!1,this.pagination=new ke,this.searchInputControl=new a.NI,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new U.x}ngOnInit(){this.boxMovements$=this.store.select(F.tB),this.store.select(G.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,Y.b)(300),(0,B.w)(t=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,w.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,H.T)(this._sort.sortChange,this._paginator.page).pipe((0,B.w)(()=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,w.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,O.E2)())}translateMovementType(t){switch(t){case h.initial:return"Inicial";case h.income:return"Ingreso";case h.return:return"Devoluci\xf3n";case h.loan:return"Pr\xe9stamo";case h.spent:return"Gasto"}}movementClass(t){switch(t){case h.initial:return"dark:bg-slate-500";case h.income:return"bg-green-500";case h.return:return"bg-yellow-500";case h.loan:return"bg-red-500";case h.spent:return"bg-cyan-500"}}trackByFn(t,n){return t||n.id}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(D.k),e.Y36(e.sBO),e.Y36(q.R),e.Y36(T.ux),e.Y36(I.yh))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["box-movements"]],viewQuery:function(n,i){if(1&n&&(e.Gf(C.NW,5),e.Gf(Z.YE,5)),2&n){let s;e.iGM(s=e.CRH())&&(i._paginator=s.first),e.iGM(s=e.CRH())&&(i._sort=s.first)}},standalone:!0,features:[e.jDz],decls:39,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,""],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-yellow-500","to-yellow-600",3,"matMenuTriggerFor"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["xPosition","before"],["itemMenu","matMenu"],["mat-menu-item",""],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","box-movements-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"text-center","hiddem","sm:block",3,"mat-sort-header"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","box-movements-grid","md:px-8"],[1,"font-mono","hiddem","sm:block"],[1,"hiddem","sm:block",3,"ngClass"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],["class","grid items-center gap-4 px-6 py-3 border-b box-movements-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Caja"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Movimientos de Caja"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Movimientos de Caja "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"div",14)(23,"button",15),e._UZ(24,"mat-icon",16),e.TgZ(25,"span",17),e._uU(26,"Imprimir Reporte"),e.qZA()(),e.TgZ(27,"mat-menu",18,19)(29,"button",20),e._UZ(30,"mat-icon",16),e._uU(31," Movimientos por mes "),e.qZA(),e.TgZ(32,"button",20),e._UZ(33,"mat-icon",16),e._uU(34," Movimientos por d\xeda "),e.qZA()()()()(),e.TgZ(35,"div",21)(36,"div",22),e.YNc(37,Le,2,1),e.ALo(38,"async"),e.qZA()()()),2&n){const s=e.MAs(28);let d;e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),e.xp6(2),e.Q6J("matMenuTriggerFor",s),e.xp6(),e.Q6J("svgIcon","mat_solid:print"),e.xp6(6),e.Q6J("svgIcon","mat_solid:today"),e.xp6(3),e.Q6J("svgIcon","mat_solid:calendar_month"),e.xp6(4),e.um2(37,(d=e.lcZ(38,12,i.boxMovements$))?37:-1,d)}},dependencies:[p.Ov,p.H9,p.uU,_.ot,_.lW,g.lN,g.KE,g.qo,v.Ps,v.Hw,f.c,f.Nt,b.Tx,b.VK,b.OP,b.p6,C.TU,C.NW,Z.JX,Z.YE,Z.nU,p.mk,a.UX,a.Fj,a.JJ,a.oH,A.rH],encapsulation:2,changeDetection:0})}return o})();var k=l(91530);function Qe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 1 peso es obligatoria. "),e.qZA())}function Re(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function je(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 3 pesos es obligatoria. "),e.qZA())}function ze(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function $e(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 5 pesos es obligatoria. "),e.qZA())}function He(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function Ye(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 10 pesos es obligatoria. "),e.qZA())}function Oe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function Ge(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 20 pesos es obligatoria. "),e.qZA())}function Pe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function Ke(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 50 pesos es obligatoria. "),e.qZA())}function Ve(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function We(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 100 pesos es obligatoria. "),e.qZA())}function Xe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function et(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 200 pesos es obligatoria. "),e.qZA())}function tt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function ot(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 500 pesos es obligatoria. "),e.qZA())}function it(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function nt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de 1000 pesos es obligatoria. "),e.qZA())}function at(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.qZA())}function rt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 1 centavo es obligatoria. "),e.qZA())}function st(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.qZA())}function lt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 2 centavos es obligatoria. "),e.qZA())}function dt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.qZA())}function mt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 5 centavos es obligatoria. "),e.qZA())}function ct(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.qZA())}function ut(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 20 centavos es obligatoria. "),e.qZA())}function pt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.qZA())}function gt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 1 peso es obligatoria. "),e.qZA())}function bt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.qZA())}function xt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 3 pesos es obligatoria. "),e.qZA())}function ht(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.qZA())}function _t(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de 5 pesos es obligatoria. "),e.qZA())}function ft(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.qZA())}const Zt=[{path:"",component:K,children:[{path:"admin",component:ce,resolve:{box:k.KG}},{path:"history",component:qe,resolve:{boxes:k.Uy}},{path:"movements",component:Ee,resolve:{boxMovements:k.QX}},{path:"closer",component:(()=>{class o{constructor(){this.totalCashAmount=0,this.balance=0,this.box=null,this._boxService=(0,e.f3M)(D.k),this._changeDetectorRef=(0,e.f3M)(e.sBO),this._formBuilder=(0,e.f3M)(a.qu),this._fuseConfirmationService=(0,e.f3M)(q.R),this._router=(0,e.f3M)(A.F0),this._snackBar=(0,e.f3M)(T.ux),this._unsubscribeAll=new U.x,this.store=(0,e.f3M)(I.yh)}ngOnInit(){this.cashDistributionForm=this._formBuilder.group({b1:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b3:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b5:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b10:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b20:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b50:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b100:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b200:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b500:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),b1000:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),c1:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),c2:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),c5:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),c20:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),m1:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),m3:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)]),m5:new a.NI(0,[a.kI.required,a.kI.min(0),a.kI.max(9999999999)])}),this.store.select(F.dK).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.box=t,this.balance=t.initial+t.income+t.depot-t.return-t.loan-t.spent-t.extraction,this._changeDetectorRef.markForCheck()}),this.cashDistributionForm.valueChanges.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this.totalCashAmount=this.calculateTotalCashAmount(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}calculateTotalCashAmount(){return Object.keys(this.cashDistributionForm.controls).map(i=>{const s=this.cashDistributionForm.controls[i].value;let d=parseFloat(i.substring(1));return i.startsWith("c")&&(d*=.01),s*d}).reduce((i,s)=>i+s,0)}closeBox(){const t=this._fuseConfirmationService.open({title:"Cerrar caja.",message:"\xbfEst\xe1 seguro que desea cerrar la caja?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}),n=this.cashDistributionForm.getRawValue();t.afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._boxService.closeBox({id:this.box.id,cashDistribution:n}).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.closeBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/box/history"),this._changeDetectorRef.markForCheck()})})}static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-box-closer"]],standalone:!0,features:[e.jDz],decls:143,vars:107,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/box/admin",1,"ml-1","text-primary-500"],["routerLink","/box/history",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","lg:mt-0","lg:ml-4"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"disabled","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto","w-full","gap-3","p-6"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10",3,"ngClass"],[3,"formGroup"],[1,"grid","gap-5","md:grid-cols-2"],[1,"grid","w-full","gap-5","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense"],["type","number","matInput","","required","",3,"formControlName","min","max"],[1,"grid","w-full","gap-5","gap-y-10","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense",3,"subscriptSizing"],[1,"max-h-20"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Caja"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Historial"),e.qZA()(),e.TgZ(15,"div",5),e._UZ(16,"mat-icon",6),e.TgZ(17,"a",9),e._uU(18,"Cerrar"),e.qZA()()(),e.TgZ(19,"div",10)(20,"h2",11),e._uU(21," Cerrar de caja "),e.qZA()()(),e.TgZ(22,"div",12)(23,"button",13),e.NdJ("click",function(){return i.closeBox()}),e._UZ(24,"mat-icon",14),e.TgZ(25,"span",15),e._uU(26,"Cerrar Caja"),e.qZA()()()(),e.TgZ(27,"div",16)(28,"h2",17),e._uU(29),e.ALo(30,"number"),e.qZA(),e.TgZ(31,"h2",18),e._uU(32),e.ALo(33,"number"),e.qZA(),e.TgZ(34,"form",19)(35,"div",20)(36,"div",21)(37,"mat-form-field",22)(38,"mat-label"),e._uU(39,"Billetes de 1 peso:"),e.qZA(),e._UZ(40,"input",23),e.YNc(41,Qe,2,0,"mat-error")(42,Re,2,0,"mat-error"),e.qZA(),e.TgZ(43,"mat-form-field",22)(44,"mat-label"),e._uU(45,"Billetes de 3 pesos:"),e.qZA(),e._UZ(46,"input",23),e.YNc(47,je,2,0,"mat-error")(48,ze,2,0,"mat-error"),e.qZA(),e.TgZ(49,"mat-form-field",22)(50,"mat-label"),e._uU(51,"Billetes de 5 pesos:"),e.qZA(),e._UZ(52,"input",23),e.YNc(53,$e,2,0,"mat-error")(54,He,2,0,"mat-error"),e.qZA(),e.TgZ(55,"mat-form-field",22)(56,"mat-label"),e._uU(57,"Billetes de 10 pesos:"),e.qZA(),e._UZ(58,"input",23),e.YNc(59,Ye,2,0,"mat-error")(60,Oe,2,0,"mat-error"),e.qZA(),e.TgZ(61,"mat-form-field",22)(62,"mat-label"),e._uU(63,"Billetes de 20 pesos:"),e.qZA(),e._UZ(64,"input",23),e.YNc(65,Ge,2,0,"mat-error")(66,Pe,2,0,"mat-error"),e.qZA(),e.TgZ(67,"mat-form-field",22)(68,"mat-label"),e._uU(69,"Billetes de 50 pesos:"),e.qZA(),e._UZ(70,"input",23),e.YNc(71,Ke,2,0,"mat-error")(72,Ve,2,0,"mat-error"),e.qZA(),e.TgZ(73,"mat-form-field",22)(74,"mat-label"),e._uU(75,"Billetes de 100 pesos:"),e.qZA(),e._UZ(76,"input",23),e.YNc(77,We,2,0,"mat-error")(78,Xe,2,0,"mat-error"),e.qZA(),e.TgZ(79,"mat-form-field",22)(80,"mat-label"),e._uU(81,"Billetes de 200 pesos:"),e.qZA(),e._UZ(82,"input",23),e.YNc(83,et,2,0,"mat-error")(84,tt,2,0,"mat-error"),e.qZA(),e.TgZ(85,"mat-form-field",22)(86,"mat-label"),e._uU(87,"Billetes de 500 pesos:"),e.qZA(),e._UZ(88,"input",23),e.YNc(89,ot,2,0,"mat-error")(90,it,2,0,"mat-error"),e.qZA(),e.TgZ(91,"mat-form-field",22)(92,"mat-label"),e._uU(93,"Billetes de 1000 pesos:"),e.qZA(),e._UZ(94,"input",23),e.YNc(95,nt,2,0,"mat-error")(96,at,2,0,"mat-error"),e.qZA()(),e.TgZ(97,"div")(98,"div",24)(99,"mat-form-field",25)(100,"mat-label"),e._uU(101,"Monedas de 1 centavo:"),e.qZA(),e._UZ(102,"input",23),e.YNc(103,rt,2,0,"mat-error")(104,st,2,0,"mat-error"),e.qZA(),e.TgZ(105,"mat-form-field",25)(106,"mat-label"),e._uU(107,"Monedas de 2 centavos:"),e.qZA(),e._UZ(108,"input",23),e.YNc(109,lt,2,0,"mat-error")(110,dt,2,0,"mat-error"),e.qZA(),e.TgZ(111,"mat-form-field",25)(112,"mat-label"),e._uU(113,"Monedas de 5 centavos:"),e.qZA(),e._UZ(114,"input",23),e.YNc(115,mt,2,0,"mat-error")(116,ct,2,0,"mat-error"),e.qZA(),e.TgZ(117,"mat-form-field",25)(118,"mat-label"),e._uU(119,"Monedas de 20 centavos:"),e.qZA(),e._UZ(120,"input",23),e.YNc(121,ut,2,0,"mat-error")(122,pt,2,0,"mat-error"),e.qZA(),e.TgZ(123,"mat-form-field",25)(124,"mat-label"),e._uU(125,"Monedas de 1 peso:"),e.qZA(),e._UZ(126,"input",23),e.YNc(127,gt,2,0,"mat-error")(128,bt,2,0,"mat-error"),e.qZA(),e.TgZ(129,"mat-form-field",25)(130,"mat-label"),e._uU(131,"Monedas de 3 pesos:"),e.qZA(),e._UZ(132,"input",23),e.YNc(133,xt,2,0,"mat-error")(134,ht,2,0,"mat-error"),e.qZA(),e.TgZ(135,"div",26)(136,"mat-form-field",25)(137,"mat-label"),e._uU(138,"Monedas de 5 pesos:"),e.qZA(),e._UZ(139,"input",23),e.YNc(140,_t,2,0,"mat-error")(141,ft,2,0,"mat-error"),e.qZA()(),e._UZ(142,"div"),e.qZA()()()()()()),2&n&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("disabled",i.balance!==i.totalCashAmount),e.xp6(),e.Q6J("svgIcon","mat_solid:lock"),e.xp6(5),e.hij(" Importe de la caja: ",e.xi3(30,101,i.balance,"1.2-2")," "),e.xp6(2),e.Q6J("ngClass",i.balance!==i.totalCashAmount?"text-red-500":"text-green-600"),e.xp6(),e.hij(" Distribuci\xf3n de efectivo por denominaciones: ",e.xi3(33,104,i.totalCashAmount,"1.2-2")," "),e.xp6(2),e.Q6J("formGroup",i.cashDistributionForm),e.xp6(6),e.Q6J("formControlName","b1")("min",0)("max",9999999999),e.xp6(),e.um2(41,i.cashDistributionForm.get("b1").hasError("required")?41:-1),e.xp6(),e.um2(42,i.cashDistributionForm.get("b1").hasError("min")||i.cashDistributionForm.get("b1").hasError("max")?42:-1),e.xp6(4),e.Q6J("formControlName","b3")("min",0)("max",9999999999),e.xp6(),e.um2(47,i.cashDistributionForm.get("b3").hasError("required")?47:-1),e.xp6(),e.um2(48,i.cashDistributionForm.get("b3").hasError("min")||i.cashDistributionForm.get("b3").hasError("max")?48:-1),e.xp6(4),e.Q6J("formControlName","b5")("min",0)("max",9999999999),e.xp6(),e.um2(53,i.cashDistributionForm.get("b5").hasError("required")?53:-1),e.xp6(),e.um2(54,i.cashDistributionForm.get("b5").hasError("min")||i.cashDistributionForm.get("b5").hasError("max")?54:-1),e.xp6(4),e.Q6J("formControlName","b10")("min",0)("max",9999999999),e.xp6(),e.um2(59,i.cashDistributionForm.get("b10").hasError("required")?59:-1),e.xp6(),e.um2(60,i.cashDistributionForm.get("b10").hasError("min")||i.cashDistributionForm.get("b10").hasError("max")?60:-1),e.xp6(4),e.Q6J("formControlName","b20")("min",0)("max",9999999999),e.xp6(),e.um2(65,i.cashDistributionForm.get("b20").hasError("required")?65:-1),e.xp6(),e.um2(66,i.cashDistributionForm.get("b20").hasError("min")||i.cashDistributionForm.get("b20").hasError("max")?66:-1),e.xp6(4),e.Q6J("formControlName","b50")("min",0)("max",9999999999),e.xp6(),e.um2(71,i.cashDistributionForm.get("b50").hasError("required")?71:-1),e.xp6(),e.um2(72,i.cashDistributionForm.get("b50").hasError("min")||i.cashDistributionForm.get("b50").hasError("max")?72:-1),e.xp6(4),e.Q6J("formControlName","b100")("min",0)("max",9999999999),e.xp6(),e.um2(77,i.cashDistributionForm.get("b100").hasError("required")?77:-1),e.xp6(),e.um2(78,i.cashDistributionForm.get("b100").hasError("min")||i.cashDistributionForm.get("b100").hasError("max")?78:-1),e.xp6(4),e.Q6J("formControlName","b200")("min",0)("max",9999999999),e.xp6(),e.um2(83,i.cashDistributionForm.get("b200").hasError("required")?83:-1),e.xp6(),e.um2(84,i.cashDistributionForm.get("b200").hasError("min")||i.cashDistributionForm.get("b200").hasError("max")?84:-1),e.xp6(4),e.Q6J("formControlName","b500")("min",0)("max",9999999999),e.xp6(),e.um2(89,i.cashDistributionForm.get("b500").hasError("required")?89:-1),e.xp6(),e.um2(90,i.cashDistributionForm.get("b500").hasError("min")||i.cashDistributionForm.get("b500").hasError("max")?90:-1),e.xp6(4),e.Q6J("formControlName","b1000")("min",0)("max",9999999999),e.xp6(),e.um2(95,i.cashDistributionForm.get("b1000").hasError("required")?95:-1),e.xp6(),e.um2(96,i.cashDistributionForm.get("b1000").hasError("min")||i.cashDistributionForm.get("b1000").hasError("max")?96:-1),e.xp6(3),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","c1")("min",0)("max",9999999999),e.xp6(),e.um2(103,i.cashDistributionForm.get("c1").hasError("required")?103:-1),e.xp6(),e.um2(104,i.cashDistributionForm.get("c1").hasError("min")||i.cashDistributionForm.get("c1").hasError("max")?104:-1),e.xp6(),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","c2")("min",0)("max",9999999999),e.xp6(),e.um2(109,i.cashDistributionForm.get("c2").hasError("required")?109:-1),e.xp6(),e.um2(110,i.cashDistributionForm.get("c2").hasError("min")||i.cashDistributionForm.get("c2").hasError("max")?110:-1),e.xp6(),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","c5")("min",0)("max",9999999999),e.xp6(),e.um2(115,i.cashDistributionForm.get("c5").hasError("required")?115:-1),e.xp6(),e.um2(116,i.cashDistributionForm.get("c5").hasError("min")||i.cashDistributionForm.get("c5").hasError("max")?116:-1),e.xp6(),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","c20")("min",0)("max",9999999999),e.xp6(),e.um2(121,i.cashDistributionForm.get("c20").hasError("required")?121:-1),e.xp6(),e.um2(122,i.cashDistributionForm.get("c20").hasError("min")||i.cashDistributionForm.get("c20").hasError("max")?122:-1),e.xp6(),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","m1")("min",0)("max",9999999999),e.xp6(),e.um2(127,i.cashDistributionForm.get("m1").hasError("required")?127:-1),e.xp6(),e.um2(128,i.cashDistributionForm.get("m1").hasError("min")||i.cashDistributionForm.get("m1").hasError("max")?128:-1),e.xp6(),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","m3")("min",0)("max",9999999999),e.xp6(),e.um2(133,i.cashDistributionForm.get("m3").hasError("required")?133:-1),e.xp6(),e.um2(134,i.cashDistributionForm.get("m3").hasError("min")||i.cashDistributionForm.get("m3").hasError("max")?134:-1),e.xp6(2),e.Q6J("subscriptSizing","dynamic"),e.xp6(3),e.Q6J("formControlName","m5")("min",0)("max",9999999999),e.xp6(),e.um2(140,i.cashDistributionForm.get("m5").hasError("required")?140:-1),e.xp6(),e.um2(141,i.cashDistributionForm.get("m5").hasError("min")||i.cashDistributionForm.get("m5").hasError("max")?141:-1))},dependencies:[p.JJ,_.ot,_.lW,g.lN,g.KE,g.hX,g.TO,f.c,f.Nt,v.Ps,v.Hw,p.mk,a.UX,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.qQ,a.Fd,a.sg,a.u],encapsulation:2,changeDetection:0})}return o})(),resolve:{boxes:k.Uy,box:k.KG}}]}]}}]);