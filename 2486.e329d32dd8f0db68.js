"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2486],{47413:(L,m,l)=>{l.d(m,{Dz:()=>y,Lx:()=>v});var h=l(59640);const n=_=>_.pagination,y=(0,h.Mz)(n,_=>_.pagination),v=(0,h.Mz)(n,_=>_.secondaryPagination)},23301:(L,m,l)=>{l.d(m,{I:()=>v,p:()=>y});var h=l(54438),n=l(92581);const y=(_,I)=>(0,h.WQX)(n.v).getCurrencies(),v=(_,I)=>(0,h.WQX)(n.v).getActiveCurrency()},91401:(L,m,l)=>{l.d(m,{y$:()=>v});var h=l(59640);const n=_=>_.currencies,v=((0,h.Mz)(n,_=>_.currency),(0,h.Mz)(n,_=>_.currencies))},92581:(L,m,l)=>{l.d(m,{v:()=>P});var h=l(54438),n=l(96697),y=l(25558),v=l(88141),_=l(53473),I=l(59640),S=l(98216),D=l(54588),i=l(91401);const U=_.J1`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,B=_.J1`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,R=_.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,b=_.J1`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,N=_.J1`
    query FindAllCurrencies($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllCurrencies(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,T=_.J1`
    query FindAllActiveCurrencies {
        findAllActiveCurrencies {
            ok
            message

            currencies {
                id
                name
                iso
            }
        }
    }
`,F=_.J1`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;let P=(()=>{class O{constructor(){this.apolloProvider=(0,h.WQX)(_.Ic),this.store=(0,h.WQX)(I.il),this._apollo=this.apolloProvider.use("BALANC")}createCurrency(g){return this.store.select(i.y$).pipe((0,n.s)(1),(0,y.n)(s=>this._apollo.mutate({mutation:U,variables:{createCurrencyInput:g},errorPolicy:"all"}).pipe((0,v.M)(({data:f})=>{const r=structuredClone(s);r.push(f.createCurrency.currency),this.store.dispatch((0,D.Ih)({currencies:r}))}))))}getCurrencies(g=1,s=20,f="name",r="asc",o=""){return this._apollo.query({query:N,variables:{offset:s*(g-1),limit:s,sort:f,order:r,search:o},errorPolicy:"all"}).pipe((0,v.M)(({data:u})=>{this.store.dispatch((0,S.Bp)({pagination:u.findAllCurrencies.pagination})),this.store.dispatch((0,D.Ih)({currencies:u.findAllCurrencies.currencies}))}))}getActiveCurrency(){return this._apollo.query({query:T,errorPolicy:"all"}).pipe((0,v.M)(({data:g})=>{g&&this.store.dispatch((0,D.Ih)({currencies:g.findAllActiveCurrencies.currencies}))}))}getCurrencyById(g){return this._apollo.query({query:F,variables:{findCurrencyByIdId:g},errorPolicy:"all"}).pipe((0,v.M)(({data:s})=>{this.store.dispatch((0,D.MN)({currency:s.findCurrencyById.currency}))}))}updateCurrency(g){return this.store.select(i.y$).pipe((0,n.s)(1),(0,y.n)(s=>this._apollo.mutate({mutation:B,variables:{updateCurrencyInput:g},errorPolicy:"all"}).pipe((0,v.M)(({data:f})=>{const r=structuredClone(s);r[s.findIndex(u=>u.id===g.id)]=f.updateCurrency.currency,this.store.dispatch((0,D.Ih)({currencies:r}))}))))}updateCurrencyStatus(g){return this.store.select(i.y$).pipe((0,n.s)(1),(0,y.n)(s=>this._apollo.mutate({mutation:R,variables:{updateEntityStatusInput:g},errorPolicy:"all"}).pipe((0,v.M)(({})=>{const r=structuredClone(s);r[s.findIndex(u=>u.id===g.id)].active=g.active,this.store.dispatch((0,D.Ih)({currencies:r}))}))))}removeCurrency(g){return this.store.select(i.y$).pipe((0,n.s)(1),(0,y.n)(s=>this._apollo.mutate({mutation:b,variables:{removeCurrencyId:g},errorPolicy:"all"}).pipe((0,v.M)(({})=>{const r=structuredClone(s),o=s.findIndex(u=>u.id===g);r.splice(o,1),this.store.dispatch((0,D.Ih)({currencies:r}))}))))}static#e=this.\u0275fac=function(s){return new(s||O)};static#t=this.\u0275prov=h.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},64109:(L,m,l)=>{l.d(m,{Dc:()=>W,Hy:()=>X,NL:()=>r,Sz:()=>P,XW:()=>R,a$:()=>T,aI:()=>K,kZ:()=>N,s3:()=>M,xn:()=>o});var h=l(45024),n=l(74402),y=l(21413),v=l(84412),_=l(7673),D=(l(96697),l(5964),l(56977)),i=l(54438),U=l(28203);class B{constructor(){this.expansionModel=new h.CB(!0)}toggle(d){this.expansionModel.toggle(this._trackByValue(d))}expand(d){this.expansionModel.select(this._trackByValue(d))}collapse(d){this.expansionModel.deselect(this._trackByValue(d))}isExpanded(d){return this.expansionModel.isSelected(this._trackByValue(d))}toggleDescendants(d){this.expansionModel.isSelected(this._trackByValue(d))?this.collapseDescendants(d):this.expandDescendants(d)}collapseAll(){this.expansionModel.clear()}expandDescendants(d){let e=[d];e.push(...this.getDescendants(d)),this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}collapseDescendants(d){let e=[d];e.push(...this.getDescendants(d)),this.expansionModel.deselect(...e.map(t=>this._trackByValue(t)))}_trackByValue(d){return this.trackBy?this.trackBy(d):d}}class R extends B{constructor(d,e,t){super(),this.getLevel=d,this.isExpandable=e,this.options=t,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(d){const t=[];for(let c=this.dataNodes.indexOf(d)+1;c<this.dataNodes.length&&this.getLevel(d)<this.getLevel(this.dataNodes[c]);c++)t.push(this.dataNodes[c]);return t}expandAll(){this.expansionModel.select(...this.dataNodes.map(d=>this._trackByValue(d)))}}const N=new i.nKC("CDK_TREE_NODE_OUTLET_NODE");let T=(()=>{class a{constructor(e,t){this.viewContainer=e,this._node=t}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(i.c1b),i.rXU(N,8))};static#t=this.\u0275dir=i.FsC({type:a,selectors:[["","cdkTreeNodeOutlet",""]],standalone:!0})}return a})();class F{constructor(d){this.$implicit=d}}let P=(()=>{class a{constructor(e){this.template=e}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(i.C4Q))};static#t=this.\u0275dir=i.FsC({type:a,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[i.Mj6.None,"cdkTreeNodeDefWhen","when"]},standalone:!0})}return a})(),r=(()=>{class a{get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new y.B,this._levels=new Map,this.viewChange=new v.t({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter(t=>!t.when);this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;(0,h.y4)(this._dataSource)?e=this._dataSource.connect(this):(0,n.A)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=(0,_.of)(this._dataSource)),e&&(this._dataSubscription=e.pipe((0,D.Q)(this._onDestroy)).subscribe(t=>this.renderNodeChanges(t)))}renderNodeChanges(e,t=this._dataDiffer,c=this._nodeOutlet.viewContainer,p){const E=t.diff(e);E&&(E.forEachOperation((A,w,k)=>{if(null==A.previousIndex)this.insertNode(e[k],k,c,p);else if(null==k)c.remove(w),this._levels.delete(A.item);else{const j=c.get(w);c.move(j,k)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(p=>p.when&&p.when(t,e))||this._defaultNodeDef}insertNode(e,t,c,p){const E=this._getNodeDef(e,t),A=new F(e);A.level=this.treeControl.getLevel?this.treeControl.getLevel(e):typeof p<"u"&&this._levels.has(p)?this._levels.get(p)+1:0,this._levels.set(e,A.level),(c||this._nodeOutlet.viewContainer).createEmbeddedView(E.template,A,t),o.mostRecentTreeNode&&(o.mostRecentTreeNode.data=e)}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(i._q3),i.rXU(i.gRc))};static#t=this.\u0275cmp=i.VBU({type:a,selectors:[["cdk-tree"]],contentQueries:function(t,c,p){if(1&t&&i.wni(p,P,5),2&t){let E;i.mGM(E=i.lsd())&&(c._nodeDefs=E)}},viewQuery:function(t,c){if(1&t&&i.GBs(T,7),2&t){let p;i.mGM(p=i.lsd())&&(c._nodeOutlet=p.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],standalone:!0,features:[i.aNF],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,c){1&t&&i.eu8(0,0)},dependencies:[T],encapsulation:2})}return a})(),o=(()=>{class a{get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}static#e=this.mostRecentTreeNode=null;get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(e,t){this._elementRef=e,this._tree=t,this._destroyed=new y.B,this._dataChanges=new y.B,a.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=function u(a){let d=a.parentElement;for(;d&&!C(d);)d=d.parentElement;return d?d.classList.contains("cdk-nested-tree-node")?(0,i.Udg)(d.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){a.mostRecentTreeNode===this&&(a.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){this.role="treeitem"}static#t=this.\u0275fac=function(t){return new(t||a)(i.rXU(i.aKT),i.rXU(r))};static#n=this.\u0275dir=i.FsC({type:a,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(t,c){2&t&&i.BMQ("aria-expanded",c.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"],standalone:!0})}return a})();function C(a){const d=a.classList;return!(!d?.contains("cdk-nested-tree-node")&&!d?.contains("cdk-tree"))}let M=(()=>{class a extends o{constructor(e,t,c){super(e,t),this._differs=c}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy);const e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):(0,n.A)(e)&&e.pipe((0,D.Q)(this._destroyed)).subscribe(t=>this.updateChildrenNodes(t)),this.nodeOutlet.changes.pipe((0,D.Q)(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){const t=this._getNodeOutlet();e&&(this._children=e),t&&this._children?this._tree.renderNodeChanges(this._children,this._dataDiffer,t.viewContainer,this._data):this._dataDiffer.diff([])}_clear(){const e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const e=this.nodeOutlet;return e&&e.find(t=>!t._node||t._node===this)}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(i.aKT),i.rXU(r),i.rXU(i._q3))};static#t=this.\u0275dir=i.FsC({type:a,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,c,p){if(1&t&&i.wni(p,T,5),2&t){let E;i.mGM(E=i.lsd())&&(c.nodeOutlet=E)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],standalone:!0,features:[i.Jv_([{provide:o,useExisting:a},{provide:N,useExisting:a}]),i.Vt3]})}return a})();const x=/([A-Za-z%]+)$/;let K=(()=>{class a{get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}constructor(e,t,c,p){this._treeNode=e,this._tree=t,this._element=c,this._dir=p,this._destroyed=new y.B,this.indentUnits="px",this._indent=40,this._setPadding(),p&&p.change.pipe((0,D.Q)(this._destroyed)).subscribe(()=>this._setPadding(!0)),e._dataChanges.subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const c=this._element.nativeElement,p=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",E="paddingLeft"===p?"paddingRight":"paddingLeft";c.style[p]=t||"",c.style[E]="",this._currentPadding=t}}_setLevelInput(e){this._level=isNaN(e)?null:e,this._setPadding()}_setIndentInput(e){let t=e,c="px";if("string"==typeof e){const p=e.split(x);t=p[0],c=p[1]||c}this.indentUnits=c,this._indent=(0,i.Udg)(t),this._setPadding()}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(o),i.rXU(r),i.rXU(i.aKT),i.rXU(U.dS,8))};static#t=this.\u0275dir=i.FsC({type:a,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:[i.Mj6.HasDecoratorInputTransform,"cdkTreeNodePadding","level",i.Udg],indent:[i.Mj6.None,"cdkTreeNodePaddingIndent","indent"]},standalone:!0,features:[i.GFd]})}return a})(),X=(()=>{class a{constructor(e,t){this._tree=e,this._treeNode=t,this.recursive=!1}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}static#e=this.\u0275fac=function(t){return new(t||a)(i.rXU(r),i.rXU(o))};static#t=this.\u0275dir=i.FsC({type:a,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,c){1&t&&i.bIt("click",function(E){return c._toggle(E)})},inputs:{recursive:[i.Mj6.HasDecoratorInputTransform,"cdkTreeNodeToggleRecursive","recursive",i.L39]},standalone:!0,features:[i.GFd]})}return a})(),W=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275mod=i.$C({type:a});static#n=this.\u0275inj=i.G2t({})}return a})()},47358:(L,m,l)=>{l.d(m,{d6:()=>i,jH:()=>P,lQ:()=>N,pO:()=>T,yF:()=>R,yI:()=>U,yj:()=>O,zw:()=>$});var h=l(64109),n=l(54438),y=l(86600),v=l(45024),_=l(84412),I=l(57786),S=l(96697),D=l(96354);let i=(()=>{class s extends h.xn{constructor(r,o,u){super(r,o),this.disabled=!1,this.tabIndex=Number(u)||0}ngOnInit(){super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}static#e=this.\u0275fac=function(o){return new(o||s)(n.rXU(n.aKT),n.rXU(h.NL),n.kS0("tabindex"))};static#t=this.\u0275dir=n.FsC({type:s,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],inputs:{disabled:[n.Mj6.HasDecoratorInputTransform,"disabled","disabled",n.L39],tabIndex:[n.Mj6.HasDecoratorInputTransform,"tabIndex","tabIndex",r=>null==r?0:(0,n.Udg)(r)]},exportAs:["matTreeNode"],standalone:!0,features:[n.Jv_([{provide:h.xn,useExisting:s}]),n.GFd,n.Vt3]})}return s})(),U=(()=>{class s extends h.Sz{static#e=this.\u0275fac=(()=>{let r;return function(u){return(r||(r=n.xGo(s)))(u||s)}})();static#t=this.\u0275dir=n.FsC({type:s,selectors:[["","matTreeNodeDef",""]],inputs:{when:[n.Mj6.None,"matTreeNodeDefWhen","when"],data:[n.Mj6.None,"matTreeNode","data"]},standalone:!0,features:[n.Jv_([{provide:h.Sz,useExisting:s}]),n.Vt3]})}return s})(),R=(()=>{class s extends h.aI{get level(){return this._level}set level(r){this._setLevelInput(r)}get indent(){return this._indent}set indent(r){this._setIndentInput(r)}static#e=this.\u0275fac=(()=>{let r;return function(u){return(r||(r=n.xGo(s)))(u||s)}})();static#t=this.\u0275dir=n.FsC({type:s,selectors:[["","matTreeNodePadding",""]],inputs:{level:[n.Mj6.HasDecoratorInputTransform,"matTreeNodePadding","level",n.Udg],indent:[n.Mj6.None,"matTreeNodePaddingIndent","indent"]},standalone:!0,features:[n.Jv_([{provide:h.aI,useExisting:s}]),n.GFd,n.Vt3]})}return s})(),b=(()=>{class s{constructor(r,o){this.viewContainer=r,this._node=o}static#e=this.\u0275fac=function(o){return new(o||s)(n.rXU(n.c1b),n.rXU(h.kZ,8))};static#t=this.\u0275dir=n.FsC({type:s,selectors:[["","matTreeNodeOutlet",""]],standalone:!0,features:[n.Jv_([{provide:h.a$,useExisting:s}])]})}return s})(),N=(()=>{class s extends h.NL{constructor(){super(...arguments),this._nodeOutlet=void 0}static#e=this.\u0275fac=(()=>{let r;return function(u){return(r||(r=n.xGo(s)))(u||s)}})();static#t=this.\u0275cmp=n.VBU({type:s,selectors:[["mat-tree"]],viewQuery:function(o,u){if(1&o&&n.GBs(b,7),2&o){let C;n.mGM(C=n.lsd())&&(u._nodeOutlet=C.first)}},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],standalone:!0,features:[n.Jv_([{provide:h.NL,useExisting:s}]),n.Vt3,n.aNF],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(o,u){1&o&&n.eu8(0,0)},dependencies:[b],styles:[".mat-tree{display:block;background-color:var(--mat-tree-container-background-color)}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color);font-family:var(--mat-tree-node-text-font);font-size:var(--mat-tree-node-text-size);font-weight:var(--mat-tree-node-text-weight)}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height)}.mat-nested-tree-node{border-bottom-width:0}"],encapsulation:2})}return s})(),T=(()=>{class s extends h.Hy{static#e=this.\u0275fac=(()=>{let r;return function(u){return(r||(r=n.xGo(s)))(u||s)}})();static#t=this.\u0275dir=n.FsC({type:s,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[n.Mj6.None,"matTreeNodeToggleRecursive","recursive"]},standalone:!0,features:[n.Jv_([{provide:h.Hy,useExisting:s}]),n.Vt3]})}return s})(),P=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=n.$C({type:s});static#n=this.\u0275inj=n.G2t({imports:[h.Dc,y.yE,y.yE]})}return s})();class O{constructor(f,r,o,u){this.transformFunction=f,this.getLevel=r,this.isExpandable=o,this.getChildren=u}_flattenNode(f,r,o,u){const C=this.transformFunction(f,r);if(o.push(C),this.isExpandable(C)){const M=this.getChildren(f);M&&(Array.isArray(M)?this._flattenChildren(M,r,o,u):M.pipe((0,S.s)(1)).subscribe(x=>{this._flattenChildren(x,r,o,u)}))}return o}_flattenChildren(f,r,o,u){f.forEach((C,M)=>{let x=u.slice();x.push(M!=f.length-1),this._flattenNode(C,r+1,o,x)})}flattenNodes(f){let r=[];return f.forEach(o=>this._flattenNode(o,0,r,[])),r}expandFlattenedNodes(f,r){let o=[],u=[];return u[0]=!0,f.forEach(C=>{let M=!0;for(let x=0;x<=this.getLevel(C);x++)M=M&&u[x];M&&o.push(C),this.isExpandable(C)&&(u[this.getLevel(C)+1]=r.isExpanded(C))}),o}}class $ extends v.qS{get data(){return this._data.value}set data(f){this._data.next(f),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}constructor(f,r,o){super(),this._treeControl=f,this._treeFlattener=r,this._flattenedData=new _.t([]),this._expandedData=new _.t([]),this._data=new _.t([]),o&&(this.data=o)}connect(f){return(0,I.h)(f.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,D.T)(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this._treeControl)),this._expandedData.value)))}disconnect(){}}}}]);