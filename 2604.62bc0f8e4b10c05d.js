"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2604],{23605:(M,R,a)=>{a.d(R,{D1:()=>S,Nc:()=>b,r7:()=>n});var h=a(26306),e=a(58504),f=a(19212),C=a(43987),g=a(64190);let S=(()=>{class m{constructor(_,v){this._locationsService=_,this._router=v}resolve(_,v){const y=_.paramMap.get("locationId");if("new"!==y)return this._locationsService.getLocationById(y).pipe((0,h.K)(F=>{console.error(F);const E=v.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(E),(0,e._)(F)}))}static#e=this.\u0275fac=function(v){return new(v||m)(f.LFG(C._),f.LFG(g.F0))};static#t=this.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),n=(()=>{class m{constructor(_){this._locationsService=_}resolve(_,v){return this._locationsService.getLocations()}static#e=this.\u0275fac=function(v){return new(v||m)(f.LFG(C._))};static#t=this.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),b=(()=>{class m{constructor(_){this._locationsService=_}resolve(_,v){return this._locationsService.findActiveLocations()}static#e=this.\u0275fac=function(v){return new(v||m)(f.LFG(C._))};static#t=this.\u0275prov=f.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},43987:(M,R,a)=>{a.d(R,{_:()=>E});var h=a(99397),e=a(37398),f=a(26045),C=a(97214),g=a(50967);const S=g.Ps`
    mutation CreateLocation($createLocationInput: CreateLocationInput!) {
        createLocation(createLocationInput: $createLocationInput) {

            ok
            message

            location {
                id
                active
                managerId
                # manager {
                #     name
                # }
                name
                slug
                phone
                address
                country
                state
                city
                zip
            }

        }
    }
`,n=g.Ps`
    mutation UpdateLocation($updateLocationInput: UpdateLocationInput!) {
        updateLocation(updateLocationInput: $updateLocationInput) {
            ok
            message

            location {
                id
                active
                managerId
                # manager {
                #     name
                # }
                name
                slug
                phone
                address
                country
                state
                city
                zip
            }
        }
    }
`,b=g.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateLocationStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }

    }
`,m=g.Ps`
    mutation RemoveLocation($removeLocationId: String!) {
        removeLocation(id: $removeLocationId) {
            ok
            message
        }
    }
`,U=g.Ps`
    query FindAllLocations($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllLocations(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length,
                size,
                page,
                lastPage,
                startIndex,
                endIndex
            },

            locations {
                id
                active
                managerId
                manager {
                    id
                    name
                    lastname1
                    lastname2
                    fullname
                }
                name
                slug
                phone
                address
                country
                state
                city
                zip
            }
        }
    }
`,_=g.Ps`
    query findActiveLocations($search: String!, $size: Int!) {
        findActiveLocations(search: $search, size: $size) {
            id
            active
            managerId
            name
            slug
            phone
            address
            country
            state
            city
            zip
        }
    }
`,v=g.Ps`
    query FindLocationById($findLocationByIdId: String!) {
        findLocationById(id: $findLocationByIdId) {
            ok
            message

            location {
                id
                active
                managerId
                # manager {
                #     name
                # }
                name
                slug
                phone
                address
                country
                state
                city
                zip
            }
        }
    }
`;var y=a(19212),F=a(84221);let E=(()=>{class Z{constructor(u,x){this.apolloProvider=u,this.store=x,this._apollo=this.apolloProvider.use("BALANC")}createLocation(u){return this._apollo.mutate({mutation:S,variables:{createLocationInput:u},errorPolicy:"all"}).pipe((0,h.b)(({data:x})=>{x&&(this.store.dispatch((0,f.ob)({location:x.createLocation.location})),this.store.dispatch((0,f.l6)({location:x.createLocation.location})))}))}getLocations(u=0,x=25,d="name",l="asc",A=""){return this._apollo.query({query:U,errorPolicy:"all",variables:{page:u,size:x,sort:d,order:l,search:A}}).pipe((0,h.b)(({data:T})=>{T&&(this.store.dispatch((0,C.Jr)({pagination:T.findAllLocations.pagination})),this.store.dispatch((0,f.vB)({locations:T.findAllLocations.locations})))}))}findActiveLocations(u="",x=25){return this._apollo.query({query:_,variables:{search:u,size:x},errorPolicy:"all"}).pipe((0,e.U)(({data:d})=>d?d.findActiveLocations:[]),(0,h.b)(d=>{d&&this.store.dispatch((0,f.vB)({locations:d}))}))}getLocationById(u){return this._apollo.query({query:v,variables:{findLocationByIdId:u},errorPolicy:"all"}).pipe((0,h.b)(({data:x})=>{x&&this.store.dispatch((0,f.l6)({location:x.findLocationById.location}))}))}updateLocation(u){return this._apollo.mutate({mutation:n,variables:{updateLocationInput:u},errorPolicy:"all"}).pipe((0,h.b)(({data:x})=>{x&&(this.store.dispatch((0,f.YF)({location:x.updateLocation.location})),this.store.dispatch((0,f.l6)({location:x.updateLocation.location})))}))}updateLocationStatus(u){return this._apollo.mutate({mutation:b,variables:{updateEntityStatusInput:u},errorPolicy:"all"}).pipe((0,h.b)(({data:x})=>{x&&this.store.dispatch((0,f.TC)({id:u.id,active:u.active}))}))}removeLocation(u){return this._apollo.mutate({mutation:m,variables:{removeLocationId:u},errorPolicy:"all"}).pipe((0,h.b)(({data:x})=>{x&&this.store.dispatch((0,f.Mv)({id:u}))}))}static#e=this.\u0275fac=function(x){return new(x||Z)(y.LFG(g._M),y.LFG(F.yh))};static#t=this.\u0275prov=y.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"})}return Z})()},9427:(M,R,a)=>{a.d(R,{t:()=>C,x:()=>f});var h=a(19212),e=a(46482);const f=(g,S)=>(0,h.f3M)(e.t).getCurrencies(),C=(g,S)=>(0,h.f3M)(e.t).getActiveCurrency()},21510:(M,R,a)=>{a.d(R,{zd:()=>C});var h=a(84221);const e=g=>g.currencies,C=((0,h.P1)(e,g=>g.currency),(0,h.P1)(e,g=>g.currencies))},46482:(M,R,a)=>{a.d(R,{t:()=>N});var h=a(19212),e=a(48180),f=a(94664),C=a(99397),g=a(50967),S=a(84221),n=a(97214),b=a(20997),m=a(21510);const U=g.Ps`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,_=g.Ps`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,v=g.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,y=g.Ps`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,F=g.Ps`
    query FindAllCurrencies($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllCurrencies(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,E=g.Ps`
    query FindAllActiveCurrencies {
        findAllActiveCurrencies {
            ok
            message

            currencies {
                id
                name
                iso
            }
        }
    }
`,Z=g.Ps`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;let N=(()=>{class u{constructor(){this.apolloProvider=(0,h.f3M)(g._M),this.store=(0,h.f3M)(S.yh),this._apollo=this.apolloProvider.use("BALANC")}createCurrency(d){return this.store.select(m.zd).pipe((0,e.q)(1),(0,f.w)(l=>this._apollo.mutate({mutation:U,variables:{createCurrencyInput:d},errorPolicy:"all"}).pipe((0,C.b)(({data:A})=>{const T=structuredClone(l);T.push(A.createCurrency.currency),this.store.dispatch((0,b.HC)({currencies:T}))}))))}getCurrencies(d=1,l=20,A="name",T="asc",k=""){return this._apollo.query({query:F,variables:{offset:l*(d-1),limit:l,sort:A,order:T,search:k},errorPolicy:"all"}).pipe((0,C.b)(({data:I})=>{this.store.dispatch((0,n.Jr)({pagination:I.findAllCurrencies.pagination})),this.store.dispatch((0,b.HC)({currencies:I.findAllCurrencies.currencies}))}))}getActiveCurrency(){return this._apollo.query({query:E,errorPolicy:"all"}).pipe((0,C.b)(({data:d})=>{d&&this.store.dispatch((0,b.HC)({currencies:d.findAllActiveCurrencies.currencies}))}))}getCurrencyById(d){return this._apollo.query({query:Z,variables:{findCurrencyByIdId:d},errorPolicy:"all"}).pipe((0,C.b)(({data:l})=>{this.store.dispatch((0,b.NW)({currency:l.findCurrencyById.currency}))}))}updateCurrency(d){return this.store.select(m.zd).pipe((0,e.q)(1),(0,f.w)(l=>this._apollo.mutate({mutation:_,variables:{updateCurrencyInput:d},errorPolicy:"all"}).pipe((0,C.b)(({data:A})=>{const T=structuredClone(l);T[l.findIndex(I=>I.id===d.id)]=A.updateCurrency.currency,this.store.dispatch((0,b.HC)({currencies:T}))}))))}updateCurrencyStatus(d){return this.store.select(m.zd).pipe((0,e.q)(1),(0,f.w)(l=>this._apollo.mutate({mutation:v,variables:{updateEntityStatusInput:d},errorPolicy:"all"}).pipe((0,C.b)(({})=>{const T=structuredClone(l);T[l.findIndex(I=>I.id===d.id)].active=d.active,this.store.dispatch((0,b.HC)({currencies:T}))}))))}removeCurrency(d){return this.store.select(m.zd).pipe((0,e.q)(1),(0,f.w)(l=>this._apollo.mutate({mutation:y,variables:{removeCurrencyId:d},errorPolicy:"all"}).pipe((0,C.b)(({})=>{const T=structuredClone(l),k=l.findIndex(I=>I.id===d);T.splice(k,1),this.store.dispatch((0,b.HC)({currencies:T}))}))))}static#e=this.\u0275fac=function(l){return new(l||u)};static#t=this.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},22604:(M,R,a)=>{a.r(R),a.d(R,{default:()=>Et});var h=a(64190),e=a(19212);let f=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["module-restaurant"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(r,o){1&r&&e._UZ(0,"router-outlet")},dependencies:[h.Bz,h.lC],encapsulation:2})}return i})(),C=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["restaurant-menu"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(r,o){1&r&&(e.TgZ(0,"p"),e._uU(1,"menu works!"),e.qZA())},encapsulation:2})}return i})(),g=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["restaurant-panel"]],standalone:!0,features:[e.jDz],decls:2,vars:0,template:function(r,o){1&r&&(e.TgZ(0,"p"),e._uU(1,"restaurant-panel works!"),e.qZA())},encapsulation:2})}return i})();var S=a(15861),n=a(56223),b=a(32296),m=a(64170),U=a(30617),_=a(24516),v=a(21476),y=a(55940),F=a(82599),E=a(22939),Z=a(13566),N=a(96814),u=a(78645),x=a(22096),d=a(63019),l=a(59773),A=a(83620),T=a(27921),k=a(94664),I=a(37398),oe=a(64716),Q=a(84221),$=a(70810),B=a(83604),O=a(80930),G=a(29643),Y=a(53374),re=a(94748),z=a(56278),q=a(42090),ne=a(27627),K=a(59298),H=a(62725),ae=a(57270),se=a(74595);const ce=(i,s)=>s.id;function le(i,s){if(1&i&&e._UZ(0,"img",46),2&i){const t=e.oxw().$implicit;e.Q6J("alt","receipt thumbnail image")("src",t.thumbnail,e.LSH)}}function me(i,s){1&i&&(e.TgZ(0,"div",47),e._uU(1," SIN IMAGEN "),e.qZA())}function ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",48),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw(),p=c.$implicit,w=c.$index,P=e.oxw(2);return e.KtG(P.updateReceiptStatus(o,p,w))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("checked",t.active)("color","primary")}}function de(i,s){1&i&&e._UZ(0,"mat-spinner",41),2&i&&e.Q6J("diameter",20)("color","primary")}const pe=i=>["/restaurant/receipts/receipt",i];function ge(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"input",30),e.NdJ("change",function(o){const p=e.CHM(t).$implicit,w=e.oxw(2);return e.KtG(w.selectFiles(o,p))}),e.qZA(),e._UZ(4,"label",31),e.YNc(5,le,1,2,"img",32)(6,me,2,0,"div",33),e.qZA()(),e.TgZ(7,"div",34),e._uU(8),e.qZA(),e.TgZ(9,"div",35)(10,"span",36),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"span",37),e._uU(14),e.qZA()(),e.TgZ(15,"div",35)(16,"span",36),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"span",37),e._uU(20),e.qZA()(),e.TgZ(21,"div",38),e._uU(22),e.qZA(),e.TgZ(23,"div",39),e.YNc(24,ue,1,2,"mat-slide-toggle",40)(25,de,1,2,"mat-spinner",41),e.qZA(),e.TgZ(26,"div",42)(27,"button",43),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.generateReceiptDataSheetDocument(c))}),e._UZ(28,"mat-icon",44),e.qZA(),e.TgZ(29,"button",45),e._UZ(30,"mat-icon",44),e.qZA(),e.TgZ(31,"button",43),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.deleteReceipt(c.id))}),e._UZ(32,"mat-icon",44),e.qZA()()()}if(2&i){const t=s.$implicit,r=s.$index,o=e.oxw(2);e.xp6(3),e.Q6J("id",t.id)("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.xp6(),e.Q6J("for",t.id),e.xp6(),e.um2(5,t.thumbnail?5:-1),e.xp6(),e.um2(6,t.thumbnail?-1:6),e.xp6(2),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(e.xi3(12,18,t.cost,"1.2-2")),e.xp6(3),e.Oqu(t.currency.iso),e.xp6(3),e.Oqu(e.xi3(18,21,t.price,"1.2-2")),e.xp6(3),e.Oqu(t.currency.iso),e.xp6(2),e.hij(" ",t.salesQuantity," "),e.xp6(2),e.um2(24,o.isLoading&&o.selectedSlide===r?-1:24),e.xp6(),e.um2(25,o.isLoading&&o.selectedSlide===r?25:-1),e.xp6(3),e.Q6J("svgIcon","mat_solid:description"),e.xp6(),e.Q6J("routerLink",e.VKq(24,pe,t.id)),e.xp6(),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}const he=(i,s)=>({"pointer-events-none":i,hidden:s}),fe=()=>[25,50,100];function _e(i,s){if(1&i&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"div"),e.TgZ(3,"div",22),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",23),e._uU(6," Costo "),e.qZA(),e.TgZ(7,"div",23),e._uU(8," Precio "),e.qZA(),e.TgZ(9,"div",24),e._uU(10," U.Vendidas "),e.qZA(),e.TgZ(11,"div",23),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",25),e._uU(14,"Acciones"),e.qZA()(),e.SjG(15,ge,33,26,"div",49,ce),e._UZ(17,"mat-paginator",26),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","salesQuantity"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.wJu(t.receipts),e.xp6(2),e.Q6J("ngClass",e.WLB(11,he,t.isLoading,t.pagination.length<10&&t.pagination.page<1))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(14,fe))("showFirstLastButtons",!0)}}function xe(i,s){1&i&&(e.TgZ(0,"div",50),e._uU(1," \xa1No se ha creado ning\xfan trago o receta! "),e.qZA())}const be=i=>({"cursor-progress":i}),ve=()=>["/modules/restaurant/receipts/receipt/new"];let Ce=(()=>{class i{constructor(){this.flashMessage=null,this.isLoading=!1,this.receipts=[],this.searchInputControl=new n.NI(null),this.user=null,this.merchant=null,this.selectedSlide=null,this._changeDetectorRef=(0,e.f3M)(e.sBO),this._fileSaverService=(0,e.f3M)(ne.m),this._fuseConfirmationService=(0,e.f3M)(z.R),this._documentsService=(0,e.f3M)(ae.S),this._imagesService=(0,e.f3M)(K.C),this._receiptsService=(0,e.f3M)(H.k),this._router=(0,e.f3M)(h.F0),this._snackBar=(0,e.f3M)(E.ux),this._unsubscribeAll=new u.x,this.store=(0,e.f3M)(Q.yh)}ngOnInit(){this.store.select(Y.rk).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(G.Qs).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.store.select(B.B).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.store.select(O.L6).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.receipts=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.R)(this._unsubscribeAll),(0,A.b)(300),(0,T.O)(null),(0,k.w)(t=>null!==t?(this.isLoading=!0,this._receiptsService.findAllReceipts(0,25,"name","asc",t)):(0,x.of)()),(0,I.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._waitForPaginatorLoad().then(t=>{this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,d.T)(this._sort.sortChange,this._paginator.page).pipe((0,k.w)(()=>(this.isLoading=!0,this._receiptsService.findAllReceipts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,I.U)(()=>{this.isLoading=!1})).subscribe())})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,$.uL)())}selectFiles(t,r){if(0===t.target.files.length)return;const o=t.target.files[0];!this._imagesService.validMaxMBSize(o,2)||["image/jpeg","image/jpg","image/webp","image/png"].includes(o.type)}updateReceiptStatus(t,r,o){this.isLoading=!0,this.selectedSlide=o,this._receiptsService.updateReceiptStatus({id:r.id,active:t.checked}).pipe((0,l.R)(this._unsubscribeAll),(0,oe.x)(()=>{this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck()})).subscribe(({data:c})=>{c&&this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.updateProductStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})})}deleteReceipt(t){this._fuseConfirmationService.open({title:"Eliminar Producto",message:"\xbfEsta seguro que desea eliminar el producto?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._receiptsService.removeReceipt(t).pipe((0,l.R)(this._unsubscribeAll)).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:c.removeReceipt.message,type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}generateReceiptDataSheetDocument(t){this._documentsService.generateReceiptDataSheetDocument(t,this.merchant,this.user)}_waitForPaginatorLoad(){var t=this;return(0,S.Z)(function*(){for(;!t._paginator||void 0===t._paginator;)yield new Promise(r=>{setTimeout(r,200)});return t._paginator})()}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["receipt"]],viewQuery:function(r,o){if(1&r&&(e.Gf(v.NW,5),e.Gf(Z.YE,5)),2&r){let c;e.iGM(c=e.CRH())&&(o._paginator=c.first),e.iGM(c=e.CRH())&&(o._sort=c.first)}},standalone:!0,features:[e.jDz],decls:30,vars:14,consts:[["fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent",3,"ngClass"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-wrap","items-center","gap-2","mt-6","md:fixed","right-8","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLinkActive","router-link-active",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"routerLink"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","justify-between","flex-auto"],["class","relative grid"],[1,"relative","grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","receipt-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"flex","items-center","justify-start",3,"mat-sort-header"],[1,"flex","items-center","justify-center",3,"mat-sort-header"],["matTooltip","Unidades Vendidas",1,"flex","items-center","justify-center",3,"mat-sort-header"],[1,"pr-4","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:sticky","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-gray-900",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"z-0","grid","items-center","gap-4","px-6","py-3","bg-white","border-b","dark:bg-default","receipt-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"id","multiple","accept","change"],[1,"absolute","w-full","h-full","cursor-pointer",3,"for"],["for","thumbnail-file-input","class","w-11/12 rounded",3,"alt","src"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase"],[1,"truncate"],[1,"flex","flex-row","justify-center","space-x-1"],[1,"font-mono"],[1,"text-xs","text-secondary"],[1,"block","text-center"],[1,"flex","justify-center","mr-3","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["for","thumbnail-file-input",1,"w-11/12","rounded",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"checked","color","change"],["class","z-0 grid items-center gap-4 px-6 py-3 bg-white border-b dark:bg-default receipt-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Restaurante"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Recetas"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Listado de Recetas "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,_e,18,15,"div",19)(29,xe,2,0),e.qZA()()()),2&r&&(e.Q6J("ngClass",e.VKq(11,be,o.isLoading)),e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(),e.Q6J("routerLink",e.DdM(13,ve)),e.xp6(),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.um2(28,o.receipts.length>0?28:29))},dependencies:[N.JJ,b.ot,b.lW,m.lN,m.KE,m.qo,U.Ps,U.Hw,_.c,_.Nt,v.TU,v.NW,F.rP,F.Rr,y.Cq,y.Ou,Z.JX,Z.YE,Z.nU,N.mk,n.UX,n.Fj,n.JJ,n.oH,h.rH,se.H],encapsulation:2,data:{animation:re.L},changeDetection:0})}return i})();var L=a(17700),Te=a(66883),Ze=a(6367),ye=a(84384),V=a(2475),D=a(98525),J=a(23680);function Ae(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Mesa "),e.qZA())}function Ie(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Mesa "),e.qZA())}function Fe(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.hij(" ",t.data.table.name||"Sin nombre"," ")}}function Re(i,s){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.name," ")}}function ke(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"form",16)(2,"mat-form-field",17)(3,"mat-label"),e._uU(4,"Nombre"),e.qZA(),e._UZ(5,"input",18),e.qZA(),e.TgZ(6,"mat-form-field",19)(7,"mat-label"),e._uU(8,"Capacidad"),e.qZA(),e._UZ(9,"input",20),e.qZA(),e.TgZ(10,"mat-form-field",19)(11,"mat-label"),e._uU(12,"Ubicaci\xf3n"),e.qZA(),e.TgZ(13,"mat-select",21),e.SjG(14,Re,2,2,"mat-option",22,e.x6l),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(),e.Q6J("formGroup",t.tableForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","name")("placeholder","Nombre del mesa"),e.xp6(4),e.Q6J("formControlName","capacity"),e.xp6(4),e.Q6J("formControlName","locationId")("required",!0),e.xp6(),e.wJu(t.locations)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateTable())}),e._uU(1," Actualizar "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.tableForm.invalid)("matDialogClose","confirmed")}}function we(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createTable())}),e._uU(1," Agregar "),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("color","primary")("disabled",t.tableForm.invalid)("matDialogClose","confirmed")}}function Ee(i,s){if(1&i&&(e.TgZ(0,"div",23)(1,"button",24),e._uU(2," Cancelar "),e.qZA(),e.YNc(3,Ue,2,3,"button",25)(4,we,2,3,"button",25),e.qZA()),2&i){const t=e.oxw();e.xp6(),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.um2(3,"edit"===t.data.dialogMode?3:-1),e.xp6(),e.um2(4,"add"===t.data.dialogMode?4:-1)}}let qe=(()=>{class i{constructor(t){this.data=t,this.croppedImage="",this.dialogMode="view",this.imageChangedEvent="",this.locations=[],this._changeDetectorRef=(0,e.f3M)(e.sBO),this._dialogRef=(0,e.f3M)(L.so),this._formBuilder=(0,e.f3M)(n.qu),this._fuseConfirmationService=(0,e.f3M)(z.R),this._snackBar=(0,e.f3M)(E.ux),this._tablesService=(0,e.f3M)(V.i),this._unsubscribeAll=new u.x,this.store=(0,e.f3M)(Q.yh),this.dialogMode=t.dialogMode,this.table=t.table}ngOnInit(){this.tableForm=this._formBuilder.group({id:[null],name:[null,[n.kI.required,n.kI.minLength(3),n.kI.maxLength(255)]],capacity:[1,[n.kI.min(1),n.kI.max(24)]],locationId:[null,[n.kI.pattern("^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$")]]}),"edit"===this.dialogMode&&this.tableForm.patchValue(this.table),this.store.select(ye.Yu).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.locations=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createTable(){let t=this.tableForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear Mesa",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._tablesService.createTable(t).pipe((0,l.R)(this._unsubscribeAll)).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.createTable.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close()}),this._changeDetectorRef.markForCheck()})}updateTable(){const t=this.tableForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Mesa",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._tablesService.updateTable(t).pipe((0,l.R)(this._unsubscribeAll)).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.updateTable.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close()}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(L.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["restaurant-table-dialog"]],standalone:!0,features:[e.jDz],decls:8,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto"],["class","w-full overflow-hidden"],["class","flex items-center justify-center px-6 py-4 space-x-3 sm:justify-end bg-gray-50 dark:bg-black dark:bg-opacity-10"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"grid","sm:grid-cols-2","w-full","mt-1","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-dense","sm:col-span-2"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],[1,"w-full","fuse-mat-dense"],["matInput","","type","number","required","","min","0","max","24",3,"formControlName"],[3,"formControlName","required"],[3,"value"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Ae,2,0,"h2",2)(3,Ie,2,0,"h2",2),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Fe,9,1,"div",4)(6,ke,16,7,"div",5),e.qZA(),e.YNc(7,Ee,5,3,"div",6),e.qZA()),2&r&&(e.xp6(2),e.um2(2,"add"===o.data.dialogMode?2:-1),e.xp6(),e.um2(3,"edit"===o.data.dialogMode?3:-1),e.xp6(2),e.um2(5,"view"===o.data.dialogMode?5:-1),e.xp6(),e.um2(6,6),e.xp6(),e.um2(7,"view"!==o.data.dialogMode?7:-1))},dependencies:[b.ot,b.lW,U.Ps,_.c,_.Nt,m.KE,m.hX,m.lN,D.LD,D.gD,J.ey,n.UX,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.nD,n.qQ,n.Fd,n.sg,n.u,L.Is,L.ZT],encapsulation:2})}return i})();function Le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",35),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw(),p=c.$implicit,w=c.$index,P=e.oxw(2);return e.KtG(P.updateTableStatus(o,p,w))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("checked",t.active)("color","primary")}}function Se(i,s){1&i&&e._UZ(0,"mat-spinner",31),2&i&&e.Q6J("diameter",20)("color","primary")}function Ne(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",27),e._uU(2),e.qZA(),e.TgZ(3,"div",28),e._uU(4),e.qZA(),e.TgZ(5,"div",29),e._uU(6),e.qZA(),e.TgZ(7,"div",28),e._uU(8),e.qZA(),e.TgZ(9,"div",22),e.YNc(10,Le,1,2,"mat-slide-toggle",30)(11,Se,1,2,"mat-spinner",31),e.qZA(),e.TgZ(12,"div",32)(13,"button",33),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.openTableDialog("edit",c))}),e._UZ(14,"mat-icon",34),e.qZA(),e.TgZ(15,"button",33),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.deleteTable(c))}),e._UZ(16,"mat-icon",34),e.qZA()()()}if(2&i){const t=s.$implicit,r=s.$index,o=e.oxw(2);e.xp6(2),e.hij(" ",r+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.capacity," "),e.xp6(2),e.hij(" ",t.location.name," "),e.xp6(2),e.um2(10,o.isSlideLoading&&o.selectedSlide===r?-1:10),e.xp6(),e.um2(11,o.isSlideLoading&&o.selectedSlide===r?11:-1),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}const De=i=>({"pointer-events-none":i}),Me=()=>[5,10,25,100];function Je(i,s){if(1&i&&(e.TgZ(0,"div",19)(1,"div",20),e._UZ(2,"div"),e.TgZ(3,"div",21),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",22)(6,"div",21),e._uU(7," Capacidad "),e.qZA()(),e.TgZ(8,"div"),e._uU(9," Ubicaci\xf3n "),e.qZA(),e.TgZ(10,"div",23),e._uU(11," Activo "),e.qZA(),e.TgZ(12,"div",24),e._uU(13," Detalles "),e.qZA()(),e.SjG(14,Ne,17,8,"div",36,e.QCX().trackByFn),e.qZA(),e._UZ(16,"mat-paginator",25)),2&i){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(3),e.Q6J("mat-sort-header","capacity"),e.xp6(8),e.wJu(t.tables),e.xp6(2),e.Q6J("ngClass",e.VKq(8,De,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(10,Me))("showFirstLastButtons",!0)}}function Pe(i,s){1&i&&(e.TgZ(0,"div",37),e._uU(1," \xa1No se ha creado ninguna mesa para el restaurante! "),e.qZA())}let Qe=(()=>{class i{constructor(){this.flashMessage=null,this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.merchantInputControl=new n.NI,this.searchInputControl=new n.NI,this.selectedSlide=null,this.tables=[],this.user=null,this._changeDetectorRef=(0,e.f3M)(e.sBO),this._dialog=(0,e.f3M)(L.uw),this._fuseConfirmationService=(0,e.f3M)(z.R),this._snackBar=(0,e.f3M)(E.ux),this._tablesService=(0,e.f3M)(V.i),this._unsubscribeAll=new u.x,this.store=(0,e.f3M)(Q.yh)}ngOnInit(){this.store.select(Y.rk).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(G.Qs).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.store.select(Ze.LR).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.tables=t,this._changeDetectorRef.markForCheck()}),this.store.select(B.B).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.R)(this._unsubscribeAll),(0,A.b)(300),(0,k.w)(t=>(this.isLoading=!0,this._tablesService.getTables(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,I.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,d.T)(this._sort.sortChange,this._paginator.page).pipe((0,k.w)(()=>(this.isLoading=!0,this._tablesService.getTables(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,I.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,Te.XL)())}updateTableStatus(t,r,o){this.isSlideLoading=!0,this.selectedSlide=o,this._tablesService.updateTableStatus({id:r.id,active:t.checked}).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.updateTableStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}deleteTable(t){this._fuseConfirmationService.open({title:"Eliminar mesa",message:`\xbfEst\xe1s seguro de que deseas eliminar la mesa ${t.name}? Esta acci\xf3n no se puede deshacer.`,actions:{confirm:{label:"Eliminar",color:"warn"}}}).afterClosed().pipe((0,l.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._tablesService.removeTable(t.id).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.removeTable.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,r){return t||r.id}openTableDialog(t="add",r=null){this._dialog.open(qe,{data:{table:r,dialogMode:t},panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["restaurant-tables"]],viewQuery:function(r,o){if(1&r&&(e.Gf(v.NW,5),e.Gf(Z.YE,5)),2&r){let c;e.iGM(c=e.CRH())&&(o._paginator=c.first),e.iGM(c=e.CRH())&&(o._sort=c.first)}},standalone:!0,features:[e.jDz],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","lg:mt-0","lg:ml-4","gap-2"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","tables-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"flex","items-center","justify-center"],[1,"hidden","sm:block","text-center"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","tables-grid","md:px-8"],[1,"flex","items-center"],[1,"truncate"],[1,"text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","flex-wrap","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],["class","grid items-center gap-4 px-6 py-3 border-b tables-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Restaurante"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Mesas"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Listado de Mesas "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return o.openTableDialog()}),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,Je,17,11)(29,Pe,2,0),e.qZA()()()),2&r&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(7),e.Q6J("subscriptSizing","dynamic"),e.xp6(),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.um2(28,o.tables.length>0?28:29))},dependencies:[b.ot,b.lW,m.lN,m.KE,m.qo,U.Ps,U.Hw,_.c,_.Nt,v.TU,v.NW,F.rP,F.Rr,y.Cq,y.Ou,Z.JX,Z.YE,Z.nU,N.mk,n.UX,n.Fj,n.JJ,n.oH],encapsulation:2,changeDetection:0})}return i})();var ze=a(23605),je=a(42373),W=a(5843),X=a(36028),ee=a(75986),$e=a(48180);const Be=[{name:"Altramuces",checked:!1},{name:"Apio",checked:!1},{name:"Cacahuetes",checked:!1},{name:"Crust\xe1ceos",checked:!1},{name:"Frutos de secos",checked:!1},{name:"Gluten",checked:!1},{name:"Huevos",checked:!1},{name:"L\xe1cteos",checked:!1},{name:"Moluscos",checked:!1},{name:"Mostaza",checked:!1},{name:"Pescado",checked:!1},{name:"S\xe9samo",checked:!1},{name:"Soja",checked:!1},{name:"Sulfitos",checked:!1}];var Oe=a(21510),te=a(12936),Ge=a(24234),j=a(24630);function Ye(i,s){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.abbr," ")}}a(57222);let Ke=(()=>{class i{constructor(t){this.product=t,this.uoms=[],this._dialogRef=(0,e.f3M)(L.so)}ngOnInit(){this.ingredientForm=new n.cw({productId:new n.NI("",[n.kI.required,n.kI.pattern("^[a-f0-9]{8}-[a-f0-9]{4}-4{1}[a-f0-9]{3}-[89ab]{1}[a-f0-9]{3}-[a-f0-9]{12}$")]),quantity:new n.NI(null,[n.kI.required,n.kI.min(0)]),uomId:new n.NI("d1fdf6c2-bbfc-4135-9106-c1fe3a63c119",[n.kI.required,n.kI.pattern("^[a-f0-9]{8}-[a-f0-9]{4}-4{1}[a-f0-9]{3}-[89ab]{1}[a-f0-9]{3}-[a-f0-9]{12}$")])}),this.ingredientForm.get("productId").setValue(this.product.id)}addIngredient(){const t=this.ingredientForm.getRawValue();this._dialogRef.close(t)}static#e=this.\u0275fac=function(r){return new(r||i)(e.Y36(L.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["receipt-ingredient-dialog"]],standalone:!0,features:[e.jDz],decls:19,vars:9,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"w-full","overflow-hidden"],[1,"grid","w-full","gap-5","p-1","mt-4",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-dense"],["matInput","","type","number","required","","min","0","max","99999999",3,"formControlName"],["matPrefix","",3,"formControlName"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"],[3,"value"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"form",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Cantidad"),e.qZA(),e._UZ(10,"input",7),e.TgZ(11,"mat-select",8),e.SjG(12,Ye,2,2,"mat-option",12,e.x6l),e.qZA()()()()(),e.TgZ(14,"div",9)(15,"button",10),e._uU(16," Cancelar "),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return o.addIngredient()}),e._uU(18," Agregar "),e.qZA()()()),2&r&&(e.xp6(3),e.hij(" Definir la cantidad de ",o.product.name," "),e.xp6(3),e.Q6J("formGroup",o.ingredientForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","quantity"),e.xp6(),e.Q6J("formControlName","uomId"),e.xp6(),e.wJu(o.uoms),e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("color","primary")("disabled",o.ingredientForm.invalid)("matDialogClose","confirmed"))},dependencies:[b.ot,b.lW,L.Is,L.ZT,_.c,_.Nt,m.KE,m.hX,m.qo,m.lN,D.LD,D.gD,J.ey,n.UX,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.qQ,n.Fd,n.sg,n.u],encapsulation:2})}return i})();var He=a(95407);const ie=i=>({"cursor-not-allowed":i});function Ve(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createReceipt())}),e._UZ(1,"mat-icon",49),e.TgZ(2,"span",50),e._uU(3,"Guardar"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.receiptForm.invalid)("ngClass",e.VKq(3,ie,t.receiptForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:save")}}function We(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateReceipt())}),e._UZ(1,"mat-icon",49),e.TgZ(2,"span",50),e._uU(3,"Actualizar"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.receiptForm.invalid)("ngClass",e.VKq(3,ie,t.receiptForm.invalid)),e.xp6(),e.Q6J("svgIcon","mat_solid:refresh")}}function Xe(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto es obligatorio. "),e.qZA())}function et(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del producto debe contener entre 3 y 255 caracteres. "),e.qZA())}function tt(i,s){if(1&i&&(e.TgZ(0,"mat-option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.abbr," ")}}function it(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tama\xf1o de la porci\xf3n del producto debe ser 0. "),e.qZA())}function ot(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tama\xf1o de la porci\xf3n del producto debe ser 999999999. "),e.qZA())}function rt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tiempo de preparaci\xf3n del producto debe ser 0. "),e.qZA())}function nt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tiempo de preparaci\xf3n del producto debe ser 999999999. "),e.qZA())}function at(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tiempo de cocci\xf3n del producto debe ser 0. "),e.qZA())}function st(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del tiempo de cocci\xf3n del producto debe ser 999999999. "),e.qZA())}function ct(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del temperatura del producto debe ser 0. "),e.qZA())}function lt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del temperatura del producto debe ser 999999999. "),e.qZA())}function mt(i,s){if(1&i&&(e.TgZ(0,"mat-option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(),e.hij(" ",t," ")}}function ut(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una Moneda. "),e.qZA())}function dt(i,s){if(1&i&&(e.TgZ(0,"mat-option",51),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.iso," ")}}function pt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una Moneda. "),e.qZA())}function gt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del producto es obligatorio. "),e.qZA())}function ht(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del costo del producto debe ser 0. "),e.qZA())}function ft(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del costo del producto debe ser 999999999. "),e.qZA())}function _t(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del producto es obligatorio. "),e.qZA())}function xt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del precio del producto debe ser 0. "),e.qZA())}function bt(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El valor m\xednimo del precio del producto debe ser 999999999. "),e.qZA())}function vt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",52),e.NdJ("click",function(o){const p=e.CHM(t).$implicit;return e.oxw().addIngredient(p),e.KtG(o.stopPropagation())}),e._uU(1),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(),e.hij(" ",t.name," ")}}function Ct(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li",54),e._uU(1),e.TgZ(2,"button",55),e.NdJ("click",function(){const c=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.removeIngredient(c))}),e._UZ(3,"mat-icon",56),e.qZA()()}if(2&i){const t=s.$implicit,r=e.oxw(2);e.xp6(),e.lnq(" ",r.getProductName(t.productId)," - ",t.quantity," ",r.getUomAbbr(t.uomId)," "),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Tt(i,s){if(1&i&&(e.TgZ(0,"ol",53),e.SjG(1,Ct,4,4,"li",57,e.x6l),e.qZA()),2&i){const t=e.oxw();e.xp6(),e.wJu(t.ingredients)}}function Zt(i,s){1&i&&(e.TgZ(0,"div",58),e._uU(1," \xa1Debe seleccionar un ingrediente! "),e.qZA())}function yt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",65,66),e.NdJ("change",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.selectFiles(o,"thumbnail"))}),e.qZA(),e.TgZ(3,"label",67),e._UZ(4,"mat-icon",68),e.qZA()()}2&i&&(e.xp6(),e.Q6J("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","mat_solid:photo_camera"))}function At(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.removeImage("thumbnail"))}),e._UZ(2,"mat-icon",68),e.qZA()()}2&i&&(e.xp6(2),e.Q6J("svgIcon","mat_solid:delete"))}function It(i,s){if(1&i&&e._UZ(0,"img",69),2&i){const t=e.oxw(2);e.Q6J("src",t.receiptForm.get("thumbnail").value,e.LSH)}}function Ft(i,s){if(1&i&&(e.TgZ(0,"div",16),e._uU(1," Imagen "),e.qZA(),e.TgZ(2,"div",59)(3,"div",60),e._UZ(4,"div",61),e.TgZ(5,"div",62),e.YNc(6,yt,5,3,"div")(7,At,3,1,"div"),e.qZA(),e.YNc(8,It,1,1,"img",63),e.qZA()(),e.TgZ(9,"div",16),e._uU(10," Opciones "),e.qZA(),e.TgZ(11,"mat-slide-toggle",64),e._uU(12,"\xbfEst\xe1 activo?"),e.qZA()),2&i){const t=e.oxw();e.xp6(6),e.um2(6,t.receiptForm.get("thumbnail").value?-1:6),e.xp6(),e.um2(7,t.receiptForm.get("thumbnail").value?7:-1),e.xp6(),e.um2(8,t.receiptForm.get("thumbnail").value?8:-1),e.xp6(3),e.Q6J("color","primary")("formControlName","active")}}function Rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",70),e.NdJ("change",function(){const c=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.toggleReceiptAllergen(c.name))}),e._uU(1),e.qZA()}if(2&i){const t=s.$implicit,r=e.oxw();e.Q6J("color","primary")("checked",r.allergens.includes(t.name)),e.xp6(),e.hij(" ",t.name," ")}}let kt=(()=>{class i{constructor(){this.addOnBlur=!0,this.allergensList=Be,this.allergens=[],this.classifications=["Agregos","Bebidas","Ensaladas","Entrantes","Guarniciones","Panes","Pastas","Pizzas","Platos fuertes","Postres","Sopas"],this.currencies=[],this.editMode=!1,this.flashMessage=null,this.images=[],this.isLoading=!1,this.products=[],this.ingredients=[],this.filteredProducts=[],this.receiptId=null,this.searchProductControl=new n.NI(null),this.selectedReceipt=null,this.separatorKeysCodes=[X.K5,X.OC],this.tagsEditMode=!1,this.thumbnail="",this.uoms=[],this._unsubscribeAll=new u.x,this._activatedRoute=(0,e.f3M)(h.gz),this._changeDetectorRef=(0,e.f3M)(e.sBO),this._dialog=(0,e.f3M)(L.uw),this._formBuilder=(0,e.f3M)(n.qu),this._fuseConfirmationService=(0,e.f3M)(z.R),this._imagesService=(0,e.f3M)(K.C),this._productsService=(0,e.f3M)(Ge.s),this._receiptsService=(0,e.f3M)(H.k),this._router=(0,e.f3M)(h.F0),this._snackBar=(0,e.f3M)(E.ux),this.store=(0,e.f3M)(Q.yh)}ngOnInit(){this.receiptForm=this._formBuilder.group({id:new n.NI(""),name:new n.NI("",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(255)]),uomId:new n.NI("d1fdf6c2-bbfc-4135-9106-c1fe3a63c119",[n.kI.required]),thumbnail:new n.NI(""),active:new n.NI(!0),tags:new n.NI([]),cost:new n.NI(0,[n.kI.required,n.kI.min(0),n.kI.max(999999999),n.kI.maxLength(9)]),price:new n.NI(0,[n.kI.required,n.kI.min(0),n.kI.max(999999999),n.kI.maxLength(9)]),portionSize:new n.NI(null,[n.kI.min(0),n.kI.max(999999999),n.kI.maxLength(9)]),preparationTime:new n.NI(null,[n.kI.min(0),n.kI.max(999999999),n.kI.maxLength(9)]),temperature:new n.NI(null,[n.kI.min(0),n.kI.max(9999),n.kI.maxLength(4)]),cookingTime:new n.NI(null,[n.kI.min(0),n.kI.max(9999),n.kI.maxLength(4)]),allergens:new n.Oe([]),classification:new n.NI(""),description:new n.NI("",[n.kI.maxLength(1e4)]),elaboration:new n.NI("",[n.kI.maxLength(1e4)]),presentation:new n.NI("",[n.kI.maxLength(1e4)]),equipments:new n.NI("",[n.kI.maxLength(1e4)]),currencyId:new n.NI("",[n.kI.required]),images:new n.NI([]),ingredients:new n.Oe([])}),this._activatedRoute.params.pipe((0,l.R)(this._unsubscribeAll)).subscribe(({receiptId:t})=>{this.receiptId=t,"new"!==this.receiptId&&(this.editMode=!0,this.store.select(O.sV).pipe((0,l.R)(this._unsubscribeAll)).subscribe(r=>{this.receiptForm.patchValue(r),this.images=r.images,this.selectedReceipt=r,this.ingredients=r.ingredients})),this._changeDetectorRef.markForCheck()}),this.store.select(Oe.zd).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.currencies=t,this._changeDetectorRef.markForCheck()}),this.store.select(te.nR).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.products=t,this.filteredProducts=t,this._changeDetectorRef.markForCheck()}),this.store.select(te.a0).pipe((0,l.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=structuredClone(t),this.filteredTags=structuredClone(t),this._changeDetectorRef.markForCheck()}),this.searchProductControl.valueChanges.pipe((0,l.R)(this._unsubscribeAll),(0,A.b)(200)).subscribe(t=>{this.filteredProducts=this.products.filter(r=>r.name.toLowerCase().includes(t.toLowerCase())),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,$.z6)())}toggleReceiptAllergen(t){""!==t&&(this.allergens.includes(t)?this.allergens.splice(this.allergens.indexOf(t),1):this.allergens.push(t),this._changeDetectorRef.markForCheck())}addIngredient(t){this._dialog.open(Ke,{data:t,panelClass:"ath-dialog-panel",maxWidth:"300px",disableClose:!0}).afterClosed().pipe((0,$e.q)(1)).subscribe(r=>{r&&(this.ingredients.push(r),this._changeDetectorRef.markForCheck())})}removeIngredient(t){this.ingredients.splice(this.ingredients.indexOf(t),1),this._changeDetectorRef.markForCheck()}getProductName(t){const r=this.products.find(o=>o.id===t);return r?r.name:""}getUomAbbr(t){const r=this.uoms.find(o=>o.id===t);return r?r.abbr:""}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const r=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(o=>o.name.toLowerCase().includes(r))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const r=this.filteredTags[0];this.selectedReceipt.tags.find(c=>c===r.id)?this.removeTagFromProduct(r):this.addTagToProduct(r)}createTag(t){this._productsService.createTag({active:!0,name:t}).subscribe(({data:o})=>{this.addTagToProduct(o.createTag.tag),this._changeDetectorRef.markForCheck()})}updateTagName(t,r){t.name=r.target.value,delete t.__typename,setTimeout(()=>{this._productsService.updateTag(t).pipe((0,A.b)(300)).subscribe(()=>{this._changeDetectorRef.markForCheck()})},1e3)}deleteTag(t){this._productsService.deleteTag(t.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(t){const r=structuredClone(this.selectedReceipt);r.tags.unshift(t.id),this.receiptForm.get("tags").patchValue(r.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){const r=this.receiptForm.getRawValue();r.tags.splice(r.tags.findIndex(o=>o===t.id),1),this.receiptForm.get("tags").patchValue(r.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(t,r){r.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(r=>r.name.toLowerCase()===t.toLowerCase())>-1)}createReceipt(){const t=this.receiptForm.getRawValue();delete t.id,delete t.active,t.ingredients=this.ingredients,t.allergens=this.allergens,this._fuseConfirmationService.open({title:"Crear producto ",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._receiptsService.createReceipt(t).pipe((0,l.R)(this._unsubscribeAll)).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:c.createReceipt.message,type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/restaurant/receipts")}),this._changeDetectorRef.markForCheck()})}updateReceipt(){const t=this.receiptForm.getRawValue();t.ingredients=this.ingredients,t.allergens=this.allergens,this._fuseConfirmationService.open({title:"Actualizar Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._receiptsService.updateReceipt(t).pipe((0,l.R)(this._unsubscribeAll)).subscribe(({data:c})=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:c.updateReceipt.message,type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/restaurant/receipts")}),this._changeDetectorRef.markForCheck()})}selectFiles(t,r){if(0===t.target.files.length)return;const o=t.target.files[0];!this._imagesService.validMaxMBSize(o,2)||!["image/jpeg","image/jpg","image/webp","image/png"].includes(o.type)||this._uploadFile(t,r)}removeImage(t){this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar esta imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.R)(this._unsubscribeAll)).subscribe(o=>{if("confirmed"===o){const c=this.receiptForm.get(t).value;switch(t){case"images":this.receiptForm.get(t).setValue([]);break;case"thumbnail":this.receiptForm.get(t).setValue(null)}const p=this.receiptForm.getRawValue();this.editMode&&this._productsService.updateProductImages(p.id,p.thumbnail,p.images).subscribe(w=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:w.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})},w=>{this.receiptForm.get(t).setValue(c)}),this._changeDetectorRef.markForCheck()}})}displayFn(t){return t&&t.name?t.name:""}_uploadFile(t,r){this._imagesService.openCropperDialog(t,!0).pipe((0,l.R)(this._unsubscribeAll)).subscribe(o=>{if(!o)return;this.receiptForm.get(r).setValue(o);const c=this.receiptForm.getRawValue();this.editMode&&this._productsService.updateProductImages(c.id,c.thumbnail,c.images).subscribe(p=>{this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:p.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()},p=>{this.receiptForm.get(r).setValue(null)})})}_mapChecked(t){return t.pipe((0,I.U)(r=>r.map(o=>this.receiptForm.get("ingredients").getRawValue().some(p=>p.id===o.id)?{...structuredClone(o),checked:!0}:{...structuredClone(o),checked:!1})))}static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["receipt-form"]],standalone:!0,features:[e.jDz],decls:147,vars:52,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","gap-5","p-3","overflow-y-auto","bg-cover","sm:absolute","sm:inset-0","dark:bg-transparent"],[1,"z-20","flex","flex-col","bg-transparent","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-5"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/restaurant/dashboard",1,"ml-1","text-primary-500"],["routerLink","/restaurant/receipts",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","items-center","mt-6","shrink-0","lg:mt-0","lg:ml-4"],["class","ml-4","mat-raised-button","","class","text-white bg-gradient-to-r from-primary-500 to-primary-600",3,"disabled","ngClass"],[1,"flex","flex-auto"],[1,"w-full",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-3","sm:grid-cols-4"],[1,"flex","flex-col","gap-3","p-3","rounded-md","shadow-md","sm:col-span-3","bg-card"],[1,"text-xl","font-semibold"],[1,"grid","grid-cols-1","gap-3","mt-5","sm:grid-cols-2","lg:grid-cols-4"],[1,"w-full","sm:col-span-4","fuse-mat-dense"],["matInput","","type","text","minlength","3","maxlength","255","required","",3,"formControlName"],[1,"w-full","fuse-mat-dense"],["matInput","","type","number","formControlName","portionSize","min","0"],["matSuffix","",3,"value","formControlName"],["matPrefix","",1,"pr-1"],["matInput","","type","number","formControlName","preparationTime","min","0"],["matInput","","type","number","formControlName","cookingTime","min","0"],["matInput","","type","number","formControlName","temperature","min","0"],[3,"formControlName","required"],["matInput","","type","number","formControlName","cost","min","0"],["matInput","","type","number","formControlName","price","min","0"],[1,"w-full","sm:col-span-4"],["matInput","","matTextareaAutoSize","","maxlength","10000",3,"formControlName","rows"],["descriptionLength",""],[1,"w-full","text-right"],["elaborationLength",""],["presentationLength",""],["equipmentsLength",""],["appearance","fill",1,"w-full","sm:col-span-4","fuse-mat-dense"],["matPrefix","",3,"svgIcon"],["type","text","matInput","",3,"formControl","matAutocomplete","placeholder"],[1,"ath-autocomplete",3,"displayWith","closed"],["productsAutocomplete","matAutocomplete"],[1,"flex","flex-col","w-full","space-y-4","sm:col-span-4"],["class","list-decimal"],[1,"flex","flex-col","gap-3","p-3","rounded-md","shadow-md","bg-card"],[1,"flex","flex-col","mt-5"],[1,"mb-px","text-xl","font-semibold","leading-tight"],[1,"flex","flex-col","items-start","mt-1.5","rounded-md"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"value"],[1,"w-full",3,"click"],[1,"list-decimal"],[1,"flex","items-center","space-x-2"],["mat-icon-button","",3,"click"],[1,"text-white","icon-size-5",3,"svgIcon"],["class","flex items-center space-x-2"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"],[1,"flex","items-center","justify-center","flex-auto","max-h-40"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","ring-4","ring-bg-card"],[1,"absolute","inset-0","z-10","bg-opacity-50","bg-slate-300"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["class","object-cover w-full h-full",3,"src"],[3,"color","formControlName"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["thumbnailFileInput",""],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","h-10","min-h-8",3,"color","checked","change"],["class","w-full"],["class","flex items-center h-10 min-h-8",3,"color","checked"]],template:function(r,o){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Restaurante"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Recetas"),e.qZA()(),e.TgZ(16,"div",5),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19),e.qZA()()()()(),e.TgZ(20,"div",10),e.YNc(21,Ve,4,5,"button",11)(22,We,4,5,"button",11),e.qZA()(),e.TgZ(23,"div",12)(24,"form",13)(25,"div",14)(26,"div",15)(27,"div",16),e._uU(28," Informaci\xf3n General "),e.qZA(),e.TgZ(29,"div",17)(30,"mat-form-field",18)(31,"mat-label"),e._uU(32,"Nombre"),e.qZA(),e._UZ(33,"input",19),e.YNc(34,Xe,2,0,"mat-error")(35,et,2,0,"mat-error"),e.qZA(),e.TgZ(36,"mat-form-field",20)(37,"mat-label"),e._uU(38,"Tama\xf1o de la porci\xf3n "),e.qZA(),e._UZ(39,"input",21),e.TgZ(40,"mat-select",22),e.SjG(41,tt,2,2,"mat-option",51,e.x6l),e.qZA(),e.YNc(43,it,2,0,"mat-error")(44,ot,2,0,"mat-error"),e.qZA(),e.TgZ(45,"mat-form-field",20)(46,"mat-label"),e._uU(47,"Tiempo de preparaci\xf3n "),e.qZA(),e.TgZ(48,"span",23),e._uU(49,"Minutos: "),e.qZA(),e._UZ(50,"input",24),e.YNc(51,rt,2,0,"mat-error")(52,nt,2,0,"mat-error"),e.qZA(),e.TgZ(53,"mat-form-field",20)(54,"mat-label"),e._uU(55,"Tiempo de cocci\xf3n "),e.qZA(),e.TgZ(56,"span",23),e._uU(57,"Minutos: "),e.qZA(),e._UZ(58,"input",25),e.YNc(59,at,2,0,"mat-error")(60,st,2,0,"mat-error"),e.qZA(),e.TgZ(61,"mat-form-field",20)(62,"mat-label"),e._uU(63,"Temperatura "),e.qZA(),e.TgZ(64,"span",23),e._uU(65,"\xbaC: "),e.qZA(),e._UZ(66,"input",26),e.YNc(67,ct,2,0,"mat-error")(68,lt,2,0,"mat-error"),e.qZA(),e.TgZ(69,"mat-form-field",20)(70,"mat-label"),e._uU(71,"Clasificaci\xf3n"),e.qZA(),e.TgZ(72,"mat-select",27),e.SjG(73,mt,2,2,"mat-option",51,e.x6l),e.qZA(),e.YNc(75,ut,2,0,"mat-error"),e.qZA(),e.TgZ(76,"mat-form-field",20)(77,"mat-label"),e._uU(78,"Moneda"),e.qZA(),e.TgZ(79,"mat-select",27),e.SjG(80,dt,2,2,"mat-option",51,e.x6l),e.qZA(),e.YNc(82,pt,2,0,"mat-error"),e.qZA(),e.TgZ(83,"mat-form-field",20)(84,"mat-label"),e._uU(85,"Costo "),e.qZA(),e._UZ(86,"input",28),e.YNc(87,gt,2,0,"mat-error")(88,ht,2,0,"mat-error")(89,ft,2,0,"mat-error"),e.qZA(),e.TgZ(90,"mat-form-field",20)(91,"mat-label"),e._uU(92,"Precio "),e.qZA(),e._UZ(93,"input",29),e.YNc(94,_t,2,0,"mat-error")(95,xt,2,0,"mat-error")(96,bt,2,0,"mat-error"),e.qZA(),e.TgZ(97,"mat-form-field",30)(98,"mat-label"),e._uU(99,"Descripci\xf3n"),e.qZA(),e._UZ(100,"textarea",31,32),e.TgZ(102,"mat-hint",33),e._uU(103),e.qZA()(),e.TgZ(104,"mat-form-field",30)(105,"mat-label"),e._uU(106,"Elaboraci\xf3n"),e.qZA(),e._UZ(107,"textarea",31,34),e.TgZ(109,"mat-hint",33),e._uU(110),e.qZA()(),e.TgZ(111,"mat-form-field",30)(112,"mat-label"),e._uU(113,"Presentaci\xf3n"),e.qZA(),e._UZ(114,"textarea",31,35),e.TgZ(116,"mat-hint",33),e._uU(117),e.qZA()(),e.TgZ(118,"mat-form-field",30)(119,"mat-label"),e._uU(120,"Equipos Necesarios"),e.qZA(),e._UZ(121,"textarea",31,36),e.TgZ(123,"mat-hint",33),e._uU(124),e.qZA()(),e.TgZ(125,"mat-form-field",37)(126,"mat-label"),e._uU(127,"Ingredientes"),e.qZA(),e._UZ(128,"mat-icon",38)(129,"input",39),e.TgZ(130,"mat-autocomplete",40,41),e.NdJ("closed",function(){return o.searchProductControl.reset()}),e.SjG(132,vt,2,1,"mat-option",71,e.x6l),e.qZA()(),e.TgZ(134,"div",42)(135,"div",16),e._uU(136," Lista de ingredientes "),e.qZA(),e.YNc(137,Tt,3,0,"ol",43)(138,Zt,2,0),e.qZA()()(),e.TgZ(139,"div",44),e.YNc(140,Ft,13,5),e.TgZ(141,"div",45)(142,"span",46),e._uU(143,"Al\xe9rgenos"),e.qZA(),e.TgZ(144,"div",47),e.SjG(145,Rt,2,3,"mat-checkbox",72,e.x6l),e.qZA()()()()()()()),2&r){const c=e.MAs(101),p=e.MAs(108),w=e.MAs(115),P=e.MAs(122),qt=e.MAs(131);e.xp6(9),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(2),e.hij(" ","new"===o.receiptId?"Crear":"Editar"," "),e.xp6(2),e.um2(21,o.editMode?-1:21),e.xp6(),e.um2(22,o.editMode?22:-1),e.xp6(2),e.Q6J("formGroup",o.receiptForm)("autocomplete","off"),e.xp6(9),e.Q6J("formControlName","name"),e.xp6(),e.um2(34,o.receiptForm.get("name").hasError("required")?34:-1),e.xp6(),e.um2(35,o.receiptForm.get("name").hasError("minlength")||o.receiptForm.get("name").hasError("maxlength")?35:-1),e.xp6(5),e.Q6J("value","kg")("formControlName","uomId"),e.xp6(),e.wJu(o.uoms),e.xp6(2),e.um2(43,o.receiptForm.get("portionSize").hasError("min")?43:-1),e.xp6(),e.um2(44,o.receiptForm.get("portionSize").hasError("max")?44:-1),e.xp6(7),e.um2(51,o.receiptForm.get("preparationTime").hasError("min")?51:-1),e.xp6(),e.um2(52,o.receiptForm.get("preparationTime").hasError("max")?52:-1),e.xp6(7),e.um2(59,o.receiptForm.get("cookingTime").hasError("min")?59:-1),e.xp6(),e.um2(60,o.receiptForm.get("cookingTime").hasError("max")?60:-1),e.xp6(7),e.um2(67,o.receiptForm.get("temperature").hasError("min")?67:-1),e.xp6(),e.um2(68,o.receiptForm.get("temperature").hasError("max")?68:-1),e.xp6(4),e.Q6J("formControlName","classification")("required",!0),e.xp6(),e.wJu(o.classifications),e.xp6(2),e.um2(75,o.receiptForm.get("classification").hasError("required")?75:-1),e.xp6(4),e.Q6J("formControlName","currencyId")("required",!0),e.xp6(),e.wJu(o.currencies),e.xp6(2),e.um2(82,o.receiptForm.get("currencyId").hasError("required")?82:-1),e.xp6(5),e.um2(87,o.receiptForm.get("cost").hasError("required")?87:-1),e.xp6(),e.um2(88,o.receiptForm.get("cost").hasError("min")?88:-1),e.xp6(),e.um2(89,o.receiptForm.get("cost").hasError("max")?89:-1),e.xp6(5),e.um2(94,o.receiptForm.get("price").hasError("required")?94:-1),e.xp6(),e.um2(95,o.receiptForm.get("price").hasError("min")?95:-1),e.xp6(),e.um2(96,o.receiptForm.get("price").hasError("max")?96:-1),e.xp6(4),e.Q6J("formControlName","description")("rows",2),e.xp6(3),e.hij(" Total de caracteres ",c.value.length," /10000 "),e.xp6(4),e.Q6J("formControlName","elaboration")("rows",2),e.xp6(3),e.hij(" Total de caracteres ",p.value.length," /10000 "),e.xp6(4),e.Q6J("formControlName","presentation")("rows",2),e.xp6(3),e.hij(" Total de caracteres ",w.value.length," /10000 "),e.xp6(4),e.Q6J("formControlName","equipments")("rows",2),e.xp6(3),e.hij(" Total de caracteres ",P.value.length," /10000 "),e.xp6(4),e.Q6J("svgIcon","mat_solid:search"),e.xp6(),e.Q6J("formControl",o.searchProductControl)("matAutocomplete",qt)("placeholder","Buscar ingredientes"),e.xp6(),e.Q6J("displayWith",o.displayFn),e.xp6(2),e.wJu(o.products),e.xp6(5),e.um2(137,o.ingredients.length>0?137:138),e.xp6(3),e.um2(140,o.editMode?140:-1),e.xp6(5),e.wJu(o.allergensList)}},dependencies:[j.Bb,He.PQ,j.XC,J.ey,j.ZL,b.ot,b.lW,b.RK,ee.p9,ee.oG,m.lN,m.KE,m.hX,m.bx,m.TO,m.qo,m.R9,U.Ps,U.Hw,_.c,_.Nt,v.TU,J.si,J.wG,D.LD,D.gD,F.rP,F.Rr,y.Cq,Z.JX,N.mk,n.UX,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.wO,n.nD,n.qQ,n.oH,n.sg,n.u,h.rH],encapsulation:2,changeDetection:0})}return i})();var Ut=a(9427),wt=a(53308);const Et=[{path:"",component:f,children:[{path:"",pathMatch:"full",redirectTo:"dashboard"},{path:"dashboard",component:g},{path:"menu",component:C,resolve:{}},{path:"tables",component:Qe,resolve:{locations:ze.Nc,tables:je.u}},{path:"receipts",component:Ce,resolve:{receipts:W.kn}},{path:"receipts/receipt/:receiptId",component:kt,resolve:{currencies:Ut.t,products:wt.L0,receipt:W.lp}},{path:"**",redirectTo:"dashboard"}]}]}}]);