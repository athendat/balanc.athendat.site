"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3122],{53122:(sn,ut,d)=>{d.r(ut),d.d(ut,{default:()=>Is});var M=d(21413),f=d(56977),wt=d(10729),t=d(54438),I=d(51188);let Dt=(()=>{class n{constructor(e,o,i){this._activatedRoute=e,this._changeDetectorRef=o,this._router=i,this.merchantId="",this._unsubscribeAll=new M.B}ngOnInit(){this._activatedRoute.params.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({merchantId:e})=>{void 0!==e&&(this.merchantId=e,this._changeDetectorRef.markForCheck())})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(I.nX),t.rXU(t.gRc),t.rXU(I.Ix))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["ath-commercial"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"ath-content-menu")},dependencies:[wt.k],encapsulation:2,changeDetection:0})}return n})();var It=d(21809),y=d(88834),C=d(99213);const jt=["invoiceDetail"],Et=()=>["../"];let St=(()=>{class n{constructor(){}ngOnInit(){}generatePDF(e){this.invoiceDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["invoice-details-header"]],viewQuery:function(o,i){if(1&o&&t.GBs(jt,5),2&o){let s;t.mGM(s=t.lsd())&&(i.invoiceDetailsComponent=s.first)}},standalone:!0,features:[t.aNF],decls:35,vars:9,consts:[["invoiceDetail",""],["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-center"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"]],template:function(o,i){if(1&o){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",5),t.nrm(9,"mat-icon",7),t.j41(10,"a",8),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",5),t.nrm(13,"mat-icon",7),t.j41(14,"a",9),t.EFF(15,"Facturas"),t.k0s()()(),t.j41(16,"div",10)(17,"a",11),t.nrm(18,"mat-icon",7),t.j41(19,"span",12),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",13)(22,"div",14)(23,"span"),t.EFF(24,"Detalles de la factura"),t.k0s()()()(),t.j41(25,"div",15)(26,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("open"))}),t.nrm(27,"mat-icon",17),t.k0s(),t.j41(28,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("download"))}),t.nrm(29,"mat-icon",17),t.k0s(),t.j41(30,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("print"))}),t.nrm(31,"mat-icon",17),t.k0s()()(),t.j41(32,"div",18),t.nrm(33,"invoice-details",null,0),t.k0s()()}2&o&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(),t.Y8G("routerLink",t.lJ4(8,Et)),t.R7$(3),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(9),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))},dependencies:[It.F,C.m_,C.An,y.Hl,y.$z,I.Wk],encapsulation:2,changeDetection:0})}return n})();var k=d(60177),l=d(89417),_=d(32102),w=d(59042),X=d(59115),j=d(96695),F=d(2042),E=d(7673),L=d(57786),q=d(70152),et=d(99172),S=d(25558),$=d(96354),Tt=d(94268),Y=d(47413),U=d(87122),nt=d(53440),D=d(94794),rt=function(n){return n.PendientePago="Pendiente de Pago",n.PagadaParcialmente="Pagada Parcialmente",n.PagadaTotalmente="Pagada Totalmente",n.Cancelada="Cancelada",n.Vencida="Vencida",n}(rt||{}),H=d(14823),A=d(75351),J=d(46601),pt=d(9005),P=d(95416),T=d(59640),W=d(55542);const $t=()=>["Super Administrador"],Gt=n=>({"pointer-events-none":n}),Mt=()=>[10,25,50,100],At=(n,a,e,o,i)=>({"bg-amber-50 text-amber-700":n,"bg-blue-50 text-blue-700":a,"bg-green-50 text-green-700":e,"bg-red-50 text-red-700":o,"bg-pink-50 text-pink-700":i}),Nt=n=>[n],Ot=()=>[""],Bt=n=>({"bg-amber-500 text-amber-50":n}),Pt=n=>({"bg-blue-500 text-blue-50":n}),Xt=n=>({"bg-green-500 text-green-50":n}),qt=n=>({"bg-red-500 text-red-50":n}),Vt=n=>({"bg-pink-500 text-pink-50":n});function Lt(n,a){if(1&n&&(t.j41(0,"div",19)(1,"mat-form-field",20),t.nrm(2,"mat-icon",21)(3,"input",22),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar facturas")}}function Yt(n,a){1&n&&t.eu8(0)}function Ut(n,a){if(1&n&&(t.j41(0,"div",35)(1,"span"),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Lme("",t.i5U(3,2,e.total,t.lJ4(5,Ot))," ",e.currency,"")}}function ht(n,a){1&n&&t.nrm(0,"mat-icon",41),2&n&&t.Y8G("svgIcon","mat_solid:done")}function zt(n,a){1&n&&t.nrm(0,"mat-icon",41),2&n&&t.Y8G("svgIcon","mat_solid:done")}function Qt(n,a){1&n&&t.nrm(0,"mat-icon",41),2&n&&t.Y8G("svgIcon","mat_solid:done")}function ft(n,a){1&n&&t.nrm(0,"mat-icon",41),2&n&&t.Y8G("svgIcon","mat_solid:done")}function Ht(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",33)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"div",34),t.EFF(4),t.k0s(),t.j41(5,"div",28),t.Z7z(6,Ut,4,6,"div",35,t.fX1),t.k0s(),t.j41(8,"div",36),t.EFF(9),t.k0s(),t.j41(10,"div",37)(11,"span",38),t.EFF(12),t.k0s()(),t.j41(13,"div",39)(14,"button",40),t.nrm(15,"mat-icon",41),t.k0s(),t.j41(16,"div")(17,"button",42),t.nrm(18,"mat-icon",41),t.k0s(),t.j41(19,"mat-menu",null,2)(21,"button",43)(22,"div",44),t.DNE(23,ht,1,1,"mat-icon",41),t.k0s(),t.j41(24,"span",45),t.EFF(25,"Pendiente de Pago"),t.k0s()(),t.j41(26,"button",46),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updateStatus(i,"Pagada Parcialmente"))}),t.j41(27,"div",44),t.DNE(28,zt,1,1,"mat-icon",41),t.k0s(),t.j41(29,"span",45),t.EFF(30,"Pagada Parcialmente"),t.k0s()(),t.j41(31,"button",46),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updateStatus(i,"Pagada Totalmente"))}),t.j41(32,"div",44),t.DNE(33,Qt,1,1,"mat-icon",41),t.k0s(),t.j41(34,"span",45),t.EFF(35,"Pagada Totalmente"),t.k0s()(),t.j41(36,"button",46),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.cancelInvoice(i))}),t.j41(37,"div",44),t.DNE(38,ft,1,1,"mat-icon",41),t.k0s(),t.j41(39,"span",45),t.EFF(40,"Cancelada"),t.k0s()()()(),t.j41(41,"button",47),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.deleteInvoice(i))}),t.nrm(42,"mat-icon",41),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.sdS(20),i=t.XpG(4);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.SpI(" ",e.quotationNo," "),t.R7$(2),t.Dyx(i.getTotalAmount(e)),t.R7$(3),t.SpI(" ",e.quotationId.goodsData.length," "),t.R7$(),t.Y8G("matTooltip","Cancelada"===e.status?"Motivo: "+e.canceledReason:"")("ngClass",t.s1E(22,At,"Pendiente de Pago"===e.status,"Pagada Parcialmente"===e.status,"Pagada Totalmente"===e.status,"Cancelada"===e.status,"Vencida"===e.status)),t.R7$(2),t.JRh(e.status),t.R7$(2),t.Y8G("routerLink",t.eq3(28,Nt,e._id)),t.R7$(),t.Y8G("svgIcon","mat_solid:visibility"),t.R7$(2),t.Y8G("matMenuTriggerFor",o)("disabled",e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.R7$(),t.Y8G("svgIcon","heroicons_solid:clipboard-list"),t.R7$(3),t.Y8G("disabled",!0),t.R7$(2),t.vxM(23,e.status.includes("Pendiente de Pago")?23:-1),t.R7$(3),t.Y8G("disabled",e.status.includes("Pagada Parcialmente")||e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.R7$(2),t.vxM(28,e.status.includes("Pagada Parcialmente")?28:-1),t.R7$(3),t.Y8G("disabled",e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.R7$(2),t.vxM(33,e.status.includes("Pagada Totalmente")?33:-1),t.R7$(3),t.Y8G("disabled",!e.status.includes("Pendiente de Pago")),t.R7$(2),t.vxM(38,e.status.includes("Cancelada")?38:-1),t.R7$(3),t.Y8G("matTooltip","Eliminar")("disabled",!e.status.includes("Pendiente de Pago")),t.R7$(),t.Y8G("svgIcon","mat_solid:delete")}}function Jt(n,a){1&n&&t.Z7z(0,Ht,43,30,"div",33,t.BUC().trackByFn,!0),2&n&&t.Dyx(a)}function Wt(n,a){if(1&n&&(t.j41(0,"div",18),t.DNE(1,Yt,1,0,"ng-container",23),t.j41(2,"div",24)(3,"div",25)(4,"div",26)(5,"div",27),t.EFF(6," N\xfamero "),t.k0s(),t.j41(7,"div",27),t.EFF(8," N.Factura "),t.k0s(),t.j41(9,"div",28),t.EFF(10," Importe "),t.k0s(),t.j41(11,"div",29),t.EFF(12," Cantidad "),t.k0s(),t.j41(13,"div",30),t.EFF(14," Estado "),t.k0s(),t.j41(15,"div",31),t.EFF(16," Acciones "),t.k0s()(),t.DNE(17,Jt,2,0),t.nI1(18,"async"),t.nrm(19,"mat-paginator",32),t.k0s()()()),2&n){let e;t.XpG();const o=t.sdS(28),i=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",o),t.R7$(4),t.Y8G("mat-sort-header","no"),t.R7$(2),t.Y8G("mat-sort-header","quotationNo"),t.R7$(6),t.Y8G("mat-sort-header","status"),t.R7$(4),t.vxM(17,(e=t.bMT(18,11,i.invoices$))?17:-1,e),t.R7$(2),t.Y8G("ngClass",t.eq3(13,Gt,i.isLoading))("length",i.pagination.length)("pageIndex",i.pagination.page)("pageSize",i.pagination.size)("pageSizeOptions",t.lJ4(15,Mt))("showFirstLastButtons",!0)}}function Kt(n,a){}function Zt(n,a){if(1&n&&t.DNE(0,Kt,0,0,"ng-template",48),2&n){t.XpG();const e=t.sdS(28),o=t.sdS(30),i=t.XpG();t.Y8G("ngTemplateOutlet",i.filterInputControl.value?e:o)}}function te(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",49)(1,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Pendiente de Pago"!==i.filterInputControl.value?"Pendiente de Pago":""))}),t.j41(2,"span",51),t.EFF(3,"Pendiente de Pago"),t.k0s(),t.nrm(4,"div",52),t.k0s(),t.j41(5,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Pagada Parcialmente"!==i.filterInputControl.value?"Pagada Parcialmente":""))}),t.j41(6,"span",51),t.EFF(7,"Pagada Parcialmente"),t.k0s(),t.nrm(8,"div",54),t.k0s(),t.j41(9,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Pagada Totalmente"!==i.filterInputControl.value?"Pagada Totalmente":""))}),t.j41(10,"span",51),t.EFF(11,"Pagada Totalmente"),t.k0s(),t.nrm(12,"div",56),t.k0s(),t.j41(13,"button",57),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Cancelada"!==i.filterInputControl.value?"Cancelada":""))}),t.j41(14,"span",51),t.EFF(15,"Canceladas"),t.k0s(),t.nrm(16,"div",58),t.k0s(),t.j41(17,"button",59),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Vencida"!==i.filterInputControl.value?"Vencida":""))}),t.j41(18,"span",51),t.EFF(19,"Vencidas"),t.k0s(),t.nrm(20,"div",60),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.eq3(5,Bt,"Pendiente de Pago"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(7,Pt,"Pagada Parcialmente"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(9,Xt,"Pagada Totalmente"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(11,qt,"Cancelada"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(13,Vt,"Vencida"===e.filterInputControl.value))}}function ee(n,a){if(1&n&&(t.j41(0,"div",61),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha creado ninguna factura a\xfan!"," ")}}function ne(n,a){1&n&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div")(4,"div",6)(5,"div",7)(6,"a",8),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",7),t.nrm(9,"mat-icon",9),t.j41(10,"a",10),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",7),t.nrm(13,"mat-icon",9),t.j41(14,"a",11),t.EFF(15,"Facturas"),t.k0s()()(),t.j41(16,"div",12)(17,"a",13),t.nrm(18,"mat-icon",9),t.j41(19,"span",14),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",15)(22,"div",16),t.EFF(23," Facturas "),t.k0s()()(),t.DNE(24,Lt,4,4,"div",17),t.k0s(),t.DNE(25,Wt,20,16,"div",18)(26,Zt,1,1)(27,te,21,15,"ng-template",null,0,t.C5r)(29,ee,2,1,"ng-template",null,1,t.C5r),t.k0s()),2&n&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(6),t.Y8G("ngxPermissionsExcept",t.lJ4(6,$t)),t.R7$(),t.vxM(25,a.length>0?25:26))}let oe=(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._dialog=o,this._fuseConfirmationService=i,this._invoiceService=s,this._snackBar=r,this.store=m,this.isLoading=!1,this.searchInputControl=new l.MJ(null),this.filterInputControl=new l.MJ(""),this._unsubscribeAll=new M.B}ngOnInit(){this.invoices$=this.store.select(Tt.nX),this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,et.Z)(null),(0,S.n)(e=>null!==e?(this.isLoading=!0,this._invoiceService.getInvoices(0,20,"createdAt","desc",e,this.filterInputControl.value)):(0,E.of)()),(0,$.T)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,S.n)(e=>this._invoiceService.getInvoices(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,S.n)(()=>(this.isLoading=!0,this._invoiceService.getInvoices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,$.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteInvoice(e){this._fuseConfirmationService.open({title:"Eliminar Factura",message:`\xbfEst\xe1 seguro que desea eliminar la factura # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._invoiceService.deleteInvoice(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateStatus(e,o){this._fuseConfirmationService.open({title:"Actualizar estado",message:`\xbfEst\xe1 seguro desea actualizar el estado de la factura # ${e.no} a ${o} `,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this._invoiceService.updateStatus(e._id,o).subscribe(r=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}cancelInvoice(e){this._dialog.open(nt.s,{data:{title:"Cancelar Factura",message:`\xbfEst\xe1 seguro desea cancelar la factura # ${e.no}`,rejectedReason:e.canceledReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,f.Q)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._invoiceService.updateStatus(e._id,rt.Cancelada,i.reason).subscribe(r=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}getTotalAmount(e){return e.quotationId.goodsData.reduce((o,{currency:i})=>{if(!o.some(s=>s.currency===i)){const s=e.quotationId.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,m)=>r+m,0);o.push({currency:i,total:s})}return o},[])}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(A.bZ),t.rXU(J.G),t.rXU(pt.U),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["commercial-invoices"]],viewQuery:function(o,i){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(i._paginator=s.first),t.mGM(s=t.lsd())&&(i._sort=s.first)}},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["filter",""],["noInvoices",""],["listStatusMenu","matMenu"],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64","w-full"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","invoices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-8","mr-1","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","invoices-table","md:px-8"],[1,"whitespace-nowrap"],[1,"flex","flex-col","items-end"],[1,"truncate","text-center"],[1,"flex","h-7","items-center","text-center","lock","truncate","rounded-full","dark:bg-white","dark:bg-opacity-5","mr-4","delay-100",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","justify-end","gap-2","flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Cambiar estado",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor","disabled"],["mat-menu-item","",1,"grid","grid-cols-4",3,"disabled"],[1,"col-span-1"],[1,"col-span-3"],["mat-menu-item","",1,"grid","grid-cols-4",3,"click","disabled"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","matTooltip","disabled"],[3,"ngTemplateOutlet"],[1,"self-end","h-10","mt-7","mb-3","md:mt-10","md:mb-5","pr-2","pl-2","sm:pr-6","w-full","sm:w-11/12","md:w-full","lg:w-11/12","xl:w-9/12","flex","justify-around"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-amber-700","transition-all","ease-in-out","delay-100","bg-amber-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-amber-500","hover:text-amber-50",3,"click","ngClass"],[1,"ml-2","mr-1","text-lg","hidden","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-blue-700","transition-all","ease-in-out","delay-100","bg-blue-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-blue-500","hover:text-blue-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-green-700","transition-all","ease-in-out","delay-100","bg-green-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-green-500","hover:text-green-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-green-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","h-full","text-red-700","transition-all","ease-in-out","delay-50","bg-red-100","border-0","rounded-full","w-36","md:w-auto","hover:bg-red-500","hover:text-red-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"flex","justify-center","items-center","ml-1","sm:ml-0","pl-6","pr-6","md:pr-4","md:pl-4","h-full","text-pink-700","transition-all","ease-in-out","delay-50","bg-pink-100","border-0","rounded-full","w-36","md:w-auto","hover:bg-pink-500","hover:text-pink-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-pink-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){if(1&o&&(t.DNE(0,ne,31,7,"div",3),t.nI1(1,"async")),2&o){let s;t.vxM(0,(s=t.bMT(1,1,i.invoices$))?0:-1,s)}},dependencies:[k.Jj,k.oe,y.Hl,y.$z,_.RG,_.rl,_.JW,C.m_,C.An,w.fS,w.fg,X.Cn,W.uv,X.kk,X.fb,X.Cp,j.Ou,j.iy,F.NQ,F.B4,F.aE,H.uc,H.oV,k.YU,l.X1,l.me,l.BC,l.l_,I.Wk],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})();var _t=d(91602);const gt=n=>n.paymentConditions,Ct=((0,T.Mz)(gt,n=>n.paymentCondition),(0,T.Mz)(gt,n=>n.paymentConditions));var c=d(77028),u=d(82765),h=d(5951),v=d(30450),g=d(67398),R=d(63729),ot=d(70819);class Z{}var ie=d(62621);const Se=n=>({"cursor-not-allowed":n});function rn(n,a){1&n&&(t.j41(0,"h2",2),t.EFF(1," Agregar forma de pago"),t.k0s())}function ln(n,a){1&n&&(t.j41(0,"h2",2),t.EFF(1,"Editar forma de pago "),t.k0s())}function cn(n,a){1&n&&(t.j41(0,"h2",2),t.EFF(1,"Detalles del forma de pago"),t.k0s())}function dn(n,a){if(1&n&&(t.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),t.EFF(6,"Nombre"),t.k0s(),t.j41(7,"span",12),t.EFF(8),t.k0s()()()()()()),2&n){const e=t.XpG();t.R7$(8),t.JRh(e.data.paymentCondition.name||"Sin nombre")}}function mn(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El nombre es obligatorio. "),t.k0s())}function un(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El nombre debe contener entre 3 y 255 caracteres. "),t.k0s())}function pn(n,a){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Porciento"),t.k0s())}function hn(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El porciento es obligatorio "),t.k0s())}function fn(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El valor de este campo debe estar entre 0 y 100 "),t.k0s())}function _n(n,a){if(1&n&&(t.j41(0,"mat-error"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.get("percent").getError("outOfRange")," ")}}function gn(n,a){1&n&&(t.j41(0,"mat-label"),t.EFF(1,"Descripci\xf3n"),t.k0s())}function Cn(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," La descripci\xf3n es obligatoria "),t.k0s())}function vn(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," La descripci\xf3n debe contener entre 3 y 1000 caracteres. "),t.k0s())}function bn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",45)(1,"button",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$index,s=t.XpG(2);return t.Njj(s.removeTermField(i))}),t.nrm(2,"mat-icon",26),t.k0s()()}2&n&&(t.R7$(2),t.Y8G("svgIcon","mat_solid:delete"))}function yn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",24)(1,"mat-form-field",39),t.DNE(2,pn,2,0,"mat-label"),t.j41(3,"span",40),t.EFF(4,"%"),t.k0s(),t.j41(5,"input",41),t.bIt("blur",function(i){const s=t.eBV(e).$index,r=t.XpG(2);return t.Njj(r.checkOutOfRange(i.target.value,s))}),t.k0s(),t.DNE(6,hn,2,0,"mat-error")(7,fn,2,0,"mat-error")(8,_n,2,1,"mat-error"),t.k0s(),t.j41(9,"mat-form-field",42),t.DNE(10,gn,2,0,"mat-label"),t.nrm(11,"mat-icon",43)(12,"textarea",44),t.DNE(13,Cn,2,0,"mat-error")(14,vn,2,0,"mat-error"),t.k0s(),t.DNE(15,bn,3,1,"div",45),t.k0s()}if(2&n){const e=a.$implicit,o=a.$index,i=a.$count;t.R7$(2),t.vxM(2,0===o?2:-1),t.R7$(3),t.Y8G("formControl",e.get("percent"))("spellcheck",!1),t.R7$(),t.vxM(6,e.get("percent").hasError("required")?6:-1),t.R7$(),t.vxM(7,e.get("percent").hasError("min")||e.get("percent").hasError("max")?7:-1),t.R7$(),t.vxM(8,e.get("percent").hasError("outOfRange")?8:-1),t.R7$(2),t.vxM(10,0===o?10:-1),t.R7$(),t.Y8G("svgIcon","mat_solid:subject"),t.R7$(),t.Y8G("formControl",e.get("description"))("placeholder","Descripci\xf3n")("minLength",3)("maxLength",1e3),t.R7$(),t.vxM(13,e.get("description").hasError("required")?13:-1),t.R7$(),t.vxM(14,e.get("description").hasError("maxlength")||e.get("description").hasError("minlength")?14:-1),t.R7$(),t.vxM(15,0===o&&o===i-1?-1:15)}}function xn(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",5)(1,"div",7)(2,"form",13)(3,"div",14)(4,"mat-form-field",15)(5,"mat-label"),t.EFF(6,"Nombre"),t.k0s(),t.nrm(7,"input",16),t.DNE(8,mn,2,0,"mat-error")(9,un,2,0,"mat-error"),t.k0s()(),t.j41(10,"div",17)(11,"fuse-alert",18)(12,"span",19),t.EFF(13,"T\xe9rminos"),t.k0s(),t.j41(14,"div",20)(15,"span"),t.EFF(16," Cuando usted factura la forma de pago puede tener tantos t\xe9rminos como usted pacte con sus clientes pero la sumatoria de todos debe ser el 100% del valor de la factura, por ejemplo:"),t.k0s(),t.j41(17,"li",21),t.EFF(18,"50% a la firma del contrato"),t.k0s(),t.j41(19,"li",22),t.EFF(20,"50% a la entrega de la mercanc\xeda"),t.k0s(),t.j41(21,"span"),t.EFF(22," esta forma de pago tiene dos t\xe9rminos y la suma de ambos completa el valor de la factura "),t.k0s()()(),t.j41(23,"div",23),t.Z7z(24,yn,16,15,"div",24,t.BUC().trackByFn,!0),t.k0s(),t.j41(26,"div",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addTermField())}),t.nrm(27,"mat-icon",26),t.j41(28,"span",27),t.EFF(29,"Agregar t\xe9rmino"),t.k0s()()(),t.j41(30,"div",28)(31,"fuse-alert",18)(32,"span",19),t.EFF(33,"Pagos"),t.k0s(),t.EFF(34," Para que el cliente efect\xfae el pago usted puede marcar y escoger algunas de las siguientes opciones previamente introducida en la gesti\xf3n del negocio: "),t.j41(35,"li",21),t.EFF(36,"Mostrar en la factura su cuenta bancaria."),t.k0s(),t.j41(37,"li",29),t.EFF(38,"Seleccionar los QRs de pago que tiene contratado con Enzona y Transfermovil que se mostrar\xe1n en la factura."),t.k0s()(),t.j41(39,"div",30)(40,"mat-checkbox",31),t.EFF(41),t.nI1(42,"uppercase"),t.k0s(),t.j41(43,"mat-radio-group",32)(44,"mat-radio-button",33),t.EFF(45,"Ninguno"),t.k0s(),t.j41(46,"mat-radio-button",34),t.EFF(47),t.nI1(48,"uppercase"),t.k0s()()(),t.nrm(49,"div",35),t.k0s(),t.j41(50,"div",36)(51,"span",37),t.EFF(52,"Estado"),t.k0s(),t.j41(53,"mat-slide-toggle",38),t.EFF(54),t.k0s()()()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("formGroup",e.paymentConditionForm)("autocomplete","off"),t.R7$(5),t.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del forma de pago"),t.R7$(),t.vxM(8,e.paymentConditionForm.get("name").hasError("required")?8:-1),t.R7$(),t.vxM(9,e.paymentConditionForm.get("name").hasError("maxlength")||e.paymentConditionForm.get("name").hasError("minlength")?9:-1),t.R7$(2),t.Y8G("type","info")("appearance","outline"),t.R7$(13),t.Dyx(e.paymentConditionForm.get("terms").controls),t.R7$(3),t.Y8G("svgIcon","mat_solid:add_circle"),t.R7$(4),t.Y8G("type","info")("appearance","outline"),t.R7$(9),t.Y8G("color","primary")("formControlName","includeBankAccount"),t.R7$(),t.SpI(" Incluir la cuenta bancaria de ",t.bMT(42,23,e.currentMerchant.name),""),t.R7$(2),t.Y8G("color","primary")("formControlName","paymentBy"),t.R7$(4),t.SpI("Pagos por QRs de ",t.bMT(48,25,e.currentMerchant.name),""),t.R7$(6),t.Y8G("formControlName","active")("color","primary"),t.R7$(),t.SpI(" ",!0===e.paymentConditionForm.get("active").value?"Activo":"Inactivo"," ")}}function kn(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.updatePaymentCondition())}),t.EFF(1," Actualizar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("matDialogClose","confirmed")("disabled",e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value)("ngClass",t.eq3(4,Se,e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value))}}function Fn(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.createPaymentCondition())}),t.EFF(1," Agregar "),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("color","primary")("matDialogClose","confirmed")("disabled",e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value)("ngClass",t.eq3(4,Se,e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value))}}function Rn(n,a){if(1&n&&(t.j41(0,"div",6)(1,"button",47),t.EFF(2," Cancelar "),t.k0s(),t.DNE(3,kn,2,6,"button",48)(4,Fn,2,6,"button",48),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("matDialogClose","cancelled"),t.R7$(2),t.vxM(3,"edit"===e.data.dialogMode?3:-1),t.R7$(),t.vxM(4,"add"===e.data.dialogMode?4:-1)}}let wn=(()=>{class n{constructor(e,o,i,s,r,m,p){this.data=e,this._changeDetectorRef=o,this._formBuilder=i,this._fuseConfirmationService=s,this._paymentConditionsService=r,this._snackBar=m,this.store=p,this.paymentCondition=new Z,this.dialogMode="view",this.merchants=[],this.selectedMerchant$=null,this.user=null,this.user$=(0,E.of)(null),this.totalPercent=0,this._unsubscribeAll=new M.B}ngOnInit(){this.user$=this.store.select(R.SW),this.user$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.user=e,this._changeDetectorRef.markForCheck()}),this.store.select(ot.Xb).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.currentMerchant=e}),this.paymentConditionForm=this._formBuilder.group({_id:[""],active:[!0,[l.k0.required]],userId:[this.user.id,[l.k0.required]],merchantId:[this.currentMerchant.id,[l.k0.required]],paymentBy:["none",[l.k0.required]],includeBankAccount:[!0],name:["",[l.k0.required,l.k0.minLength(3),l.k0.maxLength(255)]],terms:this._formBuilder.array([])}),"edit"===this.data.dialogMode&&(this.paymentConditionForm.patchValue(this.data.paymentCondition),this.paymentConditionForm.get("merchantId").setValue(this.data.paymentCondition.merchantId._id)),this.setTermsDataOnForm()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addTermField(){const e=this._formBuilder.group({percent:[0,[l.k0.required,l.k0.min(0),l.k0.max(100)]],description:["",[l.k0.required,l.k0.minLength(3),l.k0.maxLength(1e3)]]}),o=this.paymentConditionForm.get("terms");o.length<=6&&o.push(e),this._changeDetectorRef.markForCheck()}removeTermField(e){this.paymentConditionForm.get("terms").removeAt(e),this.totalPercent=this.paymentConditionForm.get("terms").getRawValue().map(i=>i.percent).reduce((i,s)=>i+s,0),this._changeDetectorRef.markForCheck()}createPaymentCondition(){if(100!==this.totalPercent||this.paymentConditionForm.invalid)return;let e=this.paymentConditionForm.getRawValue();e=(0,g.A)(e,"_id"),this._fuseConfirmationService.open({title:"Crear Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionsService.createPaymentCondition(e).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updatePaymentCondition(){if(100!==this.totalPercent||this.paymentConditionForm.invalid)return;const e=this.paymentConditionForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionsService.updatePaymentCondition(e).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}checkOutOfRange(e,o){if(+e<=100){const i=this.paymentConditionForm.get("terms").getRawValue().map(r=>r.percent).reduce((r,m)=>r+m,0),s=this.paymentConditionForm.get("terms").controls;i<=100&&s.forEach(r=>{r.get("percent").hasError("outOfRange")&&r.get("percent").setErrors(null)}),i>100&&s.at(o).get("percent").setErrors({outOfRange:"La suma del % de todos los t\xe9rminos no debe superar a 100"}),this.totalPercent=i}}trackByFn(e,o){return o.id||e}setTermsDataOnForm(){if("add"===this.data.dialogMode)return void this.addTermField();const e=[];this.data.paymentCondition.terms.length>0?this.data.paymentCondition.terms.forEach(o=>{e.push(this._formBuilder.group({percent:[o.percent,[l.k0.required,l.k0.min(0),l.k0.max(100)]],description:[o.description,[l.k0.required,l.k0.minLength(3),l.k0.maxLength(255)]]}))}):e.push(this._formBuilder.group({percent:[0,[l.k0.required,l.k0.min(0),l.k0.max(100)]],description:["",[l.k0.required,l.k0.minLength(3),l.k0.maxLength(255)]]})),e.forEach(o=>{this.paymentConditionForm.get("terms").push(o)}),this.totalPercent=this.paymentConditionForm.get("terms").getRawValue().map(o=>o.percent).reduce((o,i)=>o+i,0)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(A.Vh),t.rXU(t.gRc),t.rXU(l.ok),t.rXU(J.G),t.rXU(ie.W),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["paymentConditions-detail"]],standalone:!0,features:[t.aNF],decls:9,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"pt-5"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"mt-4"],[3,"type","appearance"],["fuseAlertTitle",""],[1,"flex","flex-col"],[1,"mt-2","ml-3"],[1,"mb-2","ml-3"],[1,"p-6","pb-0"],[1,"flex","flex-col","sm:flex-row"],[1,"inline-flex","items-center","px-4","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"mt-6"],[1,"ml-3"],[1,"grid","gap-4","p-6","pt-7","pb-7","sm:grid-cols-2"],[1,"mb-4",3,"color","formControlName"],["aria-label","Select an option",1,"flex","flex-wrap","justify-between","gap-2","sm:col-span-2",3,"color","formControlName"],["value","none",1,"sm:col-span-1"],["value","UseMerchantPayments",1,"sm:col-span-1"],[1,"w-full","border-t-2"],[1,"flex","flex-col","mt-8"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"flex-auto","mt-2","sm:max-w-[20%]"],["matPrefix",""],["matInput","","type","number","min","0","max","100","required","",3,"blur","formControl","spellcheck"],[1,"flex-auto","w-full","mt-2","sm:ml-4","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","self-end","w-10","mb-2","sm:items-center","sm:pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass"],["mat-flat-button","",3,"click","color","matDialogClose","disabled","ngClass"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,rn,2,0,"h2",2)(3,ln,2,0,"h2",2)(4,cn,2,0,"h2",2),t.k0s(),t.j41(5,"div",3),t.DNE(6,dn,9,1,"div",4)(7,xn,55,27,"div",5),t.k0s(),t.DNE(8,Rn,5,3,"div",6),t.k0s()),2&o&&(t.R7$(2),t.vxM(2,null===i.data.paymentCondition._id&&"add"===i.data.dialogMode?2:-1),t.R7$(),t.vxM(3,i.data.paymentCondition._id&&"edit"===i.data.dialogMode?3:-1),t.R7$(),t.vxM(4,i.data.paymentCondition._id&&"view"===i.data.dialogMode?4:-1),t.R7$(2),t.vxM(6,"view"===i.data.dialogMode?6:-1),t.R7$(),t.vxM(7,7),t.R7$(),t.vxM(8,"view"!==i.data.dialogMode?8:-1))},dependencies:[c.F,y.Hl,y.$z,y.iY,u.g7,u.So,A.hM,A.tx,_.RG,_.rl,_.nJ,_.TL,_.JW,C.m_,C.An,w.fS,w.fg,h.Wk,h.VT,h._g,v.mV,v.sG,k.YU,l.X1,l.qT,l.me,l.Q0,l.BC,l.cb,l.YS,l.xh,l.tU,l.VZ,l.zX,l.l_,l.j4,l.JD,k.Pc],encapsulation:2,changeDetection:0})}return n})();const Dn=()=>["Super Administrador"],In=n=>({"pointer-events-none":n}),jn=()=>[10,25,50,100];function En(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",17)(1,"mat-form-field",18),t.nrm(2,"mat-icon",19)(3,"input",20),t.k0s(),t.j41(4,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.createPaymentCondition())}),t.nrm(5,"mat-icon",22),t.j41(6,"span",23),t.EFF(7,"Nueva"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar formas de pago"),t.R7$(2),t.Y8G("svgIcon","mat_solid:add")}}function Sn(n,a){1&n&&t.nrm(0,"mat-icon",33),2&n&&t.Y8G("svgIcon","mat_solid:done")}function Tn(n,a){1&n&&t.nrm(0,"mat-icon",34),2&n&&t.Y8G("svgIcon","mat_solid:close")}function $n(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",30)(1,"div",31),t.EFF(2),t.k0s(),t.j41(3,"div",32),t.DNE(4,Sn,1,1,"mat-icon",33)(5,Tn,1,1,"mat-icon",34),t.k0s(),t.j41(6,"div",35)(7,"button",36),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.editPaymentCondition(i))}),t.nrm(8,"mat-icon",37),t.k0s(),t.j41(9,"button",36),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.deletePaymentCondition(i._id))}),t.nrm(10,"mat-icon",37),t.k0s()()()}if(2&n){const e=a.$implicit;t.R7$(2),t.SpI(" ",e.name," "),t.R7$(2),t.vxM(4,e.active?4:-1),t.R7$(),t.vxM(5,e.active?-1:5),t.R7$(3),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(2),t.Y8G("svgIcon","mat_solid:delete")}}function Gn(n,a){1&n&&t.Z7z(0,$n,11,5,"div",30,t.BUC().trackByFn,!0),2&n&&t.Dyx(a)}function Mn(n,a){if(1&n&&(t.j41(0,"div",24)(1,"div",25)(2,"div",26),t.EFF(3," Nombre "),t.k0s(),t.j41(4,"div",27),t.EFF(5," Activo "),t.k0s(),t.j41(6,"div",28),t.EFF(7," Acciones "),t.k0s()(),t.DNE(8,Gn,2,0),t.nI1(9,"async"),t.nrm(10,"mat-paginator",29),t.k0s()),2&n){let e;const o=t.XpG(2);t.R7$(2),t.Y8G("mat-sort-header","name")("mat-sort-header","name"),t.R7$(2),t.Y8G("mat-sort-header","active"),t.R7$(4),t.vxM(8,(e=t.bMT(9,10,o.paymentConditions$))?8:-1,e),t.R7$(2),t.Y8G("ngClass",t.eq3(12,In,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",t.lJ4(14,jn))("showFirstLastButtons",!0)}}function An(n,a){if(1&n&&(t.j41(0,"div",38),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.searchInputControl.value?"\xa1No se han encontrado formas de pago!":"\xa1No se ha creado ninguna forma de pago a\xfan!")}}function Nn(n,a){1&n&&t.DNE(0,Mn,11,15,"div",24)(1,An,2,1),2&n&&t.vxM(0,a.length>0?0:1)}function On(n,a){if(1&n&&(t.j41(0,"div",38),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.searchInputControl.value?"\xa1No se han encontrado formas de pago!":"\xa1No se ha creado ninguna forma de pago a\xfan!")}}let Bn=(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._paymentConditionService=o,this._dialog=i,this._fuseConfirmationService=s,this._snackBar=r,this.store=m,this.merchantId="",this.paymentConditions$=(0,E.of)([]),this.paymentCondition=new Z,this.isLoading=!1,this.searchInputControl=new l.MJ(null),this._unsubscribeAll=new M.B}ngOnInit(){this.paymentConditions$=this.store.select(Ct),this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,et.Z)(null),(0,S.n)(e=>null!==e?(this.isLoading=!0,this._paymentConditionService.getPaymentConditions(0,20,"active","desc",e)):(0,E.of)()),(0,$.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,S.n)(()=>(this.isLoading=!0,this._paymentConditionService.getPaymentConditions(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,$.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createPaymentCondition(){this._openDialog(this.paymentCondition,"add")}editPaymentCondition(e){this._openDialog(e,"edit")}deletePaymentCondition(e){this._fuseConfirmationService.open({title:"Eliminar Forma de pago",message:"\xbfEsta seguro que desea Eliminar el Forma de pago? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionService.deletePaymentCondition(e,this.pagination.page,this.pagination.size,"active","desc",this.searchInputControl.value).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(e,o){return o.id||e}_openDialog(e,o){this._dialog.open(wn,{data:{paymentCondition:e,dialogMode:o},panelClass:"ath-payment-method-dialog-panel"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(ie.W),t.rXU(A.bZ),t.rXU(J.G),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["commercial-payment-conditions"]],viewQuery:function(o,i){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(i._paginator=s.first),t.mGM(s=t.lsd())&&(i._sort=s.first)}},standalone:!0,features:[t.aNF],decls:30,vars:9,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex flex-wrap items-center mt-2 shrink-0 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","sm:mt-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","sm:block"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","payment-methods-table"],[3,"mat-sort-header"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"mr-4","text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","payment-methods-table"],[1,"truncate"],[1,"text-center","sm:mr-4"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",4),t.nrm(9,"mat-icon",6),t.j41(10,"a",7),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",4),t.nrm(13,"mat-icon",6),t.j41(14,"a",8),t.EFF(15,"Formas de pago"),t.k0s()()(),t.j41(16,"div",9)(17,"a",10),t.nrm(18,"mat-icon",6),t.j41(19,"span",11),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",12)(22,"div",13),t.EFF(23," Formas de Pago "),t.k0s()()(),t.DNE(24,En,8,5,"div",14),t.k0s(),t.j41(25,"div",15)(26,"div",16),t.DNE(27,Nn,2,1),t.nI1(28,"async"),t.DNE(29,On,2,1),t.k0s()()()),2&o){let s;t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(6),t.Y8G("ngxPermissionsExcept",t.lJ4(8,Dn)),t.R7$(3),t.vxM(27,(s=t.bMT(28,6,i.paymentConditions$))?27:29,s)}},dependencies:[k.Jj,y.Hl,y.$z,_.RG,_.rl,_.JW,C.m_,C.An,w.fS,w.fg,j.Ou,j.iy,F.NQ,F.B4,F.aE,k.YU,l.X1,l.me,l.BC,l.l_,I.Wk],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})(),Pn=(()=>{class n{constructor(e){this._paymentConditionsService=e}resolve(e,o){return this._paymentConditionsService.getPaymentConditions(0,20,"name","asc","")}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(ie.W))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xn=d(5004);const qn=["quotationDetail"],Vn=()=>["../"];let Ln=(()=>{class n{constructor(){}ngOnInit(){}generatePDF(e){this.quotationDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["quotation-details-header"]],viewQuery:function(o,i){if(1&o&&t.GBs(qn,5),2&o){let s;t.mGM(s=t.lsd())&&(i.quotationDetailsComponent=s.first)}},standalone:!0,features:[t.aNF],decls:35,vars:9,consts:[["quotationDetail",""],["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-center"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"]],template:function(o,i){if(1&o){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",5),t.nrm(9,"mat-icon",7),t.j41(10,"a",8),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",5),t.nrm(13,"mat-icon",7),t.j41(14,"a",9),t.EFF(15,"Ofertas"),t.k0s()()(),t.j41(16,"div",10)(17,"a",11),t.nrm(18,"mat-icon",7),t.j41(19,"span",12),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",13)(22,"div",14)(23,"span"),t.EFF(24,"Detalles de la oferta"),t.k0s()()()(),t.j41(25,"div",15)(26,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("open"))}),t.nrm(27,"mat-icon",17),t.k0s(),t.j41(28,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("download"))}),t.nrm(29,"mat-icon",17),t.k0s(),t.j41(30,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("print"))}),t.nrm(31,"mat-icon",17),t.k0s()()(),t.j41(32,"div",18),t.nrm(33,"quotation-details",null,0),t.k0s()()}2&o&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(),t.Y8G("routerLink",t.lJ4(8,Vn)),t.R7$(3),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(9),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))},dependencies:[Xn.Q,C.m_,C.An,y.Hl,y.$z,I.Wk],encapsulation:2,changeDetection:0})}return n})();var Te=d(82341),Yn=d(78268),Un=d(23309),se=d(82798),zn=d(28203),N=d(45024),Qn=d(36860),Hn=d(22806),vt=d(84412),Jn=d(74402),bt=d(96697);const Wn=[[["caption"]],[["colgroup"],["col"]],"*"],Kn=["caption","colgroup, col","*"];function Zn(n,a){1&n&&t.SdG(0,2)}function to(n,a){1&n&&(t.j41(0,"thead",0),t.eu8(1,1),t.k0s(),t.j41(2,"tbody",0),t.eu8(3,2)(4,3),t.k0s(),t.j41(5,"tfoot",0),t.eu8(6,4),t.k0s())}function eo(n,a){1&n&&t.eu8(0,1)(1,2)(2,3)(3,4)}const V=new t.nKC("CDK_TABLE");let it=(()=>{class n{constructor(e){this.template=e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkCellDef",""]],standalone:!0})}return n})(),st=(()=>{class n{constructor(e){this.template=e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}return n})(),yt=(()=>{class n{constructor(e){this.template=e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}return n})(),z=(()=>{class n{get name(){return this._name}set name(e){this._setNameInput(e)}get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){this._table=e,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){const e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(V,8))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(o,i,s){if(1&o&&(t.wni(s,it,5),t.wni(s,st,5),t.wni(s,yt,5)),2&o){let r;t.mGM(r=t.lsd())&&(i.cell=r.first),t.mGM(r=t.lsd())&&(i.headerCell=r.first),t.mGM(r=t.lsd())&&(i.footerCell=r.first)}},inputs:{name:[t.Mj6.None,"cdkColumnDef","name"],sticky:[t.Mj6.HasDecoratorInputTransform,"sticky","sticky",t.L39],stickyEnd:[t.Mj6.HasDecoratorInputTransform,"stickyEnd","stickyEnd",t.L39]},standalone:!0,features:[t.Jv_([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),t.GFd]})}return n})();class ae{constructor(a,e){e.nativeElement.classList.add(...a._columnCssClassName)}}let re=(()=>{class n extends ae{constructor(e,o){super(e,o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(z),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[t.Vt3]})}return n})(),$e=(()=>{class n extends ae{constructor(e,o){super(e,o);const i=e._table?._getCellRole();i&&o.nativeElement.setAttribute("role",i)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(z),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["cdk-footer-cell"],["td","cdk-footer-cell",""]],hostAttrs:[1,"cdk-footer-cell"],standalone:!0,features:[t.Vt3]})}return n})(),le=(()=>{class n extends ae{constructor(e,o){super(e,o);const i=e._table?._getCellRole();i&&o.nativeElement.setAttribute("role",i)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(z),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[t.Vt3]})}return n})();class Ge{constructor(){this.tasks=[],this.endTasks=[]}}const ce=new t.nKC("_COALESCED_STYLE_SCHEDULER");let Me=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new M.B}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Ge,this._getScheduleObservable().pipe((0,f.Q)(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new Ge;for(const o of e.tasks)o();for(const o of e.endTasks)o()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Hn.H)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,bt.s)(1))}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(t.SKi))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac})}return n})(),de=(()=>{class n{constructor(e,o){this.template=e,this._differs=o}ngOnChanges(e){if(!this._columnsDiffer){const o=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(o).create(),this._columnsDiffer.diff(o)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof lt?e.headerCell.template:this instanceof ct?e.footerCell.template:e.cell.template}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q),t.rXU(t._q3))};static#e=this.\u0275dir=t.FsC({type:n,features:[t.OA$]})}return n})(),lt=(()=>{class n extends de{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,o,i){super(e,o),this._table=i,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){const e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q),t.rXU(t._q3),t.rXU(V,8))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[t.Mj6.None,"cdkHeaderRowDef","columns"],sticky:[t.Mj6.HasDecoratorInputTransform,"cdkHeaderRowDefSticky","sticky",t.L39]},standalone:!0,features:[t.GFd,t.Vt3,t.OA$]})}return n})(),ct=(()=>{class n extends de{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,o,i){super(e,o),this._table=i,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){const e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q),t.rXU(t._q3),t.rXU(V,8))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[t.Mj6.None,"cdkFooterRowDef","columns"],sticky:[t.Mj6.HasDecoratorInputTransform,"cdkFooterRowDefSticky","sticky",t.L39]},standalone:!0,features:[t.GFd,t.Vt3,t.OA$]})}return n})(),xt=(()=>{class n extends de{constructor(e,o,i){super(e,o),this._table=i}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q),t.rXU(t._q3),t.rXU(V,8))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:[t.Mj6.None,"cdkRowDefColumns","columns"],when:[t.Mj6.None,"cdkRowDefWhen","when"]},standalone:!0,features:[t.Vt3]})}return n})(),Q=(()=>{class n{static#t=this.mostRecentCellOutlet=null;constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static#e=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.c1b))};static#n=this.\u0275dir=t.FsC({type:n,selectors:[["","cdkCellOutlet",""]],standalone:!0})}return n})(),me=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),ue=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["cdk-footer-row"],["tr","cdk-footer-row",""]],hostAttrs:["role","row",1,"cdk-footer-row"],standalone:!0,features:[t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),pe=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),kt=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.C4Q))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}return n})();const Ae=["top","bottom","left","right"];class so{constructor(a,e,o,i,s=!0,r=!0,m){this._isNativeHtmlTable=a,this._stickCellCss=e,this.direction=o,this._coalescedStyleScheduler=i,this._isBrowser=s,this._needsPositionStickyOnElement=r,this._positionListener=m,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(a,e){const o=[];for(const i of a)if(i.nodeType===i.ELEMENT_NODE){o.push(i);for(let s=0;s<i.children.length;s++)o.push(i.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const i of o)this._removeStickyStyle(i,e)})}updateStickyColumns(a,e,o,i=!0){a.length&&this._isBrowser&&(e.some(s=>s)||o.some(s=>s))?this._coalescedStyleScheduler.schedule(()=>{const s=a[0],r=s.children.length,m=this._getCellWidths(s,i),p=this._getStickyStartColumnPositions(m,e),b=this._getStickyEndColumnPositions(m,o),x=e.lastIndexOf(!0),O=o.indexOf(!0),G="rtl"===this.direction,K=G?"right":"left",js=G?"left":"right";for(const mt of a)for(let B=0;B<r;B++){const on=mt.children[B];e[B]&&this._addStickyStyle(on,K,p[B],B===x),o[B]&&this._addStickyStyle(on,js,b[B],B===O)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===x?[]:m.slice(0,x+1).map((mt,B)=>e[B]?mt:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===O?[]:m.slice(O).map((mt,B)=>o[B+O]?mt:null).reverse()}))}):this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}))}stickRows(a,e,o){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{const i="bottom"===o?a.slice().reverse():a,s="bottom"===o?e.slice().reverse():e,r=[],m=[],p=[];for(let x=0,O=0;x<i.length;x++){if(!s[x])continue;r[x]=O;const G=i[x];p[x]=this._isNativeHtmlTable?Array.from(G.children):[G];const K=G.getBoundingClientRect().height;O+=K,m[x]=K}const b=s.lastIndexOf(!0);for(let x=0;x<i.length;x++){if(!s[x])continue;const O=r[x],G=x===b;for(const K of p[x])this._addStickyStyle(K,o,O,G)}"top"===o?this._positionListener?.stickyHeaderRowsUpdated({sizes:m,offsets:r,elements:p}):this._positionListener?.stickyFooterRowsUpdated({sizes:m,offsets:r,elements:p})})}updateStickyFooterContainer(a,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{const o=a.querySelector("tfoot");o&&(e.some(i=>!i)?this._removeStickyStyle(o,["bottom"]):this._addStickyStyle(o,"bottom",0,!1))})}_removeStickyStyle(a,e){for(const i of e)a.style[i]="",a.classList.remove(this._borderCellCss[i]);Ae.some(i=>-1===e.indexOf(i)&&a.style[i])?a.style.zIndex=this._getCalculatedZIndex(a):(a.style.zIndex="",this._needsPositionStickyOnElement&&(a.style.position=""),a.classList.remove(this._stickCellCss))}_addStickyStyle(a,e,o,i){a.classList.add(this._stickCellCss),i&&a.classList.add(this._borderCellCss[e]),a.style[e]=`${o}px`,a.style.zIndex=this._getCalculatedZIndex(a),this._needsPositionStickyOnElement&&(a.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(a){const e={top:100,bottom:10,left:1,right:1};let o=0;for(const i of Ae)a.style[i]&&(o+=e[i]);return o?`${o}`:""}_getCellWidths(a,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const o=[],i=a.children;for(let s=0;s<i.length;s++)o.push(i[s].getBoundingClientRect().width);return this._cachedCellWidths=o,o}_getStickyStartColumnPositions(a,e){const o=[];let i=0;for(let s=0;s<a.length;s++)e[s]&&(o[s]=i,i+=a[s]);return o}_getStickyEndColumnPositions(a,e){const o=[];let i=0;for(let s=a.length;s>0;s--)e[s]&&(o[s]=i,i+=a[s]);return o}}const he=new t.nKC("CDK_SPL");let fe=(()=>{class n{constructor(e,o){this.viewContainer=e,this.elementRef=o;const i=(0,t.WQX)(V);i._rowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.c1b),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","rowOutlet",""]],standalone:!0})}return n})(),_e=(()=>{class n{constructor(e,o){this.viewContainer=e,this.elementRef=o;const i=(0,t.WQX)(V);i._headerRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.c1b),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","headerRowOutlet",""]],standalone:!0})}return n})(),ge=(()=>{class n{constructor(e,o){this.viewContainer=e,this.elementRef=o;const i=(0,t.WQX)(V);i._footerRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.c1b),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","footerRowOutlet",""]],standalone:!0})}return n})(),Ce=(()=>{class n{constructor(e,o){this.viewContainer=e,this.elementRef=o;const i=(0,t.WQX)(V);i._noDataRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.c1b),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","noDataRowOutlet",""]],standalone:!0})}return n})(),Ft=(()=>{class n{_getCellRole(){if(void 0===this._cellRoleInternal){const e=this._elementRef.nativeElement.getAttribute("role"),o="grid"===e||"treegrid"===e?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&"cell"===o?null:o}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,o,i,s,r,m,p,b,x,O,G,K){this._differs=e,this._changeDetectorRef=o,this._elementRef=i,this._dir=r,this._platform=p,this._viewRepeater=b,this._coalescedStyleScheduler=x,this._viewportRuler=O,this._stickyPositioningListener=G,this._ngZone=K,this._onDestroy=new M.B,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new t.bkB,this.viewChange=new vt.t({start:0,end:Number.MAX_VALUE}),s||i.nativeElement.setAttribute("role","table"),this._document=m,this._isServer=!p.isBrowser,this._isNativeHtmlTable="TABLE"===i.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,o)=>this.trackBy?this.trackBy(o.dataIndex,o.data):o),this._viewportRuler.change().pipe((0,f.Q)(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),(0,N.y4)(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const o=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,o,(i,s,r)=>this._getEmbeddedViewArgs(i.item,r),i=>i.item.data,i=>{i.operation===N.Q3.INSERTED&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(i=>{o.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&t.SKi.isInAngularZone()?this._ngZone.onStable.pipe((0,bt.s)(1),(0,f.Q)(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){const i=Ne(this._headerRowOutlet,"thead");i&&(i.style.display=e.length?"":"none")}const o=this._headerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,o,"top"),this._headerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){const i=Ne(this._footerRowOutlet,"tfoot");i&&(i.style.display=e.length?"":"none")}const o=this._footerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,o,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,o),this._footerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),o=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...o,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,r)=>{this._addStickyColumnStyles([s],this._headerRowDefs[r])}),this._rowDefs.forEach(s=>{const r=[];for(let m=0;m<o.length;m++)this._renderRows[m].rowDef===s&&r.push(o[m]);this._addStickyColumnStyles(r,s)}),i.forEach((s,r)=>{this._addStickyColumnStyles([s],this._footerRowDefs[r])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs();const o=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||o,this._forceRecalculateCellWidths=o,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){const e=[],o=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let s=this._data[i];const r=this._getRenderRowsForData(s,i,o.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let m=0;m<r.length;m++){let p=r[m];const b=this._cachedRenderRowsMap.get(p.data);b.has(p.rowDef)?b.get(p.rowDef).push(p):b.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,o,i){return this._getRowDefs(e,o).map(r=>{const m=i&&i.has(r)?i.get(r):[];if(m.length){const p=m.shift();return p.dataIndex=o,p}return{data:e,rowDef:r,dataIndex:o}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Rt(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(o=>{this._columnDefsByName.has(o.name),this._columnDefsByName.set(o.name,o)})}_cacheRowDefs(){this._headerRowDefs=Rt(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Rt(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Rt(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(o=>!o.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(r,m)=>r||!!m.getColumnsDiff(),o=this._rowDefs.reduce(e,!1);o&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(e,!1);i&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),o||i||s}_switchDataSource(e){this._data=[],(0,N.y4)(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;(0,N.y4)(this.dataSource)?e=this.dataSource.connect(this):(0,Jn.A)(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,E.of)(this.dataSource)),this._renderChangeSubscription=e.pipe((0,f.Q)(this._onDestroy)).subscribe(o=>{this._data=o||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,o)=>this._renderRow(this._headerRowOutlet,e,o)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,o)=>this._renderRow(this._footerRowOutlet,e,o)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,o){const i=Array.from(o.columns||[]).map(m=>this._columnDefsByName.get(m)),s=i.map(m=>m.sticky),r=i.map(m=>m.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,r,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const o=[];for(let i=0;i<e.viewContainer.length;i++){const s=e.viewContainer.get(i);o.push(s.rootNodes[0])}return o}_getRowDefs(e,o){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(s=>!s.when||s.when(o,e));else{let s=this._rowDefs.find(r=>r.when&&r.when(o,e))||this._defaultRowDef;s&&i.push(s)}return i}_getEmbeddedViewArgs(e,o){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:o}}_renderRow(e,o,i,s={}){const r=e.viewContainer.createEmbeddedView(o.template,s,i);return this._renderCellTemplateForItem(o,s),r}_renderCellTemplateForItem(e,o){for(let i of this._getCellTemplates(e))Q.mostRecentCellOutlet&&Q.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,o);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let o=0,i=e.length;o<i;o++){const r=e.get(o).context;r.count=i,r.first=0===o,r.last=o===i-1,r.even=o%2==0,r.odd=!r.even,this.multiTemplateDataRows?(r.dataIndex=this._renderRows[o].dataIndex,r.renderIndex=o):r.index=this._renderRows[o].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,o=>{const i=this._columnDefsByName.get(o);return e.extractCellTemplate(i)}):[]}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(o,i)=>o||i.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new so(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,E.of)()).pipe((0,f.Q)(this._onDestroy)).subscribe(o=>{this._stickyStyler.direction=o,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(o=>!o._table||o._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const o=0===this._rowOutlet.viewContainer.length;if(o===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(o){const s=i.createEmbeddedView(e.templateRef),r=s.rootNodes[0];1===s.rootNodes.length&&r?.nodeType===this._document.ELEMENT_NODE&&(r.setAttribute("role","row"),r.classList.add(e._contentClassName))}else i.clear();this._isShowingNoDataRow=o,this._changeDetectorRef.markForCheck()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t._q3),t.rXU(t.gRc),t.rXU(t.aKT),t.kS0("role"),t.rXU(zn.dS,8),t.rXU(k.qQ),t.rXU(Qn.OD),t.rXU(N.sL),t.rXU(ce),t.rXU(W.Xj),t.rXU(he,12),t.rXU(t.SKi,8))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(o,i,s){if(1&o&&(t.wni(s,kt,5),t.wni(s,z,5),t.wni(s,xt,5),t.wni(s,lt,5),t.wni(s,ct,5)),2&o){let r;t.mGM(r=t.lsd())&&(i._noDataRow=r.first),t.mGM(r=t.lsd())&&(i._contentColumnDefs=r),t.mGM(r=t.lsd())&&(i._contentRowDefs=r),t.mGM(r=t.lsd())&&(i._contentHeaderRowDefs=r),t.mGM(r=t.lsd())&&(i._contentFooterRowDefs=r)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(o,i){2&o&&t.AVh("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[t.Mj6.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",t.L39],fixedLayout:[t.Mj6.HasDecoratorInputTransform,"fixedLayout","fixedLayout",t.L39]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[t.Jv_([{provide:V,useExisting:n},{provide:N.sL,useClass:N.xn},{provide:ce,useClass:Me},{provide:he,useValue:null}]),t.GFd,t.aNF],ngContentSelectors:Kn,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(o,i){1&o&&(t.NAR(Wn),t.SdG(0),t.SdG(1,1),t.DNE(2,Zn,1,0)(3,to,7,0)(4,eo,4,0)),2&o&&(t.R7$(2),t.vxM(2,i._isServer?2:-1),t.R7$(),t.vxM(3,i._isNativeHtmlTable?3:4))},dependencies:[_e,fe,Ce,ge],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return n})();function Rt(n,a){return n.concat(Array.from(a))}function Ne(n,a){const e=a.toUpperCase();let o=n.viewContainer.element.nativeElement;for(;o;){const i=1===o.nodeType?o.nodeName:null;if(i===e)return o;if("TABLE"===i)break;o=o.parentNode}return null}let ro=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[W.E9]})}return n})();var ve=d(86600);d(84572),d(14085);const co=[[["caption"]],[["colgroup"],["col"]],"*"],mo=["caption","colgroup, col","*"];function uo(n,a){1&n&&t.SdG(0,2)}function po(n,a){1&n&&(t.j41(0,"thead",0),t.eu8(1,1),t.k0s(),t.j41(2,"tbody",2),t.eu8(3,3)(4,4),t.k0s(),t.j41(5,"tfoot",0),t.eu8(6,5),t.k0s())}function ho(n,a){1&n&&t.eu8(0,1)(1,3)(2,4)(3,5)}let Be=(()=>{class n extends Ft{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(o,i){2&o&&t.AVh("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[t.Jv_([{provide:Ft,useExisting:n},{provide:V,useExisting:n},{provide:ce,useClass:Me},{provide:N.sL,useClass:N.xn},{provide:he,useValue:null}]),t.Vt3,t.aNF],ngContentSelectors:mo,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(o,i){1&o&&(t.NAR(co),t.SdG(0),t.SdG(1,1),t.DNE(2,uo,1,0)(3,po,7,0)(4,ho,4,0)),2&o&&(t.R7$(2),t.vxM(2,i._isServer?2:-1),t.R7$(),t.vxM(3,i._isNativeHtmlTable?3:4))},dependencies:[_e,fe,Ce,ge],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return n})(),ye=(()=>{class n extends it{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matCellDef",""]],standalone:!0,features:[t.Jv_([{provide:it,useExisting:n}]),t.Vt3]})}return n})(),xe=(()=>{class n extends st{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[t.Jv_([{provide:st,useExisting:n}]),t.Vt3]})}return n})(),Pe=(()=>{class n extends yt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matFooterCellDef",""]],standalone:!0,features:[t.Jv_([{provide:yt,useExisting:n}]),t.Vt3]})}return n})(),ke=(()=>{class n extends z{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matColumnDef",""]],inputs:{name:[t.Mj6.None,"matColumnDef","name"]},standalone:!0,features:[t.Jv_([{provide:z,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),t.Vt3]})}return n})(),Fe=(()=>{class n extends re{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[t.Vt3]})}return n})(),Xe=(()=>{class n extends $e{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["mat-footer-cell"],["td","mat-footer-cell",""]],hostAttrs:[1,"mat-mdc-footer-cell","mdc-data-table__cell"],standalone:!0,features:[t.Vt3]})}return n})(),Re=(()=>{class n extends le{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[t.Vt3]})}return n})(),qe=(()=>{class n extends lt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[t.Mj6.None,"matHeaderRowDef","columns"],sticky:[t.Mj6.HasDecoratorInputTransform,"matHeaderRowDefSticky","sticky",t.L39]},standalone:!0,features:[t.Jv_([{provide:lt,useExisting:n}]),t.GFd,t.Vt3]})}return n})(),Ve=(()=>{class n extends ct{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matFooterRowDef",""]],inputs:{columns:[t.Mj6.None,"matFooterRowDef","columns"],sticky:[t.Mj6.HasDecoratorInputTransform,"matFooterRowDefSticky","sticky",t.L39]},standalone:!0,features:[t.Jv_([{provide:ct,useExisting:n}]),t.GFd,t.Vt3]})}return n})(),Le=(()=>{class n extends xt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","matRowDef",""]],inputs:{columns:[t.Mj6.None,"matRowDefColumns","columns"],when:[t.Mj6.None,"matRowDefWhen","when"]},standalone:!0,features:[t.Jv_([{provide:xt,useExisting:n}]),t.Vt3]})}return n})(),Ye=(()=>{class n extends me{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[t.Jv_([{provide:me,useExisting:n}]),t.Vt3,t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),Ue=(()=>{class n extends ue{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-footer-row"],["tr","mat-footer-row",""]],hostAttrs:["role","row",1,"mat-mdc-footer-row","mdc-data-table__row"],exportAs:["matFooterRow"],standalone:!0,features:[t.Jv_([{provide:ue,useExisting:n}]),t.Vt3,t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),ze=(()=>{class n extends pe{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.xGo(n)))(i||n)}})();static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[t.Jv_([{provide:pe,useExisting:n}]),t.Vt3,t.aNF],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(o,i){1&o&&t.eu8(0,0)},dependencies:[Q],encapsulation:2})}return n})(),Qe=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[ve.yE,ro,ve.yE]})}return n})();const vo=n=>({"cursor-not-allowed":n});function bo(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas en que expira deben ser mayores igual que 1 o menores igual que 60. "),t.k0s())}let yo=(()=>{class n{constructor(e,o,i,s,r,m){this.data=e,this._formBuilder=o,this._dialogRef=i,this._invoiceService=s,this._snackBar=r,this.store=m,this.selectedQuotation=null,this.user$=(0,E.of)(null),this._unsubscribeAll=new M.B,this.selectedQuotation=e.quotation}ngOnInit(){this.user$=this.store.select(R.SW),this.user$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.user=e}),this.invoiceForm=this._formBuilder.group({merchantId:[this.selectedQuotation.merchantId._id,[l.k0.required]],userId:[this.user.id,[l.k0.required]],quotationId:[this.selectedQuotation._id,[l.k0.required]],quotationNo:[{disabled:!0,value:this.selectedQuotation.no},[l.k0.required]],expirationDays:[this.selectedQuotation.merchantId.commercialManagement.expirationInvoiceDays,[l.k0.required,l.k0.min(1),l.k0.max(60)]],bankAccount:["",[l.k0.minLength(16),l.k0.maxLength(24)]],status:[rt.PendientePago,[l.k0.required]]}),this.selectedQuotation.paymentMethodData.includeBankAccount&&this.invoiceForm.get("bankAccount").setValue(this.selectedQuotation.merchantId.bankAccount)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createInvoice(){const e=this.invoiceForm.getRawValue();this._invoiceService.createInvoice(e).subscribe(o=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.store.dispatch((0,Un.Wh)({quotation:{...this.selectedQuotation,status:"Facturada"}})),this._dialogRef.close()})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(A.Vh),t.rXU(l.ok),t.rXU(A.CP),t.rXU(pt.U),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["commercial-invoice-confirm-dialog"]],standalone:!0,features:[t.aNF],decls:29,vars:15,consts:[[1,"h-full","ng-star-inserted"],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","h-full"],[1,"block","w-full"],[1,"flex","flex-col","items-center","flex-auto","p-8","pb-4","sm:flex-row","sm:items-start","sm:pb-6"],["ng-reflect-ng-class","[object Object]",1,"flex","items-center","justify-center","w-10","h-10","text-blue-600","bg-blue-100","rounded-full","flex-0","sm:mr-4","dark:text-blue-50","dark:bg-blue-600","ng-star-inserted"],["role","img","aria-hidden","true","ng-reflect-svg-icon","heroicons_outline:question-mar","data-mat-icon-type","svg","data-mat-icon-name","question-mark-circle","data-mat-icon-namespace","heroicons_outline",1,"text-current","mat-icon","notranslate","mat-icon-no-color"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","fit","","height","100%","width","100%","preserveAspectRatio","xMidYMid meet","focusable","false"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col","items-center","mt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","ng-star-inserted"],[1,"text-xl","font-medium","leading-6","ng-star-inserted"],[1,"text-secondary","ng-star-inserted"],[1,"pb-6","pl-8","pr-8","mt-10","sm:mt-0","sm:pl-22",3,"formGroup","autocomplete"],[1,"w-full"],["matSuffix","",1,"ml-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["type","number","required","","matInput","",3,"formControlName","min","max"],[1,"flex","flex-wrap","justify-center","px-6","py-4","space-x-3","tems-center","md:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10","ng-star-inserted"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","","mat-button","",3,"click","color","disabled","ngClass"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),t.qSk(),t.j41(7,"svg",7),t.nrm(8,"path",8),t.k0s()()(),t.joV(),t.j41(9,"div",9)(10,"div",10),t.EFF(11),t.k0s(),t.j41(12,"div",11),t.EFF(13),t.k0s()()(),t.j41(14,"form",12)(15,"div")(16,"mat-form-field",13)(17,"mat-label"),t.EFF(18,"Expira en"),t.k0s(),t.j41(19,"span",14),t.EFF(20,"D\xedas"),t.k0s(),t.nrm(21,"mat-icon",15)(22,"input",16),t.DNE(23,bo,2,0,"mat-error"),t.k0s()()()()(),t.j41(24,"div",17)(25,"button",18),t.EFF(26,"Cancelar"),t.k0s(),t.j41(27,"button",19),t.bIt("click",function(){return i.createInvoice()}),t.EFF(28," Aceptar "),t.k0s()()()()),2&o&&(t.R7$(11),t.JRh(i.data.title),t.R7$(2),t.JRh(i.data.message),t.R7$(),t.Y8G("formGroup",i.invoiceForm)("autocomplete","off"),t.R7$(7),t.Y8G("svgIcon","mat_solid:schedule"),t.R7$(),t.Y8G("formControlName","expirationDays")("min",1)("max",60),t.R7$(),t.vxM(23,i.invoiceForm.get("expirationDays").hasError("min")||i.invoiceForm.get("expirationDays").hasError("max")?23:-1),t.R7$(2),t.Y8G("matDialogClose",!0),t.R7$(2),t.Y8G("color","primary")("disabled",i.invoiceForm.invalid)("ngClass",t.eq3(13,vo,i.invoiceForm.invalid)))},dependencies:[y.Hl,y.$z,A.hM,A.tx,_.RG,_.rl,_.nJ,_.TL,_.JW,_.yw,C.m_,C.An,w.fS,w.fg,se.Ve,F.NQ,Qe,k.YU,l.X1,l.qT,l.me,l.Q0,l.BC,l.cb,l.YS,l.VZ,l.zX,l.j4,l.JD],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})();var He=d(55181);const xo=()=>["Super Administrador"],ko=n=>({"pointer-events-none":n}),Fo=()=>[10,25,50,100],Ro=(n,a,e,o,i)=>({"bg-amber-50 text-amber-700":n,"bg-green-50 text-green-700":a,"bg-blue-50 text-blue-700":e,"bg-red-50 text-red-700":o,"bg-pink-50 text-pink-700":i}),wo=n=>[n],Do=()=>[""],Io=n=>({"bg-amber-500 text-amber-50":n}),jo=n=>({"bg-green-500 text-green-50":n}),Eo=n=>({"bg-blue-500 text-blue-50":n}),So=n=>({"bg-red-500 text-pink-50 text-red-5":n}),To=n=>({"bg-pink-500 text-pink-50":n});function $o(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-form-field",19),t.nrm(2,"mat-icon",20)(3,"input",21),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar ofertas")}}function Go(n,a){1&n&&t.eu8(0)}function Mo(n,a){if(1&n&&(t.j41(0,"div",34)(1,"span"),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Lme("",t.i5U(3,2,e.total,t.lJ4(5,Do))," ",e.currency,"")}}function Ao(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"div",33),t.EFF(4),t.k0s(),t.j41(5,"div",27),t.Z7z(6,Mo,4,6,"div",34,t.fX1),t.k0s(),t.j41(8,"div",35),t.EFF(9),t.k0s(),t.j41(10,"div",36)(11,"span",37),t.EFF(12),t.k0s()(),t.j41(13,"div",38)(14,"button",39),t.nrm(15,"mat-icon",40),t.k0s(),t.j41(16,"button",41),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.rejectQuotation(i))}),t.nrm(17,"mat-icon",40),t.k0s(),t.j41(18,"button",42),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.conformInvoice(i))}),t.nrm(19,"mat-icon",40),t.k0s(),t.j41(20,"button",43),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.deleteQuotation(i))}),t.nrm(21,"mat-icon",40),t.k0s()()()}if(2&n){const e=a.$implicit,o=t.XpG(4);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.SpI(" ",e.requestNo," "),t.R7$(2),t.Dyx(o.getTotalAmount(e)),t.R7$(3),t.SpI(" ",e.goodsData.length," "),t.R7$(),t.Y8G("matTooltip","Rechazada"===e.status?"Motivo: "+e.rejectedReason:"")("ngClass",t.s1E(15,Ro,"Nueva"===e.status,"Aceptada"===e.status,"Facturada"===e.status,"Rechazada"===e.status,"Vencida"===e.status)),t.R7$(2),t.JRh(e.status),t.R7$(2),t.Y8G("routerLink",t.eq3(21,wo,e._id)),t.R7$(),t.Y8G("svgIcon","mat_solid:visibility"),t.R7$(),t.Y8G("disabled",!e.status.includes("Nueva")&&!e.status.includes("Aceptada")),t.R7$(),t.Y8G("svgIcon","heroicons_solid:clipboard-copy"),t.R7$(),t.Y8G("disabled",!e.status.includes("Aceptada")),t.R7$(),t.Y8G("svgIcon","heroicons_solid:clipboard-check"),t.R7$(),t.Y8G("matTooltip","Eliminar")("disabled",!e.status.includes("Nueva")),t.R7$(),t.Y8G("svgIcon","mat_solid:delete")}}function No(n,a){1&n&&t.Z7z(0,Ao,22,23,"div",32,t.BUC().trackByFn,!0),2&n&&t.Dyx(a)}function Oo(n,a){if(1&n&&(t.j41(0,"div",17),t.DNE(1,Go,1,0,"ng-container",22),t.j41(2,"div",23)(3,"div",24)(4,"div",25)(5,"div",26),t.EFF(6," N\xfamero "),t.k0s(),t.j41(7,"div",26),t.EFF(8," N.Oferta "),t.k0s(),t.j41(9,"div",27),t.EFF(10," Importe "),t.k0s(),t.j41(11,"div",28),t.EFF(12," Cantidad "),t.k0s(),t.j41(13,"div",29),t.EFF(14," Estado "),t.k0s(),t.j41(15,"div",30),t.EFF(16," Acciones "),t.k0s()(),t.DNE(17,No,2,0),t.nI1(18,"async"),t.nrm(19,"mat-paginator",31),t.k0s()()()),2&n){let e;t.XpG();const o=t.sdS(28),i=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",o),t.R7$(4),t.Y8G("mat-sort-header","no"),t.R7$(2),t.Y8G("mat-sort-header","requestNo"),t.R7$(6),t.Y8G("mat-sort-header","status"),t.R7$(4),t.vxM(17,(e=t.bMT(18,11,i.quotations$))?17:-1,e),t.R7$(2),t.Y8G("ngClass",t.eq3(13,ko,i.isLoading))("length",i.pagination.length)("pageIndex",i.pagination.page)("pageSize",i.pagination.size)("pageSizeOptions",t.lJ4(15,Fo))("showFirstLastButtons",!0)}}function Bo(n,a){}function Po(n,a){if(1&n&&t.DNE(0,Bo,0,0,"ng-template",44),2&n){t.XpG();const e=t.sdS(28),o=t.sdS(30),i=t.XpG();t.Y8G("ngTemplateOutlet",i.filterInputControl.value?e:o)}}function Xo(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",45)(1,"button",46),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Nueva"!==i.filterInputControl.value?"Nueva":""))}),t.j41(2,"span",47),t.EFF(3,"Nuevas"),t.k0s(),t.nrm(4,"div",48),t.k0s(),t.j41(5,"button",49),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Aceptada"!==i.filterInputControl.value?"Aceptada":""))}),t.j41(6,"span",47),t.EFF(7,"Aceptadas"),t.k0s(),t.nrm(8,"div",50),t.k0s(),t.j41(9,"button",51),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Facturada"!==i.filterInputControl.value?"Facturada":""))}),t.j41(10,"span",47),t.EFF(11,"Facturadas"),t.k0s(),t.nrm(12,"div",52),t.k0s(),t.j41(13,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Rechazada"!==i.filterInputControl.value?"Rechazada":""))}),t.j41(14,"span",47),t.EFF(15,"Rechazadas"),t.k0s(),t.nrm(16,"div",54),t.k0s(),t.j41(17,"button",55),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Vencida"!==i.filterInputControl.value?"Vencida":""))}),t.j41(18,"span",47),t.EFF(19,"Vencidas"),t.k0s(),t.nrm(20,"div",56),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.eq3(5,Io,"Nueva"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(7,jo,"Aceptada"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(9,Eo,"Facturada"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(11,So,"Rechazada"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(13,To,"Vencida"===e.filterInputControl.value))}}function qo(n,a){if(1&n&&(t.j41(0,"div",57),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.searchInputControl.value?"\xa1No se han encontrado ofertas!":"\xa1No se ha creado ninguna oferta a\xfan!","")}}function Vo(n,a){1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"div",5)(5,"div",6)(6,"a",7),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",6),t.nrm(9,"mat-icon",8),t.j41(10,"a",9),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",6),t.nrm(13,"mat-icon",8),t.j41(14,"a",10),t.EFF(15,"Ofertas"),t.k0s()()(),t.j41(16,"div",11)(17,"a",12),t.nrm(18,"mat-icon",8),t.j41(19,"span",13),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",14)(22,"div",15),t.EFF(23," Ofertas "),t.k0s()()(),t.DNE(24,$o,4,4,"div",16),t.k0s(),t.DNE(25,Oo,20,16,"div",17)(26,Po,1,1)(27,Xo,21,15,"ng-template",null,0,t.C5r)(29,qo,2,1,"ng-template",null,1,t.C5r),t.k0s()),2&n&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(6),t.Y8G("ngxPermissionsExcept",t.lJ4(6,xo)),t.R7$(),t.vxM(25,a.length>0?25:26))}let Lo=(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._dialog=o,this._fuseConfirmationService=i,this._quotationService=s,this._snackBar=r,this.store=m,this.isLoading=!1,this.searchInputControl=new l.MJ(null),this.filterInputControl=new l.MJ(""),this._unsubscribeAll=new M.B}ngOnInit(){this.quotations$=this.store.select(Yn.EG),this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,et.Z)(null),(0,S.n)(e=>null!==e?(this.isLoading=!0,this._quotationService.getQuotations(0,20,"createdAt","desc",e,this.filterInputControl.value)):(0,E.of)()),(0,$.T)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,S.n)(e=>this._quotationService.getQuotations(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,S.n)(()=>(this.isLoading=!0,this._quotationService.getQuotations(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,$.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteQuotation(e){this._fuseConfirmationService.open({title:"Eliminar Oferta",message:`\xbfEst\xe1 seguro que desea eliminar la oferta # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._quotationService.deleteQuotation(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectQuotation(e){this._dialog.open(nt.s,{data:{title:"Rechazar Oferta",message:`\xbfEst\xe1 seguro desea Rechazar la oferta # ${e.no}?`,rejectedReason:e.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,f.Q)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._quotationService.rejectQuotation(e._id,i.reason).subscribe(r=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}conformInvoice(e){this._dialog.open(yo,{data:{title:"Generar Factura",message:`\xbfEst\xe1 seguro que desea generar una factura para la oferta # ${e.no}?`,quotation:e},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"})}getTotalAmount(e){return e.goodsData.reduce((o,{currency:i})=>{if(!o.some(s=>s.currency===i)){const s=e.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,m)=>r+m,0);o.push({currency:i,total:s})}return o},[])}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(A.bZ),t.rXU(J.G),t.rXU(He.X),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["commercial-quotations"]],viewQuery:function(o,i){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(i._paginator=s.first),t.mGM(s=t.lsd())&&(i._sort=s.first)}},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["filter",""],["noQuotations",""],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","quotations-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-10","mr-6","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","quotations-table","md:px-8"],[1,"whitespace-nowrap"],[1,"flex","flex-col","items-end"],[1,"text-center","truncate"],[1,"flex","items-center","mr-4","text-center","truncate","delay-100","rounded-full","h-7","lock","dark:bg-white","dark:bg-opacity-5",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["matTooltip","Rechazar Oferta","mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],["matTooltip","Generar Factura","mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","matTooltip","disabled"],[3,"ngTemplateOutlet"],[1,"flex","self-end","justify-around","w-full","h-10","pl-2","pr-2","mb-3","mt-7","md:mt-10","md:mb-5","sm:pr-6","md:w-11/12","lg:w-10/12","xl:w-8/12"],[1,"flex","items-center","justify-center","h-full","mr-1","transition-all","ease-in-out","delay-100","border-0","rounded-full","text-amber-700","bg-amber-50","w-36","hover:bg-amber-500","hover:text-amber-50",3,"click","ngClass"],[1,"hidden","ml-2","mr-1","text-lg","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-green-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-green-50","w-36","hover:bg-green-500","hover:text-green-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-green-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-blue-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-blue-50","w-36","hover:bg-blue-500","hover:text-blue-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","text-red-700","transition-all","ease-in-out","bg-red-100","border-0","rounded-full","delay-50","w-36","hover:bg-red-500","hover:text-red-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","ml-1","text-pink-700","transition-all","ease-in-out","bg-pink-100","border-0","rounded-full","sm:ml-0","delay-50","w-36","hover:bg-pink-500","hover:text-pink-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-pink-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){if(1&o&&(t.DNE(0,Vo,31,7,"div",2),t.nI1(1,"async")),2&o){let s;t.vxM(0,(s=t.bMT(1,1,i.quotations$))?0:-1,s)}},dependencies:[k.Jj,k.oe,y.Hl,y.$z,_.RG,_.rl,_.JW,C.m_,C.An,w.fS,w.fg,j.Ou,j.iy,F.NQ,F.B4,F.aE,H.uc,H.oV,W.uv,k.YU,Te.Ov,Te.f6,I.Wk],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})();var Je=d(22674),Yo=d(94023);const Uo=["requestDetail"];let zo=(()=>{class n{constructor(){}ngOnInit(){}generatePDF(e){this.quotationDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["request-details-header"]],viewQuery:function(o,i){if(1&o&&t.GBs(Uo,5),2&o){let s;t.mGM(s=t.lsd())&&(i.quotationDetailsComponent=s.first)}},standalone:!0,features:[t.aNF],decls:35,vars:7,consts:[["requestDetail",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","w-full","min-w-0","overflow-auto","text-center","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/commercial/request",1,"ml-1","text-primary-500","hover:underline"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","justify-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"]],template:function(o,i){if(1&o){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",5),t.nrm(9,"mat-icon",7),t.j41(10,"a",8),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",5),t.nrm(13,"mat-icon",7),t.j41(14,"a",9),t.EFF(15,"Solicitudes"),t.k0s()()(),t.j41(16,"div",10)(17,"a",11),t.nrm(18,"mat-icon",7),t.j41(19,"span",12),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",13)(22,"div",14)(23,"span"),t.EFF(24,"Detalles de la solicitud"),t.k0s()()()(),t.j41(25,"div",15)(26,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("open"))}),t.nrm(27,"mat-icon",17),t.k0s(),t.j41(28,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("download"))}),t.nrm(29,"mat-icon",17),t.k0s(),t.j41(30,"button",16),t.bIt("click",function(){return t.eBV(s),t.Njj(i.generatePDF("print"))}),t.nrm(31,"mat-icon",17),t.k0s()()(),t.j41(32,"div",18),t.nrm(33,"request-details",null,0),t.k0s()()}2&o&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(9),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))},dependencies:[Yo.B,C.m_,C.An,y.Hl,y.$z,I.Wk],encapsulation:2,changeDetection:0})}return n})();var Qo=d(40740),We=d(91013),Ke=d(55867);const Ho=n=>({"cursor-not-allowed":n}),Jo=(n,a)=>({"text-center pl-8  md:pl-0":n,"min-w-60 lg:w-80":a}),Wo=(n,a)=>({"text-center":n,"w-60 lg:w-80":a}),Ze=()=>[""],Ko=()=>["$"],Zo=(n,a)=>({"text-center":n,truncate:a});function ti(n,a){if(1&n&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2);t.Y8G("value",o.transformPaymentMethod(e)),t.R7$(),t.SpI(" ",e.name," ")}}function ei(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," El m\xe9todo de pago es obligatoria. "),t.k0s())}function ni(n,a){if(1&n&&(t.j41(0,"mat-form-field",5)(1,"mat-label"),t.EFF(2,"M\xe9todo de pago"),t.k0s(),t.nrm(3,"mat-icon",7),t.j41(4,"mat-select",23),t.Z7z(5,ti,2,2,"mat-option",24,t.fX1),t.k0s(),t.DNE(7,ei,2,0,"mat-error"),t.k0s()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("svgIcon","heroicons_solid:credit-card"),t.R7$(),t.Y8G("formControlName","paymentMethodData"),t.R7$(),t.Dyx(a),t.R7$(2),t.vxM(7,e.quotationForm.get("paymentMethodData").hasError("required")?7:-1)}}function oi(n,a){1&n&&(t.j41(0,"mat-error"),t.EFF(1," Los d\xedas en que expira deben ser mayores igual que 1 o menores igual que 60. "),t.k0s())}function ii(n,a){if(1&n&&(t.j41(0,"th",28),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2).$implicit,o=t.XpG();t.Y8G("ngClass",t.l_i(2,Jo,"name"!==e,"name"===e)),t.R7$(),t.SpI(" ",o.getFieldsTableHeaderNames(e)," ")}}function si(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2).$implicit;t.R7$(),t.Lme("",t.i5U(2,2,e[o],t.lJ4(5,Ze))," ",e.currency," ")}}function ai(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2).$implicit;t.R7$(),t.SpI("",t.i5U(2,1,e[o],t.lJ4(4,Ko))," ")}}function ri(n,a){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2).$implicit;t.R7$(),t.SpI("",e[o]," ")}}function li(n,a){if(1&n&&(t.j41(0,"td",29),t.DNE(1,si,3,6,"span")(2,ai,3,5,"span")(3,ri,2,1,"span"),t.k0s()),2&n){const e=t.XpG(2).$implicit;t.Y8G("ngClass",t.l_i(4,Wo,"name"!==e,"name"===e)),t.R7$(),t.vxM(1,"price"===e?1:-1),t.R7$(),t.vxM(2,"quantity"===e?2:-1),t.R7$(),t.vxM(3,"price"!==e&&"quantity"!==e?3:-1)}}function ci(n,a){1&n&&(t.j41(0,"span"),t.EFF(1,"Total"),t.k0s())}function di(n,a){if(1&n&&(t.j41(0,"td",30),t.DNE(1,ci,2,0,"span"),t.k0s()),2&n){const e=t.XpG(2).$implicit;t.Y8G("ngClass",t.l_i(2,Zo,"name"!==e,"name"===e)),t.R7$(),t.vxM(1,"name"===e?1:-1)}}function mi(n,a){1&n&&(t.j41(0,"div"),t.DNE(1,ii,2,5,"th",25)(2,li,4,7,"td",26)(3,di,2,5,"td",27),t.k0s())}function ui(n,a){if(1&n&&(t.j41(0,"th",34),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.SpI(" ",o.getFieldsTableHeaderNames(e)," ")}}function pi(n,a){if(1&n&&(t.j41(0,"span",37),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e[o],"")}}function hi(n,a){if(1&n&&(t.j41(0,"div",37)(1,"mat-form-field",38),t.nrm(2,"input",39),t.k0s()()),2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.R7$(2),t.Y8G("formControl",o.amountFormControl)("min",0)("max",o.getOldGoodsAmountById(e.goodsId))}}function fi(n,a){if(1&n&&(t.j41(0,"td",35)(1,"div",36),t.DNE(2,pi,2,1,"span",37)(3,hi,3,3,"div",37),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.vxM(2,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?-1:2),t.R7$(),t.vxM(3,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?3:-1)}}function _i(n,a){1&n&&t.nrm(0,"td",40)}function gi(n,a){1&n&&(t.j41(0,"div"),t.DNE(1,ui,2,1,"th",31)(2,fi,4,2,"td",32)(3,_i,1,0,"td",33),t.k0s())}function Ci(n,a){1&n&&(t.j41(0,"th",44),t.EFF(1," Acciones "),t.k0s())}function vi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.operation(i.goodsId,-1))}),t.nrm(1,"mat-icon",51),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("disabled",0===e.amount),t.R7$(),t.Y8G("svgIcon","heroicons_solid:minus-sm")}}function bi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.operation(i.goodsId,1))}),t.nrm(1,"mat-icon",51),t.k0s()}if(2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("disabled",e.amount===o.getOldGoodsAmountById(e.goodsId)),t.R7$(),t.Y8G("svgIcon","heroicons_solid:plus-sm")}}function yi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.toggleToEditGoods(i))}),t.nrm(1,"mat-icon",51),t.k0s()}2&n&&(t.R7$(),t.Y8G("svgIcon","mat_solid:edit-alt"))}function xi(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",53),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG(3);return t.Njj(s.toggleToEditGoods(i))}),t.nrm(1,"mat-icon",51),t.k0s()}if(2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("color","primary")("disabled",o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)&&o.amountFormControl.invalid),t.R7$(),t.Y8G("svgIcon","mat_solid:edit-alt")}}function ki(n,a){if(1&n&&(t.j41(0,"td",45)(1,"div",46),t.DNE(2,vi,2,2,"button",47)(3,bi,2,2,"button",47)(4,yi,2,1,"button",48)(5,xi,2,3,"button",49),t.k0s()()),2&n){const e=a.$implicit,o=t.XpG(3);t.R7$(2),t.vxM(2,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?-1:2),t.R7$(),t.vxM(3,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?-1:3),t.R7$(),t.vxM(4,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?-1:4),t.R7$(),t.vxM(5,o.selectedGoodDataToEdit&&e.goodsId===(null==o.selectedGoodDataToEdit?null:o.selectedGoodDataToEdit.goodsId)?5:-1)}}function Fi(n,a){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&n){const e=a.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,e.total,t.lJ4(5,Ze))," ",e.currency,"")}}function Ri(n,a){if(1&n&&(t.j41(0,"td",54),t.Z7z(1,Fi,3,6,"div",null,t.fX1),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.Dyx(e.getTotalQuantity())}}function wi(n,a){1&n&&(t.j41(0,"div"),t.DNE(1,Ci,2,0,"th",41)(2,ki,6,4,"td",42)(3,Ri,3,0,"td",43),t.k0s())}function Di(n,a){if(1&n&&(t.qex(0,16),t.DNE(1,mi,4,0,"div")(2,gi,4,0,"div")(3,wi,4,0,"div"),t.bVm()),2&n){const e=a.$implicit;t.FS9("matColumnDef",e),t.R7$(),t.vxM(1,"actions"!==e&&"amount"!==e?1:-1),t.R7$(),t.vxM(2,"amount"===e?2:-1),t.R7$(),t.vxM(3,"actions"===e?3:-1)}}function Ii(n,a){1&n&&t.nrm(0,"tr",55)}function ji(n,a){1&n&&t.nrm(0,"tr",56)}function Ei(n,a){1&n&&t.nrm(0,"tr",57)}let Si=(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._formBuilder=o,this._fuseConfirmationService=i,this._quotationsService=s,this._snackBar=r,this.store=m,this.selectedRequest=null,this.reject=new t.bkB,this.isQuotationCreated=new t.bkB,this.user$=(0,E.of)(null),this.selectedGoodDataToEdit=null,this.amountFormControl=new l.MJ(0),this.paymentMethods$=(0,E.of)(null),this.displayedColumns=["name","type","uom","amount","price","quantity","actions"],this._unsubscribeAll=new M.B,this.amountFormControl.setValidators([l.k0.required])}ngOnInit(){this.goodsData=structuredClone(this.selectedRequest.goodsData),this.user$=this.store.select(R.SW),this.user$.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.user=e,this._changeDetectorRef.markForCheck()}),this.paymentMethods$=this.store.select(Ct),this.quotationForm=this._formBuilder.group({merchantId:[this.selectedRequest.merchantId._id,[l.k0.required]],userId:[this.user.id,[l.k0.required]],requestId:[this.selectedRequest._id,[l.k0.required]],requestNo:[{disabled:!0,value:this.selectedRequest.no},[l.k0.required]],expirationDays:[this.selectedRequest.merchantId.commercialManagement.expirationQuotationDays,[l.k0.required,l.k0.min(1),l.k0.max(60)]],status:[Ke.Sb.Nueva,[l.k0.required]],description:["",[l.k0.maxLength(1e3)]],paymentMethodData:[null,[l.k0.required]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createQuotation(){let e=this.quotationForm.getRawValue();e={...e,goodsData:this.goodsData},this._fuseConfirmationService.open({title:"Crear Oferta",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._quotationsService.createQuotation(e).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.isQuotationCreated.next(this.selectedRequest)}),this._changeDetectorRef.markForCheck()})}transformPaymentMethod(e){return new Ke.me(e)}getTotal(){return this.getTotalQuantity().map(e=>e.total).reduce((e,o)=>e+o,0)}getTotalQuantity(){return this.goodsData.reduce((e,{currency:o})=>{if(!e.some(i=>i.currency===o)){const i=this.goodsData.filter(s=>s.currency===o).map(s=>s.quantity).reduce((s,r)=>s+r,0);e.push({currency:o,total:i})}return e},[])}getFieldsTableHeaderNames(e){switch(e){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}operation(e,o){const i=this.goodsData.find(s=>s.goodsId===e);i.amount=i.amount+o,i.quantity=i.amount*i.price}getOldGoodsAmountById(e){return this.selectedRequest.goodsData.find(o=>o.goodsId===e).amount}toggleToEditGoods(e){if(this.selectedGoodDataToEdit&&this.selectedGoodDataToEdit.goodsId===e.goodsId){const i=this.amountFormControl.value;this.amountFormControl.clearValidators();const s=this.goodsData.find(r=>r.goodsId===e.goodsId);return s.amount=i,s.quantity=s.amount*s.price,this.amountFormControl.clearValidators(),void(this.selectedGoodDataToEdit=null)}const o=this.selectedRequest.goodsData.find(i=>i.goodsId===e.goodsId);this.amountFormControl.setValidators([l.k0.required,l.k0.min(0),l.k0.max(o.amount)]),this.amountFormControl.setValue(e.amount),this.selectedGoodDataToEdit=e}triggerReject(){this.reject.next(this.selectedRequest)}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(l.ok),t.rXU(J.G),t.rXU(He.X),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["quotation-confirm"]],inputs:{selectedRequest:"selectedRequest"},outputs:{reject:"reject",isQuotationCreated:"isQuotationCreated"},standalone:!0,features:[t.aNF],decls:37,vars:24,consts:[[1,"overflow-hidden","shadow-lg"],[1,"flex","flex-col","justify-between","order-b"],[1,"flex","flex-col","w-full","p-4","space-y-1","sm:p-10"],[1,"grid","w-full","grid-cols-4","gap-y-1","gap-x-6",3,"formGroup"],[1,"col-span-1"],[1,"w-full"],["matSuffix","",1,"ml-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["type","number","required","","matInput","",3,"formControlName","min","max"],[1,"col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matInput","","matTextareaAutosize","",1,"h-4","min-h-4","max-h-20",3,"formControlName","rows","spellcheck","maxlength"],[1,"flex","flex-col","col-span-4"],[1,"font-medium"],["tabindex","0",1,"mt-2","overflow-auto","rounded-md","max-h-80",2,"box-shadow","0 0 3px 0 rgb(0 0 0 / 10%), 0 1px 2px -1px rgb(0 0 0 / 10%) !important"],["mat-table","",1,"w-full",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium",4,"matFooterRowDef"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","border-t"],["mat-button","",1,"-ml-4",3,"click","color"],["mat-flat-button","",3,"click","color","disabled","ngClass"],["required","",3,"formControlName"],[3,"value"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-footer-cell","",3,"ngClass",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0",3,"ngClass"],["mat-cell","",3,"ngClass"],["mat-footer-cell","",3,"ngClass"],["mat-header-cell","","class","w-10 pl-8 pr-8 text-center md:w-auto md:pr-0 md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pl-8","pr-8","text-center","md:w-auto","md:pr-0","md:pl-0"],["mat-cell","",1,"text-center"],[1,"flex","justify-center"],[1,"w-24"],[1,"w-full","fuse-mat-no-subscript"],["type","number","matInput","","required","",3,"formControl","min","max"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","pl-8 pr-8 text-center md:pr-6 md:pl-0",4,"matHeaderCellDef"],["style","width: 120px;","mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"pl-8","pr-8","text-center","md:pr-6","md:pl-0"],["mat-cell","",1,"text-center",2,"width","120px"],[1,"flex","justify-center","space-x-2",2,"width","120px"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],["mat-flat-button","",1,"px-2","leading-6","min-h-7","h-7",3,"color","disabled"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-flat-button","",1,"px-2","leading-6","min-h-7","h-7",3,"click","color","disabled"],["mat-footer-cell","",1,"text-end"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",1,"font-medium"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),t.DNE(5,ni,8,3,"mat-form-field",5),t.nI1(6,"async"),t.k0s(),t.j41(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),t.EFF(10,"Expira en"),t.k0s(),t.j41(11,"span",6),t.EFF(12,"D\xedas"),t.k0s(),t.nrm(13,"mat-icon",7)(14,"input",8),t.DNE(15,oi,2,0,"mat-error"),t.k0s()(),t.j41(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),t.EFF(19,"Descripci\xf3n"),t.k0s(),t.nrm(20,"mat-icon",7)(21,"textarea",11),t.k0s()()(),t.j41(22,"div",12)(23,"mat-label",13),t.EFF(24,"Productos y servicios"),t.k0s(),t.j41(25,"div",14)(26,"table",15),t.Z7z(27,Di,4,4,"ng-container",16,t.fX1),t.DNE(29,Ii,1,0,"tr",17)(30,ji,1,0,"tr",18)(31,Ei,1,0,"tr",19),t.k0s()()()(),t.j41(32,"div",20)(33,"button",21),t.bIt("click",function(){return i.triggerReject()}),t.EFF(34," Rechazar Solicitud "),t.k0s(),t.j41(35,"button",22),t.bIt("click",function(){return i.createQuotation()}),t.EFF(36," Conformar Oferta "),t.k0s()()()()),2&o){let s;t.R7$(3),t.Y8G("formGroup",i.quotationForm),t.R7$(2),t.vxM(5,(s=t.bMT(6,20,i.paymentMethods$))?5:-1,s),t.R7$(8),t.Y8G("svgIcon","mat_solid:schedule"),t.R7$(),t.Y8G("formControlName","expirationDays")("min",1)("max",60),t.R7$(),t.vxM(15,i.quotationForm.get("expirationDays").hasError("min")||i.quotationForm.get("expirationDays").hasError("max")?15:-1),t.R7$(5),t.Y8G("svgIcon","mat_solid:subject"),t.R7$(),t.Y8G("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3),t.R7$(5),t.Y8G("dataSource",i.goodsData),t.R7$(),t.Dyx(i.displayedColumns),t.R7$(2),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("matFooterRowDef",i.displayedColumns),t.R7$(2),t.Y8G("color","warn"),t.R7$(2),t.Y8G("color","primary")("disabled",i.quotationForm.invalid||i.amountFormControl.invalid||0===i.getTotal())("ngClass",t.eq3(22,Ho,i.quotationForm.invalid||i.amountFormControl.invalid||0===i.getTotal()))}},dependencies:[k.Jj,y.Hl,y.$z,_.RG,_.rl,_.nJ,_.TL,_.JW,_.yw,w.fS,w.fg,C.m_,C.An,se.Ve,se.VO,ve.wT,F.NQ,k.YU,l.X1,l.qT,l.me,l.Q0,l.BC,l.cb,l.YS,l.tU,l.VZ,l.zX,l.l_,l.j4,l.JD,Qe,Be,xe,qe,ke,ye,Le,Pe,Ve,Fe,Re,Xe,Ye,ze,Ue],encapsulation:2,changeDetection:0})}return n})();var Ti=d(90328);const $i=()=>["Super Administrador"],Gi=n=>({"pointer-events-none":n}),Mi=()=>[10,25,50,100],Ai=(n,a,e)=>({"bg-amber-50 text-amber-700":n,"bg-blue-50 text-blue-700":a,"bg-red-50 text-red-700":e}),Ni=n=>[n],Oi=()=>[""],Bi=n=>({"bg-amber-500 text-amber-50":n}),Pi=n=>({"bg-blue-500 text-blue-50":n}),Xi=n=>({"bg-red-500 text-red-50":n});function qi(n,a){if(1&n&&(t.j41(0,"div",18)(1,"mat-form-field",19),t.nrm(2,"mat-icon",20)(3,"input",21),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(2),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar solicitudes")}}function Vi(n,a){1&n&&t.eu8(0)}function Li(n,a){if(1&n&&(t.j41(0,"div",34)(1,"span"),t.EFF(2),t.nI1(3,"currency"),t.k0s()()),2&n){const e=a.$implicit;t.R7$(2),t.Lme("",t.i5U(3,2,e.total,t.lJ4(5,Oi))," ",e.currency,"")}}function Yi(n,a){if(1&n){const e=t.RV6();t.j41(0,"quotation-confirm",44),t.bIt("reject",function(i){t.eBV(e);const s=t.XpG(5);return t.Njj(s.rejectRequest(i))})("isQuotationCreated",function(i){t.eBV(e);const s=t.XpG(5);return t.Njj(s.getRequestById(i))}),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("selectedRequest",e)}}function Ui(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",32)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"div",33),t.EFF(4),t.k0s(),t.j41(5,"div",27),t.Z7z(6,Li,4,6,"div",34,t.fX1),t.k0s(),t.j41(8,"div",35),t.EFF(9),t.k0s(),t.j41(10,"div",36)(11,"span",37),t.EFF(12),t.k0s()(),t.j41(13,"div",38)(14,"button",39),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.toggleDetails(i))}),t.nrm(15,"mat-icon",40),t.k0s(),t.j41(16,"button",41),t.nrm(17,"mat-icon",40),t.k0s(),t.j41(18,"button",42),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.deleteRequest(i))}),t.nrm(19,"mat-icon",40),t.k0s()()(),t.j41(20,"div",24),t.DNE(21,Yi,1,1,"quotation-confirm",43),t.k0s()}if(2&n){const e=a.$implicit,o=t.XpG(4);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.Lme(" ",e.name," ",e.lastname," "),t.R7$(2),t.Dyx(o.getTotalAmount(e)),t.R7$(3),t.SpI(" ",e.goodsData.length," "),t.R7$(),t.Y8G("matTooltip","Rechazada"===e.status?"Motivo: "+e.rejectedReason:"")("ngClass",t.sMw(14,Ai,"Nueva"===e.status,"Aceptada"===e.status,"Rechazada"===e.status)),t.R7$(2),t.JRh(e.status),t.R7$(2),t.Y8G("disabled","Nueva"!==e.status),t.R7$(),t.Y8G("svgIcon",(null==o.selectedRequest?null:o.selectedRequest._id)===e._id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.R7$(),t.Y8G("routerLink",t.eq3(18,Ni,e._id)),t.R7$(),t.Y8G("svgIcon","mat_solid:visibility"),t.R7$(),t.Y8G("matTooltip","Eliminar"),t.R7$(),t.Y8G("svgIcon","mat_solid:delete"),t.R7$(2),t.vxM(21,(null==o.selectedRequest?null:o.selectedRequest._id)===e._id?21:-1)}}function zi(n,a){1&n&&t.Z7z(0,Ui,22,20,null,null,t.BUC().trackByFn,!0),2&n&&t.Dyx(a)}function Qi(n,a){if(1&n&&(t.j41(0,"div",17),t.DNE(1,Vi,1,0,"ng-container",22),t.j41(2,"div",23)(3,"div",24)(4,"div",25)(5,"div",26),t.EFF(6," N\xfamero "),t.k0s(),t.j41(7,"div",26),t.EFF(8," Nombre "),t.k0s(),t.j41(9,"div",27),t.EFF(10," Importe "),t.k0s(),t.j41(11,"div",28),t.EFF(12," Cantidad "),t.k0s(),t.j41(13,"div",29),t.EFF(14," Estado "),t.k0s(),t.j41(15,"div",30),t.EFF(16," Acciones "),t.k0s()(),t.DNE(17,zi,2,0),t.nI1(18,"async"),t.nrm(19,"mat-paginator",31),t.k0s()()()),2&n){let e;t.XpG();const o=t.sdS(28),i=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",o),t.R7$(4),t.Y8G("mat-sort-header","no"),t.R7$(2),t.Y8G("mat-sort-header","name"),t.R7$(6),t.Y8G("mat-sort-header","status"),t.R7$(4),t.vxM(17,(e=t.bMT(18,11,i.requests$))?17:-1,e),t.R7$(2),t.Y8G("ngClass",t.eq3(13,Gi,i.isLoading))("length",i.pagination.length)("pageIndex",i.pagination.page)("pageSize",i.pagination.size)("pageSizeOptions",t.lJ4(15,Mi))("showFirstLastButtons",!0)}}function Hi(n,a){}function Ji(n,a){if(1&n&&t.DNE(0,Hi,0,0,"ng-template",45),2&n){t.XpG();const e=t.sdS(28),o=t.sdS(30),i=t.XpG();t.Y8G("ngTemplateOutlet",i.filterInputControl.value?e:o)}}function Wi(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",46)(1,"button",47),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Nueva"!==i.filterInputControl.value?"Nueva":""))}),t.j41(2,"span",48),t.EFF(3,"Nuevas"),t.k0s(),t.nrm(4,"div",49),t.k0s(),t.j41(5,"button",50),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Aceptada"!==i.filterInputControl.value?"Aceptada":""))}),t.j41(6,"span",48),t.EFF(7,"Aceptadas"),t.k0s(),t.nrm(8,"div",51),t.k0s(),t.j41(9,"button",52),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.filterInputControl.setValue("Rechazada"!==i.filterInputControl.value?"Rechazada":""))}),t.j41(10,"span",48),t.EFF(11,"Rechazadas"),t.k0s(),t.nrm(12,"div",53),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.eq3(3,Bi,"Nueva"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(5,Pi,"Aceptada"===e.filterInputControl.value)),t.R7$(4),t.Y8G("ngClass",t.eq3(7,Xi,"Rechazada"===e.filterInputControl.value))}}function Ki(n,a){if(1&n&&(t.j41(0,"div",54),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.searchInputControl.value?"\xa1No se han encontrado solicitudes!":"\xa1No le han enviado ninguna solicitud a\xfan!")}}function Zi(n,a){1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"div",5)(5,"div",6)(6,"a",7),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",6),t.nrm(9,"mat-icon",8),t.j41(10,"a",9),t.EFF(11,"Gesti\xf3n Comercial"),t.k0s()(),t.j41(12,"div",6),t.nrm(13,"mat-icon",8),t.j41(14,"a",10),t.EFF(15,"Solicitudes"),t.k0s()()(),t.j41(16,"div",11)(17,"a",12),t.nrm(18,"mat-icon",8),t.j41(19,"span",13),t.EFF(20,"Regresar"),t.k0s()()()(),t.j41(21,"div",14)(22,"div",15),t.EFF(23," Solicitudes "),t.k0s()()(),t.DNE(24,qi,4,4,"div",16),t.k0s(),t.DNE(25,Qi,20,16,"div",17)(26,Ji,1,1)(27,Wi,13,9,"ng-template",null,0,t.C5r)(29,Ki,2,1,"ng-template",null,1,t.C5r),t.k0s()),2&n&&(t.R7$(9),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(6),t.Y8G("ngxPermissionsExcept",t.lJ4(6,$i)),t.R7$(),t.vxM(25,a.length>0?25:26))}let ts=(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._dialog=o,this._fuseConfirmationService=i,this._requestService=s,this._snackBar=r,this.store=m,this.isLoading=!1,this.searchInputControl=new l.MJ(null),this.filterInputControl=new l.MJ(""),this._unsubscribeAll=new M.B}ngOnInit(){this.requests$=this.store.select(Qo.lz),this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,et.Z)(null),(0,S.n)(e=>(null!==e&&(this.isLoading=!0,this._requestService.getRequests(0,20,"createdAt","desc",e,this.filterInputControl.value)),(0,E.of)())),(0,$.T)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(300),(0,S.n)(e=>this._requestService.getRequests(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,S.n)(()=>(this.isLoading=!0,this._requestService.getRequests(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,$.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteRequest(e){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar la solicitud # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._requestService.deleteRequest(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(s=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectRequest(e){this._dialog.open(nt.s,{data:{title:"Rechazar Solicitud",message:`\xbfEst\xe1 seguro desea Rechazar la solicitud # ${e.no}?`,rejectedReason:e.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,f.Q)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._requestService.rejectRequest(e._id,i.reason).subscribe(r=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this.closeDetails(),this._changeDetectorRef.markForCheck()})})}getRequestById(e){this._requestService.getRequestById(e._id).subscribe(o=>{this.store.dispatch((0,We.H5)({request:o.data})),this.store.dispatch((0,We.lt)()),this.closeDetails(),this._changeDetectorRef.markForCheck()})}getTotalAmount(e){return e.goodsData.reduce((o,{currency:i})=>{if(!o.some(s=>s.currency===i)){const s=e.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,m)=>r+m,0);o.push({currency:i,total:s})}return o},[])}toggleDetails(e){this.selectedRequest&&this.selectedRequest._id===e._id?this.closeDetails():this.selectedRequest=e}closeDetails(){this.selectedRequest=null}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(A.bZ),t.rXU(J.G),t.rXU(Ti.k),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["hrm-requests"]],viewQuery:function(o,i){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(i._paginator=s.first),t.mGM(s=t.lsd())&&(i._sort=s.first)}},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["filter",""],["noRequests",""],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-col","flex-auto"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","requests-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-8","mr-1","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","requests-table","md:px-8"],[1,"truncate","whitespace-nowrap"],[1,"flex","flex-col","items-end"],[1,"text-center","truncate"],[1,"flex","items-center","mr-4","text-center","truncate","delay-100","rounded-full","h-7","lock","dark:bg-white","dark:bg-opacity-5",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click","matTooltip"],[3,"selectedRequest"],[3,"reject","isQuotationCreated","selectedRequest"],[3,"ngTemplateOutlet"],[1,"flex","self-end","justify-around","w-7/12","h-10","pr-6","mb-3","mt-7","md:mt-10","md:mb-5","md:w-7/12","lg:w-6/12","xl:w-5/12"],[1,"flex","items-center","justify-center","h-full","mr-1","transition-all","ease-in-out","delay-100","border-0","rounded-full","text-amber-700","bg-amber-50","w-36","hover:bg-amber-500","hover:text-amber-50",3,"click","ngClass"],[1,"hidden","ml-2","mr-1","text-lg","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-blue-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-blue-50","w-36","hover:bg-blue-500","hover:text-blue-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","text-red-700","transition-all","ease-in-out","bg-red-100","border-0","rounded-full","delay-50","w-36","hover:bg-red-500","hover:text-red-50",3,"click","ngClass"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){if(1&o&&(t.DNE(0,Zi,31,7,"div",2),t.nI1(1,"async")),2&o){let s;t.vxM(0,(s=t.bMT(1,1,i.requests$))?0:-1,s)}},dependencies:[k.Jj,k.oe,y.Hl,y.$z,_.rl,C.m_,C.An,w.fS,w.fg,_.JW,j.Ou,j.iy,F.NQ,F.B4,F.aE,H.uc,H.oV,W.uv,k.YU,Si,l.X1,l.me,l.BC,l.l_,I.Wk],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})();var tn=d(48874);let es=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["selling-orders"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(o,i){1&o&&t.nrm(0,"router-outlet")},dependencies:[I.n3],encapsulation:2})}return n})();var at=d(73512);const ns=at.J1`
    query FindAllOrders($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllOrders(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }
            orders {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,os=at.J1`
    query FindOrdersByMerchant($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findOrdersByMerchant(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            orders {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,is=at.J1`
    query FindOrderById($findOrderByIdId: String!) {
        findOrderById(id: $findOrderByIdId) {
            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                    address
                    state
                    city
                    nit
                    website
                }

                clientId
                client {
                    fullname
                    idNumber
                    address
                    state
                    city
                    email
                    phone
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    description
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,ss=at.J1`
    mutation UpdateOrder($updateOrderInput: UpdateOrderInput!) {
        updateOrder(updateOrderInput: $updateOrderInput) {

            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight
            }
        }
    }
`,as=at.J1`
    mutation UpdateOrderStatus($updateOrderStatusInput: UpdateOrderStatusInput!) {
        updateOrderStatus(updateOrderStatusInput: $updateOrderStatusInput) {
            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight
            }
        }
    }
`;var dt=d(88141),en=d(67376),tt=d(31897),nn=d(98216);const we=n=>n.orders,rs=(0,T.Mz)(we,n=>n.order),De=(0,T.Mz)(we,n=>n.orders);(0,T.Mz)(we,n=>n.ordersByWeekdayStats);let Ie=(()=>{class n{constructor(e,o,i){this.apolloProvider=e,this._snackBar=o,this.store=i,this._apollo=this.apolloProvider.use("BALANC")}getOrders(e=1,o=10,i="name",s="asc",r=""){return this._apollo.query({query:ns,errorPolicy:"all",variables:{offset:o*(e-1),limit:o,sort:i,order:s,search:r}}).pipe((0,dt.M)(({errors:m,data:p})=>{if(m){let b="";m.forEach(x=>b+=`\n ${x.message}.`),this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:b,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,tt.cU)({orders:p.findAllOrders.orders})),this.store.dispatch((0,nn.Bp)({pagination:p.findAllOrders.pagination}))}))}getOrdersByMerchant(e=1,o=10,i="name",s="asc",r=""){return this._apollo.query({query:os,errorPolicy:"all",variables:{offset:o*(e-1),limit:o,sort:i,order:s,search:r}}).pipe((0,dt.M)(({errors:m,data:p})=>{if(m){let b="";m.forEach(x=>b+=`\n ${x.message}.`),this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:b,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,tt.cU)({orders:p.findOrdersByMerchant.orders})),this.store.dispatch((0,nn.Bp)({pagination:p.findOrdersByMerchant.pagination}))}))}getOrderById(e){return this._apollo.query({query:is,variables:{findOrderByIdId:e},errorPolicy:"all"}).pipe((0,dt.M)(({errors:o,data:i})=>{if(o){let s="";o.forEach(r=>s+=`\n ${r.message}.`),this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:s,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,tt.lw)({order:i.findOrderById.order}))}))}updateOrder(e){return this.store.select(De).pipe((0,bt.s)(1),(0,S.n)(o=>this._apollo.mutate({mutation:ss,variables:{updateOrderInput:e},errorPolicy:"all"}).pipe((0,dt.M)(({errors:i,data:s})=>{if(i){let p="";i.forEach(b=>p+=`\n ${b.message}.`),this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const r=(0,en.cloneDeep)(o);r[o.findIndex(p=>p.id==p.id)]=s.updateOrder.order,this.store.dispatch((0,tt.cU)({orders:r})),this.store.dispatch((0,tt.lw)({order:s.updateOrder.order}))}))))}updateOrderStatus(e){return this.store.select(De).pipe((0,bt.s)(1),(0,S.n)(o=>this._apollo.mutate({mutation:as,variables:{updateOrderStatusInput:e},errorPolicy:"all"}).pipe((0,dt.M)(({errors:i,data:s})=>{if(i){let p="";i.forEach(b=>p+=`\n ${b.message}.`),this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const r=(0,en.cloneDeep)(o);r[o.findIndex(p=>p.id==p.id)]=s.updateOrderStatus.order,this.store.dispatch((0,tt.cU)({orders:r})),this.store.dispatch((0,tt.lw)({order:s.updateOrderStatus.order}))}))))}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(at.Ic),t.KVO(P.UG),t.KVO(T.il))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ls=(()=>{class n{constructor(e){this._ordersService=e}resolve(e,o){const i=e.paramMap.get("orderId");if(null!==i)return this._ordersService.getOrderById(i)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(Ie))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cs=(()=>{class n{constructor(e){this._ordersService=e}resolve(e,o){return this._ordersService.getOrdersByMerchant()}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(Ie))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ds=d(9183),ms=d(68824);const us=["htmlOrderList"],ps=n=>({"pointer-events-none":n}),hs=()=>[5,10,25,100],fs=(n,a,e,o,i,s)=>({"bg-pink-200 text-pink-800 dark:bg-pink-600 dark:text-pink-50":n,"bg-teal-200 text-teal-800 dark:bg-teal-600 dark:text-teal-50":a,"bg-orange-200 text-orange-800 dark:bg-orange-600 dark:text-orange-50":e,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":o,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":i,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":s}),_s=n=>["/modules/commercial/orders/invoice/",n];function gs(n,a){if(1&n){const e=t.RV6();t.j41(0,"div",28)(1,"div",29),t.EFF(2),t.k0s(),t.j41(3,"div",30),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"div",31),t.EFF(7),t.k0s(),t.j41(8,"div",31),t.EFF(9),t.k0s(),t.j41(10,"div",25),t.EFF(11),t.nI1(12,"number"),t.k0s(),t.j41(13,"div",32)(14,"span",33)(15,"span",34),t.EFF(16),t.k0s()()(),t.j41(17,"div",35)(18,"button",36),t.nrm(19,"mat-icon",37),t.k0s(),t.j41(20,"button",38),t.nrm(21,"mat-icon",37),t.k0s(),t.j41(22,"mat-menu",39,0)(24,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"pagada"))}),t.j41(25,"span"),t.EFF(26,"Pagada"),t.k0s()(),t.j41(27,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"procesando"))}),t.j41(28,"span"),t.EFF(29,"Procesando"),t.k0s()(),t.j41(30,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"lista"))}),t.j41(31,"span"),t.EFF(32,"Lista"),t.k0s()(),t.j41(33,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"enviada"))}),t.j41(34,"span"),t.EFF(35,"Enviada"),t.k0s()(),t.j41(36,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"entregada"))}),t.j41(37,"span"),t.EFF(38,"Entregada"),t.k0s()(),t.j41(39,"button",40),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(4);return t.Njj(s.updatedOrderStatus(i.id,"cancelada"))}),t.j41(40,"span"),t.EFF(41,"Cancelada"),t.k0s()()()()()}if(2&n){const e=a.$implicit,o=t.sdS(23);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.SpI(" ",t.i5U(5,17,e.createdAt,"shortDate")," "),t.R7$(3),t.SpI(" ",e.client.fullname," "),t.R7$(2),t.SpI(" ",e.beneficiary.fullname," "),t.R7$(2),t.SpI(" $ ",t.i5U(12,20,e.total,"1.2-2")," "),t.R7$(3),t.Y8G("ngClass",t.l4e(23,fs,"nueva"===e.status,"procesando"===e.status,"lista"===e.status,"enviada"===e.status,"entregada"===e.status,"cancelada"===e.status)),t.R7$(2),t.JRh(e.status),t.R7$(2),t.Y8G("routerLink",t.eq3(30,_s,e.id)),t.R7$(),t.Y8G("svgIcon","mat_solid:description"),t.R7$(),t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("svgIcon","mat_solid:drag_indicator"),t.R7$(3),t.Y8G("disabled",e.payed||e.canceled),t.R7$(3),t.Y8G("disabled",e.ready||e.shipped||e.delivered||e.delivered||e.canceled),t.R7$(3),t.Y8G("disabled",e.shipped||e.delivered||e.canceled),t.R7$(3),t.Y8G("disabled",e.delivered||e.canceled),t.R7$(3),t.Y8G("disabled",e.canceled),t.R7$(3),t.Y8G("disabled",e.delivered||e.canceled)}}function Cs(n,a){1&n&&t.Z7z(0,gs,42,32,"div",28,t.BUC().trackByFn,!0),2&n&&t.Dyx(a)}function vs(n,a){if(1&n&&(t.j41(0,"div",20)(1,"div",21)(2,"div",22),t.EFF(3," N\xfamero "),t.k0s(),t.j41(4,"div",23),t.EFF(5," Fecha "),t.k0s(),t.j41(6,"div",24),t.EFF(7," Cliente "),t.k0s(),t.j41(8,"div",24),t.EFF(9," Beneficiario "),t.k0s(),t.j41(10,"div",25),t.EFF(11," Importe "),t.k0s(),t.j41(12,"div",23),t.EFF(13," Estado "),t.k0s(),t.j41(14,"div",26),t.EFF(15," Acciones "),t.k0s()(),t.DNE(16,Cs,2,0),t.nI1(17,"async"),t.k0s(),t.nrm(18,"mat-paginator",27)),2&n){let e;const o=t.XpG(2);t.R7$(2),t.Y8G("mat-sort-header","orderNo"),t.R7$(14),t.vxM(16,(e=t.bMT(17,8,o.orders$))?16:-1,e),t.R7$(2),t.Y8G("ngClass",t.eq3(10,ps,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",t.lJ4(12,hs))("showFirstLastButtons",!0)}}function bs(n,a){1&n&&(t.j41(0,"div",41),t.EFF(1,"\xa1No se ha generado ninguna orden!"),t.k0s())}function ys(n,a){1&n&&t.DNE(0,vs,19,13)(1,bs,2,0),2&n&&t.vxM(0,a.length>0?0:1)}function ks(n,a){if(1&n&&(t.j41(0,"div")(1,"div",8)(2,"div",9)(3,"a",10),t.EFF(4,"Inicio"),t.k0s()(),t.j41(5,"div",9),t.nrm(6,"mat-icon",11),t.j41(7,"a",10),t.EFF(8,"Ventas"),t.k0s()(),t.j41(9,"div",9),t.nrm(10,"mat-icon",11),t.j41(11,"a",10),t.EFF(12,"\xd3rdenes"),t.k0s()(),t.j41(13,"div",9),t.nrm(14,"mat-icon",11),t.j41(15,"a",12),t.EFF(16),t.k0s()(),t.j41(17,"div",13)(18,"a",14),t.nrm(19,"mat-icon",11),t.j41(20,"span",15),t.EFF(21,"Regresar"),t.k0s()()()()(),t.j41(22,"div",16)(23,"h2",17),t.EFF(24),t.k0s()()),2&n){const e=a;t.R7$(3),t.Y8G("routerLink","/home"),t.R7$(3),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(),t.Y8G("routerLink","/selling/panels"),t.R7$(3),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(),t.Y8G("routerLink","/selling/panels/orders"),t.R7$(3),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(2),t.JRh(e.no),t.R7$(2),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(5),t.SpI(" Orden ",e.no," ")}}function Fs(n,a){if(1&n&&(t.nrm(0,"div",51),t.j41(1,"div",52)(2,"div",53),t.EFF(3),t.k0s(),t.j41(4,"div",54),t.EFF(5),t.k0s()(),t.j41(6,"div",55),t.EFF(7),t.k0s(),t.j41(8,"div",56),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"div",57),t.EFF(12),t.nI1(13,"currency"),t.k0s()),2&n){const e=a.$implicit,o=t.XpG(2),i=t.XpG();t.R7$(3),t.JRh(e.name),t.R7$(2),t.SpI(" ",e.description," "),t.R7$(2),t.JRh(i.getProductQty(e.id,o.products)),t.R7$(2),t.SpI("",t.brH(10,5,e.price,o.currency.iso+" ","symbol")," "),t.R7$(3),t.JRh(t.brH(13,9,i.getProductQty(e.id,o.products)*e.price,o.currency.iso+" ","symbol"))}}function Rs(n,a){if(1&n&&(t.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22),t.nrm(5,"img",23),t.k0s(),t.j41(6,"div",24)(7,"div",25),t.EFF(8),t.k0s(),t.j41(9,"div"),t.EFF(10),t.k0s(),t.j41(11,"div"),t.EFF(12),t.k0s(),t.j41(13,"div"),t.EFF(14),t.k0s(),t.j41(15,"div"),t.EFF(16),t.k0s(),t.j41(17,"div"),t.EFF(18),t.k0s()()()(),t.j41(19,"div",26)(20,"div",27),t.EFF(21,"FACTURA "),t.k0s(),t.j41(22,"div",28),t.EFF(23),t.k0s(),t.j41(24,"div",29),t.EFF(25,"FECHA"),t.k0s(),t.j41(26,"div",25),t.EFF(27),t.nI1(28,"date"),t.k0s(),t.j41(29,"div",29),t.EFF(30,"VENCIMIENTO"),t.k0s(),t.j41(31,"div",25),t.EFF(32),t.nI1(33,"date"),t.k0s(),t.j41(34,"div",29),t.EFF(35,"TOTAL"),t.k0s(),t.j41(36,"div",25),t.EFF(37),t.nI1(38,"currency"),t.k0s(),t.j41(39,"div",29),t.EFF(40,"ESTADO"),t.k0s(),t.j41(41,"div",25),t.EFF(42),t.k0s()()(),t.j41(43,"table",30)(44,"thead")(45,"tr")(46,"th",31),t.EFF(47,"CLIENTE"),t.k0s(),t.j41(48,"th",32),t.EFF(49,"BENEFICIARIO"),t.k0s()()(),t.j41(50,"tbody")(51,"tr")(52,"td",33)(53,"div",34)(54,"div",25),t.EFF(55),t.k0s(),t.j41(56,"div"),t.EFF(57),t.k0s(),t.j41(58,"div"),t.EFF(59),t.k0s(),t.j41(60,"div"),t.EFF(61),t.k0s(),t.j41(62,"div"),t.EFF(63),t.k0s(),t.j41(64,"div"),t.EFF(65),t.k0s()()(),t.j41(66,"td")(67,"div",35)(68,"div",25),t.EFF(69),t.k0s(),t.j41(70,"div"),t.EFF(71),t.k0s(),t.j41(72,"div"),t.EFF(73),t.k0s(),t.j41(74,"div"),t.EFF(75),t.k0s(),t.j41(76,"div"),t.EFF(77),t.k0s(),t.j41(78,"div"),t.EFF(79),t.k0s()()()()()(),t.j41(80,"div",36)(81,"div",37),t.EFF(82,"PRODUCTO"),t.k0s(),t.j41(83,"div",38),t.EFF(84,"CANTIDAD"),t.k0s(),t.j41(85,"div",39),t.EFF(86,"PRECIO"),t.k0s(),t.j41(87,"div",40),t.EFF(88,"TOTAL"),t.k0s(),t.Z7z(89,Fs,14,13,null,null,t.fX1),t.nrm(91,"div",41),t.j41(92,"div",42),t.EFF(93,"SUBTOTAL"),t.k0s(),t.j41(94,"div",43),t.EFF(95),t.nI1(96,"currency"),t.k0s(),t.nrm(97,"div",44),t.j41(98,"div",42),t.EFF(99,"DESCUENTO"),t.k0s(),t.j41(100,"div",43),t.EFF(101),t.nI1(102,"currency"),t.k0s(),t.nrm(103,"div",44),t.j41(104,"div",42),t.EFF(105,"Recargo"),t.k0s(),t.j41(106,"div",43),t.EFF(107),t.nI1(108,"currency"),t.k0s(),t.nrm(109,"div",44),t.j41(110,"div",42),t.EFF(111,"ENV\xcdO"),t.k0s(),t.j41(112,"div",43),t.EFF(113),t.nI1(114,"currency"),t.k0s(),t.nrm(115,"div",44),t.j41(116,"div",45),t.EFF(117,"TOTAL "),t.k0s(),t.j41(118,"div",46),t.EFF(119),t.nI1(120,"currency"),t.k0s()(),t.j41(121,"div",47)(122,"div",25),t.EFF(123,"\xa1Muchas gracias por su compra!"),t.k0s(),t.j41(124,"div",48),t.nrm(125,"img",49),t.j41(126,"div",50),t.EFF(127,' "La devoluci\xf3n de los fondos depende de la pol\xedtica de devoluciones del vendedor y no es responsabilidad de la empresa que facilita la plataforma de comercio electr\xf3nico." '),t.k0s()()()()),2&n){const e=t.XpG();t.R7$(8),t.JRh(e.merchant.name),t.R7$(2),t.JRh(e.merchant.address),t.R7$(2),t.Lme("provincia ",e.merchant.state,", municipio ",e.merchant.city,""),t.R7$(2),t.JRh(e.merchant.phone),t.R7$(2),t.JRh(e.merchant.email),t.R7$(2),t.JRh(e.merchant.website),t.R7$(5),t.JRh(e.no),t.R7$(4),t.JRh(t.i5U(28,31,e.createdAt,"dd/MM/yyyy")),t.R7$(5),t.JRh(t.i5U(33,34,e.createdAt,"dd/MM/yyyy")),t.R7$(5),t.JRh(t.brH(38,37,e.total,e.currency.iso+" ","symbol")),t.R7$(5),t.JRh(e.status),t.R7$(13),t.SpI("",e.client.fullname," "),t.R7$(2),t.SpI("ID: ",e.client.idNumber,""),t.R7$(2),t.SpI("Direcci\xf3n: ",e.client.address,""),t.R7$(2),t.Lme("Estado: ",e.client.state,", Ciudad: ",e.client.city,""),t.R7$(2),t.SpI("Tel.: ",e.client.cell,""),t.R7$(2),t.SpI("Correo electr\xf3nico: ",e.client.email,""),t.R7$(4),t.JRh(e.beneficiary.fullname),t.R7$(2),t.SpI("ID: ",e.beneficiary.idNumber,""),t.R7$(2),t.SpI("Direcci\xf3n: ",e.beneficiary.address,""),t.R7$(2),t.Lme("Provincia: ",e.beneficiary.state,", Municipio: ",e.beneficiary.city," "),t.R7$(2),t.SpI("Tel.: ",e.beneficiary.phone,""),t.R7$(2),t.SpI("Correo electr\xf3nico: ",e.beneficiary.email,""),t.R7$(10),t.Dyx(e.productsInOrder),t.R7$(6),t.SpI("",t.brH(96,41,e.subtotal,e.currency.iso+" ","symbol")," "),t.R7$(6),t.SpI("",t.brH(102,45,e.discount,e.currency.iso+" ","symbol")," "),t.R7$(6),t.JRh(t.brH(108,49,e.tax,e.currency.iso+" ","symbol")),t.R7$(6),t.SpI("",t.brH(114,53,e.shippingCost,e.currency.iso+" ","symbol")," "),t.R7$(6),t.SpI("",t.brH(120,57,e.total,e.currency.iso+" ","symbol")," ")}}function ws(n,a){1&n&&t.DNE(0,Rs,128,61,"div",18),2&n&&t.vxM(0,null!==a?0:-1)}const Is=[{path:"",component:Dt},{path:"request",component:ts,resolve:{requests:tn.R}},{path:"request/:requestId",component:zo,resolve:{request:tn.K}},{path:"payment-conditions",component:Bn,resolve:{paymentMethod:Pn}},{path:"quotations",component:Lo,resolve:{quotations:Je.G}},{path:"quotations/:quotationId",component:Ln,resolve:{quotation:Je.z}},{path:"invoices",component:oe,resolve:{quotations:_t.R}},{path:"invoices/:invoiceId",component:St,resolve:{quotation:_t.M}},{path:"orders",component:es,resolve:{orders:cs},children:[{path:"",component:(()=>{class n{constructor(e,o,i,s,r,m){this._changeDetectorRef=e,this._fileSaverService=o,this._ordersService=i,this._router=s,this._snackBar=r,this.store=m,this.alertTitle=null,this.canceled=!1,this.delivered=!1,this.isLoading=!1,this.order=null,this.orders=[],this.orders$=(0,E.of)([]),this.payed=!1,this.ready=!1,this.roles=[],this.searchInputControl=new l.MJ,this.selectedOrder=null,this.shipped=!1,this._unsubscribeAll=new M.B}ngOnInit(){this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.orders$=this.store.select(De),this.orders$.subscribe(e=>this.orders=e),this.store.select(Y.D).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,f.Q)(this._unsubscribeAll),(0,q.B)(900),(0,S.n)(e=>this._ordersService.getOrders(0,10,"orderNo","asc",e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,f.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,S.n)(()=>(this.closeDetails(),this._ordersService.getOrders(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction)))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedOrder=null}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.orders,"orders")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.orders,"orders")}updatedOrderStatus(e,o){this._ordersService.updateOrderStatus({id:e,status:o}).pipe((0,f.Q)(this._unsubscribeAll)).subscribe(({data:i})=>{this._snackBar.openFromComponent(D.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:i.updateOrderStatus.message,type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}viewPurchaseOrder(e){this._router.navigateByUrl(`/modules/commercial/orders/invoice/${e}`)}trackByFn(e,o){return o.id||e}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(ms.f),t.rXU(Ie),t.rXU(I.Ix),t.rXU(P.UG),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["selling-orders-list"]],viewQuery:function(o,i){if(1&o&&(t.GBs(us,5),t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let s;t.mGM(s=t.lsd())&&(i.htmlOrderList=s.first),t.mGM(s=t.lsd())&&(i._paginator=s.first),t.mGM(s=t.lsd())&&(i._sort=s.first)}},standalone:!0,features:[t.aNF],decls:32,vars:13,consts:[["orderMenu","matMenu"],[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-wrap","p-6","py-8","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-2xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:overflow-y-auto","sm:mb-18"],[1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","orders-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"text-center","md:block"],[1,"xl:block"],[1,"text-right","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","orders-grid","md:px-8"],[1,""],[1,"text-center","truncate","md:block"],[1,"truncate","xl:block"],[1,"flex","items-center","justify-center"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],[1,"flex","flex-row","items-center","justify-center","gap-1"],["mat-stroked-button","","matTooltip","Ver orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","aria-label","Estados de la orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"click","disabled"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,i){if(1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t.EFF(7,"Inicio"),t.k0s()(),t.j41(8,"div",5),t.nrm(9,"mat-icon",7),t.j41(10,"a",6),t.EFF(11,"Ventas"),t.k0s()(),t.j41(12,"div",5),t.nrm(13,"mat-icon",7),t.j41(14,"a",8),t.EFF(15,"\xd3rdenes"),t.k0s()(),t.j41(16,"div",9)(17,"a",10),t.nrm(18,"mat-icon",7),t.j41(19,"span",11),t.EFF(20,"Regresar"),t.k0s()()()()(),t.j41(21,"div",12)(22,"h2",13),t.EFF(23," Listado de \xf3rdenes "),t.k0s()()(),t.j41(24,"div",14)(25,"mat-form-field",15),t.nrm(26,"mat-icon",16)(27,"input",17),t.k0s()()(),t.j41(28,"div",18)(29,"div",19),t.DNE(30,ys,2,1),t.nI1(31,"async"),t.k0s()()()),2&o){let s;t.R7$(6),t.Y8G("routerLink","/home"),t.R7$(3),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(),t.Y8G("routerLink","/selling/panels"),t.R7$(3),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("routerLink","./.."),t.R7$(),t.Y8G("svgIcon","mat_solid:chevron_left"),t.R7$(8),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar \xf3rdenes"),t.R7$(3),t.vxM(30,(s=t.bMT(31,11,i.orders$))?30:-1,s)}},dependencies:[k.Jj,k.vh,k.QX,y.Hl,y.$z,_.RG,_.rl,_.JW,C.m_,C.An,w.fS,w.fg,X.Cn,X.kk,X.fb,X.Cp,j.Ou,j.iy,ds.D6,v.mV,F.NQ,F.B4,F.aE,k.YU,l.X1,l.me,l.BC,l.l_,I.Wk],styles:[".orders-grid{grid-template-columns:75px 75px 180px 180px 150px 150px auto}\n"],encapsulation:2,data:{animation:U.X},changeDetection:0})}return n})()},{path:"invoice/:orderId",component:(()=>{class n{constructor(e,o,i,s){this._activatedRoute=e,this._changeDetectorRef=o,this._router=i,this.store=s,this.order$=(0,E.of)(null),this._unsubscribeAll=new M.B}ngOnInit(){this.order$=this.store.select(rs)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}printDocument(){window.print()}getProductQty(e,o){return o.find(i=>i.productId===e).quantity}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(I.nX),t.rXU(t.gRc),t.rXU(I.Ix),t.rXU(T.il))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["selling-invoice"]],standalone:!0,features:[t.aNF],decls:13,vars:7,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","text-center","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","py-8","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-mine-50","dark:bg-transparent","print:hidden"],[1,"flex-1","min-w-0"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"inline-block","p-6","text-left","sm:p-10","print:p-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","text-left","truncate","md:text-4xl","sm:leading-10"],[1,"p-16","shadow","w-240","min-w-240","rounded-2xl","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start"],[1,"grid","place-items-start"],[1,"grid","grid-flow-col","auto-cols-max","gap-x-8"],[1,"w-24","place-self-center"],["src","assets/images/logo/logo.svg",1,"w-24"],[1,"pl-10","border-l","text-md"],[1,"font-medium"],[1,"grid","grid-cols-2","ml-auto","gap-x-4","gap-y-1"],[1,"text-2xl","font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"text-2xl","font-medium"],[1,"font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"w-full","mt-10"],[1,"px-10"],[1,"pl-10"],[1,"border-r"],[1,"flex","flex-col","px-10","text-md"],[1,"flex","flex-col","pl-10","text-md"],[1,"grid","grid-cols-12","mt-16","gap-x-1"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"font-medium","text-right","text-md","text-secondary"],[1,"col-span-2","font-medium","text-right","text-md","text-secondary"],[1,"col-span-3","font-medium","text-right","text-md","text-secondary"],[1,"col-span-12","mt-16"],[1,"self-center","col-span-10","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-lg","text-right"],[1,"col-span-12","my-3","border-b"],[1,"self-center","col-span-10","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-2xl","font-medium","text-right"],[1,"mt-16"],[1,"flex","items-start","mt-4"],["src","assets/images/logo/logo.svg",1,"w-10","mt-2","flex-0"],[1,"ml-6","text-sm","text-secondary"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6"],[1,"text-lg","font-medium"],[1,"mt-2","text-md","text-secondary"],[1,"self-center","text-right"],[1,"self-center","col-span-2","text-right"],[1,"self-center","col-span-3","text-right"]],template:function(o,i){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.DNE(3,ks,25,10),t.nI1(4,"async"),t.k0s(),t.j41(5,"div",3)(6,"button",4),t.bIt("click",function(){return i.printDocument()}),t.nrm(7,"mat-icon",5),t.j41(8,"span",6),t.EFF(9,"Imprimir"),t.k0s()()()(),t.j41(10,"div",7),t.DNE(11,ws,1,1),t.nI1(12,"async"),t.k0s()()),2&o){let s,r;t.R7$(3),t.vxM(3,(s=t.bMT(4,3,i.order$))?3:-1,s),t.R7$(4),t.Y8G("svgIcon","mat_solid:print"),t.R7$(4),t.vxM(11,(r=t.bMT(12,5,i.order$))?11:-1,r)}},dependencies:[k.Jj,k.vh,k.oe,I.Wk,C.m_,C.An,y.Hl,y.$z],encapsulation:2,changeDetection:0})}return n})(),resolve:{order:ls}}]}]},67398:(sn,ut,d)=>{d.d(ut,{A:()=>Ct});const f=function M(c,u){for(var h=-1,v=null==c?0:c.length,g=Array(v);++h<v;)g[h]=u(c[h],h,c);return g};var wt=d(99531),t=d(43744),I=d(45281),Dt=d(42661);const C=function y(c){return"symbol"==typeof c||(0,Dt.A)(c)&&"[object Symbol]"==(0,I.A)(c)};var jt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/;var l=d(72291);function w(c,u){if("function"!=typeof c||null!=u&&"function"!=typeof u)throw new TypeError("Expected a function");var h=function(){var v=arguments,g=u?u.apply(this,v):v[0],R=h.cache;if(R.has(g))return R.get(g);var ot=c.apply(this,v);return h.cache=R.set(g,ot)||R,ot};return h.cache=new(w.Cache||l.A),h}w.Cache=l.A;const X=w;var L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/\\(\\)?/g;const S=function F(c){var u=X(c,function(v){return 500===h.size&&h.clear(),v}),h=u.cache;return u}(function(c){var u=[];return 46===c.charCodeAt(0)&&u.push(""),c.replace(L,function(h,v,g,R){u.push(g?R.replace(q,"$1"):v||h)}),u});var $=d(6944),Y=$.A?$.A.prototype:void 0,U=Y?Y.toString:void 0;const D=function nt(c){if("string"==typeof c)return c;if((0,t.A)(c))return f(c,nt)+"";if(C(c))return U?U.call(c):"";var u=c+"";return"0"==u&&1/c==-1/0?"-0":u},rt=function je(c){return null==c?"":D(c)},A=function H(c,u){return(0,t.A)(c)?c:function St(c,u){if((0,t.A)(c))return!1;var h=typeof c;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=c&&!C(c))||Et.test(c)||!jt.test(c)||null!=u&&c in Object(u)}(c,u)?[c]:S(rt(c))},W=function T(c){if("string"==typeof c||C(c))return c;var u=c+"";return"0"==u&&1/c==-1/0?"-0":u},Ot=function Nt(c,u){return u.length<2?c:function $t(c,u){for(var h=0,v=(u=A(u,c)).length;null!=c&&h<v;)c=c[W(u[h++])];return h&&h==v?c:void 0}(c,function Mt(c,u,h){var v=-1,g=c.length;u<0&&(u=-u>g?0:g+u),(h=h>g?g:h)<0&&(h+=g),g=u>h?0:h-u>>>0,u>>>=0;for(var R=Array(g);++v<g;)R[v]=c[v+u];return R}(u,0,-1))},Pt=function Bt(c,u){return u=A(u,c),null==(c=Ot(c,u))||delete c[W(function J(c){var u=null==c?0:c.length;return u?c[u-1]:void 0}(u))]};var Xt=d(77517),qt=d(74294);const Lt=function Vt(c){return(0,qt.A)(c)?void 0:c};var Yt=d(70563),Ut=d(66513),ht=$.A?$.A.isConcatSpreadable:void 0;const Qt=function zt(c){return(0,t.A)(c)||(0,Ut.A)(c)||!!(ht&&c&&c[ht])},Ht=function ft(c,u,h,v,g){var R=-1,ot=c.length;for(h||(h=Qt),g||(g=[]);++R<ot;){var Z=c[R];u>0&&h(Z)?u>1?ft(Z,u-1,h,v,g):(0,Yt.A)(g,Z):v||(g[g.length]=Z)}return g},Wt=function Jt(c){return null!=c&&c.length?Ht(c,1):[]};var Kt=d(90178),Zt=d(45974);var ne=d(57372);const Ct=function te(c){return(0,Zt.A)((0,Kt.A)(c,void 0,Wt),c+"")}(function(c,u){var h={};if(null==c)return h;var v=!1;u=f(u,function(R){return R=A(R,c),v||(v=R.length>1),R}),(0,Xt.A)(c,(0,ne.A)(c),h),v&&(h=(0,wt.A)(h,7,Lt));for(var g=u.length;g--;)Pt(h,u[g]);return h})}}]);