"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[385],{41784:(k,x,s)=>{s.d(x,{y:()=>d});var t=s(42495),h=s(94748),i=s(19212);function r(c,v){1&c&&(i.TgZ(0,"div",0),i.Hsn(1),i.qZA(),i.TgZ(2,"div",1),i.Hsn(3,1),i.qZA())}function l(c,v){1&c&&(i.TgZ(0,"div",3),i.Hsn(1,3),i.qZA()),2&c&&i.Q6J("@expandCollapse",void 0)}function o(c,v){if(1&c&&(i.Hsn(0,2),i.YNc(1,l,2,1,"div",2)),2&c){const f=i.oxw();i.xp6(),i.um2(1,f.expanded?1:-1)}}const u=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],n=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let d=(()=>{class c{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(f){"expanded"in f&&(this.expanded=(0,t.Ig)(f.expanded.currentValue)),"flippable"in f&&(this.flippable=(0,t.Ig)(f.flippable.currentValue))}static#t=this.\u0275fac=function(g){return new(g||c)};static#e=this.\u0275cmp=i.Xpm({type:c,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(g,A){2&g&&i.Tol(A.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[i.TTD,i.jDz],ngContentSelectors:n,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(g,A){1&g&&(i.F$t(u),i.YNc(0,r,4,0)(1,o,2,1)),2&g&&(i.um2(0,A.flippable?0:-1),i.xp6(),i.um2(1,A.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:h.L}})}return c})()},88458:(k,x,s)=>{s.d(x,{L:()=>h});var t=s(56223);class h{static isEmptyInputValue(r){return null==r||0===r.length}static mustMatch(r,l){return o=>{const u=o.get(r),n=o.get(l);if(!u||!n||(n.hasError("mustMatch")&&(delete n.errors.mustMatch,n.updateValueAndValidity()),this.isEmptyInputValue(n.value)||u.value===n.value))return null;const d={mustMatch:"Las contrase\xf1a no coinciden."};return n.setErrors(d),d}}static notMustMatch(r,l){return o=>{const u=o.get(r),n=o.get(l);if(!u||!n||(n.hasError("notMustMatch")&&(delete n.errors.notMustMatch,n.updateValueAndValidity()),this.isEmptyInputValue(n.value)))return null;if(u.value===n.value){const d={notMustMatch:"no pueden coincidir."};return n.setErrors(d),d}return null}}static strongPassWord(r,l,o,u,n){return d=>{const c=d.value;if(!c)return null;const v=!r||/[A-Z]+/.test(c),f=!l||/[a-z]+/.test(c),g=!o||/[0-9]+/.test(c),A=!u||!/^[a-zA-Z0-9]+$/.test(c);return v&&f&&g&&A&&c.length>=n?null:{password:"La contrase\xf1a no cumple con los est\xe1ndares de seguridad requeridos"}}}static onlyNumber(r){return l=>{const o=l.get(r);if(!o||(o.hasError("onlyNumber")&&(delete o.errors.mustMatch,o.updateValueAndValidity()),/^[a-zA-Z0-9]+$/.test(o.value.toString())))return null;const n={onlyNumber:"Solo se admiten n\xfameros."};return o.setErrors(n),n}}static strongPasWordPattern(){return t.kI.pattern(/((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/)}static emailPattern(){return t.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")}static onlyIntegerPattern(){return t.kI.pattern("^[0-9]*$")}static onlyNumbersPattern(){return t.kI.pattern(/^[+-]?\d+(\.\d+)?$/)}static onlyAlphabetsWithAccentPattern(){return t.kI.pattern("^[a-zA-Z \xe1\xe9\xed\xf3\xfa\xf1\xfc]*$")}static onlyAlphabetsPattern(){return t.kI.pattern("^[a-zA-Z ]*$")}static futureDateValidator(){return r=>new Date(r.value)<=new Date?null:{futureDate:!0}}static validateIdNumber(){return r=>{if(!r)return null;let l=r.value;if(!l)return null;void 0!==r.value.idNumber&&(l=r.value.idNumber);const o=parseInt(l.substring(0,2),10),u=parseInt(l.substring(2,4),10)-1,n=parseInt(l.substring(4,6),10),d=new Date(o,u,n);if(d.getFullYear().toString().substring(2,4)===o.toString()&&d.getMonth()===u&&d.getDate()===n)return null;const v={validateIdNumber:"El n\xfamero de identidad introducido es incorrecto"};return r.setErrors(v),v}}static validFullName(r){return l=>{const o=l.get(r);if(!o||!r||(o.hasError("validFullName")&&(delete o.errors.validFullName,o.updateValueAndValidity()),this._isEmptyInputValue(o.value))||o.value.trim().split(" ").length>1)return null;const u={validFullName:"El nombre completo deber\xe1 tener al menos un nombre y un apellido"};return o.setErrors(u),u}}static _isEmptyInputValue(r){return null==r||0===r.length}}},83788:(k,x,s)=>{s.d(x,{w:()=>L});var t=s(19212),h=s(56223),i=s(78645),r=s(59773),l=s(27921),o=s(37398),u=s(83620),n=s(64170),d=s(24516),c=s(32296),v=s(30617),f=s(24630),g=s(98525),A=s(92596),y=s(96814),F=s(39821),w=s(50967);let Z=(()=>{class a{constructor(e){this.apolloProvider=e,this._apollo=this.apolloProvider.use("BALANC")}getCardType(e){return this._apollo.query({query:F.NQ,variables:{cardNumber:e},errorPolicy:"all"})}static#t=this.\u0275fac=function(p){return new(p||a)(t.LFG(w._M))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var N=s(23680);const I=["bankAccountNgForm"];function B(a,b){1&a&&(t.TgZ(0,"mat-label"),t._uU(1,"N\xfamero de Cuenta"),t.qZA())}function T(a,b){if(1&a&&t._UZ(0,"img",10),2&a){const e=t.oxw();t.Q6J("src",e.cardImage,t.LSH)}}function E(a,b){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," El n\xfamero de cuenta es obligatorio "),t.qZA())}function D(a,b){1&a&&(t.TgZ(0,"mat-label"),t._uU(1,"Banco"),t.qZA())}function U(a,b){if(1&a&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&a){const e=b.$implicit;t.Q6J("value",e),t.xp6(),t.Oqu(e)}}function V(a,b){1&a&&(t.TgZ(0,"mat-label"),t._uU(1,"Moneda"),t.qZA())}function M(a,b){if(1&a&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&a){const e=b.$implicit;t.Q6J("value",e.iso),t.xp6(),t.hij(" ",e.iso," ")}}function _(a,b){1&a&&(t.TgZ(0,"mat-label"),t._uU(1,"Beneficiario"),t.qZA())}function P(a,b){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," El beneficiario no presenta un formato v\xe1lido "),t.qZA())}function J(a,b){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," El beneficiario es obligatorio "),t.qZA())}function Y(a,b){if(1&a){const e=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const m=t.oxw();return t.KtG(m.removeBankAccount(m.index))}),t._UZ(2,"mat-icon",14),t.qZA()()}2&a&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:delete"))}let L=(()=>{class a{constructor(e,p){this._changeDetectorRef=e,this._cardTypesService=p,this.currencies=[],this.remove=new t.vpe,this.cardImage=null,this.cubanBanks=["Metropolitano (BMP)","Popular de Ahorro (BPA)","Cr\xe9dito y Comercio (BANDEC)"],this._unsubscribeAll=new i.x}ngOnInit(){this.bankAccountForm.get("cardType").value&&this.fillFormData(this.bankAccountForm.get("cardType").value),this.filteredBanks=this.bankAccountForm.get("bank").valueChanges.pipe((0,r.R)(this._unsubscribeAll),(0,l.O)(""),(0,o.U)(e=>e?this.cubanBanks.filter(p=>p.toLowerCase().includes(e.toLowerCase())):[])),this.bankAccountForm.get("no").valueChanges.pipe((0,u.b)(600),(0,r.R)(this._unsubscribeAll)).subscribe(e=>{e.length>5&&e.length<11&&this._cardTypesService.getCardType(e).subscribe(({})=>{}),e||(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeBankAccount(e){this.remove.next(e)}clearForm(){this.bankAccountNgForm.resetForm()}fillFormData(e){e?(this.bankAccountForm.get("bank").setValue(e.name),this.bankAccountForm.get("currency").setValue(e.currency),this.bankAccountForm.get("bank").disable(),this.bankAccountForm.get("currency").disable(),("BMPU"===e.bank||"BMPUW"===e.bank)&&(this.cardImage="assets/images/cards/banmet.webp"),("BPAU"===e.bank||"BPAUW"===e.bank)&&(this.cardImage="assets/images/cards/bpa.webp"),("BANU"===e.bank||"BANW"===e.bank)&&(this.cardImage="assets/images/cards/bandec.webp"),"AIS"===e.name&&(this.cardImage="assets/images/cards/ais.webp"),"MN"===e.currency&&this.bankAccountForm.get("currency").setValue("CUP"),"USD"===e.currency&&this.bankAccountForm.get("currency").setValue("USD"),this.bankAccountForm.get("cardType").setValue(e._id)):(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null)}static#t=this.\u0275fac=function(p){return new(p||a)(t.Y36(t.sBO),t.Y36(Z))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["bank-account"]],viewQuery:function(p,m){if(1&p&&t.Gf(I,5),2&p){let C;t.iGM(C=t.CRH())&&(m.bankAccountNgForm=C.first)}},inputs:{currencies:"currencies",bankAccountForm:"bankAccountForm",first:"first",last:"last",index:"index"},outputs:{remove:"remove"},standalone:!0,features:[t.jDz],decls:29,vars:33,consts:[[1,"grid","grid-cols-1","gap-3","md:grid-cols-2",3,"formGroup"],[1,"flex-auto","mat-fuse-dense"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","minlength","maxlength","formControlName","placeholder","spellcheck"],["class","w-12 h-8","matSuffix","",3,"src"],["maxlength","255","matInput","",3,"type","formControlName","matAutocomplete","placeholder","spellcheck"],["auto","matAutocomplete"],["required","",3,"formControlName","placeholder"],["maxlength","255","matInput","",3,"type","formControlName","placeholder","spellcheck"],["class","flex items-center w-10 pl-2"],["matSuffix","",1,"w-12","h-8",3,"src"],[3,"value"],[1,"flex","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Eliminar cuenta",1,"w-8","h-8","min-h-8",3,"click"],[1,"icon-size-5",3,"svgIcon"]],template:function(p,m){if(1&p&&(t.TgZ(0,"form",0)(1,"mat-form-field",1),t.YNc(2,B,2,0,"mat-label"),t._UZ(3,"mat-icon",2)(4,"input",3),t.YNc(5,T,1,1,"img",4)(6,E,2,0,"mat-error"),t.qZA(),t.TgZ(7,"mat-form-field",1),t.YNc(8,D,2,0,"mat-label"),t._UZ(9,"mat-icon",2)(10,"input",5),t.TgZ(11,"mat-autocomplete",null,6),t.SjG(13,U,2,2,"mat-option",11,t.x6l),t.ALo(15,"async"),t.qZA()(),t.TgZ(16,"mat-form-field",1),t.YNc(17,V,2,0,"mat-label"),t._UZ(18,"mat-icon",2),t.TgZ(19,"mat-select",7),t.SjG(20,M,2,2,"mat-option",11,t.x6l),t.qZA()(),t.TgZ(22,"mat-form-field",1),t.YNc(23,_,2,0,"mat-label"),t._UZ(24,"mat-icon",2)(25,"input",8),t.YNc(26,P,2,0,"mat-error")(27,J,2,0,"mat-error"),t.qZA(),t.YNc(28,Y,3,1,"div",9),t.qZA()),2&p){const C=t.MAs(12);t.Q6J("formGroup",m.bankAccountForm),t.xp6(2),t.um2(2,m.first?2:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:credit_card"),t.xp6(),t.Q6J("type","text")("minlength",16)("maxlength",24)("formControlName","no")("placeholder","Ejemplo: 1234567890123456")("spellcheck",!1),t.xp6(),t.um2(5,m.cardImage?5:-1),t.xp6(),t.um2(6,m.bankAccountForm.get("no").hasError("required")?6:-1),t.xp6(2),t.um2(8,m.first?8:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:account_balance"),t.xp6(),t.Q6J("type","text")("formControlName","bank")("matAutocomplete",C)("placeholder","Ejemplo: Banco Financiero")("spellcheck",!1),t.xp6(3),t.wJu(t.lcZ(15,31,m.filteredBanks)),t.xp6(4),t.um2(17,m.first?17:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:monetization_on"),t.xp6(),t.Q6J("formControlName","currency")("placeholder","Ejemplo: USD"),t.xp6(),t.wJu(m.currencies),t.xp6(3),t.um2(23,m.first?23:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:business"),t.xp6(),t.Q6J("type","text")("formControlName","beneficiary")("placeholder","Ejemplo: Empresa SRL")("spellcheck",!1),t.xp6(),t.um2(26,m.bankAccountForm.get("beneficiary").hasError("pattern")?26:-1),t.xp6(),t.um2(27,m.bankAccountForm.get("beneficiary").hasError("required")?27:-1),t.xp6(),t.um2(28,m.first&&m.last?-1:28)}},dependencies:[y.Ov,f.Bb,f.XC,N.ey,f.ZL,c.ot,c.RK,n.lN,n.KE,n.hX,n.TO,n.qo,n.R9,v.Ps,v.Hw,d.c,d.Nt,g.LD,g.gD,A.AV,A.gM,h.UX,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.sg,h.u],encapsulation:2,changeDetection:0})}return a})()}}]);