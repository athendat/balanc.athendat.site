"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4108],{31849:(K,S,l)=>{l.d(S,{$:()=>D});var _=l(14085),e=l(87122),c=l(54438);function R(b,A){1&b&&(c.j41(0,"div",0),c.SdG(1),c.k0s(),c.j41(2,"div",1),c.SdG(3,1),c.k0s())}function w(b,A){1&b&&(c.j41(0,"div",3),c.SdG(1,3),c.k0s()),2&b&&c.Y8G("@expandCollapse",void 0)}function G(b,A){if(1&b&&(c.SdG(0,2),c.DNE(1,w,2,1,"div",2)),2&b){const f=c.XpG();c.R7$(),c.vxM(1,f.expanded?1:-1)}}const $=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],m=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let D=(()=>{class b{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(f){"expanded"in f&&(this.expanded=(0,_.he)(f.expanded.currentValue)),"flippable"in f&&(this.flippable=(0,_.he)(f.flippable.currentValue))}static#e=this.\u0275fac=function(s){return new(s||b)};static#t=this.\u0275cmp=c.VBU({type:b,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(s,B){2&s&&c.HbH(B.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[c.OA$,c.aNF],ngContentSelectors:m,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(s,B){1&s&&(c.NAR($),c.DNE(0,R,4,0)(1,G,2,1)),2&s&&(c.vxM(0,B.flippable?0:-1),c.R7$(),c.vxM(1,B.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:e.X}})}return b})()},44108:(K,S,l)=>{l.r(S),l.d(S,{default:()=>$t});var _=l(51188),e=l(54438);let c=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["box"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(i,n){1&i&&e.nrm(0,"router-outlet")},dependencies:[_.n3],encapsulation:2})}return o})();var R=l(95416),w=l(75351),G=l(14160),$=l(21413),m=l(56977),D=l(59640),b=l(50891),A=l(86800),f=l(46601),s=l(89417),B=l(67376),X=l(94794),x=l(32102),C=l(59042),F=l(88834),I=l(71365),ee=l(37403);function te(o,a){1&o&&(e.j41(0,"h2",12),e.EFF(1," Editar monto inicial de caja "),e.k0s())}function oe(o,a){1&o&&(e.j41(0,"h2",12),e.EFF(1," Devoluci\xf3n de efectivo de caja "),e.k0s())}function ie(o,a){1&o&&(e.j41(0,"h2",12),e.EFF(1," Pr\xe9stamo de efectivo de caja "),e.k0s())}function ne(o,a){1&o&&(e.j41(0,"h2",12),e.EFF(1," Gasto de efectivo de caja "),e.k0s())}function se(o,a){1&o&&(e.j41(0,"mat-form-field",6)(1,"mat-label"),e.EFF(2,"Motivo"),e.k0s(),e.nrm(3,"textarea",13),e.k0s()),2&o&&(e.R7$(3),e.Y8G("formControlName","reason"))}let ae=(()=>{class o{constructor(t,i,n,r,d,g){this.data=t,this._boxService=i,this._changeDetectorRef=n,this._dialogRef=r,this._formBuilder=d,this._fuseConfirmationService=g,this._unsubscribeAll=new $.B,this._snackBar=(0,e.WQX)(R.UG),this.dialogMode=t.dialogMode,this.boxMovementType=this.data.boxMovementType}ngOnInit(){this.boxMovementForm=this._formBuilder.group({id:new s.MJ,amount:new s.MJ(null,[s.k0.required,s.k0.min(0),s.k0.maxLength(9)]),reason:new s.MJ(null,[s.k0.maxLength(250)])})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBoxMovement(){let t=this.boxMovementForm.getRawValue();t=(0,B.omit)(t,["id"]),t.movementType=this.boxMovementType,this._fuseConfirmationService.open({title:"Crear movimiento",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.createBoxMovement(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&(this._snackBar.openFromComponent(X.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Movimiento creado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this.closeDialog()),this._changeDetectorRef.markForCheck()})})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(w.Vh),e.rXU(I.R),e.rXU(e.gRc),e.rXU(w.CP),e.rXU(s.ok),e.rXU(f.G))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["box-admin-dialog"]],standalone:!0,features:[e.aNF],decls:19,vars:12,consts:[[1,"relative","px-6","pt-5","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-start","border-b"],["class","text-xl font-semibold","mat-dialog-title",""],["mat-dialog-content","",1,"flex","mt-4","flex-col","items-center","flex-auto","w-full","border-b"],[1,"flex","flex-col","w-full",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-4"],[1,"w-full"],["matInput","","type","number",3,"formControlName","required"],["class","w-full"],["mat-dialog-actions","",1,"flex","items-center","justify-between","w-full","pt-2","pb-3"],["mat-button","",3,"color","click"],["mat-button","",3,"disabled","color","click"],["mat-dialog-title","",1,"text-xl","font-semibold"],["matInput","","cdkTextareaAutosize","","maxlength","250","rows","4",3,"formControlName"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,te,2,0,"h2",2)(3,oe,2,0,"h2",2)(4,ie,2,0,"h2",2)(5,ne,2,0,"h2",2),e.k0s(),e.j41(6,"div",3)(7,"form",4)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),e.EFF(11,"Monto"),e.k0s(),e.nrm(12,"input",7),e.k0s(),e.DNE(13,se,4,1,"mat-form-field",8),e.k0s()()(),e.j41(14,"div",9)(15,"button",10),e.bIt("click",function(){return n.closeDialog()}),e.EFF(16,"Cancelar"),e.k0s(),e.j41(17,"button",11),e.bIt("click",function(){return n.createBoxMovement()}),e.EFF(18," Guardar "),e.k0s()()()),2&i&&(e.R7$(2),e.vxM(2,"initial"===n.boxMovementType?2:-1),e.R7$(),e.vxM(3,"return"===n.boxMovementType?3:-1),e.R7$(),e.vxM(4,"loan"===n.boxMovementType?4:-1),e.R7$(),e.vxM(5,"spent"===n.boxMovementType?5:-1),e.R7$(2),e.Y8G("formGroup",n.boxMovementForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","amount")("required",!0),e.R7$(),e.vxM(13,"initial"!==n.boxMovementType?13:-1),e.R7$(2),e.Y8G("color","warn"),e.R7$(2),e.Y8G("disabled",n.boxMovementForm.invalid)("color","primary"))},dependencies:[x.RG,x.rl,x.nJ,C.fS,C.fg,ee.xb,F.Hl,F.$z,s.X1,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.tU,s.j4,s.JD],encapsulation:2,changeDetection:0})}return o})();var h=l(60177),k=l(99213),y=l(59115),re=l(31849),le=l(55542);function de(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("initial"))}),e.nrm(1,"mat-icon",17),e.EFF(2," Editar monto inicial "),e.k0s(),e.j41(3,"button",42),e.nrm(4,"mat-icon",17),e.EFF(5," Cerrar caja "),e.k0s()}2&o&&(e.R7$(),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(3),e.Y8G("svgIcon","mat_solid:lock"))}function me(o,a){if(1&o){const t=e.RV6();e.j41(0,"button",43)(1,"span",16),e.EFF(2,"Movimientos de caja"),e.k0s(),e.nrm(3,"mat-icon",17),e.k0s(),e.j41(4,"mat-menu",null,44)(6,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("return"))}),e.nrm(7,"mat-icon",17),e.EFF(8," Devoluci\xf3n "),e.k0s(),e.j41(9,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("loan"))}),e.nrm(10,"mat-icon",17),e.EFF(11," Pr\xe9stamo "),e.k0s(),e.j41(12,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("spent"))}),e.nrm(13,"mat-icon",17),e.EFF(14," Gasto "),e.k0s(),e.j41(15,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("depot"))}),e.nrm(16,"mat-icon",17),e.EFF(17," Dep\xf3sito "),e.k0s(),e.j41(18,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.openBoxAdminDialog("extraction"))}),e.nrm(19,"mat-icon",17),e.EFF(20," Extracci\xf3n "),e.k0s()()}if(2&o){const t=e.sdS(5);e.Y8G("matMenuTriggerFor",t),e.R7$(3),e.Y8G("svgIcon","mat_solid:expand_more"),e.R7$(4),e.Y8G("svgIcon","mat_solid:settings_backup_restore"),e.R7$(3),e.Y8G("svgIcon","mat_solid:real_estate_agent"),e.R7$(3),e.Y8G("svgIcon","mat_solid:paid"),e.R7$(3),e.Y8G("svgIcon","mat_solid:south_west"),e.R7$(3),e.Y8G("svgIcon","mat_solid:north_east")}}function ce(o,a){if(1&o&&(e.j41(0,"div",49)(1,"div",50),e.nrm(2,"div",51),e.j41(3,"div",52),e.EFF(4),e.k0s()(),e.j41(5,"div",53),e.EFF(6),e.nI1(7,"percent"),e.k0s()()),2&o){const t=a.$implicit,i=a.$index,n=e.XpG(3);e.R7$(2),e.xc7("background-color",n.boxMovementDistribution.colors[i]),e.R7$(2),e.JRh(n.data.labels[i]),e.R7$(2),e.SpI(" ",e.i5U(7,4,t/n.data.total,"1.2-2")," ")}}function ue(o,a){if(1&o&&(e.qex(0),e.j41(1,"div",45)(2,"div",46),e.nrm(3,"apx-chart",47),e.k0s(),e.j41(4,"div",48),e.Z7z(5,ce,8,7,"div",54,e.fX1),e.k0s()(),e.bVm()),2&o){const t=e.XpG(2);e.R7$(3),e.Y8G("chart",t.boxMovementDistribution.chart)("colors",t.boxMovementDistribution.colors)("labels",t.boxMovementDistribution.labels)("plotOptions",t.boxMovementDistribution.plotOptions)("series",t.boxMovementDistribution.series)("states",t.boxMovementDistribution.states)("tooltip",t.boxMovementDistribution.tooltip),e.R7$(2),e.Dyx(t.data.series)}}function pe(o,a){if(1&o&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"a",4),e.EFF(5,"Inicio"),e.k0s()(),e.j41(6,"div",5),e.nrm(7,"mat-icon",6),e.j41(8,"a",7),e.EFF(9,"Caja"),e.k0s()(),e.j41(10,"div",5),e.nrm(11,"mat-icon",6),e.j41(12,"a",7),e.EFF(13,"Administraci\xf3n"),e.k0s()()(),e.j41(14,"div",8)(15,"h2",9),e.EFF(16," Administraci\xf3n de caja "),e.k0s(),e.j41(17,"div",10)(18,"span",11),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"span",12),e.EFF(22),e.nI1(23,"titlecase"),e.k0s()()()(),e.j41(24,"div",13)(25,"div",14)(26,"button",15)(27,"span",16),e.EFF(28,"Opciones"),e.k0s(),e.nrm(29,"mat-icon",17),e.k0s(),e.j41(30,"mat-menu",null,18),e.DNE(32,de,6,2),e.k0s()(),e.DNE(33,me,21,7),e.k0s()(),e.j41(34,"div",19)(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23),e.nrm(39,"div",24),e.k0s(),e.j41(40,"div",25),e.EFF(41,"Monto inicial"),e.k0s(),e.j41(42,"div",26),e.EFF(43),e.nI1(44,"currency"),e.k0s()(),e.j41(45,"div",22)(46,"div",23),e.nrm(47,"div",27),e.k0s(),e.j41(48,"div",25),e.EFF(49,"Ingresos"),e.k0s(),e.j41(50,"div",26),e.EFF(51),e.nI1(52,"currency"),e.k0s()(),e.j41(53,"div",22)(54,"div",23),e.nrm(55,"div",28),e.k0s(),e.j41(56,"div",25),e.EFF(57,"Devoluciones"),e.k0s(),e.j41(58,"div",26),e.EFF(59),e.nI1(60,"currency"),e.k0s()(),e.j41(61,"div",22)(62,"div",23),e.nrm(63,"div",29),e.k0s(),e.j41(64,"div",25),e.EFF(65,"Pr\xe9stamos"),e.k0s(),e.j41(66,"div",26),e.EFF(67),e.nI1(68,"currency"),e.k0s()(),e.j41(69,"div",22)(70,"div",23),e.nrm(71,"div",30),e.k0s(),e.j41(72,"div",31),e.EFF(73,"Gastos"),e.k0s(),e.j41(74,"div",26),e.EFF(75),e.nI1(76,"currency"),e.k0s()(),e.j41(77,"div",22)(78,"div",23),e.nrm(79,"div",32),e.k0s(),e.j41(80,"div",31),e.EFF(81,"Dep\xf3sitos"),e.k0s(),e.j41(82,"div",26),e.EFF(83),e.nI1(84,"currency"),e.k0s()(),e.j41(85,"div",22)(86,"div",23),e.nrm(87,"div",33),e.k0s(),e.j41(88,"div",31),e.EFF(89,"Extracciones"),e.k0s(),e.j41(90,"div",26),e.EFF(91),e.nI1(92,"currency"),e.k0s()(),e.j41(93,"div",22),e.nrm(94,"div",14),e.j41(95,"div",34),e.EFF(96,"Ingresos Totales "),e.k0s(),e.j41(97,"div",35),e.EFF(98),e.nI1(99,"currency"),e.k0s()(),e.j41(100,"div",22),e.nrm(101,"div",14),e.j41(102,"div",36),e.EFF(103,"Egresos Totales "),e.k0s(),e.j41(104,"div",37),e.EFF(105),e.nI1(106,"currency"),e.k0s()(),e.j41(107,"div",22),e.nrm(108,"div",14),e.j41(109,"div",38),e.EFF(110,"Saldo"),e.k0s(),e.j41(111,"div",39),e.EFF(112),e.nI1(113,"currency"),e.k0s()()(),e.DNE(114,ue,7,7,"ng-container",40),e.k0s()()),2&o){const t=e.sdS(31),i=e.XpG();e.R7$(7),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.SpI(" Fecha de caja: ",e.i5U(20,19,i.box.open,"dd/MM/YYYY hh:mm a")," "),e.R7$(3),e.SpI(" ",e.bMT(23,22,i.box.status)," "),e.R7$(4),e.Y8G("matMenuTriggerFor",t),e.R7$(3),e.Y8G("svgIcon","mat_solid:expand_more"),e.R7$(3),e.vxM(32,"abierta"===i.box.status?32:-1),e.R7$(),e.vxM(33,"abierta"===i.box.status?33:-1),e.R7$(10),e.JRh(e.i5U(44,24,i.data.series[0],"$ ")),e.R7$(8),e.JRh(e.i5U(52,27,i.data.series[1],"$ ")),e.R7$(8),e.JRh(e.i5U(60,30,i.data.series[2],"$ ")),e.R7$(8),e.JRh(e.i5U(68,33,i.data.series[3],"$ ")),e.R7$(8),e.JRh(e.i5U(76,36,i.data.series[4],"$ ")),e.R7$(8),e.JRh(e.i5U(84,39,i.data.series[5],"$ ")),e.R7$(8),e.JRh(e.i5U(92,42,i.data.series[6],"$ ")),e.R7$(7),e.JRh(e.i5U(99,45,i.data.series[0]+i.data.series[1]+i.data.series[5],"$ ")),e.R7$(7),e.SpI(" ",e.i5U(106,48,i.data.series[2]+i.data.series[3]+i.data.series[4]+i.data.series[6],"$ ")," "),e.R7$(7),e.JRh(e.i5U(113,51,i.data.series[0]+i.data.series[1]-i.data.series[2]-i.data.series[3]-i.data.series[4]+i.data.series[5]-i.data.series[6],"$ ")),e.R7$(2),e.Y8G("ngIf",i.data.total>0)}}const be=(o,a)=>a.id,he=o=>({"ring ring-inset ring-primary":o});function fe(o,a){if(1&o){const t=e.RV6();e.j41(0,"fuse-card",61),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.selectTerminal(r))}),e.nrm(1,"mat-icon",62),e.j41(2,"div",63)(3,"div",64),e.EFF(4),e.k0s(),e.j41(5,"div",65),e.EFF(6),e.k0s()()()}if(2&o){const t=a.$implicit,i=e.XpG(2);e.Y8G("ngClass",e.eq3(4,he,t===i.selectedTerminal)),e.R7$(),e.Y8G("svgIcon","mat_solid:point_of_sale"),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.depot.name)}}function xe(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",55)(1,"div",56)(2,"h1",57),e.EFF(3,"Selecciona la terminal para la cual desea abrir la caja"),e.k0s()(),e.j41(4,"div",58),e.Z7z(5,fe,7,6,"fuse-card",66,be),e.k0s(),e.j41(7,"div",58)(8,"button",59),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openBox(!0))}),e.nrm(9,"mat-icon",60),e.j41(10,"span",16),e.EFF(11,"Abrir caja con saldo anterior"),e.k0s()(),e.j41(12,"button",59),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.openBox(!1))}),e.nrm(13,"mat-icon",60),e.j41(14,"span",16),e.EFF(15,"Abrir caja sin saldo"),e.k0s()()()()}if(2&o){const t=e.XpG();e.R7$(5),e.Dyx(t.terminals),e.R7$(3),e.Y8G("disabled",null===t.selectedTerminal),e.R7$(),e.Y8G("svgIcon","mat_solid:key"),e.R7$(3),e.Y8G("disabled",null===t.selectedTerminal),e.R7$(),e.Y8G("svgIcon","mat_solid:key")}}let ge=(()=>{class o{constructor(){this.balance=0,this.box=null,this.data={total:0,series:[0,0,0,0,0,0,0],labels:["Monto Inicial","Ingresos","Devoluciones","Prestamos","Gastos","Dep\xf3sitos","Extracciones"],colors:["#64748B","#22C55E","#EF4444","#EAB308","#06B6D4","#3f10cd","#ff498b"]},this.selectedTerminal=null,this.terminals=[],this._boxService=(0,e.WQX)(I.R),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(w.bZ),this._fuseConfirmationService=(0,e.WQX)(f.G),this._router=(0,e.WQX)(_.Ix),this._snackBar=(0,e.WQX)(R.UG),this._unsubscribeAll=new $.B,this.store=(0,e.WQX)(D.il)}ngOnInit(){window.Apex={chart:{events:{mounted:(t,i)=>{this._fixSvgFill(t.el)},updated:(t,i)=>{this._fixSvgFill(t.el)}}}},this.store.select(A.Ye).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.terminals=t,this._changeDetectorRef.markForCheck()}),this.store.select(b.k2).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.box=t,this.box&&(this.data.total=t.initial+t.income+t.return+t.loan+t.spent+t.depot-t.extraction,this.data.series=[t.initial,t.income,t.return,t.loan,t.spent,t.depot,t.extraction],this.balance=t.initial+t.income+t.depot-t.extraction-t.return-t.loan-t.spent,this._prepareChartData()),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectTerminal(t){this.selectedTerminal=t,this._changeDetectorRef.markForCheck()}openBox(t){this._fuseConfirmationService.open({title:"Abrir caja.",message:"\xbfEst\xe1 seguro que desea abrir la caja",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.openBox(this.selectedTerminal.id,t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(X.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.openBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}openBoxAdminDialog(t){this._dialog.open(ae,{data:{boxMovementType:t},width:"90%",maxWidth:"400px",panelClass:"ath-dialog-panel",disableClose:!0})}trackByFn(t,i){return i.id||t}_fixSvgFill(t){const i=this._router.url;Array.from(t.querySelectorAll("*[fill]")).filter(n=>-1!==n.getAttribute("fill").indexOf("url(")).forEach(n=>{const r=n.getAttribute("fill");n.setAttribute("fill",`url(${i}${r.slice(r.indexOf("#"))}`)})}_prepareChartData(){this.boxMovementDistribution={chart:{animations:{speed:400,animateGradually:{enabled:!1}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"donut",sparkline:{enabled:!0}},colors:this.data.colors,labels:this.data.labels,plotOptions:{pie:{customScale:.9,expandOnClick:!1,donut:{size:"0%"}}},series:this.data.series,states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{enabled:!0,fillSeriesColor:!1,theme:"dark",custom:({seriesIndex:t,w:i})=>`<div class="flex items-center h-8 min-h-8 max-h-8 px-3">\n                                                     <div class="w-3 h-3 rounded-full" style="background-color: ${i.config.colors[t]};"></div>\n                                                     <div class="ml-2 text-md leading-none">${i.config.labels[t]}:</div>\n                                                     <div class="ml-2 text-md font-bold leading-none">${(i.config.series[t]/this.data.total*100).toFixed(2)}%</div>\n                                                 </div>`}}}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["box-admin"]],standalone:!0,features:[e.aNF],decls:3,vars:1,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-col","gap-2","md:flex-row"],[1,"font-mono"],[1,"px-2.5","rounded-full","bg-primary-500","w-fit"],[1,"flex","flex-col","items-center","gap-2","mt-6","md:flex-row","shrink-0","lg:mt-0","lg:ml-4"],[1,""],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-yellow-500","to-yellow-600",3,"matMenuTriggerFor"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"svgIcon"],["optionsMenu","matMenu"],[1,"flex","flex-auto","overflow-hidden","overflow-y-scroll"],[1,"grid","w-full","grid-cols-1","gap-2","p-8","md:grid-cols-2"],[1,"flex","flex-col","border","divide-y"],[1,"grid","w-full","grid-cols-3"],[1,"flex","items-center","justify-center"],[1,"leading-10","rounded-full","h-7","w-7","bg-slate-500"],[1,"font-semibold","leading-10","uppercase"],[1,"font-mono","leading-10","text-center"],[1,"leading-10","bg-green-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-red-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-yellow-500","rounded-full","h-7","w-7"],[1,"leading-10","rounded-full","h-7","w-7","bg-cyan-500"],[1,"w-auto","font-semibold","leading-10","uppercase"],[1,"leading-10","bg-blue-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-pink-500","rounded-full","h-7","w-7"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-green-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-green-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-red-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-red-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","uppercase","dark:text-slate-500"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","dark:text-slate-500"],[4,"ngIf"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLink","/modules/box/closer"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"matMenuTriggerFor"],["movementsMenu","matMenu"],[1,"flex","flex-row","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","flex-col","flex-auto","w-1/2","mt-6","h-44"],[1,"flex","items-center","justify-center","flex-auto","w-full","h-full",3,"chart","colors","labels","plotOptions","series","states","tooltip"],[1,"w-1/2","divide-y"],[1,"grid","grid-cols-2","py-3"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","flex-0"],[1,"ml-3","truncate"],[1,"font-mono","font-medium","text-right"],["class","grid grid-cols-2 py-3"],[1,"flex","flex-col","items-center","justify-center","w-full","h-full","px-3","space-y-5"],[1,"flex","flex-col","items-center","justify-center","w-full"],[1,"text-4xl","font-bold","text-center"],[1,"flex","flex-row","flex-wrap","items-center","justify-center","w-full","gap-5"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","w-full","p-6","transition-all","duration-300","ease-in-out","cursor-pointer","max-w-80","filter-info","hover:ring","hover:ring-primary-200","hover:ring-inset",3,"ngClass","click"],[1,"mr-6","icon-size-12",3,"svgIcon"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["class","flex items-center w-full p-6 transition-all duration-300 ease-in-out cursor-pointer max-w-80 filter-info hover:ring hover:ring-primary-200 hover:ring-inset",3,"ngClass"]],template:function(i,n){1&i&&(e.j41(0,"div",0),e.DNE(1,pe,115,54)(2,xe,16,4),e.k0s()),2&i&&(e.R7$(),e.vxM(1,"abierta"===n.box.status?1:2))},dependencies:[h.oe,h.vh,re.$,F.Hl,F.$z,k.m_,k.An,y.Cn,le.uv,y.kk,y.fb,y.Cp,G.J,G.Q,h.YU,h.bT,h.m1,_.Wk,h.PV],encapsulation:2,changeDetection:0})}return o})();var ve=l(10467),M=l(96695),j=l(2042),H=l(7673),W=l(57786),P=l(70152),Y=l(25558),N=l(96354),O=l(69938),q=l(47413),_e=l(63729),Fe=l(70819),L=l(97586),Z=l(77235),Q=l(82643);let ye=(()=>{class o{constructor(){Q.vfs=Z.b.vfs}boxCloseReport(t,i,n){const r=[],d=`Cierre de caja ${L(t.close).format("DD/MM/yy hh:mm a")}`,g=[{text:"Informaci\xf3n General",style:"header"},{text:`Local: ${t.terminal.location.name}`,style:"subheader"},{text:`Nombre de la Caja: ${t.terminal.name}`,style:"subheader"},{text:`Usuario: ${t.user.fullname}`,style:"subheader"},{text:`Total Inicial: ${t.initial.toFixed(2)}`,style:"subheader"},{text:`Ingresos: ${t.income.toFixed(2)}`,style:"subheader"},{text:`Devoluciones: ${t.return.toFixed(2)}`,style:"subheader"},{text:`Pr\xe9stamos: ${t.loan.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${t.spent.toFixed(2)}`,style:"subheader"},{text:`Dep\xf3sitos: ${t.depot.toFixed(2)}`,style:"subheader"},{text:`Extracciones: ${t.extraction.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${t.spent.toFixed(2)}`,style:"subheader"},{text:`Total Final: ${(t.initial+t.income+t.depot-t.return-t.loan-t.spent-t.extraction).toFixed(2)}`,style:"subheader"}],U=[{marginTop:10,columns:[{text:"Billetes",style:"header"},{text:"Monedas",style:"header"}]},{columns:[{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Billetes de 1",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b1,style:"table_body"},{text:(1*t.cashDistribution?.b1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 3",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b3,style:"table_body"},{text:(3*t.cashDistribution?.b3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 5",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b5,style:"table_body"},{text:(5*t.cashDistribution?.b5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 10",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b10,style:"table_body"},{text:(10*t.cashDistribution?.b10).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 20",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b20,style:"table_body"},{text:(20*t.cashDistribution?.b20).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 50",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b50,style:"table_body"},{text:(50*t.cashDistribution?.b50).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 100",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b100,style:"table_body"},{text:(100*t.cashDistribution?.b100).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 200",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b200,style:"table_body"},{text:(200*t.cashDistribution?.b200).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 500",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b500,style:"table_body"},{text:(500*t.cashDistribution?.b500).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 1000",bold:!0,style:"table_body",alignment:"left"},{text:t.cashDistribution?.b1000,style:"table_body"},{text:(1e3*t.cashDistribution?.b1000).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(u,p)=>.7,vLineWidth:(u,p)=>0,hLineColor:(u,p)=>"#eeeeee"}},{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Monedas de 1",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m1,style:"table_body"},{text:(1*t.cashDistribution?.m1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 3",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m3,style:"table_body"},{text:(3*t.cashDistribution?.m3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 5",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.m5,style:"table_body"},{text:(5*t.cashDistribution?.m5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.01",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c1,style:"table_body"},{text:(.01*t.cashDistribution?.c1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.02",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c2,style:"table_body"},{text:(.02*t.cashDistribution?.c2).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.05",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c5,style:"table_body"},{text:(.05*t.cashDistribution?.c5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.20",style:"table_body",bold:!0,alignment:"left"},{text:t.cashDistribution?.c20,style:"table_body"},{text:(.2*t.cashDistribution?.c20).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(u,p)=>.7,vLineWidth:(u,p)=>0,hLineColor:(u,p)=>"#eeeeee"}}]}],Dt=t.boxMovements.reduce((u,p)=>{const z=p.movementType,E=u.findIndex(J=>J.movementType===z);return-1===E?u.push({movementType:z,movements:[p]}):u[E].movements.push(p),u},[]),V=[[{text:"MOVIMIENTOS DE CAJA",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"Tipo",style:"table_header"},{text:"N\xba",style:"table_header"},{text:"Monto",style:"table_header"},{text:"Motivo",style:"table_header"}]];for(const u of Dt){let p="";switch(u.movementType){case"initial":p="Inicial";break;case"return":p="Devoluciones";break;case"loan":p="Pr\xe9stamos";break;case"spent":p="Gastos";break;case"depot":p="Dep\xf3sitos";break;case"extraction":p="Extracciones"}const z=[{rowSpan:u.movements.length,text:p,alignment:"left",style:"table_body"},{text:u.movements[0].no,style:"table_body"},{text:u.movements[0].amount.toFixed(2),style:"table_body"},{text:u.movements[0].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];V.push(z);for(let E=1;E<u.movements.length;E++){const J=[{text:"",alignment:"center"},{text:u.movements[E].no,style:"table_body"},{text:u.movements[E].amount.toFixed(2),style:"table_body"},{text:u.movements[E].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];V.push(J)}}const Bt=[{table:{headerRows:2,widths:[60,100,60,"*"],body:V},layout:{hLineWidth:(u,p)=>.7,vLineWidth:(u,p)=>.7,hLineColor:(u,p)=>"#eeeeee",vLineColor:(u,p)=>"#eeeeee"},marginTop:30}];r.push(g,U),t.boxMovements.length>0&&r.push(Bt);const Mt={header:{text:d,style:"header",marginTop:5},content:r,footer:(u,p)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${n.fullname} | Esta informaci\xf3n es exclusiva de ${i.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${u.toString()}/${p} - Fecha de impresi\xf3n ${L().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},subheader:{fontSize:14,bold:!0,marginBottom:2,alignment:"left",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_footer:{fontSize:12,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10,alignment:"center"}},pageOrientation:"portrait",pageSize:"LETTER",watermark:{text:i.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:d,author:`${n.fullname}`,creationDate:L().toDate(),modDate:L().toDate(),producer:i.name}};Q.createPdf(Mt).open()}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();Q.vfs=Z.b.vfs;var Ce=l(56730),ke=l(66958),je=l(23083);const Ee=(o,a)=>({"bg-primary-500":o,"bg-red-500":a});function Re(o,a){if(1&o){const t=e.RV6();e.j41(0,"div",22)(1,"div",23),e.EFF(2),e.k0s(),e.j41(3,"div",20),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.EFF(6),e.k0s(),e.j41(7,"div",24),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"div",24),e.EFF(11),e.nI1(12,"currency"),e.k0s(),e.j41(13,"div",24),e.EFF(14),e.nI1(15,"date"),e.k0s(),e.j41(16,"div",24),e.EFF(17),e.nI1(18,"currency"),e.k0s(),e.j41(19,"div",20)(20,"span",25),e.EFF(21),e.nI1(22,"uppercase"),e.k0s()(),e.j41(23,"div",26)(24,"button",27),e.nrm(25,"mat-icon",28),e.k0s(),e.j41(26,"mat-menu",29,30)(28,"button",31),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.boxCloseReport(r))}),e.EFF(29,"Resumen de caja"),e.k0s(),e.j41(30,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.saleProductsReport(r.id))}),e.EFF(31,"Ventas por productos"),e.k0s(),e.j41(32,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.salesByCategoriesProducts(r.id))}),e.EFF(33,"Ventas por categor\xedas"),e.k0s()(),e.j41(34,"button",33),e.nrm(35,"mat-icon",28),e.k0s(),e.j41(36,"mat-menu",29,34)(38,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.printIPV(r.id))}),e.EFF(39,"Ventas por productos"),e.k0s(),e.j41(40,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.printIPVCategories(r.id))}),e.EFF(41,"Ventas por categor\xedas"),e.k0s(),e.j41(42,"button",32),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.printBoxAndSales(r.id))}),e.EFF(43,"Resumen de caja y ventas"),e.k0s()()()()}if(2&o){const t=a.$implicit,i=e.sdS(27),n=e.sdS(37);e.R7$(2),e.SpI(" ",t.no," "),e.R7$(2),e.SpI(" ",t.terminal.location.name," "),e.R7$(2),e.SpI(" ",t.terminal.name," "),e.R7$(2),e.SpI(" ",e.i5U(9,15,t.open,"dd/MM/yyyy HH:mm:ss")," "),e.R7$(3),e.SpI(" ",e.i5U(12,18,t.initial,"$ ")," "),e.R7$(3),e.SpI(" ",e.i5U(15,21,t.close,"dd/MM/yyyy HH:mm:ss")," "),e.R7$(3),e.SpI(" ",e.i5U(18,24,t.initial+t.income-t.return-t.loan-t.spent,"$ ")," "),e.R7$(3),e.Y8G("ngClass",e.l_i(29,Ee,"abierta"===t.status,"cerrada"===t.status)),e.R7$(),e.SpI(" ",e.bMT(22,27,t.status)," "),e.R7$(3),e.Y8G("matMenuTriggerFor",i),e.R7$(),e.Y8G("svgIcon","mat_solid:request_page"),e.R7$(3),e.Y8G("disabled","abierta"===t.status),e.R7$(6),e.Y8G("matMenuTriggerFor",n)("disabled","abierta"===t.status),e.R7$(),e.Y8G("svgIcon","mat_solid:print")}}function $e(o,a){1&o&&e.Z7z(0,Re,44,32,"div",35,e.BUC().trackByFn),2&o&&e.Dyx(a)}const De=o=>({"pointer-events-none":o}),Be=()=>[10,25,50,100];function Me(o,a){if(1&o&&(e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.EFF(3," No. "),e.k0s(),e.j41(4,"div",20),e.EFF(5," Unidad "),e.k0s(),e.j41(6,"div",20),e.EFF(7," Caja "),e.k0s(),e.j41(8,"div",20),e.EFF(9," Fecha Apertura "),e.k0s(),e.j41(10,"div",20),e.EFF(11," Monto Apertura "),e.k0s(),e.j41(12,"div",20),e.EFF(13," Fecha Cierre "),e.k0s(),e.j41(14,"div",20),e.EFF(15," Monto Cierre "),e.k0s(),e.j41(16,"div",20),e.EFF(17," Estado "),e.k0s(),e.j41(18,"div",20),e.EFF(19," Acciones "),e.k0s()(),e.DNE(20,$e,2,0),e.nI1(21,"async"),e.k0s(),e.nrm(22,"mat-paginator",21)),2&o){const t=e.XpG(2);let i;e.R7$(2),e.Y8G("mat-sort-header","no"),e.R7$(18),e.vxM(20,(i=e.bMT(21,8,t.boxes$))?20:-1,i),e.R7$(2),e.Y8G("ngClass",e.eq3(10,De,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(12,Be))("showFirstLastButtons",!0)}}function we(o,a){1&o&&(e.j41(0,"div",36),e.EFF(1," \xa1No se ha registrado ning\xfan cierre de caja! "),e.k0s())}function Ie(o,a){1&o&&e.DNE(0,Me,23,13)(1,we,2,0),2&o&&e.vxM(0,a.length>0?0:1)}let Te=(()=>{class o{constructor(){this.boxes$=(0,H.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.searchInputControl=new s.MJ,this.selectedSlide=null,this.user=null,this._boxReportsService=(0,e.WQX)(ye),this._boxService=(0,e.WQX)(I.R),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._fuseConfirmationService=(0,e.WQX)(f.G),this._documentsService=(0,e.WQX)(Ce.Q),this._snackBar=(0,e.WQX)(R.UG),this._unsubscribeAll=new $.B,this.store=(0,e.WQX)(D.il),this._printerService=(0,e.WQX)(ke.k),this._salesService=(0,e.WQX)(je.w)}ngOnInit(){this.store.select(Fe.Xb).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.store.select(_e.SW).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.boxes$=this.store.select(b.Gf),this.store.select(q.D).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.Q)(this._unsubscribeAll),(0,P.B)(300),(0,Y.n)(t=>(this.isLoading=!0,this._boxService.getBoxes(0,this.pagination.size,"no","desc",t))),(0,N.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,W.h)(this._sort.sortChange,this._paginator.page).pipe((0,Y.n)(()=>(this.isLoading=!0,this._boxService.getBoxes(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,N.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,O.Bx)())}boxCloseReport(t){this._boxService.getBoxById(t.id).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:i})=>{t&&this._boxReportsService.boxCloseReport(i.findBoxById.box,this.merchant,this.user)})}saleProductsReport(t){this._salesService.getIpvSaleResume(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(i=>{if(i){const n=i.products.filter(d=>d.quantity>0).map(d=>({Producto:d?.name,Cantidad:d.quantity,Precio:d.priceAvg,Cajero:i.employeeName}));this._documentsService.generateIpvProducts(n,{start:i.openedAt,end:i.closedAT},this.merchant,[{name:i.locationName}],this.user,i.cashPaid,i.cardPaid)}})}salesByCategoriesProducts(t){this._salesService.getIpvSaleResumeCategory(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(i=>{i&&this._documentsService.generateSalesByCategoriesProducts(i,this.merchant,this.user)})}trackByFn(t,i){return t||i.id}printIPV(t){this._salesService.getIpvSaleResume(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(i=>{i&&this._printerService.printIpvSalesResumeTicket(i).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}printIPVCategories(t){this._salesService.getIpvSaleResumeCategory(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(i=>{i&&this._printerService.printIpvSalesResumeCategoryTicket(i).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}printBoxAndSales(t){this._boxService.getBoxSaleResume(t).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(i=>{i&&this._printerService.printBoxSaleResumeTicket(i).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._snackBar.open("Impresi\xf3n exitosa","Aceptar",{duration:3e3})})})}generateTicketDocument(t){var i=this;return(0,ve.A)(function*(){i._documentsService.generateTicketDocument(t,i.merchant,i.user)})()}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["box-history"]],viewQuery:function(i,n){if(1&i&&(e.GBs(M.iy,5),e.GBs(j.B4,5)),2&i){let r;e.mGM(r=e.lsd())&&(n._paginator=r.first),e.mGM(r=e.lsd())&&(n._sort=r.first)}},standalone:!0,features:[e.aNF],decls:26,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/box/admin",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","boxes-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","boxes-grid","md:px-8"],[1,"hiddem","sm:blockfont-mono"],[1,"font-mono","text-center","hiddem","sm:block"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],[1,"flex","flex-row","justify-center","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["xPosition","before"],["reportsMenu1","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor","disabled"],["reportsMenu","matMenu"],["class","grid items-center gap-4 px-6 py-3 border-b boxes-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Caja"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",8),e.EFF(14,"Cierres de Caja"),e.k0s()()(),e.j41(15,"div",9)(16,"h2",10),e.EFF(17," Cierres de Caja "),e.k0s()()(),e.j41(18,"div",11)(19,"mat-form-field",12),e.nrm(20,"mat-icon",13)(21,"input",14),e.k0s()()(),e.j41(22,"div",15)(23,"div",16),e.DNE(24,Ie,2,1),e.nI1(25,"async"),e.k0s()()()),2&i){let r;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),e.R7$(3),e.vxM(24,(r=e.bMT(25,8,n.boxes$))?24:-1,r)}},dependencies:[F.Hl,F.$z,x.RG,x.rl,x.JW,C.fS,C.fg,k.m_,k.An,h.YU,s.X1,s.me,s.BC,s.l_,h.Jj,j.NQ,j.B4,j.aE,h.vh,h.oe,h.Pc,y.Cn,y.kk,y.fb,y.Cp,M.Ou,M.iy],encapsulation:2,changeDetection:0})}return o})();var v=function(o){return o.initial="initial",o.income="income",o.return="return",o.loan="loan",o.spent="spent",o.depot="depot",o.extraction="extraction",o}(v||{}),Ge=l(90558);const Ae=o=>({"text-red-500":o});function Ye(o,a){if(1&o&&(e.j41(0,"div",22)(1,"div",23),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"div",24),e.EFF(7),e.k0s(),e.j41(8,"div",23),e.EFF(9),e.nI1(10,"currency"),e.k0s(),e.j41(11,"div",20)(12,"span",25),e.EFF(13),e.k0s()()()),2&o){const t=a.$implicit,i=e.XpG(4);e.R7$(2),e.SpI(" ",t.no," "),e.R7$(2),e.SpI(" ",e.i5U(5,7,t.createdAt,"dd/MM/yyyy HH:mm:ss")," "),e.R7$(2),e.Y8G("ngClass",e.eq3(13,Ae,null===t.reason)),e.R7$(),e.SpI(" ",t.reason||"Sin motivo"," "),e.R7$(2),e.SpI(" ",e.i5U(10,10,t.amount,"$ ")," "),e.R7$(3),e.Y8G("ngClass",i.movementClass(t.movementType)),e.R7$(),e.SpI(" ",i.translateMovementType(t.movementType)," ")}}function Ne(o,a){1&o&&e.Z7z(0,Ye,14,15,"div",26,e.BUC().trackByFn),2&o&&e.Dyx(a)}const Le=o=>({"pointer-events-none":o}),ze=()=>[5,10,25,100];function Xe(o,a){if(1&o&&(e.j41(0,"div",16)(1,"div",17)(2,"div",18),e.EFF(3," No. "),e.k0s(),e.j41(4,"div",18),e.EFF(5," Fecha "),e.k0s(),e.j41(6,"div",19),e.EFF(7," Motivo "),e.k0s(),e.j41(8,"div",18),e.EFF(9," Monto "),e.k0s(),e.j41(10,"div",20),e.EFF(11," Tipo de Movimiento "),e.k0s()(),e.DNE(12,Ne,2,0),e.nI1(13,"async"),e.k0s(),e.nrm(14,"mat-paginator",21)),2&o){const t=e.XpG(2);let i;e.R7$(2),e.Y8G("mat-sort-header","no"),e.R7$(2),e.Y8G("mat-sort-header","createdAt"),e.R7$(2),e.Y8G("mat-sort-header","reason"),e.R7$(2),e.Y8G("mat-sort-header","amount"),e.R7$(4),e.vxM(12,(i=e.bMT(13,11,t.boxMovements$))?12:-1,i),e.R7$(2),e.Y8G("ngClass",e.eq3(13,Le,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(15,ze))("showFirstLastButtons",!0)}}function Qe(o,a){1&o&&(e.j41(0,"div",27),e.EFF(1," \xa1No se ha registrado ning\xfan movimiento de caja! "),e.k0s())}function Ue(o,a){1&o&&e.DNE(0,Xe,15,16)(1,Qe,2,0),2&o&&e.vxM(0,a.length>0?0:1)}let Ve=(()=>{class o{constructor(t,i,n,r,d){this._boxService=t,this._changeDetectorRef=i,this._fuseConfirmationService=n,this._snackBar=r,this.store=d,this.boxMovements$=(0,H.of)([]),this.isLoading=!1,this.pagination=new Ge.xN,this.searchInputControl=new s.MJ,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new $.B}ngOnInit(){this.boxMovements$=this.store.select(b.Q9),this.store.select(q.D).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.Q)(this._unsubscribeAll),(0,P.B)(300),(0,Y.n)(t=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,N.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,W.h)(this._sort.sortChange,this._paginator.page).pipe((0,Y.n)(()=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,N.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,O.hr)())}translateMovementType(t){switch(t){case v.initial:return"Inicial";case v.income:return"Ingreso";case v.return:return"Devoluci\xf3n";case v.loan:return"Pr\xe9stamo";case v.spent:return"Gasto"}}movementClass(t){switch(t){case v.initial:return"dark:bg-slate-500";case v.income:return"bg-green-500";case v.return:return"bg-yellow-500";case v.loan:return"bg-red-500";case v.spent:return"bg-cyan-500"}}trackByFn(t,i){return t||i.id}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(I.R),e.rXU(e.gRc),e.rXU(f.G),e.rXU(R.UG),e.rXU(D.il))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["box-movements"]],viewQuery:function(i,n){if(1&i&&(e.GBs(M.iy,5),e.GBs(j.B4,5)),2&i){let r;e.mGM(r=e.lsd())&&(n._paginator=r.first),e.mGM(r=e.lsd())&&(n._sort=r.first)}},standalone:!0,features:[e.aNF],decls:26,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","box-movements-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"text-center","hiddem","sm:block",3,"mat-sort-header"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","box-movements-grid","md:px-8"],[1,"font-mono","hiddem","sm:block"],[1,"hiddem","sm:block",3,"ngClass"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],["class","grid items-center gap-4 px-6 py-3 border-b box-movements-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(i,n){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Caja"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Movimientos de Caja"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Movimientos de Caja "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s()()(),e.j41(22,"div",14)(23,"div",15),e.DNE(24,Ue,2,1),e.nI1(25,"async"),e.k0s()()()),2&i){let r;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),e.R7$(3),e.vxM(24,(r=e.bMT(25,8,n.boxMovements$))?24:-1,r)}},dependencies:[h.Jj,h.oe,h.vh,F.Hl,x.RG,x.rl,x.JW,k.m_,k.An,C.fS,C.fg,y.Cn,M.Ou,M.iy,j.NQ,j.B4,j.aE,h.YU,s.X1,s.me,s.BC,s.l_,_.Wk],encapsulation:2,changeDetection:0})}return o})();var T=l(13507);function Je(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 1 peso es obligatoria. "),e.k0s())}function He(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function We(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 3 pesos es obligatoria. "),e.k0s())}function Pe(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function Oe(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 5 pesos es obligatoria. "),e.k0s())}function qe(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function Ze(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 10 pesos es obligatoria. "),e.k0s())}function Ke(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function et(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 20 pesos es obligatoria. "),e.k0s())}function tt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function ot(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 50 pesos es obligatoria. "),e.k0s())}function it(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function nt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 100 pesos es obligatoria. "),e.k0s())}function st(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function at(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 200 pesos es obligatoria. "),e.k0s())}function rt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function lt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 500 pesos es obligatoria. "),e.k0s())}function dt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function mt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de 1000 pesos es obligatoria. "),e.k0s())}function ct(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),e.k0s())}function ut(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 1 centavo es obligatoria. "),e.k0s())}function pt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.k0s())}function bt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 2 centavos es obligatoria. "),e.k0s())}function ht(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.k0s())}function ft(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 5 centavos es obligatoria. "),e.k0s())}function xt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.k0s())}function gt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 20 centavos es obligatoria. "),e.k0s())}function vt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),e.k0s())}function _t(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 1 peso es obligatoria. "),e.k0s())}function Ft(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.k0s())}function yt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 3 pesos es obligatoria. "),e.k0s())}function Ct(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.k0s())}function kt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de 5 pesos es obligatoria. "),e.k0s())}function jt(o,a){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),e.k0s())}let Et=(()=>{class o{constructor(){this.totalCashAmount=0,this.balance=0,this.box=null,this._boxService=(0,e.WQX)(I.R),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(s.ok),this._fuseConfirmationService=(0,e.WQX)(f.G),this._router=(0,e.WQX)(_.Ix),this._snackBar=(0,e.WQX)(R.UG),this._unsubscribeAll=new $.B,this.store=(0,e.WQX)(D.il)}ngOnInit(){this.cashDistributionForm=this._formBuilder.group({b1:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b3:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b5:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b10:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b20:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b50:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b100:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b200:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b500:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),b1000:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),c1:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),c2:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),c5:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),c20:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),m1:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),m3:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)]),m5:new s.MJ(0,[s.k0.required,s.k0.min(0),s.k0.max(9999999999)])}),this.store.select(b.k2).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(t=>{this.box=t,this.balance=t.initial+t.income+t.depot-t.return-t.loan-t.spent-t.extraction,this._changeDetectorRef.markForCheck()}),this.cashDistributionForm.valueChanges.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this.totalCashAmount=this.calculateTotalCashAmount(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}calculateTotalCashAmount(){return Object.keys(this.cashDistributionForm.controls).map(n=>{const r=this.cashDistributionForm.controls[n].value;let d=parseFloat(n.substring(1));return n.startsWith("c")&&(d*=.01),r*d}).reduce((n,r)=>n+r,0)}closeBox(){const t=this._fuseConfirmationService.open({title:"Cerrar caja.",message:"\xbfEst\xe1 seguro que desea cerrar la caja?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}),i=this.cashDistributionForm.getRawValue();t.afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.closeBox({id:this.box.id,cashDistribution:i}).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(X.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.closeBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/box/history"),this._changeDetectorRef.markForCheck()})})}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["app-box-closer"]],standalone:!0,features:[e.aNF],decls:143,vars:107,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/box/admin",1,"ml-1","text-primary-500"],["routerLink","/modules/box/history",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","lg:mt-0","lg:ml-4"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"disabled","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto","w-full","gap-3","p-6"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10",3,"ngClass"],[3,"formGroup"],[1,"grid","gap-5","md:grid-cols-2"],[1,"grid","w-full","gap-5","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense"],["type","number","matInput","","required","",3,"formControlName","min","max"],[1,"grid","w-full","gap-5","gap-y-10","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense",3,"subscriptSizing"],[1,"max-h-20"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Caja"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",8),e.EFF(14,"Historial"),e.k0s()(),e.j41(15,"div",5),e.nrm(16,"mat-icon",6),e.j41(17,"a",9),e.EFF(18,"Cerrar"),e.k0s()()(),e.j41(19,"div",10)(20,"h2",11),e.EFF(21," Cerrar de caja "),e.k0s()()(),e.j41(22,"div",12)(23,"button",13),e.bIt("click",function(){return n.closeBox()}),e.nrm(24,"mat-icon",14),e.j41(25,"span",15),e.EFF(26,"Cerrar Caja"),e.k0s()()()(),e.j41(27,"div",16)(28,"h2",17),e.EFF(29),e.nI1(30,"number"),e.k0s(),e.j41(31,"h2",18),e.EFF(32),e.nI1(33,"number"),e.k0s(),e.j41(34,"form",19)(35,"div",20)(36,"div",21)(37,"mat-form-field",22)(38,"mat-label"),e.EFF(39,"Billetes de 1 peso:"),e.k0s(),e.nrm(40,"input",23),e.DNE(41,Je,2,0,"mat-error")(42,He,2,0,"mat-error"),e.k0s(),e.j41(43,"mat-form-field",22)(44,"mat-label"),e.EFF(45,"Billetes de 3 pesos:"),e.k0s(),e.nrm(46,"input",23),e.DNE(47,We,2,0,"mat-error")(48,Pe,2,0,"mat-error"),e.k0s(),e.j41(49,"mat-form-field",22)(50,"mat-label"),e.EFF(51,"Billetes de 5 pesos:"),e.k0s(),e.nrm(52,"input",23),e.DNE(53,Oe,2,0,"mat-error")(54,qe,2,0,"mat-error"),e.k0s(),e.j41(55,"mat-form-field",22)(56,"mat-label"),e.EFF(57,"Billetes de 10 pesos:"),e.k0s(),e.nrm(58,"input",23),e.DNE(59,Ze,2,0,"mat-error")(60,Ke,2,0,"mat-error"),e.k0s(),e.j41(61,"mat-form-field",22)(62,"mat-label"),e.EFF(63,"Billetes de 20 pesos:"),e.k0s(),e.nrm(64,"input",23),e.DNE(65,et,2,0,"mat-error")(66,tt,2,0,"mat-error"),e.k0s(),e.j41(67,"mat-form-field",22)(68,"mat-label"),e.EFF(69,"Billetes de 50 pesos:"),e.k0s(),e.nrm(70,"input",23),e.DNE(71,ot,2,0,"mat-error")(72,it,2,0,"mat-error"),e.k0s(),e.j41(73,"mat-form-field",22)(74,"mat-label"),e.EFF(75,"Billetes de 100 pesos:"),e.k0s(),e.nrm(76,"input",23),e.DNE(77,nt,2,0,"mat-error")(78,st,2,0,"mat-error"),e.k0s(),e.j41(79,"mat-form-field",22)(80,"mat-label"),e.EFF(81,"Billetes de 200 pesos:"),e.k0s(),e.nrm(82,"input",23),e.DNE(83,at,2,0,"mat-error")(84,rt,2,0,"mat-error"),e.k0s(),e.j41(85,"mat-form-field",22)(86,"mat-label"),e.EFF(87,"Billetes de 500 pesos:"),e.k0s(),e.nrm(88,"input",23),e.DNE(89,lt,2,0,"mat-error")(90,dt,2,0,"mat-error"),e.k0s(),e.j41(91,"mat-form-field",22)(92,"mat-label"),e.EFF(93,"Billetes de 1000 pesos:"),e.k0s(),e.nrm(94,"input",23),e.DNE(95,mt,2,0,"mat-error")(96,ct,2,0,"mat-error"),e.k0s()(),e.j41(97,"div")(98,"div",24)(99,"mat-form-field",25)(100,"mat-label"),e.EFF(101,"Monedas de 1 centavo:"),e.k0s(),e.nrm(102,"input",23),e.DNE(103,ut,2,0,"mat-error")(104,pt,2,0,"mat-error"),e.k0s(),e.j41(105,"mat-form-field",25)(106,"mat-label"),e.EFF(107,"Monedas de 2 centavos:"),e.k0s(),e.nrm(108,"input",23),e.DNE(109,bt,2,0,"mat-error")(110,ht,2,0,"mat-error"),e.k0s(),e.j41(111,"mat-form-field",25)(112,"mat-label"),e.EFF(113,"Monedas de 5 centavos:"),e.k0s(),e.nrm(114,"input",23),e.DNE(115,ft,2,0,"mat-error")(116,xt,2,0,"mat-error"),e.k0s(),e.j41(117,"mat-form-field",25)(118,"mat-label"),e.EFF(119,"Monedas de 20 centavos:"),e.k0s(),e.nrm(120,"input",23),e.DNE(121,gt,2,0,"mat-error")(122,vt,2,0,"mat-error"),e.k0s(),e.j41(123,"mat-form-field",25)(124,"mat-label"),e.EFF(125,"Monedas de 1 peso:"),e.k0s(),e.nrm(126,"input",23),e.DNE(127,_t,2,0,"mat-error")(128,Ft,2,0,"mat-error"),e.k0s(),e.j41(129,"mat-form-field",25)(130,"mat-label"),e.EFF(131,"Monedas de 3 pesos:"),e.k0s(),e.nrm(132,"input",23),e.DNE(133,yt,2,0,"mat-error")(134,Ct,2,0,"mat-error"),e.k0s(),e.j41(135,"div",26)(136,"mat-form-field",25)(137,"mat-label"),e.EFF(138,"Monedas de 5 pesos:"),e.k0s(),e.nrm(139,"input",23),e.DNE(140,kt,2,0,"mat-error")(141,jt,2,0,"mat-error"),e.k0s()(),e.nrm(142,"div"),e.k0s()()()()()()),2&i&&(e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("disabled",n.balance!==n.totalCashAmount),e.R7$(),e.Y8G("svgIcon","mat_solid:lock"),e.R7$(5),e.SpI(" Importe de la caja: ",e.i5U(30,101,n.balance,"1.2-2")," "),e.R7$(2),e.Y8G("ngClass",n.balance!==n.totalCashAmount?"text-red-500":"text-green-600"),e.R7$(),e.SpI(" Distribuci\xf3n de efectivo por denominaciones: ",e.i5U(33,104,n.totalCashAmount,"1.2-2")," "),e.R7$(2),e.Y8G("formGroup",n.cashDistributionForm),e.R7$(6),e.Y8G("formControlName","b1")("min",0)("max",9999999999),e.R7$(),e.vxM(41,n.cashDistributionForm.get("b1").hasError("required")?41:-1),e.R7$(),e.vxM(42,n.cashDistributionForm.get("b1").hasError("min")||n.cashDistributionForm.get("b1").hasError("max")?42:-1),e.R7$(4),e.Y8G("formControlName","b3")("min",0)("max",9999999999),e.R7$(),e.vxM(47,n.cashDistributionForm.get("b3").hasError("required")?47:-1),e.R7$(),e.vxM(48,n.cashDistributionForm.get("b3").hasError("min")||n.cashDistributionForm.get("b3").hasError("max")?48:-1),e.R7$(4),e.Y8G("formControlName","b5")("min",0)("max",9999999999),e.R7$(),e.vxM(53,n.cashDistributionForm.get("b5").hasError("required")?53:-1),e.R7$(),e.vxM(54,n.cashDistributionForm.get("b5").hasError("min")||n.cashDistributionForm.get("b5").hasError("max")?54:-1),e.R7$(4),e.Y8G("formControlName","b10")("min",0)("max",9999999999),e.R7$(),e.vxM(59,n.cashDistributionForm.get("b10").hasError("required")?59:-1),e.R7$(),e.vxM(60,n.cashDistributionForm.get("b10").hasError("min")||n.cashDistributionForm.get("b10").hasError("max")?60:-1),e.R7$(4),e.Y8G("formControlName","b20")("min",0)("max",9999999999),e.R7$(),e.vxM(65,n.cashDistributionForm.get("b20").hasError("required")?65:-1),e.R7$(),e.vxM(66,n.cashDistributionForm.get("b20").hasError("min")||n.cashDistributionForm.get("b20").hasError("max")?66:-1),e.R7$(4),e.Y8G("formControlName","b50")("min",0)("max",9999999999),e.R7$(),e.vxM(71,n.cashDistributionForm.get("b50").hasError("required")?71:-1),e.R7$(),e.vxM(72,n.cashDistributionForm.get("b50").hasError("min")||n.cashDistributionForm.get("b50").hasError("max")?72:-1),e.R7$(4),e.Y8G("formControlName","b100")("min",0)("max",9999999999),e.R7$(),e.vxM(77,n.cashDistributionForm.get("b100").hasError("required")?77:-1),e.R7$(),e.vxM(78,n.cashDistributionForm.get("b100").hasError("min")||n.cashDistributionForm.get("b100").hasError("max")?78:-1),e.R7$(4),e.Y8G("formControlName","b200")("min",0)("max",9999999999),e.R7$(),e.vxM(83,n.cashDistributionForm.get("b200").hasError("required")?83:-1),e.R7$(),e.vxM(84,n.cashDistributionForm.get("b200").hasError("min")||n.cashDistributionForm.get("b200").hasError("max")?84:-1),e.R7$(4),e.Y8G("formControlName","b500")("min",0)("max",9999999999),e.R7$(),e.vxM(89,n.cashDistributionForm.get("b500").hasError("required")?89:-1),e.R7$(),e.vxM(90,n.cashDistributionForm.get("b500").hasError("min")||n.cashDistributionForm.get("b500").hasError("max")?90:-1),e.R7$(4),e.Y8G("formControlName","b1000")("min",0)("max",9999999999),e.R7$(),e.vxM(95,n.cashDistributionForm.get("b1000").hasError("required")?95:-1),e.R7$(),e.vxM(96,n.cashDistributionForm.get("b1000").hasError("min")||n.cashDistributionForm.get("b1000").hasError("max")?96:-1),e.R7$(3),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","c1")("min",0)("max",9999999999),e.R7$(),e.vxM(103,n.cashDistributionForm.get("c1").hasError("required")?103:-1),e.R7$(),e.vxM(104,n.cashDistributionForm.get("c1").hasError("min")||n.cashDistributionForm.get("c1").hasError("max")?104:-1),e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","c2")("min",0)("max",9999999999),e.R7$(),e.vxM(109,n.cashDistributionForm.get("c2").hasError("required")?109:-1),e.R7$(),e.vxM(110,n.cashDistributionForm.get("c2").hasError("min")||n.cashDistributionForm.get("c2").hasError("max")?110:-1),e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","c5")("min",0)("max",9999999999),e.R7$(),e.vxM(115,n.cashDistributionForm.get("c5").hasError("required")?115:-1),e.R7$(),e.vxM(116,n.cashDistributionForm.get("c5").hasError("min")||n.cashDistributionForm.get("c5").hasError("max")?116:-1),e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","c20")("min",0)("max",9999999999),e.R7$(),e.vxM(121,n.cashDistributionForm.get("c20").hasError("required")?121:-1),e.R7$(),e.vxM(122,n.cashDistributionForm.get("c20").hasError("min")||n.cashDistributionForm.get("c20").hasError("max")?122:-1),e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","m1")("min",0)("max",9999999999),e.R7$(),e.vxM(127,n.cashDistributionForm.get("m1").hasError("required")?127:-1),e.R7$(),e.vxM(128,n.cashDistributionForm.get("m1").hasError("min")||n.cashDistributionForm.get("m1").hasError("max")?128:-1),e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","m3")("min",0)("max",9999999999),e.R7$(),e.vxM(133,n.cashDistributionForm.get("m3").hasError("required")?133:-1),e.R7$(),e.vxM(134,n.cashDistributionForm.get("m3").hasError("min")||n.cashDistributionForm.get("m3").hasError("max")?134:-1),e.R7$(2),e.Y8G("subscriptSizing","dynamic"),e.R7$(3),e.Y8G("formControlName","m5")("min",0)("max",9999999999),e.R7$(),e.vxM(140,n.cashDistributionForm.get("m5").hasError("required")?140:-1),e.R7$(),e.vxM(141,n.cashDistributionForm.get("m5").hasError("min")||n.cashDistributionForm.get("m5").hasError("max")?141:-1))},dependencies:[h.QX,F.Hl,F.$z,x.RG,x.rl,x.nJ,x.TL,C.fS,C.fg,k.m_,k.An,h.YU,s.X1,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.VZ,s.zX,s.j4,s.JD,_.Wk],encapsulation:2,changeDetection:0})}return o})();var Rt=l(40382);const $t=[{path:"",component:c,children:[{path:"admin",component:ge,resolve:{box:T.Co,terminals:Rt.n5}},{path:"history",component:Te,resolve:{boxes:T.KI}},{path:"movements",component:Ve,resolve:{boxMovements:T.Sl}},{path:"closer",component:Et,resolve:{boxes:T.KI,box:T.Co}}]}]}}]);