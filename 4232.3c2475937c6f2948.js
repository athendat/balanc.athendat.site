"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4232],{60725:(B,O,n)=>{n.d(O,{_:()=>m});var E=n(53374),r=n(78645),y=n(59773),u=n(71191),s=n(36236),x=n(57069),C=n(16676),i=n.n(C),I=n(96814),p=n(32296),c=n(30617),e=n(64190),t=n(19212),_=n(84221);function g(o,D){if(1&o){const a=t.EpF();t.TgZ(0,"div",33)(1,"button",34),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.generatePDF("open"))}),t._UZ(2,"mat-icon",35),t.qZA(),t.TgZ(3,"button",34),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.generatePDF("download"))}),t._UZ(4,"mat-icon",35),t.qZA(),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.generatePDF("print"))}),t._UZ(6,"mat-icon",35),t.qZA()()}2&o&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:eye"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:download"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:printer"))}const h=()=>[""];function A(o,D){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const a=D.$implicit;t.xp6(),t.AsE("",t.xi3(2,2,a.total,t.DdM(5,h))," ",a.currency,"")}}function Z(o,D){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.hij(" ",a.merchantInvoice.phoneNumbers[0].stateCode+" "+a.merchantInvoice.phoneNumbers[0].phoneNumber,"")}}function L(o,D){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.Oqu(a.merchantInvoice.emails[0].email)}}function z(o,D){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.Oqu(a.divInSpaces())}}function $(o,D){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.lnq("",a.requestQuotation.address,", ",a.requestQuotation.city,", ",a.requestQuotation.state,", Cuba ")}}const j=()=>["$"];function N(o,D){if(1&o&&(t.TgZ(0,"div",36),t._UZ(1,"div",37),t.TgZ(2,"div",38),t._uU(3),t.qZA(),t.TgZ(4,"div",39),t._uU(5),t.qZA(),t.TgZ(6,"div",40),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"div",40),t._uU(10),t.ALo(11,"currency"),t.qZA()()),2&o){const a=D.$implicit;t.xp6(3),t.Oqu(a.name),t.xp6(2),t.Oqu(a.amount),t.xp6(2),t.AsE("",t.xi3(8,5,a.price,t.DdM(11,h))," ",a.currency,""),t.xp6(3),t.Oqu(t.xi3(11,8,a.quantity,t.DdM(12,j)))}}function U(o,D){1&o&&t._UZ(0,"div",41)}const w=(o,D)=>({"my-4":o,"my-3":D});function f(o,D){if(1&o&&t._UZ(0,"div",42),2&o){const a=t.oxw();t.Q6J("ngClass",t.WLB(1,w,a.quotationInvoice.description,!a.quotationInvoice.description))}}function b(o,D){if(1&o&&(t.TgZ(0,"div",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const a=D.$implicit;t.xp6(),t.AsE("",t.xi3(2,2,a.total,t.DdM(5,h))," ",a.currency,"")}}function T(o,D){1&o&&(t.TgZ(0,"div",44),t._uU(1," OBSERVACIONES"),t.qZA())}function R(o,D){if(1&o&&(t.TgZ(0,"span",45),t._uU(1),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.Oqu(a.quotationInvoice.description)}}function W(o,D){if(1&o&&(t.TgZ(0,"div",46)(1,"div",47)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5,"-"),t.qZA()(),t.TgZ(6,"span",48),t._uU(7),t.qZA()()),2&o){const a=D.$implicit;t.xp6(3),t.hij("",a.percent,"%"),t.xp6(4),t.Oqu(a.description)}}function k(o,D){if(1&o&&(t.TgZ(0,"div",51)(1,"span",52),t._uU(2),t.qZA(),t._UZ(3,"img",53),t.qZA()),2&o){const a=t.oxw(2);t.xp6(2),t.Oqu(a.eQr.name),t.xp6(),t.Q6J("src",a.eQr.qrUrl,t.LSH)}}function F(o,D){if(1&o&&(t.TgZ(0,"div",51)(1,"span",52),t._uU(2),t.qZA(),t._UZ(3,"img",53),t.qZA()),2&o){const a=t.oxw(2);t.xp6(2),t.Oqu(a.tQr.name),t.xp6(),t.Q6J("src",a.tQr.qrUrl,t.LSH)}}function v(o,D){if(1&o&&(t.TgZ(0,"div",49),t.YNc(1,k,4,2,"div",50)(2,F,4,2,"div",50),t.qZA()),2&o){const a=t.oxw();t.xp6(),t.um2(1,a.eQr?1:-1),t.xp6(),t.um2(2,a.tQr?2:-1)}}const P=(o,D)=>[o,D],d=(o,D)=>({"text-lg":o,"text-2xl":D}),S=(o,D)=>({"col-span-3":o,"col-span-2":D});x.vfs=s.I.vfs,i().locale("es");let m=(()=>{class o{constructor(a,M){this.store=a,this._changeDetectorRef=M,this.selectedInvoice$=null,this.selectedInvoice=null,this.authUser=null,this.eQr=null,this.tQr=null,this.totalQuantity=[],this._unsubscribeAll=new r.x}ngOnInit(){this.store.select(E.rk).pipe((0,y.R)(this._unsubscribeAll)).subscribe(a=>{this.linkRequest=a?"/modules/commercial/quotations":"/public/quotation",this.authUser=a,this._changeDetectorRef.markForCheck()}),this.selectedInvoice$=this.store.select(u.xF),this.selectedInvoice$.pipe((0,y.R)(this._unsubscribeAll)).subscribe(a=>{this.selectedInvoice=a,this.merchantInvoice=a.merchantId,this.quotationInvoice=a.quotationId,this.requestQuotation=this.quotationInvoice.requestId,this.totalQuantity=this.getTotalQuantity(this.quotationInvoice),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(a){const l={content:[{columns:[{stack:[{columns:[{stack:[{text:"FACTURA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedInvoice.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedInvoice.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(Q=>[{text:`${Q.total.toFixed(2)} ${Q.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}]},{columns:[{text:"OFERTA",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedInvoice.quotationNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,10,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:80,lineWidth:.5}],width:1},{stack:[{text:this.merchantInvoice.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantInvoice.address}  ${this.merchantInvoice.city}   ${this.merchantInvoice.state}   ${this.merchantInvoice.country}`,alignment:"left",fontSize:8},this.merchantInvoice.phoneNumbers.length>0?{text:`${this.merchantInvoice.phoneNumbers[0].stateCode}  ${this.merchantInvoice.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantInvoice.emails.length>0?{text:`${this.merchantInvoice.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantInvoice.website,alignment:"left",fontSize:8},this.quotationInvoice.paymentMethodData.includeBankAccount?{text:this.divInSpaces(),alignment:"left",fontSize:8}:{}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.quotationInvoice.goodsData.map(Q=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:Q.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:Q.amount,alignment:"center",fontSize:9,width:40},{text:`${Q.price.toFixed(2)} ${Q.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${Q.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(Q=>[{text:`${Q.total.toFixed(2)} ${Q.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.quotationInvoice.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.quotationInvoice.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(Q,K,J)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.quotationInvoice.paymentMethodData.terms.map(H=>[{text:`${H.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:H.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]},"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy?{stack:[{columns:[this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[],width:1}:{stack:[],width:55},this.merchantInvoice.commercialManagement.enzonaQr?{stack:[{text:"Enzona",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"enzonaUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:55},this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[{text:"Transfermovil",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"transfermovilUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:1}],columnGap:15}],width:150,margin:[15,0,0,0]}:{stack:[],width:1}],margin:[0,8,0,0]}],margin:K>1?[40,30,40,15]:[40,50,40,15]},K>1?{text:Q.toString()+" de "+K,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:J.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Factura",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantInvoice.logoUrl,enzonaUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.enzonaQr?this.merchantInvoice.commercialManagement.enzonaQr:"",transfermovilUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.transfermovilQr?this.merchantInvoice.commercialManagement.transfermovilQr:""}};switch(a){case a="download":x.createPdf(l).download();break;case a="open":x.createPdf(l).open();break;case a="print":x.createPdf(l).print()}}getTotalQuantity(a){return a.goodsData.reduce((M,{currency:l})=>{if(!M.some(Q=>Q.currency===l)){const Q=a.goodsData.filter(K=>K.currency===l).map(K=>K.quantity).reduce((K,J)=>K+J,0);M.push({currency:l,total:Q})}return M},[])}getValidity(){return`${i()(this.selectedInvoice.createdAt).format("L")} - ${i()(this.selectedInvoice.createdAt).add(this.selectedInvoice.expirationDays,"days").format("L")}`}divInSpaces(){const a=this.selectedInvoice.bankAccount,M=[];for(let l=0;l<a.length;l++)M.push(a.substring(l,l+4)),l+=3;return M.join("-")}static#t=this.\u0275fac=function(M){return new(M||o)(t.Y36(_.yh),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["invoice-details"]],standalone:!0,features:[t.jDz],decls:78,vars:43,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],["class","flex items-center flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4 justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"whitespace-nowrap","grid","grid-cols-2","gap-y-1",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],["class","col-span-12 mt-16"],["class","col-span-12  border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],["class","col-span-8 font-medium text-md mt-10 text-secondary"],["class","col-span-12 break-words mt-2"],[1,"mt-16","grid","grid-cols-3"],[1,"",3,"ngClass"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],["class","col-span-1 flex justify-end gap-8"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],[1,"flex","justify-between"],[1,"ml-4"],[1,"col-span-1","flex","justify-end","gap-8"],["class","text-center"],[1,"text-center"],[1,"text-md","font-medium","text-secondary"],[1,"w-24","h-24","object-cover","mt-2",3,"src"],["class","col-span-12 grid grid-cols-12 gap-x-1"],["class","col-span-2"],["style","grid-template-columns: 45px auto !important;","class","grid grid-cols-2 text-sm text-secondary w-full"]],template:function(M,l){1&M&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,g,7,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t._uU(7,"FACTURA"),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t._uU(11,"VALIDEZ"),t.qZA(),t.TgZ(12,"div",9),t._uU(13),t.qZA(),t.TgZ(14,"div",8),t._uU(15,"ESTADO"),t.qZA(),t.TgZ(16,"div",9),t._uU(17),t.qZA(),t.TgZ(18,"div",8),t._uU(19,"IMPORTE TOTAL"),t.qZA(),t.TgZ(20,"div",9),t.SjG(21,A,3,6,"div",null,t.x6l),t.qZA(),t.TgZ(23,"div",8),t._uU(24,"OFERTA"),t.qZA(),t.TgZ(25,"a",10),t._uU(26),t.qZA()(),t.TgZ(27,"div",11)(28,"div",12),t._UZ(29,"img",13),t.qZA(),t.TgZ(30,"div",14)(31,"div",9),t._uU(32),t.qZA(),t.TgZ(33,"div"),t._uU(34),t.qZA(),t.YNc(35,Z,2,1,"div")(36,L,2,1,"div"),t.TgZ(37,"div"),t._uU(38),t.qZA(),t.YNc(39,z,2,1,"div"),t.qZA()()(),t.TgZ(40,"div",15)(41,"div",16),t._uU(42),t.qZA(),t.YNc(43,$,2,3,"div"),t.TgZ(44,"div"),t._uU(45),t.qZA(),t.TgZ(46,"div"),t._uU(47),t.qZA()(),t.TgZ(48,"div",17)(49,"div",18),t._uU(50,"PRODUCTO O SERVICIO"),t.qZA(),t.TgZ(51,"div",19),t._uU(52,"CANTIDAD"),t.qZA(),t.TgZ(53,"div",20),t._uU(54,"PRECIO"),t.qZA(),t.TgZ(55,"div",20),t._uU(56,"TOTAL"),t.qZA(),t.SjG(57,N,12,13,"div",54,t.x6l),t.YNc(59,U,1,0,"div",21)(60,f,1,4,"div",22),t.TgZ(61,"div",23),t._uU(62,"TOTAL"),t.qZA(),t.TgZ(63,"div",24),t.SjG(64,b,3,6,"div",55,t.x6l),t.qZA(),t.YNc(66,T,2,0,"div",25)(67,R,2,1,"span",26),t.qZA(),t.TgZ(68,"div",27)(69,"div",28)(70,"div",9),t._uU(71,"T\xe9rminos o condiciones de pago."),t.qZA(),t.TgZ(72,"div",29),t._UZ(73,"img",30),t.TgZ(74,"div",31),t.SjG(75,W,8,2,"div",56,t.x6l),t.qZA()()(),t.YNc(77,v,3,2,"div",32),t.qZA()()()()),2&M&&(t.xp6(2),t.um2(2,l.authUser?-1:2),t.xp6(7),t.hij("#",l.selectedInvoice.no,""),t.xp6(4),t.Oqu(l.getValidity()),t.xp6(4),t.Oqu(l.selectedInvoice.status.toUpperCase()),t.xp6(4),t.wJu(l.totalQuantity),t.xp6(4),t.Q6J("routerLink",t.WLB(31,P,l.linkRequest,l.quotationInvoice._id)),t.xp6(),t.hij("#",l.selectedInvoice.quotationNo,""),t.xp6(3),t.Q6J("src",l.merchantInvoice.logoUrl,t.LSH),t.xp6(3),t.Oqu(l.merchantInvoice.name),t.xp6(2),t.HOy("",l.merchantInvoice.address,", ",l.merchantInvoice.city,", ",l.merchantInvoice.state,", ",l.merchantInvoice.country," "),t.xp6(),t.um2(35,l.merchantInvoice.phoneNumbers.length>0?35:-1),t.xp6(),t.um2(36,l.merchantInvoice.emails.length>0?36:-1),t.xp6(2),t.Oqu(l.merchantInvoice.website),t.xp6(),t.um2(39,l.quotationInvoice.paymentMethodData.includeBankAccount?39:-1),t.xp6(3),t.AsE("",l.requestQuotation.name," ",l.requestQuotation.lastname,""),t.xp6(),t.um2(43,l.requestQuotation.address?43:-1),t.xp6(2),t.AsE("",l.requestQuotation.phoneNumber.stateCode," ",l.requestQuotation.phoneNumber.phoneNumber,""),t.xp6(2),t.Oqu(l.requestQuotation.email),t.xp6(10),t.wJu(l.quotationInvoice.goodsData),t.xp6(2),t.um2(59,l.quotationInvoice.description?-1:59),t.xp6(),t.um2(60,l.quotationInvoice.description?60:-1),t.xp6(),t.Q6J("ngClass",t.WLB(34,d,l.quotationInvoice.description,!l.quotationInvoice.description)),t.xp6(2),t.Q6J("ngClass",t.WLB(37,d,l.quotationInvoice.description,!l.quotationInvoice.description)),t.xp6(),t.wJu(l.totalQuantity),t.xp6(2),t.um2(66,l.quotationInvoice.description?66:-1),t.xp6(),t.um2(67,l.quotationInvoice.description?67:-1),t.xp6(2),t.Q6J("ngClass",t.WLB(40,S,!l.eQr&&!l.tQr||"UseMerchantPayments"!==l.quotationInvoice.paymentMethodData.paymentBy,!(!l.eQr&&!l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy)),t.xp6(4),t.Q6J("src",l.merchantInvoice.logoUrl,t.LSH),t.xp6(2),t.wJu(l.quotationInvoice.paymentMethodData.terms),t.xp6(2),t.um2(77,(l.eQr||l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy?77:-1))},dependencies:[I.H9,p.ot,p.lW,c.Ps,c.Hw,I.mk,e.rH],encapsulation:2,changeDetection:0})}return o})()},14137:(B,O,n)=>{n.d(O,{l:()=>q,u:()=>C});var E=n(58504),r=n(26306),y=n(37398),u=n(19212),s=n(70390),x=n(64190);let q=(()=>{class i{constructor(p){this._invoicesService=p}resolve(p,c){return this._invoicesService.getInvoices()}static#t=this.\u0275fac=function(c){return new(c||i)(u.LFG(s.x))};static#e=this.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(p,c){this._invoicesService=p,this._router=c}resolve(p,c){return this._invoicesService.getInvoiceById(p.params.invoiceId).pipe((0,r.K)(t=>{console.error(t);const _=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(_),(0,E._)(t)}),(0,y.U)(t=>{if(!t.ok){let _=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(_=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(_)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(u.LFG(s.x),u.LFG(x.F0))};static#e=this.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},71191:(B,O,n)=>{n.d(O,{vm:()=>u,xF:()=>y});var E=n(84221);const r=s=>s.invoices,y=(0,E.P1)(r,s=>s.invoice),u=(0,E.P1)(r,s=>s.invoices)},70390:(B,O,n)=>{n.d(O,{x:()=>i});var E=n(69862),r=n(99397),y=n(97214),u=n(20553),s=n(96022),x=n(19212),q=n(84221);const C=u.N.API_URL;let i=(()=>{class I{constructor(c,e){this._httpClient=c,this.store=e}getInvoices(c=0,e=20,t="createdAt",_="desc",g="",h=""){const A=(new E.LE).append("page",c).append("size",e).append("sort",t).append("order",_).append("search",g).append("filter",h);return this._httpClient.get(`${C}/invoices/`,{params:A}).pipe((0,r.b)(Z=>{this.store.dispatch((0,y.Jr)({pagination:Z.pagination})),this.store.dispatch((0,s.Nr)({invoices:Z.dataArr}))}))}getInvoiceById(c){return this._httpClient.get(`${C}/invoices/${c}`).pipe((0,r.b)(e=>{this.store.dispatch((0,s.zm)({invoice:e.data}))}))}createInvoice(c){return this._httpClient.post(`${C}/invoices`,c).pipe((0,r.b)(e=>{this.store.dispatch((0,s.Z$)({invoice:e.data}))}))}updateInvoice(c){return this._httpClient.patch(`${C}/invoices/${c._id}`,c).pipe((0,r.b)(e=>{this.store.dispatch((0,s.aL)({invoice:e.data}))}))}updateStatus(c,e,t=""){return this._httpClient.patch(`${C}/invoices/update-status`,{_id:c,status:e,canceledReason:t}).pipe((0,r.b)(_=>{this.store.dispatch((0,s.aL)({invoice:_.data}))}))}deleteInvoice(c,e=0,t=20,_="createdAt",g="desc",h="",A=""){const Z=(new E.LE).append("page",e).append("size",t).append("sort",_).append("order",g).append("search",h).append("filter",A);return this._httpClient.delete(`${C}/invoices/${c}`,{params:Z}).pipe((0,r.b)(L=>{this.store.dispatch((0,y.Jr)({pagination:L.pagination})),this.store.dispatch((0,s.Nr)({invoices:L.dataArr}))}))}static#t=this.\u0275fac=function(e){return new(e||I)(x.LFG(E.eN),x.LFG(q.yh))};static#e=this.\u0275prov=x.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})()},25021:(B,O,n)=>{n.d(O,{c:()=>I});var E=n(69862),r=n(99397),y=n(37398),u=n(30502),s=n(97214),x=n(20553),q=n(19212),C=n(84221);const i=x.N.API_URL;let I=(()=>{class p{constructor(e,t){this._httpClient=e,this.store=t}getPaymentConditions(e=0,t=20,_="active",g="desc",h=""){const A=(new E.LE).append("page",e).append("size",t).append("sort",_).append("order",g).append("search",h);return this._httpClient.get(`${i}/payment-conditions/`,{params:A}).pipe((0,r.b)(Z=>{this.store.dispatch((0,s.Jr)({pagination:Z.pagination})),this.store.dispatch((0,u.TV)({paymentConditions:Z.dataArr}))}))}getActivePaymentConditions(){return this._httpClient.get(`${i}/payment-conditions/active`).pipe((0,y.U)(e=>e.dataArr),(0,r.b)(e=>{this.store.dispatch((0,u.TV)({paymentConditions:e}))}))}getPaymentConditionById(e){return this._httpClient.get(`${i}/payment-conditions/${e}`).pipe((0,r.b)(t=>{this.store.dispatch((0,u.su)({paymentCondition:t.data}))}))}createPaymentCondition(e){return this._httpClient.post(`${i}/payment-conditions`,e).pipe((0,r.b)(t=>{this.store.dispatch((0,u.UF)({paymentCondition:t.data}))}))}updatePaymentCondition(e){return this._httpClient.patch(`${i}/payment-conditions/${e._id}`,e).pipe((0,r.b)(t=>{this.store.dispatch((0,u.gP)({paymentCondition:t.data}))}))}deletePaymentCondition(e,t=0,_=20,g="active",h="desc",A=""){const Z=(new E.LE).append("page",t).append("size",_).append("sort",g).append("order",h).append("search",A);return this._httpClient.delete(`${i}/payment-conditions/${e}`,{params:Z}).pipe((0,r.b)(L=>{this.store.dispatch((0,s.Jr)({pagination:L.pagination})),this.store.dispatch((0,u.TV)({paymentConditions:L.dataArr}))}))}static#t=this.\u0275fac=function(t){return new(t||p)(q.LFG(E.eN),q.LFG(C.yh))};static#e=this.\u0275prov=q.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},21118:(B,O,n)=>{n.d(O,{i:()=>F});var E=n(53374),r=n(78645),y=n(59773),u=n(84068),s=n(36236),x=n(57069),C=n(16676),i=n.n(C),I=n(96814),p=n(32296),c=n(30617),e=n(64190),t=n(19212),_=n(84221);function g(v,P){if(1&v){const d=t.EpF();t.TgZ(0,"div",31)(1,"button",32),t.NdJ("click",function(){t.CHM(d);const m=t.oxw();return t.KtG(m.generatePDF("open"))}),t._UZ(2,"mat-icon",33),t.qZA(),t.TgZ(3,"button",32),t.NdJ("click",function(){t.CHM(d);const m=t.oxw();return t.KtG(m.generatePDF("download"))}),t._UZ(4,"mat-icon",33),t.qZA(),t.TgZ(5,"button",32),t.NdJ("click",function(){t.CHM(d);const m=t.oxw();return t.KtG(m.generatePDF("print"))}),t._UZ(6,"mat-icon",33),t.qZA()()}2&v&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:eye"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:download"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:printer"))}const h=()=>[""];function A(v,P){if(1&v&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&v){const d=P.$implicit;t.xp6(),t.AsE("",t.xi3(2,2,d.total,t.DdM(5,h))," ",d.currency,"")}}function Z(v,P){if(1&v&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(),t.hij(" ",d.merchantQuotation.phoneNumbers[0].stateCode+" "+d.merchantQuotation.phoneNumbers[0].phoneNumber,"")}}function L(v,P){if(1&v&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(),t.Oqu(d.merchantQuotation.emails[0].email)}}function z(v,P){if(1&v&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(),t.lnq("",d.requestQuotation.address,", ",d.requestQuotation.city,", ",d.requestQuotation.state,", Cuba ")}}const $=()=>["$"];function j(v,P){if(1&v&&(t.TgZ(0,"div",34),t._UZ(1,"div",35),t.TgZ(2,"div",36),t._uU(3),t.qZA(),t.TgZ(4,"div",37),t._uU(5),t.qZA(),t.TgZ(6,"div",38),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.TgZ(9,"div",38),t._uU(10),t.ALo(11,"currency"),t.qZA()()),2&v){const d=P.$implicit;t.xp6(3),t.Oqu(d.name),t.xp6(2),t.Oqu(d.amount),t.xp6(2),t.AsE("",t.xi3(8,5,d.price,t.DdM(11,h))," ",d.currency,""),t.xp6(3),t.Oqu(t.xi3(11,8,d.quantity,t.DdM(12,$)))}}function N(v,P){1&v&&t._UZ(0,"div",39)}const U=(v,P)=>({"my-4":v,"my-3":P});function w(v,P){if(1&v&&t._UZ(0,"div",40),2&v){const d=t.oxw();t.Q6J("ngClass",t.WLB(1,U,d.selectedQuotation.description,!d.selectedQuotation.description))}}function f(v,P){if(1&v&&(t.TgZ(0,"div",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&v){const d=P.$implicit;t.xp6(),t.AsE("",t.xi3(2,2,d.total,t.DdM(5,h))," ",d.currency,"")}}function b(v,P){1&v&&(t.TgZ(0,"div",42),t._uU(1,"OBSERVACIONES"),t.qZA())}function T(v,P){if(1&v&&(t.TgZ(0,"span",43),t._uU(1),t.qZA()),2&v){const d=t.oxw();t.xp6(),t.Oqu(d.selectedQuotation.description)}}function R(v,P){if(1&v&&(t.TgZ(0,"div",44)(1,"div",45)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5,"-"),t.qZA()(),t.TgZ(6,"span",46),t._uU(7),t.qZA()()),2&v){const d=P.$implicit;t.xp6(3),t.hij("",d.percent,"%"),t.xp6(4),t.Oqu(d.description)}}const W=(v,P)=>[v,P],k=(v,P)=>({"text-lg":v,"text-2xl":P});x.vfs=s.I.vfs,i().locale("es");let F=(()=>{class v{constructor(d,S){this.store=d,this._changeDetectorRef=S,this.selectedQuotation$=null,this.selectedQuotation=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new r.x}ngOnInit(){this.store.select(E.rk).pipe((0,y.R)(this._unsubscribeAll)).subscribe(d=>{this.linkRequest=d?"/modules/commercial/request":"/public/request",this.authUser=d,this._changeDetectorRef.markForCheck()}),this.selectedQuotation$=this.store.select(u.$i),this.selectedQuotation$.pipe((0,y.R)(this._unsubscribeAll)).subscribe(d=>{this.selectedQuotation=d,this.merchantQuotation=d.merchantId,this.requestQuotation=d.requestId,this.totalQuantity=this.getTotalQuantity(d),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(d){const m={content:[{columns:[{stack:[{columns:[{stack:[{text:"OFERTA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedQuotation.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedQuotation.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}],width:320},{columns:[{text:"SOLICITUD",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedQuotation.requestNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,7,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:73,lineWidth:.1}],width:1},{stack:[{text:this.merchantQuotation.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantQuotation.address}  ${this.merchantQuotation.city}   ${this.merchantQuotation.state}   ${this.merchantQuotation.country}`,alignment:"left",fontSize:8},this.merchantQuotation.phoneNumbers.length>0?{text:`${this.merchantQuotation.phoneNumbers[0].stateCode}  ${this.merchantQuotation.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantQuotation.emails.length>0?{text:`${this.merchantQuotation.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantQuotation.website,alignment:"left",fontSize:8}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.selectedQuotation.goodsData.map(o=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:o.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:o.amount,alignment:"center",fontSize:9,width:40},{text:`${o.price.toFixed(2)} ${o.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${o.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.selectedQuotation.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.selectedQuotation.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(o,D,a)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.selectedQuotation.paymentMethodData.terms.map(M=>[{text:`${M.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:M.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]}],margin:[0,8,0,0]}],margin:D>1?[40,30,40,15]:[40,70,40,15]},D>1?{text:o.toString()+" de "+D,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:a.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Oferta",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantQuotation.logoUrl}};switch(d){case d="download":x.createPdf(m).download();break;case d="open":x.createPdf(m).open();break;case d="print":x.createPdf(m).print()}}getTotalQuantity(d){return d.goodsData.reduce((S,{currency:m})=>{if(!S.some(o=>o.currency===m)){const o=d.goodsData.filter(D=>D.currency===m).map(D=>D.quantity).reduce((D,a)=>D+a,0);S.push({currency:m,total:o})}return S},[])}getValidity(){return`${i()(this.selectedQuotation.createdAt).format("L")} - ${i()(this.selectedQuotation.createdAt).add(this.selectedQuotation.expirationDays,"days").format("L")}`}static#t=this.\u0275fac=function(S){return new(S||v)(t.Y36(_.yh),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["quotation-details"]],standalone:!0,features:[t.jDz],decls:75,vars:37,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],["class","flex items-center flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4 justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"grid","grid-cols-2","gap-y-1","whitespace-nowrap",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],["class","col-span-12 mt-16"],["class","col-span-12  border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],["class","col-span-8 font-medium text-md mt-10 text-secondary"],["class","col-span-12 break-words mt-2"],[1,"mt-16"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],[1,"flex","justify-between"],[1,"ml-4"],["class","col-span-12 grid grid-cols-12 gap-x-1"],["class","col-span-2"],["style","grid-template-columns: 45px auto !important;","class","grid grid-cols-2 text-sm text-secondary w-full"]],template:function(S,m){1&S&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,g,7,3,"div",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t._uU(7,"OFERTA"),t.qZA(),t.TgZ(8,"div",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t._uU(11,"VALIDEZ"),t.qZA(),t.TgZ(12,"div",9),t._uU(13),t.qZA(),t.TgZ(14,"div",8),t._uU(15,"ESTADO"),t.qZA(),t.TgZ(16,"div",9),t._uU(17),t.qZA(),t.TgZ(18,"div",8),t._uU(19,"IMPORTE TOTAL"),t.qZA(),t.TgZ(20,"div",9),t.SjG(21,A,3,6,"div",null,t.x6l),t.qZA(),t.TgZ(23,"div",8),t._uU(24,"SOLICITUD"),t.qZA(),t.TgZ(25,"a",10),t._uU(26),t.qZA()(),t.TgZ(27,"div",11)(28,"div",12),t._UZ(29,"img",13),t.qZA(),t.TgZ(30,"div",14)(31,"div",9),t._uU(32),t.qZA(),t.TgZ(33,"div"),t._uU(34),t.qZA(),t.YNc(35,Z,2,1,"div")(36,L,2,1,"div"),t.TgZ(37,"div"),t._uU(38),t.qZA()()()(),t.TgZ(39,"div",15)(40,"div",16),t._uU(41),t.qZA(),t.YNc(42,z,2,3,"div"),t.TgZ(43,"div"),t._uU(44),t.qZA(),t.TgZ(45,"div"),t._uU(46),t.qZA()(),t.TgZ(47,"div",17)(48,"div",18),t._uU(49,"PRODUCTO O SERVICIO"),t.qZA(),t.TgZ(50,"div",19),t._uU(51,"CANTIDAD"),t.qZA(),t.TgZ(52,"div",20),t._uU(53,"PRECIO"),t.qZA(),t.TgZ(54,"div",20),t._uU(55,"TOTAL"),t.qZA(),t.SjG(56,j,12,13,"div",47,t.x6l),t.YNc(58,N,1,0,"div",21)(59,w,1,4,"div",22),t.TgZ(60,"div",23),t._uU(61,"TOTAL"),t.qZA(),t.TgZ(62,"div",24),t.SjG(63,f,3,6,"div",48,t.x6l),t.qZA(),t.YNc(65,b,2,0,"div",25)(66,T,2,1,"span",26),t.qZA(),t.TgZ(67,"div",27)(68,"div",9),t._uU(69,"T\xe9rminos o condiciones de pago."),t.qZA(),t.TgZ(70,"div",28),t._UZ(71,"img",29),t.TgZ(72,"div",30),t.SjG(73,R,8,2,"div",49,t.x6l),t.qZA()()()()()()),2&S&&(t.xp6(2),t.um2(2,m.authUser?-1:2),t.xp6(7),t.hij("#",m.selectedQuotation.no,""),t.xp6(4),t.Oqu(m.getValidity()),t.xp6(4),t.Oqu(m.selectedQuotation.status.toUpperCase()),t.xp6(4),t.wJu(m.totalQuantity),t.xp6(4),t.Q6J("routerLink",t.WLB(28,W,m.linkRequest,m.requestQuotation._id)),t.xp6(),t.hij("#",m.selectedQuotation.requestNo,""),t.xp6(3),t.Q6J("src",m.merchantQuotation.logoUrl,t.LSH),t.xp6(3),t.Oqu(m.merchantQuotation.name),t.xp6(2),t.HOy("",m.merchantQuotation.address,", ",m.merchantQuotation.city,", ",m.merchantQuotation.state,", ",m.merchantQuotation.country," "),t.xp6(),t.um2(35,m.merchantQuotation.phoneNumbers.length>0?35:-1),t.xp6(),t.um2(36,m.merchantQuotation.emails.length>0?36:-1),t.xp6(2),t.Oqu(m.merchantQuotation.website),t.xp6(3),t.AsE("",m.requestQuotation.name," ",m.requestQuotation.lastname,""),t.xp6(),t.um2(42,m.requestQuotation.address?42:-1),t.xp6(2),t.AsE("",m.requestQuotation.phoneNumber.stateCode," ",m.requestQuotation.phoneNumber.phoneNumber,""),t.xp6(2),t.Oqu(m.requestQuotation.email),t.xp6(10),t.wJu(m.selectedQuotation.goodsData),t.xp6(2),t.um2(58,m.selectedQuotation.description?-1:58),t.xp6(),t.um2(59,m.selectedQuotation.description?59:-1),t.xp6(),t.Q6J("ngClass",t.WLB(31,k,m.selectedQuotation.description,!m.selectedQuotation.description)),t.xp6(2),t.Q6J("ngClass",t.WLB(34,k,m.selectedQuotation.description,!m.selectedQuotation.description)),t.xp6(),t.wJu(m.totalQuantity),t.xp6(2),t.um2(65,m.selectedQuotation.description?65:-1),t.xp6(),t.um2(66,m.selectedQuotation.description?66:-1),t.xp6(5),t.Q6J("src",m.merchantQuotation.logoUrl,t.LSH),t.xp6(2),t.wJu(m.selectedQuotation.paymentMethodData.terms))},dependencies:[I.H9,p.ot,p.lW,c.Ps,c.Hw,I.mk,e.rH],encapsulation:2,changeDetection:0})}return v})()},78050:(B,O,n)=>{n.d(O,{S:()=>q,x:()=>C});var E=n(58504),r=n(26306),y=n(37398),u=n(19212),s=n(2857),x=n(64190);let q=(()=>{class i{constructor(p){this._quotationsService=p}resolve(p,c){return this._quotationsService.getQuotations()}static#t=this.\u0275fac=function(c){return new(c||i)(u.LFG(s.D))};static#e=this.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(p,c){this._quotationsService=p,this._router=c}resolve(p,c){return this._quotationsService.getQuotationById(p.params.quotationId).pipe((0,r.K)(t=>{console.error(t);const _=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(_),(0,E._)(t)}),(0,y.U)(t=>{if(!t.ok){let _=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(_=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(_)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(u.LFG(s.D),u.LFG(x.F0))};static#e=this.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},84068:(B,O,n)=>{n.d(O,{$i:()=>y,uy:()=>u});var E=n(84221);const r=s=>s.quotations,y=(0,E.P1)(r,s=>s.quotation),u=(0,E.P1)(r,s=>s.quotations)},2857:(B,O,n)=>{n.d(O,{D:()=>p});var E=n(69862),r=n(99397),y=n(97214),u=n(40745),s=n(20553),x=n(96441),q=n(19212),C=n(90621),i=n(84221);const I=s.N.API_URL;let p=(()=>{class c{constructor(t,_,g){this._httpClient=t,this.rolesService=_,this.store=g}getQuotations(t=0,_=20,g="createdAt",h="desc",A="",Z=""){const L=(new E.LE).append("page",t).append("size",_).append("sort",g).append("order",h).append("search",A).append("filter",Z);return this._httpClient.get(`${I}/quotations/`,{params:L}).pipe((0,r.b)(z=>{this.store.dispatch((0,y.Jr)({pagination:z.pagination})),this.store.dispatch((0,x.ZI)({quotations:z.dataArr}))}))}getQuotationById(t){return this._httpClient.get(`${I}/quotations/${t}`).pipe((0,r.b)(_=>{this.store.dispatch((0,x.Yd)({quotation:_.data}))}))}createQuotation(t){return this._httpClient.post(`${I}/quotations`,t).pipe((0,r.b)(_=>{this.store.dispatch((0,x.T9)({quotation:_.data})),this.store.dispatch((0,x.Yd)({quotation:_.data}))}))}updateQuotation(t){return this._httpClient.patch(`${I}/quotations/${t._id}`,t).pipe((0,r.b)(_=>{this.store.dispatch((0,x.qm)({quotation:_.data}))}))}acceptQuotation(t){return this._httpClient.patch(`${I}/quotations/accept`,{_id:t,status:u.qm.Aceptada}).pipe((0,r.b)(_=>{this.store.dispatch((0,x.qm)({quotation:_.data})),this.store.dispatch((0,x.Yd)({quotation:_.data}))}))}rejectQuotation(t,_=""){return this._httpClient.patch(`${I}/quotations/reject`,{_id:t,rejectedReason:_,status:u.qm.Rechazada}).pipe((0,r.b)(g=>{this.store.dispatch((0,x.qm)({quotation:g.data})),this.store.dispatch((0,x.Yd)({quotation:g.data}))}))}deleteQuotation(t,_=0,g=20,h="createdAt",A="desc",Z="",L=""){const z=(new E.LE).append("page",_).append("size",g).append("sort",h).append("order",A).append("search",Z).append("filter",L);return this._httpClient.delete(`${I}/quotations/${t}`,{params:z}).pipe((0,r.b)($=>{this.store.dispatch((0,y.Jr)({pagination:$.pagination})),this.store.dispatch((0,x.ZI)({quotations:$.dataArr}))}))}static#t=this.\u0275fac=function(_){return new(_||c)(q.LFG(E.eN),q.LFG(C.cM),q.LFG(i.yh))};static#e=this.\u0275prov=q.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},40745:(B,O,n)=>{n.d(O,{R8:()=>y,qm:()=>r});var r=function(u){return u.Nueva="Nueva",u.Aceptada="Aceptada",u.Facturada="Facturada",u.Rechazada="Rechazada",u.Vencida="Vencida",u}(r||{});class y{constructor(s){this.paymentMethodId=s._id,this.name=s.name,this.merchantId=s.merchantId,this.terms=s.terms,this.paymentBy=s.paymentBy,this.includeBankAccount=s.includeBankAccount}}},3437:(B,O,n)=>{n.d(O,{d:()=>N});var E=n(78645),r=n(59773),y=n(60224),u=n(36236),s=n(57069),q=n(16676),C=n.n(q),i=n(53374),I=n(32296),p=n(30617),c=n(96814),e=n(19212),t=n(84221);function _(U,w){if(1&U){const f=e.EpF();e.TgZ(0,"div",25)(1,"button",26),e.NdJ("click",function(){e.CHM(f);const T=e.oxw();return e.KtG(T.generatePDF("open"))}),e._UZ(2,"mat-icon",27),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){e.CHM(f);const T=e.oxw();return e.KtG(T.generatePDF("download"))}),e._UZ(4,"mat-icon",27),e.qZA(),e.TgZ(5,"button",26),e.NdJ("click",function(){e.CHM(f);const T=e.oxw();return e.KtG(T.generatePDF("print"))}),e._UZ(6,"mat-icon",27),e.qZA()()}2&U&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:eye"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:download"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:printer"))}function g(U,w){if(1&U&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&U){const f=e.oxw();e.xp6(),e.hij(" ",f.merchantRequest.phoneNumbers[0].stateCode+" "+f.merchantRequest.phoneNumbers[0].phoneNumber,"")}}function h(U,w){if(1&U&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&U){const f=e.oxw();e.xp6(),e.Oqu(f.merchantRequest.emails[0].email)}}function A(U,w){if(1&U&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&U){const f=e.oxw();e.xp6(),e.lnq("",f.selectedRequest.address,", ",f.selectedRequest.city,", ",f.selectedRequest.state,", Cuba ")}}const Z=()=>[""];function L(U,w){if(1&U&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&U){const f=w.$implicit;e.xp6(),e.AsE("",e.xi3(2,2,f.total,e.DdM(5,Z))," ",f.currency,"")}}const z=()=>["$"];function $(U,w){if(1&U&&(e.TgZ(0,"div",28),e._UZ(1,"div",21),e.TgZ(2,"div",29)(3,"div",30),e._uU(4),e.qZA(),e.TgZ(5,"div",31),e._uU(6),e.qZA()(),e.TgZ(7,"div",32),e._uU(8),e.qZA(),e.TgZ(9,"div",33),e._uU(10),e.ALo(11,"currency"),e.qZA(),e.TgZ(12,"div",33),e._uU(13),e.ALo(14,"currency"),e.qZA()()),2&U){const f=w.$implicit;e.xp6(4),e.Oqu(f.name),e.xp6(2),e.hij(" ",f.description," "),e.xp6(2),e.Oqu(f.amount),e.xp6(2),e.AsE("",e.xi3(11,6,f.price,e.DdM(12,Z))," ",f.currency,""),e.xp6(3),e.Oqu(e.xi3(14,9,f.quantity,e.DdM(13,z)))}}function j(U,w){if(1&U&&(e.TgZ(0,"div",34),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&U){const f=w.$implicit;e.xp6(),e.AsE("",e.xi3(2,2,f.total,e.DdM(5,Z))," ",f.currency,"")}}s.vfs=u.I.vfs,C().locale("es");let N=(()=>{class U{constructor(f,b){this.store=f,this._changeDetectorRef=b,this.selectedRequest$=null,this.selectedRequest=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new E.x}ngOnInit(){this.store.select(i.rk).pipe((0,r.R)(this._unsubscribeAll)).subscribe(f=>{this.authUser=f,this._changeDetectorRef.markForCheck()}),this.selectedRequest$=this.store.select(y.V8),this.selectedRequest$.pipe((0,r.R)(this._unsubscribeAll)).subscribe(f=>{this.selectedRequest=f,this.merchantRequest=f.merchantId,this.totalQuantity=this.getTotalQuantity(f),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(f){const T={content:[{columns:[{columns:[this.merchantRequest.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,9,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:77,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:this.merchantRequest.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantRequest.address}, ${this.merchantRequest.city}, ${this.merchantRequest.state}, ${this.merchantRequest.country}`,alignment:"left",fontSize:8},this.merchantRequest.phoneNumbers.length>0?{text:`${this.merchantRequest.phoneNumbers[0].stateCode}  ${this.merchantRequest.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantRequest.emails.length>0?{text:`${this.merchantRequest.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantRequest.website,alignment:"left",fontSize:8}],width:150,margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,5,0,0]},{columns:[{stack:[{text:"SOLICITUD",alignment:"right",fontSize:16},{text:"CREADA EL",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",alignment:"right",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedRequest.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:C()(this.selectedRequest.createdAt).format("L"),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedRequest.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},...this.totalQuantity.map(R=>[{stack:[{text:`${R.total.toFixed(2)} ${R.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}],margin:[0,4,0,0]}])]}],columnGap:10}],margin:[16,0,0,15]},{columns:[{text:"Por",alignment:"center",color:"#7b838e",width:60,fontSize:14,margin:[0,this.selectedRequest.address?17:7,20,0]},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:this.selectedRequest.address?56:33,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:`${this.selectedRequest.name}  ${this.selectedRequest.lastname}`,alignment:"left",fontSize:8,bold:!0,opacity:.8},this.selectedRequest.address?{text:`${this.selectedRequest.address}, ${this.selectedRequest.city}, ${this.selectedRequest.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.selectedRequest.phoneNumber.stateCode} ${this.selectedRequest.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.selectedRequest.email,alignment:"left",lineHeight:1.2,fontSize:8}],lineHeight:1.2,width:150,margin:[15,0,0,0]}],margin:[16,16,0,5]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},...this.selectedRequest.goodsData.map(R=>[{stack:[{columns:[{stack:[{text:R.name,alignment:"left",fontSize:9,bold:!0,opacity:.7},{text:R.description,alignment:"left",fontSize:7,bold:!0,color:"#64748B",opacity:.7}],lineHeight:1.5,width:350},{stack:[{columns:[{text:R.amount,alignment:"center",fontSize:9,width:40},{text:`${R.price.toFixed(2)} ${R.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${R.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:R.description?[0,7,0,0]:[0,0,0,0]}]}],margin:[0,4,0,2]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]}]}]),{columns:[{text:"Total",alignment:"left",fontSize:12,color:"#7b838e"},{stack:[...this.totalQuantity.map(R=>[{stack:[{text:`${R.total.toFixed(2)} ${R.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:12}]}])]}],margin:[0,35,0,0]}],footer:(R,W,k)=>[W>1?{text:R.toString()+" de "+W,alignment:"center",margin:[0,30,0,0]}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:k.width-170,h:40}],margin:[0,30,0,0]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,80],info:{title:"Solicitud",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantRequest.logoUrl}};switch(f){case f="download":s.createPdf(T).download();break;case f="open":s.createPdf(T).open();break;case f="print":s.createPdf(T).print()}}getTotalQuantity(f){return f.goodsData.reduce((b,{currency:T})=>{if(!b.some(R=>R.currency===T)){const R=f.goodsData.filter(W=>W.currency===T).map(W=>W.quantity).reduce((W,k)=>W+k,0);b.push({currency:T,total:R})}return b},[])}static#t=this.\u0275fac=function(b){return new(b||U)(e.Y36(t.yh),e.Y36(e.sBO))};static#e=this.\u0275cmp=e.Xpm({type:U,selectors:[["request-details"]],standalone:!0,features:[e.jDz],decls:65,vars:21,consts:[["cdkScrollable","",1,"flex","w-full","md:justify-center","print:overflow-visible"],[1,"inline-block","p-6","text-left","sm:p-10","print:p-0"],["class","flex items-center justify-end flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4"],[1,"p-16","shadow","w-240","min-w-240","rounded-2xl","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","overflow-hidden"],[1,"grid","w-6/12","grid-rows-2","overflow-hidden","place-items-start","gap-y-12"],[1,"grid","w-full","overflow-hidden","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","place-self-center"],[1,"w-24",3,"src"],[1,"pl-10","overflow-auto","border-l","text-md","break-word"],[1,"font-medium"],[1,"grid","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","text-2xl","text-center","place-self-center","text-secondary"],[1,"grid","ml-auto","gap-x-4","gap-y-1",2,"grid-template-columns","123px auto !important"],[1,"text-3xl","tracking-tight","justify-self-end","text-secondary"],[1,"flex","items-center","text-2xl","font-medium"],[1,"font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"grid","grid-cols-12","mt-8","gap-x-1"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","pl-10","font-medium","text-center","text-md","text-secondary"],[1,"col-span-2","font-medium","text-right","text-md","text-secondary"],[1,"col-span-12","my-4","border-b"],[1,"col-span-12","mt-16"],[1,"col-span-4","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"flex","flex-col","justify-end","col-span-8","text-2xl","font-medium","text-right"],[1,"flex","items-center","justify-end","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"grid","grid-cols-12","col-span-12","gap-x-1"],[1,"col-span-6"],[1,"text-lg","font-medium"],[1,"mt-2","whitespace-pre-line","text-md","text-secondary"],[1,"self-center","col-span-2","pl-10","text-center"],[1,"self-center","col-span-2","text-right"],[1,"col-span-2"],["class","grid grid-cols-12 col-span-12 gap-x-1"],["class","col-span-2"]],template:function(b,T){1&b&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,_,7,3,"div",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10),e._uU(11),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA(),e.YNc(14,g,2,1,"div")(15,h,2,1,"div"),e.qZA()(),e.TgZ(16,"div",11)(17,"div",12),e._uU(18," Por "),e.qZA(),e.TgZ(19,"div",9)(20,"div",10),e._uU(21),e.qZA(),e._UZ(22,"div"),e.YNc(23,A,2,3,"div"),e.TgZ(24,"div"),e._uU(25),e.qZA(),e.TgZ(26,"div"),e._uU(27),e.qZA()()()(),e.TgZ(28,"div",13)(29,"div",14),e._uU(30,"SOLICITUD"),e.qZA(),e.TgZ(31,"div",15),e._uU(32),e.qZA(),e.TgZ(33,"div",16),e._uU(34,"CREADA EL"),e.qZA(),e.TgZ(35,"div",10),e._uU(36),e.ALo(37,"date"),e.qZA(),e.TgZ(38,"div",16),e._uU(39,"ESTADO"),e.qZA(),e.TgZ(40,"div",10),e._uU(41),e.qZA(),e.TgZ(42,"div",16),e._uU(43,"IMPORTE TOTAL"),e.qZA(),e.TgZ(44,"div",10),e.SjG(45,L,3,6,"div",null,e.x6l),e.qZA()()(),e.TgZ(47,"div",17)(48,"div",18),e._uU(49,"PRODUCTO O SERVICIO"),e.qZA(),e.TgZ(50,"div",19),e._uU(51,"CANTIDAD"),e.qZA(),e.TgZ(52,"div",20),e._uU(53,"PRECIO"),e.qZA(),e.TgZ(54,"div",20),e._uU(55,"TOTAL"),e.qZA(),e.SjG(56,$,15,14,"div",35,e.x6l),e._UZ(58,"div",21)(59,"div",22),e.TgZ(60,"div",23),e._uU(61,"TOTAL"),e.qZA(),e.TgZ(62,"div",24),e.SjG(63,j,3,6,"div",36,e.x6l),e.qZA()()()()()),2&b&&(e.xp6(2),e.um2(2,T.authUser?-1:2),e.xp6(6),e.Q6J("src",T.merchantRequest.logoUrl,e.LSH),e.xp6(3),e.Oqu(T.merchantRequest.name),e.xp6(2),e.HOy("",T.merchantRequest.address,", ",T.merchantRequest.city,", ",T.merchantRequest.state,", ",T.merchantRequest.country," "),e.xp6(),e.um2(14,T.merchantRequest.phoneNumbers.length>0?14:-1),e.xp6(),e.um2(15,T.merchantRequest.emails.length>0?15:-1),e.xp6(6),e.AsE("",T.selectedRequest.name," ",T.selectedRequest.lastname,""),e.xp6(2),e.um2(23,T.selectedRequest.address?23:-1),e.xp6(2),e.AsE("",T.selectedRequest.phoneNumber.stateCode," ",T.selectedRequest.phoneNumber.phoneNumber,""),e.xp6(2),e.Oqu(T.selectedRequest.email),e.xp6(5),e.hij("#",T.selectedRequest.no,""),e.xp6(4),e.Oqu(e.xi3(37,18,T.selectedRequest.createdAt,"dd/MM/yyyy")),e.xp6(5),e.Oqu(T.selectedRequest.status.toUpperCase()),e.xp6(4),e.wJu(T.totalQuantity),e.xp6(11),e.wJu(T.selectedRequest.goodsData),e.xp6(7),e.wJu(T.totalQuantity))},dependencies:[c.H9,c.uU,I.ot,I.lW,p.Ps,p.Hw],encapsulation:2,changeDetection:0})}return U})()},17598:(B,O,n)=>{n.d(O,{N:()=>I,r:()=>i});var E=n(9315),r=n(58504),y=n(26306),u=n(37398),s=n(19212),x=n(47363),q=n(25021),C=n(64190);let i=(()=>{class p{constructor(e,t){this._requestsService=e,this._paymentMethods=t}resolve(e,t){return(0,E.D)([this._requestsService.getRequests(),this._paymentMethods.getActivePaymentConditions()])}static#t=this.\u0275fac=function(t){return new(t||p)(s.LFG(x.r),s.LFG(q.c))};static#e=this.\u0275prov=s.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})(),I=(()=>{class p{constructor(e,t){this._requestsService=e,this._router=t}resolve(e,t){return this._requestsService.getRequestById(e.params.requestId).pipe((0,y.K)(g=>{console.error(g);const h=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(h),(0,r._)(g)}),(0,u.U)(g=>{if(!g.ok){let h=t.url.split("/").slice(0,-1).join("/");t.url.includes("public")&&(h=t.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(h)}}))}static#t=this.\u0275fac=function(t){return new(t||p)(s.LFG(x.r),s.LFG(C.F0))};static#e=this.\u0275prov=s.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},60224:(B,O,n)=>{n.d(O,{Mu:()=>u,V8:()=>y});var E=n(84221);const r=s=>s.requests,y=(0,E.P1)(r,s=>s.request),u=(0,E.P1)(r,s=>s.requests)},47363:(B,O,n)=>{n.d(O,{r:()=>e});var E=n(69862),r=n(99397),y=n(97214),s=function(t){return t.Nueva="Nueva",t.Aceptada="Aceptada",t.Rechazada="Rechazada",t}(s||{}),q=n(20553),C=n(62805),i=n(19212),I=n(90621),p=n(84221);const c=q.N.API_URL;let e=(()=>{class t{constructor(g,h,A){this._httpClient=g,this.rolesService=h,this.store=A}getRequests(g=0,h=20,A="createdAt",Z="desc",L="",z=""){const $=(new E.LE).append("page",g).append("size",h).append("sort",A).append("order",Z).append("search",L).append("filter",z);return this._httpClient.get(`${c}/requests/`,{params:$}).pipe((0,r.b)(j=>{this.store.dispatch((0,y.Jr)({pagination:j.pagination})),this.store.dispatch((0,C.g1)({requests:j.dataArr}))}))}getRequestById(g){return this._httpClient.get(`${c}/requests/${g}`).pipe((0,r.b)(h=>{this.store.dispatch((0,C.xR)({request:h.data}))}))}createRequest(g){return this._httpClient.post(`${c}/requests`,g).pipe((0,r.b)(h=>{this.store.dispatch((0,C.hG)({request:h.data}))}))}updateRequest(g){return this._httpClient.patch(`${c}/requests/${g._id}`,g).pipe((0,r.b)(h=>{this.store.dispatch((0,C.WN)({request:h.data}))}))}rejectRequest(g,h){return this._httpClient.patch(`${c}/requests/reject`,{_id:g,rejectedReason:h,status:s.Rechazada}).pipe((0,r.b)(A=>{this.store.dispatch((0,C.WN)({request:A.data}))}))}deleteRequest(g,h=0,A=20,Z="createdAt",L="desc",z="",$=""){const j=(new E.LE).append("page",h).append("size",A).append("sort",Z).append("order",L).append("search",z).append("filter",$);return this._httpClient.delete(`${c}/requests/${g}`,{params:j}).pipe((0,r.b)(N=>{this.store.dispatch((0,y.Jr)({pagination:N.pagination})),this.store.dispatch((0,C.g1)({requests:N.dataArr}))}))}static#t=this.\u0275fac=function(h){return new(h||t)(i.LFG(E.eN),i.LFG(I.cM),i.LFG(p.yh))};static#e=this.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},8606:(B,O,n)=>{n.d(O,{g:()=>e});var E=n(96814),r=n(56223),y=n(32296),u=n(17700),s=n(64170),x=n(30617),q=n(24516),C=n(94748),i=n(19212);function I(t,_){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," EL motivo del rechazo es obligatorio "),i.qZA())}function p(t,_){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," EL motivo del rechazo debe contener entre 3 y 1000 caracteres. "),i.qZA())}const c=t=>({"cursor-not-allowed":t});let e=(()=>{class t{constructor(g,h){this.data=g,this._dialogRef=h,this.rejectControl=new r.NI(""),this.rejectedReasonRequired=!0,this.rejectedReasonRequired=g.rejectedReasonRequired}ngOnInit(){this.rejectControl.setValidators(this.rejectedReasonRequired?[r.kI.required,r.kI.minLength(3),r.kI.maxLength(1e3)]:[r.kI.minLength(3),r.kI.maxLength(1e3)]),this.rejectControl.setValue(this.data.rejectedReason)}accept(){this._dialogRef.close({reason:this.rejectControl.value})}cancel(){this._dialogRef.close()}static#t=this.\u0275fac=function(h){return new(h||t)(i.Y36(u.WI),i.Y36(u.so))};static#e=this.\u0275cmp=i.Xpm({type:t,selectors:[["commercial-reject-confirm-dialog"]],standalone:!0,features:[i.jDz],decls:28,vars:15,consts:[[1,"h-full","ng-star-inserted"],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","h-full"],[1,"block","w-full"],[1,"flex","flex-col","items-center","flex-auto","p-8","pb-4","sm:flex-row","sm:items-start","sm:pb-6"],["ng-reflect-ng-class","[object Object]",1,"flex","items-center","justify-center","w-10","h-10","text-blue-600","bg-blue-100","rounded-full","flex-0","sm:mr-4","dark:text-blue-50","dark:bg-blue-600","ng-star-inserted"],["role","img","aria-hidden","true","ng-reflect-svg-icon","heroicons_outline:question-mar","data-mat-icon-type","svg","data-mat-icon-name","question-mark-circle","data-mat-icon-namespace","heroicons_outline",1,"text-current","mat-icon","notranslate","mat-icon-no-color"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","fit","","height","100%","width","100%","preserveAspectRatio","xMidYMid meet","focusable","false"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col","items-center","mt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","ng-star-inserted"],[1,"text-xl","font-medium","leading-6","ng-star-inserted"],[1,"text-secondary","ng-star-inserted"],[1,"pb-6","pl-8","pr-8","mt-10","sm:mt-0","sm:pl-22",3,"autocomplete"],[1,"w-full","fuse-mat-textarea"],["matPrefix","","svgIcon","mat_solid:subject",1,"hidden","sm:flex","icon-size-5"],["matInput","",3,"formControl","placeholder","minLength","maxLength","required"],[1,"flex","flex-wrap","justify-center","px-6","py-4","space-x-3","tems-center","md:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10","ng-star-inserted"],["mat-stroked-button","",3,"click"],["mat-flat-button","","mat-button","",3,"color","disabled","ngClass","click"]],template:function(h,A){1&h&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),i.O4$(),i.TgZ(7,"svg",7),i._UZ(8,"path",8),i.qZA()()(),i.kcU(),i.TgZ(9,"div",9)(10,"div",10),i._uU(11),i.qZA(),i.TgZ(12,"div",11),i._uU(13),i.qZA()()(),i.TgZ(14,"form",12)(15,"div")(16,"mat-form-field",13)(17,"mat-label"),i._uU(18,"Motivo"),i.qZA(),i._UZ(19,"mat-icon",14)(20,"textarea",15),i.YNc(21,I,2,0,"mat-error")(22,p,2,0,"mat-error"),i.qZA()()()()(),i.TgZ(23,"div",16)(24,"button",17),i.NdJ("click",function(){return A.cancel()}),i._uU(25,"Cancelar"),i.qZA(),i.TgZ(26,"button",18),i.NdJ("click",function(){return A.accept()}),i._uU(27," Aceptar "),i.qZA()()()()),2&h&&(i.xp6(11),i.Oqu(A.data.title),i.xp6(2),i.Oqu(A.data.message),i.xp6(),i.Q6J("autocomplete","off"),i.xp6(6),i.Q6J("formControl",A.rejectControl)("placeholder","Escriba el motivo del rechazo")("minLength",3)("maxLength",1e3)("required",A.rejectedReasonRequired),i.xp6(),i.um2(21,A.rejectControl.hasError("required")?21:-1),i.xp6(),i.um2(22,A.rejectControl.hasError("maxlength")||A.rejectControl.hasError("minlength")?22:-1),i.xp6(4),i.Q6J("color","primary")("disabled",A.rejectControl.invalid)("ngClass",i.VKq(13,c,A.rejectControl.invalid)))},dependencies:[u.Is,s.lN,s.KE,s.hX,s.TO,s.qo,q.c,q.Nt,x.Ps,x.Hw,y.ot,y.lW,E.mk,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.oH],encapsulation:2,data:{animation:C.L},changeDetection:0})}return t})()}}]);