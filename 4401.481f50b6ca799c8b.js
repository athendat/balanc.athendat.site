"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4401],{4401:(_e,g,i)=>{i.r(g),i.d(g,{default:()=>fe});var a=i(56223),f=i(96814),Z=i(55940),x=i(32296),C=i(30617),d=i(98525),b=i(24516),c=i(64170),u=i(61545),v=i(22096),T=i(78645),_=i(37398),l=i(59773),F=i(64716),A=i(94748),z=i(88458),N=i(42090),q=i(20553),U=i(60738),e=i(19212),y=i(94900),I=i(56278),E=i(59298),M=i(93217),k=i(54855),J=i(22939),w=i(64190),W=i(84221),L=i(71088),Q=i(23680);const S=["wizardMerchantNgForm"],D=["logoFileInput"];function Y(t,n){if(1&t&&(e.TgZ(0,"fuse-alert",36),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.Q6J("type",r.alert.type)("showIcon",!1),e.xp6(),e.hij(" ",r.alert.message," ")}}function B(t,n){1&t&&e._uU(0,"Informaci\xf3n general")}function R(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio es obligatorio. "),e.qZA())}function O(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del negocio debe contener entre 3 y 40 caracteres. "),e.qZA())}function j(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas no deben superar los 10 caracteres. "),e.qZA())}function G(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas del negocio son obligatorias. "),e.qZA())}function P(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Las siglas del negocio no presentan un formato v\xe1lido. "),e.qZA())}function $(t,n){if(1&t&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&t){const r=n.$implicit;e.Q6J("value",r.name),e.xp6(),e.hij(" ",r.name," ")}}function H(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un sector. "),e.qZA())}function V(t,n){1&t&&(e.TgZ(0,"mat-label"),e._uU(1,"Tel\xe9fonos"),e.qZA())}function X(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe contener entre 7 d\xedgitos. "),e.qZA())}function K(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.qZA())}function ee(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.qZA())}function te(t,n){if(1&t&&(e.TgZ(0,"mat-form-field",38),e.YNc(1,V,2,0,"mat-label"),e._UZ(2,"input",39),e.TgZ(3,"mat-select",40)(4,"mat-select-trigger")(5,"span",41)(6,"span",42),e._uU(7),e.qZA()()(),e.TgZ(8,"mat-option",37)(9,"span",41),e._UZ(10,"span",43),e.TgZ(11,"span",44),e._uU(12),e.ALo(13,"titlecase"),e.qZA(),e.TgZ(14,"span",45),e._uU(15),e.qZA()()()(),e.YNc(16,X,2,0,"mat-error")(17,K,2,0,"mat-error")(18,ee,2,0,"mat-error"),e.qZA()),2&t){const r=n.$implicit,s=n.$index,o=e.oxw();e.xp6(),e.um2(1,0===s?1:-1),e.xp6(),e.Q6J("type","tel")("formControl",r.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",7),e.xp6(),e.Q6J("formControl",r.get("stateCode")),e.xp6(4),e.Oqu(o.wizardMerchantForm.get("step1.phoneNumbers").value[s].stateCode),e.xp6(),e.Q6J("value","+535"),e.xp6(4),e.Oqu(e.lcZ(13,14,"celular")),e.xp6(3),e.Oqu("+535"),e.xp6(),e.um2(16,r.get("phoneNumber").hasError("minlength")||r.get("phoneNumber").hasError("maxlength")?16:-1),e.xp6(),e.um2(17,r.get("phoneNumber").hasError("pattern")?17:-1),e.xp6(),e.um2(18,r.get("phoneNumber").hasError("required")?18:-1)}}function oe(t,n){1&t&&(e.TgZ(0,"mat-label"),e._uU(1,"Correos Electr\xf3nicos"),e.qZA())}function re(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function ae(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nico es obligatorio. "),e.qZA())}function ne(t,n){if(1&t&&(e.TgZ(0,"mat-form-field",38),e.YNc(1,oe,2,0,"mat-label"),e._UZ(2,"mat-icon",21)(3,"input",46),e.YNc(4,re,2,0,"mat-error")(5,ae,2,0,"mat-error"),e.qZA()),2&t){const r=n.$implicit,s=n.$index;e.xp6(),e.um2(1,0===s?1:-1),e.xp6(),e.Q6J("svgIcon","mat_solid:email"),e.xp6(),e.Q6J("formControl",r.get("email"))("spellcheck",!1),e.xp6(),e.um2(4,r.get("email").hasError("email")?4:-1),e.xp6(),e.um2(5,r.get("email").hasError("required")?5:-1)}}function ie(t,n){1&t&&e._uU(0,"Domicilio")}function se(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n es obligatoria. "),e.qZA())}function me(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n debe contener entre 3 y 100 caracteres. "),e.qZA())}function le(t,n){if(1&t&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&t){const r=n.$implicit;e.Q6J("value",r),e.xp6(),e.hij(" ",r," ")}}function ce(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function ue(t,n){if(1&t&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&t){const r=n.$implicit;e.Q6J("value",r.city),e.xp6(),e.hij(" ",r.city," ")}}function pe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function de(t,n){1&t&&(e.TgZ(0,"span"),e._uU(1," Crear Negocio "),e.qZA())}function he(t,n){1&t&&e._UZ(0,"mat-progress-spinner",35),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}const ge=q.N.DOMAIN,fe=[{path:"",component:(()=>{class t{constructor(r,s,o,m,p,h,Ze,xe,Ce,be,ve){this._merchantsService=r,this._changeDetectorRef=s,this._formBuilder=o,this._fuseConfirmationService=m,this._imagesService=p,this._locationService=h,this._authService=Ze,this._snackBar=xe,this._router=Ce,this.store=be,this.breakpointObserver=ve,this.domain="",this.merchant=null,this.cities=[],this.domainCode="",this.domains=[],this.isLoading=!1,this.stateCode="",this.states=[],this.statesCodes=[],this.stateSelected="",this.user=null,this.user$=(0,v.of)(null),this._unsubscribeAll=new T.x,this.domain=ge,this.stepperOrientation=this.breakpointObserver.observe("(min-width: 800px)").pipe((0,_.U)(({matches:Te})=>Te?"horizontal":"vertical"))}ngOnInit(){this._merchantsService.domains$.pipe((0,l.R)(this._unsubscribeAll)).subscribe(s=>{this.domains=s,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,l.R)(this._unsubscribeAll)).subscribe(s=>{this.states=s,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,l.R)(this._unsubscribeAll)).subscribe(s=>{this.statesCodes=s,this._changeDetectorRef.markForCheck()}),this.wizardMerchantForm=this._formBuilder.group({step1:this._formBuilder.group({name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],abbr:["",[a.kI.required,a.kI.maxLength(10),a.kI.pattern("^[a-zA-Z0-9]{1,10}$")]],domain:["",[a.kI.required]],description:["",[a.kI.maxLength(1e3)]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([])}),step2:this._formBuilder.group({address:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],state:["",[a.kI.required]],city:["",[a.kI.required]],country:[{value:"Cuba",disabled:!0},[a.kI.required]]})}),this.wizardMerchantForm.get("step2.state")?.valueChanges.pipe((0,l.R)(this._unsubscribeAll)).subscribe(s=>{this._getCitiesByState(s),this._changeDetectorRef.markForCheck()}),this.addEmailField(),this.addPhoneNumberField()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const r=this._formBuilder.group({email:["",[a.kI.required,a.kI.email,a.kI.maxLength(255)]],label:["",[a.kI.minLength(3),a.kI.maxLength(255)]]});this.wizardMerchantForm.get("step1.emails").push(r),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const r=this._formBuilder.group({stateCode:["+535",[a.kI.required]],phoneNumber:["",[a.kI.required,a.kI.minLength(7),a.kI.maxLength(7),z.L.onlyNumbersPattern()]],label:["",[a.kI.minLength(3),a.kI.maxLength(255)]]});this.wizardMerchantForm.get("step1.phoneNumbers").push(r),this._changeDetectorRef.markForCheck()}createMerchant(){const r=this.wizardMerchantForm.getRawValue(),s={...r.step1,...r.step2};this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.R)(this._unsubscribeAll)).subscribe(m=>{"confirmed"===m&&(this.isLoading=!0,this._changeDetectorRef.markForCheck(),this._merchantsService.createMerchant(s).pipe((0,l.R)(this._unsubscribeAll),(0,F.x)(()=>{this.isLoading=!1,this._changeDetectorRef.markForCheck()})).subscribe(({data:p})=>{p&&(this._snackBar.openFromComponent(N.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:p.createMerchant.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._authService.signInUsingToken().pipe((0,l.R)(this._unsubscribeAll)).subscribe(()=>this._router.navigate(["profile"])))}))})}clearForm(){this.wizardMerchantNgForm.resetForm()}trackByFn(r,s){return s.id||r}_getCitiesByState(r){r!==this.stateSelected&&this._locationService.getCitiesByState(r).subscribe(s=>{this.cities=s,this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(y.S),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(I.R),e.Y36(E.C),e.Y36(M.a),e.Y36(k.e),e.Y36(J.ux),e.Y36(w.F0),e.Y36(W.yh),e.Y36(L.Yg))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ath-wizard"]],viewQuery:function(s,o){if(1&s&&(e.Gf(S,5),e.Gf(D,5)),2&s){let m;e.iGM(m=e.CRH())&&(o.wizardMerchantNgForm=m.first),e.iGM(m=e.CRH())&&(o._logoFileInput=m.first)}},standalone:!0,features:[e.jDz],decls:104,vars:54,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","items-center","flex-auto","p-3","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"mt-2","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-5xl","text-primary"],[1,"mt-8","shadow","sm:mt-12","p-y-6","pb-7","sm:p-10","sm:pb-7","rounded-2xl","bg-card"],["class","mb-8",3,"type","showIcon"],["wizardBusinessNgForm","ngForm",1,"overflow-hidden","p-y-8","sm:p-4",3,"formGroup"],["wizardBusinessNgForm",""],["linear","",3,"orientation"],["stepper",""],[3,"formGroupName","stepControl"],["wizardStep1",""],["matStepLabel",""],[1,"my-6","font-medium"],[1,"flex","mb-6"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","maxlength"],["abbrT",""],[3,"formControlName"],[1,"w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],[1,"text-right"],[1,"flex","justify-end"],["mat-flat-button","","type","button","matStepperNext","",1,"px-8",3,"color","disabled"],["wizardStep2",""],[1,"flex","flex-col","gap-6","mb-6","gt-xs:flex-row"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["required","",3,"formControlName"],["value","Cuba"],[1,"flex","justify-between"],["mat-flat-button","","type","button","matStepperPrevious","",1,"px-8","mr-2",3,"color"],["mat-flat-button","","type","button",1,"px-8",3,"color","disabled","click"],[3,"diameter","mode"],[1,"mb-8",3,"type","showIcon"],[3,"value"],[1,"flex-auto"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],["matInput","","required","",3,"formControl","spellcheck"],["class","flex-auto "],["class","flex-auto"]],template:function(s,o){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," Est\xe1 solo a tres pasos de crear su primer negocio. "),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Y,2,3,"fuse-alert",5),e.TgZ(7,"form",6,7)(9,"mat-stepper",8,9),e.ALo(11,"async"),e.TgZ(12,"mat-step",10,11),e.YNc(14,B,1,0,"ng-template",12),e.TgZ(15,"p",13),e._uU(16," Ingrese la informaci\xf3n m\xednima necesaria para que sus clientes conozcan el negocio. "),e.qZA(),e.TgZ(17,"div",14)(18,"mat-form-field",15)(19,"mat-label"),e._uU(20,"Nombre"),e.qZA(),e._UZ(21,"input",16),e.YNc(22,R,2,0,"mat-error")(23,O,2,0,"mat-error"),e.qZA()(),e.TgZ(24,"div",14)(25,"mat-form-field",15)(26,"mat-label"),e._uU(27,"Siglas"),e.qZA(),e._UZ(28,"input",17,18),e.TgZ(30,"mat-hint"),e._uU(31),e.qZA(),e.YNc(32,j,2,0,"mat-error")(33,G,2,0,"mat-error")(34,P,2,0,"mat-error"),e.qZA()(),e.TgZ(35,"div",14)(36,"mat-form-field",15)(37,"mat-label"),e._uU(38,"Sector"),e.qZA(),e.TgZ(39,"mat-select",19),e.SjG(40,$,2,2,"mat-option",37,o.trackByFn),e.qZA(),e.TgZ(42,"mat-hint"),e._uU(43,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.qZA(),e.YNc(44,H,2,0,"mat-error"),e.qZA()(),e.TgZ(45,"div",14),e.SjG(46,te,19,16,"mat-form-field",47,o.trackByFn),e.qZA(),e.TgZ(48,"div",14),e.SjG(49,ne,6,6,"mat-form-field",48,o.trackByFn),e.qZA(),e.TgZ(51,"div",14)(52,"mat-form-field",20)(53,"mat-label"),e._uU(54,"Descripci\xf3n del Negocio"),e.qZA(),e._UZ(55,"mat-icon",21)(56,"textarea",22),e.TgZ(57,"mat-hint",23),e._uU(58),e.qZA()()(),e.TgZ(59,"div",24)(60,"button",25),e._uU(61," Avanzar "),e.qZA()()(),e.TgZ(62,"mat-step",10,26),e.YNc(64,ie,1,0,"ng-template",12),e.TgZ(65,"p",13),e._uU(66," La direcci\xf3n donde radica el negocio aporta confianza a los clientes a la hora de tomar una decisi\xf3n de compra. "),e.qZA(),e.TgZ(67,"div",27)(68,"mat-form-field",15)(69,"mat-label"),e._uU(70,"Direcci\xf3n"),e.qZA(),e._UZ(71,"mat-icon",21)(72,"input",28),e.YNc(73,se,2,0,"mat-error")(74,me,2,0,"mat-error"),e.qZA(),e.TgZ(75,"mat-form-field",15)(76,"mat-label"),e._uU(77,"Provincia"),e.qZA(),e._UZ(78,"mat-icon",29),e.TgZ(79,"mat-select",30),e.SjG(80,le,2,2,"mat-option",37,o.trackByFn),e.qZA(),e.YNc(82,ce,2,0,"mat-error"),e.qZA(),e.TgZ(83,"mat-form-field",15)(84,"mat-label"),e._uU(85,"Municipio"),e.qZA(),e._UZ(86,"mat-icon",29),e.TgZ(87,"mat-select",30),e.SjG(88,ue,2,2,"mat-option",37,o.trackByFn),e.qZA(),e.YNc(90,pe,2,0,"mat-error"),e.qZA(),e.TgZ(91,"mat-form-field",15)(92,"mat-label"),e._uU(93,"Pa\xeds"),e.qZA(),e.TgZ(94,"mat-select",30)(95,"mat-option",31),e._uU(96,"Cuba"),e.qZA()(),e._UZ(97,"mat-icon",29),e.qZA()(),e.TgZ(98,"div",32)(99,"button",33),e._uU(100," Regresar "),e.qZA(),e.TgZ(101,"button",34),e.NdJ("click",function(){return o.createMerchant()}),e.YNc(102,de,2,0,"span")(103,he,1,2,"mat-progress-spinner",35),e.qZA()()()()()()()()()),2&s){const m=e.MAs(13),p=e.MAs(29),h=e.MAs(63);e.xp6(6),e.um2(6,o.alert?6:-1),e.xp6(),e.Q6J("formGroup",o.wizardMerchantForm),e.xp6(2),e.Q6J("orientation",e.lcZ(11,52,o.stepperOrientation)),e.xp6(3),e.Q6J("formGroupName","step1")("stepControl",o.wizardMerchantForm.get("step1")),e.xp6(9),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.xp6(),e.um2(22,o.wizardMerchantForm.get("step1.name").hasError("required")?22:-1),e.xp6(),e.um2(23,o.wizardMerchantForm.get("step1.name").hasError("maxlength")||o.wizardMerchantForm.get("step1.name").hasError("minlength")?23:-1),e.xp6(5),e.Q6J("type","text")("formControlName","abbr")("maxlength",10),e.xp6(3),e.AsE("Direcci\xf3n de su cat\xe1logo: https://",p.value,".",o.domain,""),e.xp6(),e.um2(32,o.wizardMerchantForm.get("step1.abbr").hasError("maxlength")?32:-1),e.xp6(),e.um2(33,o.wizardMerchantForm.get("step1.abbr").hasError("required")?33:-1),e.xp6(),e.um2(34,o.wizardMerchantForm.get("step1.abbr").hasError("pattern")?34:-1),e.xp6(5),e.Q6J("formControlName","domain"),e.xp6(),e.wJu(o.domains),e.xp6(4),e.um2(44,o.wizardMerchantForm.get("step1.domain").hasError("required")?44:-1),e.xp6(2),e.wJu(o.wizardMerchantForm.get("step1.phoneNumbers").controls),e.xp6(3),e.wJu(o.wizardMerchantForm.get("step1.emails").controls),e.xp6(6),e.Q6J("svgIcon","mat_solid:subject"),e.xp6(),e.Q6J("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.xp6(2),e.hij("",(null==o.wizardMerchantForm.get("step1.description").value?null:o.wizardMerchantForm.get("step1.description").value.length)||0,"/1000"),e.xp6(2),e.Q6J("color","primary")("disabled",m.stepControl.pristine||m.stepControl.invalid),e.xp6(2),e.Q6J("formGroupName","step2")("stepControl",o.wizardMerchantForm.get("step2")),e.xp6(9),e.Q6J("svgIcon","heroicons_solid:home"),e.xp6(),e.Q6J("type","text")("formControlName","address")("minlength",3)("maxlength",255),e.xp6(),e.um2(73,o.wizardMerchantForm.get("step2.address").hasError("required")?73:-1),e.xp6(),e.um2(74,o.wizardMerchantForm.get("step2.address").hasError("maxlength")||o.wizardMerchantForm.get("step2.address").hasError("minlength")?74:-1),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(),e.Q6J("formControlName","state"),e.xp6(),e.wJu(o.states),e.xp6(2),e.um2(82,o.wizardMerchantForm.get("step2.state").hasError("required")?82:-1),e.xp6(4),e.Q6J("svgIcon","mat_solid:location_on"),e.xp6(),e.Q6J("formControlName","city"),e.xp6(),e.wJu(o.cities),e.xp6(2),e.um2(90,o.wizardMerchantForm.get("step2.city").hasError("required")?90:-1),e.xp6(4),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","mat_solid:public"),e.xp6(2),e.Q6J("color","accent"),e.xp6(2),e.Q6J("color","primary")("disabled",o.isLoading||h.stepControl.invalid),e.xp6(),e.um2(102,o.isLoading?-1:102),e.xp6(),e.um2(103,o.isLoading?103:-1)}},dependencies:[a.u5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.wO,a.nD,U.W,x.ot,x.lW,c.lN,c.KE,c.hX,c.bx,c.TO,c.qo,C.Ps,C.Hw,b.c,b.Nt,Z.Cq,Z.Ou,d.LD,d.gD,d.$L,Q.ey,u.T5,u.C0,u.VY,u.Vq,u.Ic,u.fd,a.UX,a.oH,a.sg,a.u,a.x0,f.rS,f.Ov],encapsulation:2,data:{animation:A.L}})}return t})(),resolve:{}}]}}]);