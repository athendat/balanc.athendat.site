"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5095],{25941:(H,z,c)=>{c.d(z,{_S:()=>p});var e=c(59640);const r=d=>d.banks,p=((0,e.Mz)(r,d=>d.bank),(0,e.Mz)(r,d=>d.banks))},98872:(H,z,c)=>{c.d(z,{n:()=>L});var e=c(54438),r=c(53473),u=c(96697),p=c(25558),d=c(88141),b=c(59640),h=c(58600),y=c(98216),F=c(25941);const k=r.J1`
    mutation CreateBank($createBankInput: CreateBankInput!) {
        createBank(createBankInput: $createBankInput) {

            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }

        }
    }
`,D=r.J1`
    mutation UpdateBank($updateBankInput: UpdateBankInput!) {
        updateBank(updateBankInput: $updateBankInput) {
            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }
        }
    }
`,g=r.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateBankStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }

    }
`,j=r.J1`
    mutation RemoveBank($removeBankId: String!) {
        removeBank(id: $removeBankId) {
            ok
            message
        }
    }
`,M=r.J1`
    query FindAllBanks($page: Int, $size: Int, $sort: String, $order: Order, $search: String) {
        findAllBanks(page: $page, size: $size, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            banks {
                id
                active
                name
                description
                slug
            }
        }
    }
`,$=r.J1`
    query FindActiveBanks($search: String!, $size: Int!) {
        findActiveBanks(search: $search, size: $size) {
            ok
            message

            banks {
                id
                name
                slug
            }
        }
    }
`,w=r.J1`
    query FindBankById($findBankByIdId: String!) {
        findBankById(id: $findBankByIdId) {
            ok
            message

            bank {
                id
                active
                name
                abbr
                slug
                logo
                description
                createdAt
                updatedAt
                address
                country
                city
                state
                zip
            }
        }
    }
`;let L=(()=>{class l{constructor(){this.apolloProvider=(0,e.WQX)(r.Ic),this.store=(0,e.WQX)(b.il),this._apollo=this.apolloProvider.use("BALANC")}createBank(C){return this.store.select(F._S).pipe((0,u.s)(1),(0,p.n)(x=>this._apollo.mutate({mutation:k,variables:{createBankInput:C},errorPolicy:"all"}).pipe((0,d.M)(({data:G})=>{const E=structuredClone(x);E.push(G.createBank.bank),this.store.dispatch((0,h.Sn)({banks:E}))}))))}getBanks(C=0,x=20,G="code",E="asc",S=""){return this._apollo.query({query:M,errorPolicy:"all",variables:{page:C,size:x,sort:G,order:E,search:S}}).pipe((0,d.M)(({data:B})=>{this.store.dispatch((0,y.Bp)({pagination:B.findAllBanks.pagination})),this.store.dispatch((0,h.Sn)({banks:B.findAllBanks.banks}))}))}findActiveBanks(C="",x=50){return this._apollo.query({query:$,errorPolicy:"all",variables:{search:C,size:x}}).pipe((0,d.M)(({data:G})=>{this.store.dispatch((0,h.Sn)({banks:G.findActiveBanks.banks}))}))}getBankById(C){return this._apollo.query({query:w,variables:{findBankByIdId:C},errorPolicy:"all"}).pipe((0,d.M)(({data:x})=>{this.store.dispatch((0,h.Vk)({bank:x.findBankById.bank}))}))}updateBank(C){return this.store.select(F._S).pipe((0,u.s)(1),(0,p.n)(x=>this._apollo.mutate({mutation:D,variables:{updateBankInput:C},errorPolicy:"all"}).pipe((0,d.M)(({data:G})=>{const E=structuredClone(x);E[x.findIndex(B=>B.id===C.id)]=G.updateBank.bank,this.store.dispatch((0,h.Sn)({banks:E}))}))))}updateBankStatus(C){return this.store.select(F._S).pipe((0,u.s)(1),(0,p.n)(x=>this._apollo.mutate({mutation:g,variables:{updateEntityStatusInput:C},errorPolicy:"all"}).pipe((0,d.M)(()=>{const G=structuredClone(x);G[x.findIndex(S=>S.id===C.id)].active=C.active,this.store.dispatch((0,h.Sn)({banks:G}))}))))}removeBank(C){return this.store.select(F._S).pipe((0,u.s)(1),(0,p.n)(x=>this._apollo.mutate({mutation:j,variables:{removeBankId:C},errorPolicy:"all"}).pipe((0,d.M)(({})=>{const E=structuredClone(x),S=x.findIndex(B=>B.id===C);E.splice(S,1),this.store.dispatch((0,h.Sn)({banks:E}))}))))}static#e=this.\u0275fac=function(x){return new(x||l)};static#t=this.\u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},25095:(H,z,c)=>{c.r(z),c.d(z,{default:()=>Qs});var e=c(54438),r=c(89417),u=c(88834),p=c(75351),d=c(32102),b=c(99213),h=c(59042),y=c(96695),F=c(9183),k=c(30450),D=c(95416),g=c(2042),j=c(60177),M=c(51188),$=c(7673),w=c(21413),L=c(57786),l=c(56977),I=c(70152),C=c(25558),x=c(96354),G=c(59640),E=c(25941),S=c(47413),B=c(63729),K=c(70819),R=c(46601),Z=c(98049),f=c(94794),ee=c(98872);function ve(i,a){1&i&&(e.j41(0,"h2",3),e.EFF(1," Agregar Marca "),e.k0s())}function xe(i,a){1&i&&(e.j41(0,"h2",3),e.EFF(1," Editar Marca "),e.k0s())}function ye(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"h6",12),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",13),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.bank.name||"Sin nombre")}}function ke(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",23,0),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2);return e.Njj(s.openCropperDialog(n))}),e.k0s(),e.j41(3,"label",24),e.nrm(4,"mat-icon",25),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function Fe(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.nrm(2,"mat-icon",27),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function je(i,a){if(1&i&&e.nrm(0,"img",22),2&i){const t=e.XpG(2);e.Y8G("src",t.bankForm.get("logo").value,e.B4B)}}function Ge(i,a){if(1&i&&(e.j41(0,"div",6)(1,"div",14)(2,"form",15)(3,"div",16)(4,"mat-form-field",17)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",18),e.k0s()(),e.j41(8,"div",16)(9,"mat-form-field",17)(10,"mat-label"),e.EFF(11,"Descripci\xf3n"),e.k0s(),e.j41(12,"textarea",19),e.EFF(13,"                    "),e.k0s()()(),e.j41(14,"div",20)(15,"div",21),e.DNE(16,ke,5,3,"div")(17,Fe,3,1,"div"),e.k0s(),e.DNE(18,je,1,1,"img",22),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.bankForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Nombre del Marca"),e.R7$(5),e.Y8G("formControlName","description"),e.R7$(4),e.vxM(16,t.bankForm.get("logo").value?-1:16),e.R7$(),e.vxM(17,t.bankForm.get("logo").value?17:-1),e.R7$(),e.vxM(18,t.bankForm.get("logo").value?18:-1)}}function we(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateBank())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.bankForm.invalid)}}function Re(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createBank())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.bankForm.invalid)}}function De(i,a){if(1&i&&(e.j41(0,"div",7)(1,"button",28),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,we,2,2,"button",29)(4,Re,2,2,"button",29),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let $e=(()=>{class i{#e;#t;#n;#i;#r;#s;#o;#a;constructor(t){this.data=t,this.dialogMode="view",this.imageChangedEvent="",this.croppedImage="",this.#e=new w.B,this.#t=(0,e.WQX)(ee.n),this.#n=(0,e.WQX)(R.G),this.#i=(0,e.WQX)(e.gRc),this.#r=(0,e.WQX)(r.ok),this.#s=(0,e.WQX)(p.CP),this.#o=(0,e.WQX)(D.UG),this.#a=(0,e.WQX)(Z.M),this.dialogMode=t.dialogMode,this.bank=t.bank}ngOnInit(){this.bankForm=this.#r.group({id:[null],name:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],abbr:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(10)]],description:[null,[r.k0.minLength(3),r.k0.maxLength(255)]],logo:[null]}),"edit"===this.dialogMode&&this.bankForm.patchValue(this.bank)}ngOnDestroy(){this.#e.next(null),this.#e.complete()}closeDialog(){this.#s.close()}createBank(){const t=this.bankForm.getRawValue();delete t.id,this.#n.open({title:"Crear banco",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this.#e)).subscribe(n=>{"confirmed"===n&&this.#t.createBank(t).pipe((0,l.Q)(this.#e)).subscribe(({data:s})=>{s&&this.#o.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createBank.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck(),this.#s.close()})})}updateBank(){const t=this.bankForm.getRawValue();delete t.slug,this.#n.open({title:"Actualizar banco",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this.#t.updateBank(t).pipe((0,l.Q)(this.#e)).subscribe(({data:s})=>{s&&(this.#o.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateBank.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck(),this.#s.close())}),this.#i.markForCheck()})}openCropperDialog(t){if(0===t.target.files.length)return;const o=t.target.files[0];this.#a.validMaxMBSize(o,2)&&this.#a.validImageType(o)&&this.#a.openCropperDialog(t,!1).pipe((0,l.Q)(this.#e)).subscribe(n=>{n&&this.#a.uploadImage("List",o).pipe((0,l.Q)(this.#e)).subscribe(s=>{if(this.bankForm.get("logo").setValue(s.imageUrl),this.bank.logo=s.imageUrl,"edit"===this.dialogMode){const m=this.bank;delete m.slug,this.#t.updateBank(m).pipe((0,l.Q)(this.#e)).subscribe(({data:_})=>{_&&(this.#o.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:_.updateBank.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck())})}else this.#i.markForCheck()},s=>{console.warn(s)})})}removeImage(){const t=this.bankForm.get("logo").value;this.#n.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this.#e)).subscribe(n=>{"confirmed"===n&&this.#a.removeImage(t).pipe((0,l.Q)(this.#e)).subscribe(s=>{if(this.bankForm.get("logo").setValue(null),this.bank.logo=null,"edit"===this.dialogMode){const m=this.bank;delete m.slug,this.#t.updateBank(m).pipe((0,l.Q)(this.#e)).subscribe(_=>{this.#o.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.#i.markForCheck()})}})})}static#l=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh))};static#c=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-bank-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"formControlName"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mt-8","overflow-hidden","bg-gray-200","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,"object-contain","w-full","h-full",3,"src"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-red-700",3,"svgIcon"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"div",1)(1,"div",2),e.DNE(2,ve,2,0,"h2",3)(3,xe,2,0,"h2",3),e.k0s(),e.j41(4,"div",4),e.DNE(5,ye,9,1,"div",5)(6,Ge,19,8,"div",6),e.k0s(),e.DNE(7,De,5,3,"div",7),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[u.Hl,u.$z,u.iY,p.tx,d.RG,d.rl,d.nJ,h.fS,h.fg,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD,b.m_,b.An],encapsulation:2})}return i})();class Se{}const Te=i=>({"pointer-events-none":i}),Me=()=>[5,10,25,100];function Ee(i,a){if(1&i&&e.nrm(0,"img",29),2&i){const t=e.XpG().$implicit;e.Y8G("alt","Bank Logo")("src",t.logo,e.B4B)}}function Le(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," SIN LOGO "),e.k0s())}function Ie(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",41),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateBankStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Be(i,a){1&i&&e.nrm(0,"mat-spinner",36),2&i&&e.Y8G("diameter",20)("color","primary")}function Ne(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.deleteBank(n))}),e.nrm(1,"mat-icon",39),e.k0s()}2&i&&(e.R7$(),e.Y8G("svgIcon","mat_solid:delete"))}function Xe(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",26)(1,"div",27)(2,"div",28),e.DNE(3,Ee,1,2,"img",29)(4,Le,2,0,"div",30),e.k0s()(),e.j41(5,"div",31),e.EFF(6),e.k0s(),e.j41(7,"div",32)(8,"div",33),e.EFF(9),e.k0s()(),e.j41(10,"div",34),e.DNE(11,Ie,1,2,"mat-slide-toggle",35)(12,Be,1,2,"mat-spinner",36),e.k0s(),e.j41(13,"div",37)(14,"button",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.updateBank(n))}),e.nrm(15,"mat-icon",39),e.k0s(),e.DNE(16,Ne,2,1,"button",40),e.k0s()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(3),e.vxM(3,t.logo?3:-1),e.R7$(),e.vxM(4,t.logo?-1:4),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(3),e.JRh(t.description),e.R7$(2),e.vxM(11,n.isLoading&&n.selectedSlide===o?-1:11),e.R7$(),e.vxM(12,n.isLoading&&n.selectedSlide===o?12:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(),e.vxM(16,"Sin Marca"!==t.name?16:-1)}}function Ae(i,a){1&i&&e.Z7z(0,Xe,17,8,"div",26,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function Ve(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4,"Nombre"),e.k0s(),e.j41(5,"div",22),e.EFF(6," Descripci\xf3n "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Activo "),e.k0s(),e.j41(9,"div",24),e.EFF(10,"Acciones"),e.k0s()(),e.DNE(11,Ae,2,0),e.nI1(12,"async"),e.k0s(),e.nrm(13,"mat-paginator",25)),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(8),e.vxM(11,(t=e.bMT(12,8,o.banks$))?11:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,Te,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Me))("showFirstLastButtons",!0)}}function Ye(i,a){1&i&&(e.j41(0,"div",43),e.EFF(1,"\xa1No se ha creado ninguna marca!"),e.k0s())}function ze(i,a){1&i&&e.DNE(0,Ve,14,13)(1,Ye,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Ue=(()=>{class i{constructor(){this.flashMessage=null,this.banks$=(0,$.of)([]),this.banks=[],this.merchantInputControl=new r.MJ,this.isLoading=!1,this.searchInputControl=new r.MJ,this.user=null,this.merchant=null,this.selectedSlide=null,this.isSlideLoading=!1,this.#e=new w.B,this.#t=(0,e.WQX)(ee.n),this.#n=(0,e.WQX)(R.G),this.#i=(0,e.WQX)(e.gRc),this.#r=(0,e.WQX)(p.bZ),this.#s=(0,e.WQX)(D.UG),this.store=(0,e.WQX)(G.il)}#e;#t;#n;#i;#r;#s;ngOnInit(){this.store.select(B.SW).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.user=t,this.#i.markForCheck()}),this.store.select(K.Xb).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.merchant=t,this.#i.markForCheck()}),this.banks$=this.store.select(E._S),this.banks$.pipe((0,l.Q)(this.#e)).subscribe(t=>{this.banks=t,this.#i.markForCheck()}),this.store.select(S.Dz).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.pagination=t,this.#i.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this.#e),(0,I.B)(300),(0,C.n)(t=>(this.isLoading=!0,this.#t.getBanks(this.pagination.page,this.pagination.size,this._sort.active,this._sort.direction,t))),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this.#i.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this.#e)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this.#t.getBanks(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this.#e.next(null),this.#e.complete()}createBank(){this.#o(new Se,"add")}updateBank(t){this.#o(t,"edit")}updateBankStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this.#t.updateBankStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this.#s.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateBankStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this.#i.markForCheck()})}deleteBank(t){this.#n.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la marca: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this.#e)).subscribe(n=>{"confirmed"===n&&this.#t.removeBank(t.id).pipe((0,l.Q)(this.#e)).subscribe(({data:s})=>{s&&(this.#n.open({title:"Confirmaci\xf3n",message:"Marca eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.#i.markForCheck())})})}trackByFn(t,o){return t||o.id}#o(t,o){this.#r.open($e,{data:{bank:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#a=this.\u0275fac=function(o){return new(o||i)};static#l=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-banks"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","banks-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-left","md:block"],[1,"hidden","mr-4","text-center","lg:block"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","banks-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[3,"change","checked","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Bancos"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Bancos "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.createBank()}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,ze,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.banks$))?28:-1,s)}},dependencies:[j.Jj,r.YN,r.me,r.BC,u.Hl,u.$z,d.RG,d.rl,d.JW,b.m_,b.An,h.fS,h.fg,y.Ou,y.iy,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,j.YU,r.X1,r.l_,M.Wk],styles:[".banks-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.banks-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.banks-grid{grid-template-columns:112px auto 112px 100px}}@media (min-width: 1280px){.banks-grid{grid-template-columns:72px auto 250px 150px 72px 100px}}\n"],encapsulation:2,changeDetection:0})}return i})();var Pe=c(67943),Qe=c(51973),Oe=c(36596),Je=c(57084);const We=i=>({"pointer-events-none":i}),qe=()=>[5,10,25,100];function Ze(i,a){if(1&i&&e.nrm(0,"img",29),2&i){const t=e.XpG().$implicit;e.Y8G("alt","Brand Logo")("src",t.logo,e.B4B)}}function He(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," SIN LOGO "),e.k0s())}function Ke(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",41),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateBrandStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function et(i,a){1&i&&e.nrm(0,"mat-spinner",36),2&i&&e.Y8G("diameter",20)("color","primary")}function tt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.deleteBrand(n))}),e.nrm(1,"mat-icon",39),e.k0s()}2&i&&(e.R7$(),e.Y8G("svgIcon","mat_solid:delete"))}function it(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",26)(1,"div",27)(2,"div",28),e.DNE(3,Ze,1,2,"img",29)(4,He,2,0,"div",30),e.k0s()(),e.j41(5,"div",31),e.EFF(6),e.k0s(),e.j41(7,"div",32)(8,"div",33),e.EFF(9),e.k0s()(),e.j41(10,"div",34),e.DNE(11,Ke,1,2,"mat-slide-toggle",35)(12,et,1,2,"mat-spinner",36),e.k0s(),e.j41(13,"div",37)(14,"button",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.updateBrand(n))}),e.nrm(15,"mat-icon",39),e.k0s(),e.DNE(16,tt,2,1,"button",40),e.k0s()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(3),e.vxM(3,t.logo?3:-1),e.R7$(),e.vxM(4,t.logo?-1:4),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(3),e.JRh(t.description),e.R7$(2),e.vxM(11,n.isLoading&&n.selectedSlide===o?-1:11),e.R7$(),e.vxM(12,n.isLoading&&n.selectedSlide===o?12:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(),e.vxM(16,"Sin Marca"!==t.name?16:-1)}}function ot(i,a){1&i&&e.Z7z(0,it,17,8,"div",26,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function nt(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4,"Nombre"),e.k0s(),e.j41(5,"div",22),e.EFF(6," Descripci\xf3n "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Activo "),e.k0s(),e.j41(9,"div",24),e.EFF(10,"Acciones"),e.k0s()(),e.DNE(11,ot,2,0),e.nI1(12,"async"),e.k0s(),e.nrm(13,"mat-paginator",25)),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(8),e.vxM(11,(t=e.bMT(12,8,o.brands$))?11:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,We,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,qe))("showFirstLastButtons",!0)}}function st(i,a){1&i&&(e.j41(0,"div",43),e.EFF(1,"\xa1No se ha creado ninguna marca!"),e.k0s())}function at(i,a){1&i&&e.DNE(0,nt,14,13)(1,st,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let rt=(()=>{class i{constructor(){this.brands=[],this.brands$=(0,$.of)([]),this.flashMessage=null,this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.merchantInputControl=new r.MJ,this.paginator=(0,e.ebz)(y.iy),this.searchInputControl=new r.MJ,this.selectedSlide=null,this.sort=(0,e.ebz)(g.B4),this.user=null,this.#e=new w.B,this.#t=(0,e.WQX)(Oe.m),this.#n=(0,e.WQX)(R.G),this.#i=(0,e.WQX)(e.gRc),this.#r=(0,e.WQX)(p.bZ),this.#s=(0,e.WQX)(D.UG),this.#o=(0,e.WQX)(G.il)}#e;#t;#n;#i;#r;#s;#o;ngOnInit(){this.#o.select(B.SW).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.user=t,this.#i.markForCheck()}),this.#o.select(K.Xb).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.merchant=t,this.#i.markForCheck()}),this.brands$=this.#o.select(Pe.DC),this.brands$.pipe((0,l.Q)(this.#e)).subscribe(t=>{this.brands=t,this.#i.markForCheck()}),this.#o.select(S.Dz).pipe((0,l.Q)(this.#e)).subscribe(t=>{this.pagination=t,this.#i.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this.#e),(0,I.B)(300),(0,C.n)(t=>(this.isLoading=!0,this.#t.getBrands(this.pagination.page,this.pagination.size,this.sort().active,this.sort().direction,t))),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this.sort()&&this.paginator()&&(this.sort().sort({id:"name",start:"asc",disableClear:!0}),this.#i.markForCheck(),this.sort().sortChange.pipe((0,l.Q)(this.#e)).subscribe(()=>{this.paginator().pageIndex=0}),(0,L.h)(this.sort().sortChange,this.paginator().page).pipe((0,C.n)(()=>(this.isLoading=!0,this.#t.getBrands(this.paginator().pageIndex,this.paginator().pageSize,this.sort().active,this.sort().direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this.#e.next(null),this.#e.complete()}createBrand(){this.#a(new Je.m,"add")}updateBrand(t){this.#a(t,"edit")}updateBrandStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this.#t.updateBrandStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this.#s.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateBrandStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this.#i.markForCheck()})}deleteBrand(t){this.#n.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la marca: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this.#e)).subscribe(n=>{"confirmed"===n&&this.#t.removeBrand(t.id).pipe((0,l.Q)(this.#e)).subscribe(({data:s})=>{s&&(this.#n.open({title:"Confirmaci\xf3n",message:"Marca eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.#i.markForCheck())})})}trackByFn(t,o){return t||o.id}#a(t,o){this.#r.open(Qe.a,{data:{brand:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#l=this.\u0275fac=function(o){return new(o||i)};static#c=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-brands"]],viewQuery:function(o,n){1&o&&(e.wEZ(n.paginator,y.iy,5),e.wEZ(n.sort,g.B4,5)),2&o&&e.NyB(2)},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","brands-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-left","md:block"],[1,"hidden","mr-4","text-center","lg:block"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","brands-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],[1,"w-full","m-0.5",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[3,"change","checked","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Marcas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Marcas "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.createBrand()}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,at,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.brands$))?28:-1,s)}},dependencies:[j.Jj,r.YN,r.me,r.BC,u.Hl,u.$z,d.RG,d.rl,d.JW,b.m_,b.An,h.fS,h.fg,y.Ou,y.iy,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,j.YU,r.X1,r.l_,M.Wk],styles:[".brands-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.brands-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.brands-grid{grid-template-columns:112px auto 112px 100px}}@media (min-width: 1280px){.brands-grid{grid-template-columns:72px auto 250px 150px 72px 100px}}\n"],encapsulation:2,changeDetection:0})}return i})();var lt=c(65478),ct=c(64109),te=c(14823),N=c(47358),mt=c(45024),dt=c(52202),pt=c(67376),ie=c(87122),X=c(60850),A=c(82798),V=c(86600),ut=c(73779),W=c(99172),oe=c(93868);const _t=i=>({"bg-gray-200 mt-4":i}),gt=i=>({"text-center":i}),ne=i=>({"cursor-not-allowed":i});function ht(i,a){if(1&i&&(e.j41(0,"h2",4),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI("Agregar esta categor\xeda a ",t.parentCategory.name,"")}}function ft(i,a){1&i&&(e.j41(0,"h2",4),e.EFF(1,"Agregar categor\xeda"),e.k0s())}function Ct(i,a){1&i&&(e.j41(0,"h2",4),e.EFF(1,"Editar categor\xeda"),e.k0s())}function bt(i,a){if(1&i&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("ngClass",e.eq3(3,gt,"root"===t.id))("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function vt(i,a){if(1&i&&(e.j41(0,"mat-option",26),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t+1," ")}}function xt(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar el orden de la categor\xeda. "),e.k0s())}function yt(i,a){if(1&i&&(e.j41(0,"mat-form-field",15)(1,"mat-label"),e.EFF(2,"Orden"),e.k0s(),e.j41(3,"mat-select",25),e.Z7z(4,vt,2,2,"mat-option",26,e.fX1),e.k0s(),e.DNE(6,xt,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","position")("placeholder","Orden"),e.R7$(),e.Dyx(t.positions),e.R7$(2),e.vxM(6,t.categoryForm.get("position").hasError("required")?6:-1)}}function kt(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo de la categor\xeda es obligatorio. "),e.k0s())}function Ft(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo del elemento de categor\xeda debe poseer entre 3 y 255 caracteres. "),e.k0s())}function jt(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Tooltip no debe superar los 255 caracteres. "),e.k0s())}function Gt(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El \xcdcono no debe superar los 255 caracteres. "),e.k0s())}function wt(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",27,1),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2);return e.Njj(s.openCropperDialog(n))}),e.k0s(),e.j41(3,"label",28),e.nrm(4,"mat-icon",29),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function Rt(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.nrm(2,"mat-icon",29),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function Dt(i,a){if(1&i&&e.nrm(0,"img",24),2&i){const t=e.XpG(2);e.Y8G("ngSrc",t.categoryForm.get("imageCode").value)}}function $t(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",6)(1,"div",8)(2,"form",9)(3,"div",10)(4,"mat-form-field",11)(5,"mat-label"),e.EFF(6,"Padre"),e.k0s(),e.nrm(7,"input",12),e.j41(8,"mat-autocomplete",13,0),e.bIt("optionSelected",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.selectedCategoryOption(n))}),e.Z7z(10,bt,2,5,"mat-option",14,e.fX1),e.nI1(12,"async"),e.k0s(),e.j41(13,"mat-hint"),e.EFF(14,"Si se especifica un padre este elemento se agregar\xe1 en la ra\xedz"),e.k0s()(),e.DNE(15,yt,7,3,"mat-form-field",15),e.qex(16),e.j41(17,"mat-form-field",15)(18,"mat-label"),e.EFF(19,"Nombre"),e.k0s(),e.nrm(20,"input",16),e.DNE(21,kt,2,0,"mat-error")(22,Ft,2,0,"mat-error"),e.k0s(),e.bVm(),e.qex(23),e.j41(24,"mat-form-field",15)(25,"mat-label"),e.EFF(26,"Tooltip"),e.k0s(),e.nrm(27,"input",17),e.DNE(28,jt,2,0,"mat-error"),e.k0s(),e.bVm(),e.qex(29),e.j41(30,"mat-form-field",15)(31,"mat-label"),e.EFF(32,"\xcdcono"),e.k0s(),e.nrm(33,"input",18),e.DNE(34,Gt,2,0,"mat-error"),e.j41(35,"mat-hint"),e.EFF(36,"Ejemplo: heroicons_solid:information-circle"),e.k0s()(),e.bVm(),e.qex(37),e.j41(38,"div",19)(39,"span",20),e.EFF(40,"Estado"),e.k0s(),e.j41(41,"mat-slide-toggle",21),e.EFF(42),e.k0s()(),e.bVm(),e.j41(43,"div",22)(44,"div",23),e.DNE(45,wt,5,3,"div")(46,Rt,3,1,"div"),e.k0s(),e.DNE(47,Dt,1,1,"img",24),e.k0s()()()()()}if(2&i){const t=e.sdS(9),o=e.XpG();e.R7$(2),e.Y8G("formGroup",o.categoryForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","parentId")("type","text")("matAutocomplete",t),e.R7$(),e.Y8G("displayWith",o.displayFn.bind(o)),e.R7$(2),e.Dyx(e.bMT(12,29,o.filteredCategories)),e.R7$(5),e.vxM(15,o.positions.length>1?15:-1),e.R7$(5),e.Y8G("formControlName","name")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.R7$(),e.vxM(21,o.categoryForm.get("name").hasError("required")?21:-1),e.R7$(),e.vxM(22,o.categoryForm.get("name").hasError("maxLength")||o.categoryForm.get("name").hasError("minLength")?22:-1),e.R7$(5),e.Y8G("formControlName","tooltip")("placeholder","Tooltip")("maxLength",255),e.R7$(),e.vxM(28,o.categoryForm.get("tooltip").hasError("maxLength")?28:-1),e.R7$(5),e.Y8G("formControlName","icon")("placeholder","SVG \xcdcono")("maxLength",1e3),e.R7$(),e.vxM(34,o.categoryForm.get("icon").hasError("maxLength")?34:-1),e.R7$(7),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===o.categoryForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(),e.Y8G("ngClass",e.eq3(31,_t,!o.categoryForm.get("imageCode").value)),e.R7$(2),e.vxM(45,o.categoryForm.get("imageCode").value?-1:45),e.R7$(),e.vxM(46,o.categoryForm.get("imageCode").value?46:-1),e.R7$(),e.vxM(47,o.categoryForm.get("imageCode").value?47:-1)}}function St(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateCategory())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.eq3(3,ne,t.categoryForm.invalid))}}function Tt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createCategory())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.eq3(3,ne,t.categoryForm.invalid))}}function Mt(i,a){if(1&i&&(e.j41(0,"div",7),e.qex(1),e.j41(2,"button",31),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,St,2,5,"button",32)(5,Tt,2,5,"button",32),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Et=(()=>{class i{constructor(t,o,n,s,m,_,v,O){this.data=t,this._changeDetectorRef=o,this._dialogRef=n,this._formBuilder=s,this._athConfirmationService=m,this._categoriesService=_,this._snackBar=v,this.store=O,this.categories=[],this.allCategories=[],this.positions=[],this.position=0,this.searchMPermissionControl=new r.MJ,this._unsubscribeAll=new w.B,this._imagesService=(0,e.WQX)(Z.M),this.dialogMode=t.dialogMode,this.selectedCategory=t.category,this.parentCategory=t.parentCategory}ngOnInit(){this.store.select(ut.J).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.allCategories=[...t],this.filterCategory(t),this.calcPositions(!1)}),this.categoryForm=this._formBuilder.group({id:[null],position:[this.position,[r.k0.required]],name:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],tooltip:[null,[r.k0.maxLength(255)]],level:[0,[r.k0.required]],icon:[null,[r.k0.maxLength(255)]],parentId:[null,[r.k0.required]],imageUrl:[null],imageCode:[null],active:[!0]}),this._fillCategoryData(),this.filteredCategories=this.categoryForm.get("parentId").valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(100),(0,W.Z)(""),(0,C.n)(t=>!t&&this.categoryForm.get("parentId").value?(0,$.of)([]):(0,$.of)(t?this.categories.filter(o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())):this.categories)))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectedCategoryOption(t){const o=t.option.value;this.parentCategory=this.categories.find(n=>n.id===o),"root"===this.parentCategory.id&&(this.parentCategory=null),this.filterCategory(this.allCategories),this.calcPositions(!0),this.categoryForm.get("position").setValue(this.position),this._changeDetectorRef.markForCheck()}createCategory(){const t=this.categoryForm.getRawValue();delete t.id,this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Crear categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.createCategory(t).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}updateCategory(){const t=this.categoryForm.getRawValue();this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Actualizar categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.updateCategory(t).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}openCropperDialog(t){if(0===t.target.files.length)return;const o=t.target.files[0];this._imagesService.validMaxMBSize(o,2)&&this._imagesService.validImageType(o)&&this._imagesService.openCropperDialog(t,!1).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{n&&this._imagesService.uploadImage("List",o).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this.categoryForm.get("imageUrl").setValue(s.imageUrl),this.categoryForm.get("imageCode").setValue(s.public_id),"edit"===this.dialogMode?(this.selectedCategory.imageUrl=s.imageUrl,this.selectedCategory.imageCode=s.public_id,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:s.imageUrl,imageCode:s.public_id},this.selectedCategory).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck())})):this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})})}removeImage(){const t=this.categoryForm.get("imageCode").value;this._athConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._imagesService.removeImage(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this.categoryForm.get("imageCode").setValue(null),this.categoryForm.get("imageUrl").setValue(null),"edit"===this.dialogMode&&(this.selectedCategory.imageUrl=null,this.selectedCategory.imageCode=null,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:null,imageCode:null},this.selectedCategory).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()}))})})}displayFn(t){const o=this.categories.find(n=>n.id===t);return o?o.name:""}closeDialog(){this._dialogRef.close()}_fillCategoryData(){"edit"===this.dialogMode&&(this.categoryForm.patchValue(this.selectedCategory),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),"add"===this.dialogMode&&(this.parentCategory&&this.categoryForm.get("parentId").setValue(this.parentCategory.id),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),this._changeDetectorRef.markForCheck()}filterCategory(t){return this.selectedCategory?"edit"===this.dialogMode&&(this.categories=[...t.filter(o=>this.selectedCategory.id!==o.id)]):this.categories=[...t],this.categories.push({level:-1,id:"root",name:"----Principal----"}),this.categories.sort((o,n)=>o.level-n.level)}calcPositions(t){if(this.positions=[],this.position=0,this.parentCategory&&this.parentCategory.children&&this.parentCategory.children.length>0){for(let o=0;o<this.parentCategory.children.length;o++)this.positions.push(o);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}if(!this.parentCategory){const o=this.allCategories.filter(n=>null===n.parentId);for(let n=0;n<o.length;n++)this.positions.push(n);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):this.positions.push(this.positions.length)}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(e.gRc),e.rXU(p.CP),e.rXU(r.ze),e.rXU(R.G),e.rXU(oe.M),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["category-dialog"]],standalone:!0,features:[e.aNF],decls:10,vars:5,consts:[["auto","matAutocomplete"],["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",1,"text-2xl"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","md:grid-cols-3"],[1,"fuse-mat-no-subscript"],["matInput","","placeholder","Elemento padre","aria-label","Number",3,"formControlName","type","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected","displayWith"],[3,"ngClass","value"],[1,"w-full"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],["matInput","","require","",3,"formControlName","placeholder","maxLength"],["matInput","",3,"formControlName","placeholder","maxLength"],[1,"flex","flex-col"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["width","300","height","300",1,"object-cover","w-full","h-full",3,"ngSrc"],["required","",3,"formControlName","placeholder"],[3,"value"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],["mat-icon-button","",3,"click"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass"],["mat-flat-button","",3,"click","color","disabled","ngClass"]],template:function(o,n){1&o&&(e.j41(0,"div",2),e.qex(1),e.j41(2,"div",3),e.DNE(3,ht,2,1,"h2",4)(4,ft,2,0,"h2",4)(5,Ct,2,0,"h2",4),e.k0s(),e.bVm(),e.j41(6,"div",5),e.qex(7),e.DNE(8,$t,48,33,"div",6),e.bVm(),e.k0s(),e.DNE(9,Mt,6,3,"div",7),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.dialogMode&&n.parentCategory?3:-1),e.R7$(),e.vxM(4,"add"!==n.dialogMode||n.parentCategory?-1:4),e.R7$(),e.vxM(5,"edit"===n.dialogMode?5:-1),e.R7$(3),e.vxM(8,"view"!==n.dialogMode?8:-1),e.R7$(),e.vxM(9,"view"!==n.data.dialogMode?9:-1))},dependencies:[p.BI,r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.X1,r.j4,r.JD,d.RG,d.rl,d.nJ,d.MV,d.TL,h.fS,h.fg,X.jL,X.$3,V.wT,X.pN,V.Sy,j.YU,A.Ve,A.VO,k.mV,k.sG,V.pZ,V.r6,b.m_,b.An,u.Hl,u.$z,u.iY,p.tx,j.Jj,j.kt],encapsulation:2,changeDetection:0})}return i})();class Lt{}var It=c(85943),Bt=c(27115);const Nt=(i,a)=>({"bg-gray-800 dark:bg-white":i,"bg-gray-700 dark:bg-neutral-50":a});function Xt(i,a){if(1&i&&(e.j41(0,"div",35)(1,"div",45),e.nrm(2,"div",46),e.k0s(),e.j41(3,"span",47),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.item.name)}}function At(i,a){if(1&i&&(e.j41(0,"div",35)(1,"button",48),e.nrm(2,"mat-icon",39),e.k0s(),e.j41(3,"span",49),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.BMQ("aria-label","Expandir "+t.item.name),e.R7$(),e.Y8G("svgIcon",o.treeControl.isExpanded(t)?"mat_solid:expand_more":"mat_solid:chevron_right"),e.R7$(2),e.JRh(t.item.name)}}function Vt(i,a){if(1&i&&e.nrm(0,"img",38),2&i){const t=e.XpG().$implicit;e.Y8G("alt","Foto")("ngSrc",t.item.imageCode)}}function Yt(i,a){1&i&&e.nrm(0,"div",50)}function zt(i,a){if(1&i&&e.nrm(0,"mat-icon",39),2&i){const t=e.XpG().$implicit;e.Y8G("svgIcon",t.item.icon)}}function Ut(i,a){1&i&&e.nrm(0,"span")}function Pt(i,a){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.JRh(o.flatNodeMap.get(t).children.length)}}function Qt(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))})("change",function(n){e.eBV(t);const s=e.XpG().$implicit,m=e.XpG(2);return e.Njj(m.updateCategoryStatus(n,s,s.item.id))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.item.active)("color","primary")}}function Ot(i,a){1&i&&e.nrm(0,"mat-spinner",42),2&i&&e.Y8G("diameter",20)("color","primary")}function Jt(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-tree-node",34),e.bIt("mouseenter",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseEnterLeave(n.item.id))})("mouseleave",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseEnterLeave(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseOver(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))}),e.DNE(1,Xt,5,1,"div",35)(2,At,5,3),e.j41(3,"div",36)(4,"div",37),e.DNE(5,Vt,1,2,"img",38)(6,Yt,1,0),e.k0s()(),e.j41(7,"div",30),e.DNE(8,zt,1,1,"mat-icon",39),e.k0s(),e.DNE(9,Ut,1,0,"span")(10,Pt,2,1,"span",30),e.j41(11,"div",40),e.DNE(12,Qt,1,2,"mat-slide-toggle",41)(13,Ot,1,2,"mat-spinner",42),e.k0s(),e.j41(14,"div",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))}),e.j41(15,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.createCategory(n))}),e.nrm(16,"mat-icon",39),e.k0s(),e.j41(17,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.editCategory(n))}),e.nrm(18,"mat-icon",39),e.k0s(),e.j41(19,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.deleteCategory(s.flatNodeMap.get(n)))}),e.nrm(20,"mat-icon",39),e.k0s()()()}if(2&i){const t=a.$implicit,o=e.XpG(2);e.Y8G("ngClass",e.l_i(11,Nt,t.item.id===o.selectedCategoryId,t.item.id===o.overCategoryId)),e.R7$(),e.vxM(1,0===o.flatNodeMap.get(t).children.length?1:2),e.R7$(4),e.vxM(5,t.item.imageCode?5:6),e.R7$(3),e.vxM(8,t.item.icon?8:-1),e.R7$(),e.vxM(9,0===o.flatNodeMap.get(t).children.length?9:-1),e.R7$(),e.vxM(10,o.flatNodeMap.get(t).children.length>0?10:-1),e.R7$(2),e.vxM(12,o.isLoading&&o.selectedSlide===t.item.id?-1:12),e.R7$(),e.vxM(13,o.isLoading&&o.selectedSlide===t.item.id?13:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:add"),e.R7$(2),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Wt(i,a){if(1&i&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Nombre "),e.k0s(),e.j41(3,"div",30),e.EFF(4," Imagen "),e.k0s(),e.j41(5,"div",30),e.EFF(6," Icono "),e.k0s(),e.j41(7,"div",30),e.EFF(8," #.Elementos "),e.k0s(),e.j41(9,"div",30),e.EFF(10," Estado "),e.k0s(),e.j41(11,"div",31),e.EFF(12," Acciones "),e.k0s()(),e.j41(13,"mat-tree",32),e.DNE(14,Jt,21,14,"mat-tree-node",33),e.k0s()),2&i){const t=e.XpG();e.R7$(13),e.Y8G("dataSource",t.dataSource)("treeControl",t.treeControl)}}function qt(i,a){1&i&&(e.j41(0,"div",52),e.EFF(1," \xa1No se ha creado ning\xfan elemento a\xfan!"),e.k0s())}function Zt(i,a){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha generado ninguna suscripci\xf3n a\xfan!","")}}let Ht=(()=>{class i{constructor(t,o,n,s,m,_,v,O){this.store=t,this.dialog=o,this._snackBar=n,this._categoryService=s,this._fuseConfigService=m,this._changeDetectorRef=_,this._fuseConfirmationService=v,this._fuseMediaWatcherService=O,this.categories=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new mt.CB(!0),this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new w.B,this.getLevel=T=>T.level,this.isExpandable=T=>T.expandable,this.getChildren=T=>T.children,this.hasChild=(T,Y)=>Y.expandable,this.hasNoContent=(T,Y)=>""===Y.item.name,this.transformer=(T,Y)=>{const J=this.nestedNodeMap.get(T),Q=J&&J.item===T.item?J:new Lt;return Q.item=T.item,Q.level=Y,Q.expandable=!!T.children?.length,this.flatNodeMap.set(Q,T),this.nestedNodeMap.set(T,Q),Q},this.treeFlattener=new N.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new ct.XW(this.getLevel,this.isExpandable),this.dataSource=new N.zw(this.treeControl,this.treeFlattener)}ngOnInit(){this._categoryService.data$.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{if(this.previousTreeControl=(0,pt.cloneDeep)(this.treeControl),this.dataSource.data=t,this.previousTreeControl&&void 0!==this.previousTreeControl.dataNodes)for(const n of this.previousTreeControl.dataNodes)if(this.previousTreeControl.isExpanded(n)){const s=this.treeControl.dataNodes.find(m=>m.item.id===n.item.id);this.treeControl.expand(s)}const o={item:null,children:t};this.categories=[],this.getCategories(o),this.store.dispatch((0,dt.zw)({categories:[...this.categories]})),this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md")})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(s=>this.checklistSelection.isSelected(s))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(s=>this.checklistSelection.isSelected(s))&&!this.descendantsAllSelected(t)}mouseEnterLeave(t){this.selectedCategoryId=t===this.selectedCategoryId?"":t}mouseOver(t){this.overCategoryId=t===this.overCategoryId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}refreshCategories(){this._categoryService.getRootCategoryNodes().pipe((0,l.Q)(this._unsubscribeAll)).subscribe()}updateCategoryStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._categoryService.updateCategoryStatus({id:o.item.id,active:t.checked},o.item).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck())})}createCategory(t){if(t){const o=this.categories.find(n=>n.id===t.item.id);this._openDialog(o,null,"add")}else this._openDialog(null,null,"add")}editCategory(t){let o=this.categories.find(n=>n.id===t.item.parentId);o=void 0===o?null:o,this._openDialog(o,t.item,"edit")}deleteCategory(t){this._fuseConfirmationService.open({title:"Eliminar Elemento",message:`\xbfEst\xe1 seguro que desea eliminar a ${t.item.name}? ${t.children.length>0?"Este elemento posee otros elementos":""}.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._categoryService.removeCategory(t.item.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}_openDialog(t,o,n){this.dialog.open(Et,{data:{parentCategory:t,category:o,dialogMode:n},disableClose:!0,panelClass:"ath-nrp-dialog-panel"})}getCategories(t){for(const o of t.children){const n={...o.item};n.children=[...o.children],this.categories.push(n),o.children&&o.children.length>0&&this.getCategories(o)}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(G.il),e.rXU(p.bZ),e.rXU(D.UG),e.rXU(oe.M),e.rXU(It.V),e.rXU(e.gRc),e.rXU(R.G),e.rXU(Bt.F))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-category"]],standalone:!0,features:[e.aNF],decls:42,vars:6,consts:[["noSubscriptions",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","flex-row-reverse","flex-wrap","items-center","mt-2","lg:justify-end","sm:flex-row","lg:mt-0","shrink-0","lg:ml-4"],["mat-raised-button","",1,"text-white","lg:ml-4","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_solid:close_fullscreen"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_solid:expand"],["mat-icon-button","","matTooltip","Refrescar",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[1,"text-white",3,"svgIcon"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","category-tree-table","xl:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"ml-6","xl:ml-0"],[1,"text-center"],[1,"pr-4","mr-6","text-right","xl:mr-0"],[3,"dataSource","treeControl"],["class","grid category-tree-table gap-4 relative  py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],[1,"grid","category-tree-table","gap-4","relative","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"mouseenter","mouseleave","click","ngClass"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],[1,"flex","items-center","justify-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","overflow-hidden","border","rounded","flex-0"],["width","46","height","46",1,"w-full","m-0.5",3,"alt","ngSrc"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["matTreeNodeToggle","","mat-icon-button","","color","primary",1,"flex","items-center","justify-center","w-10","h-10"],[1,"w-2","h-2","rounded-full","bg-primary-500"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"cursor-default","whitespace-nowrap"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"click","change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"div",5)(6,"div",6)(7,"a",7),e.EFF(8,"Inicio"),e.k0s()(),e.j41(9,"div",6),e.nrm(10,"mat-icon",8),e.j41(11,"a",9),e.EFF(12,"Categor\xedas"),e.k0s()()(),e.j41(13,"div",10)(14,"a",11),e.nrm(15,"mat-icon",8),e.j41(16,"span",12),e.EFF(17,"Regresar"),e.k0s()()()(),e.j41(18,"div",13)(19,"div",14),e.EFF(20," Gesti\xf3n de Categor\xedas "),e.k0s()()(),e.j41(21,"div",15)(22,"button",16),e.bIt("click",function(){return e.eBV(s),e.Njj(n.createCategory(null))}),e.nrm(23,"mat-icon",17),e.j41(24,"span",18),e.EFF(25,"Nuevo"),e.k0s()(),e.j41(26,"button",19),e.bIt("click",function(){return e.eBV(s),e.Njj(n.collapseAll())}),e.nrm(27,"mat-icon",20),e.j41(28,"span",21),e.EFF(29,"Contraer"),e.k0s()(),e.j41(30,"button",22),e.bIt("click",function(){return e.eBV(s),e.Njj(n.expandAll())}),e.nrm(31,"mat-icon",23),e.j41(32,"span",21),e.EFF(33,"Expandir"),e.k0s()(),e.j41(34,"button",24),e.bIt("click",function(){return e.eBV(s),e.Njj(n.refreshCategories())}),e.nrm(35,"mat-icon",25),e.k0s()()(),e.j41(36,"div",26)(37,"div",27),e.DNE(38,Wt,15,2)(39,qt,2,0)(40,Zt,2,1,"ng-template",null,0,e.C5r),e.k0s()()()()}2&o&&(e.R7$(10),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(12),e.Y8G("svgIcon","mat_solid:refresh"),e.R7$(3),e.vxM(38,n.dataSource.data&&n.dataSource.data.length>0?38:39))},dependencies:[lt.uv,u.Hl,u.$z,u.iY,b.m_,b.An,F.D6,F.LG,k.mV,k.sG,te.uc,te.oV,N.jH,N.yI,N.yF,N.pO,N.lQ,N.d6,j.YU,M.Wk,j.kt],encapsulation:2,data:{animation:ie.X},changeDetection:0})}return i})(),Kt=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-lists"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(o,n){1&o&&e.nrm(0,"router-outlet")},dependencies:[M.n3],encapsulation:2})}return i})();var se=c(91401),U=c(67398),ae=c(92581);function ei(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Moneda "),e.k0s())}function ti(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Moneda "),e.k0s())}function ii(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.currency.name||"Sin nombre")}}function oi(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s(),e.j41(7,"mat-form-field",15)(8,"mat-label"),e.EFF(9,"Nombre en el Versat"),e.k0s(),e.nrm(10,"input",17),e.k0s(),e.j41(11,"mat-form-field",15)(12,"mat-label"),e.EFF(13,"ISO"),e.k0s(),e.nrm(14,"input",18),e.k0s(),e.j41(15,"mat-form-field",15)(16,"mat-label"),e.EFF(17,"S\xedmbolo"),e.k0s(),e.nrm(18,"input",19),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.currencyForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.R7$(4),e.Y8G("formControlName","namev")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.R7$(4),e.Y8G("formControlName","iso")("placeholder","Ejemplo: USD"),e.R7$(4),e.Y8G("formControlName","symbol")("placeholder","Ejemplo: $")}}function ni(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateCurrency())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function si(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createCurrency())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function ai(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",20),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,ni,2,3,"button",21)(5,si,2,3,"button",21),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let ri=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._unsubscribeAll=new w.B,this._currenciesService=(0,e.WQX)(ae.v),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)(R.G),this._dialogRef=(0,e.WQX)(p.CP),this.dialogMode=t.dialogMode,this.currency=t.currency}ngOnInit(){this.currencyForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)]),namev:new r.MJ(null,[r.k0.maxLength(50)]),iso:new r.MJ(null,[r.k0.maxLength(5)]),symbol:new r.MJ(null,[r.k0.maxLength(5)])}),"edit"===this.dialogMode&&this.currencyForm.patchValue(this.currency)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createCurrency(){let t=this.currencyForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._currenciesService.createCurrency(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda creada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateCurrency(){const t=this.currencyForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._currenciesService.updateCurrency(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda actualizada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-currency-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","required","","maxlength","5",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","5",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,ei,2,0,"h2",2)(4,ti,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,ii,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,oi,19,10,"div",5),e.bVm(),e.k0s(),e.DNE(10,ai,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,u.Hl,u.$z,p.tx,d.RG,d.rl,d.nJ,h.fS,h.fg,r.X1,r.j4,r.JD],encapsulation:2,changeDetection:0})}return i})();class li{}const ci=(i,a)=>a.id;function mi(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",28),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateCurrencyStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function di(i,a){1&i&&e.nrm(0,"mat-spinner",24),2&i&&e.Y8G("diameter",20)("color","primary")}function pi(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",20)(1,"div",21),e.EFF(2),e.k0s(),e.j41(3,"div",21),e.EFF(4),e.k0s(),e.j41(5,"div",21),e.EFF(6),e.k0s(),e.j41(7,"div",21),e.EFF(8),e.k0s(),e.j41(9,"div",22),e.DNE(10,mi,1,2,"mat-slide-toggle",23)(11,di,1,2,"mat-spinner",24),e.k0s(),e.j41(12,"div",25)(13,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(14,"mat-icon",27),e.k0s(),e.j41(15,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteCurrency(n))}),e.nrm(16,"mat-icon",27),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.namev," "),e.R7$(2),e.SpI(" ",t.iso," "),e.R7$(2),e.SpI(" ",t.symbol," "),e.R7$(2),e.vxM(10,n.isSlideLoading&&n.selectedSlide===o?-1:10),e.R7$(),e.vxM(11,n.isSlideLoading&&n.selectedSlide===o?11:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function ui(i,a){1&i&&e.Z7z(0,pi,17,8,"div",20,ci),2&i&&e.Dyx(a)}function _i(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17)(2,"div",18),e.EFF(3," Nombre "),e.k0s(),e.j41(4,"div",18),e.EFF(5," Nombre en el Versat "),e.k0s(),e.j41(6,"div"),e.EFF(7," ISO "),e.k0s(),e.j41(8,"div"),e.EFF(9," S\xedmbolo "),e.k0s(),e.j41(10,"div",19),e.EFF(11," Activo "),e.k0s(),e.j41(12,"div",19),e.EFF(13," Acciones "),e.k0s()(),e.DNE(14,ui,2,0),e.nI1(15,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(2),e.Y8G("mat-sort-header","namev"),e.R7$(10),e.vxM(14,(t=e.bMT(15,3,o.currencies$))?14:-1,t)}}function gi(i,a){1&i&&(e.j41(0,"div",29),e.EFF(1," \xa1No hay monedas creadas para el negocio!"),e.k0s())}function hi(i,a){1&i&&e.DNE(0,_i,16,5,"div",16)(1,gi,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let fi=(()=>{class i{constructor(){this.currencies$=(0,$.of)([]),this.currency=new li,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new w.B,this._currenciesService=(0,e.WQX)(ae.v),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(p.bZ),this._fuseConfirmationService=(0,e.WQX)(R.G),this._snackBar=(0,e.WQX)(D.UG),this.store=(0,e.WQX)(G.il)}ngOnInit(){this.currencies$=this.store.select(se.y$)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteCurrency(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la moneda: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._currenciesService.removeCurrency(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateCurrencyStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._currenciesService.updateCurrencyStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(ri,{data:{currency:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-currencies"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","currencies-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","currencies-grid","md:px-8"],[1,"truncate"],[1,"hidden","text-center","sm:block"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Monedas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Monedas "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.currency,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,hi,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.currencies$))?25:-1,s)}},dependencies:[j.Jj,u.Hl,u.$z,b.m_,b.An,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,M.Wk],styles:[".currencies-grid{grid-template-columns:20% 20% 15% 10% 20% auto}@media (min-width: 600px){.currencies-grid{grid-template-columns:20% 20% 15% 10% 20% auto}}\n"],encapsulation:2,changeDetection:0})}return i})();var Ci=c(56501),re=c(98300);function bi(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Combustible "),e.k0s())}function vi(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Combustible "),e.k0s())}function xi(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.fuel.name||"Sin nombre")}}function yi(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.fuelForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function ki(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateFuel())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function Fi(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createFuel())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function ji(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,ki,2,3,"button",18)(5,Fi,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Gi=(()=>{class i{constructor(t,o,n,s,m,_){this.data=t,this._fuelsService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this.dialogMode="view",this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode,this.fuel=t.fuel}ngOnInit(){this.fuelForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(100)])}),"edit"===this.dialogMode&&this.fuelForm.patchValue(this.fuel)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createFuel(){let t=this.fuelForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._fuelsService.createFuel(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.createFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateFuel(){const t=this.fuelForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._fuelsService.updateFuel(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.updateFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(re.d),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-fuel-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,bi,2,0,"h2",2)(4,vi,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,xi,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,yi,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,ji,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,u.Hl,u.$z,p.hM,p.tx,d.RG,d.rl,d.nJ,h.fS,h.fg,r.X1,r.j4,r.JD],encapsulation:2})}return i})();class wi{}const Ri=i=>({"pointer-events-none":i}),Di=()=>[5,10,25,100];function $i(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateFuelStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Si(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function Ti(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,$i,1,2,"mat-slide-toggle",24)(7,Si,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteFuel(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Mi(i,a){1&i&&e.Z7z(0,Ti,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function Ei(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,Mi,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.fuels$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,Ri,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Di))("showFirstLastButtons",!0)}}function Li(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay combustibles creados para el negocio! "),e.k0s())}function Ii(i,a){1&i&&e.DNE(0,Ei,12,13,"div",16)(1,Li,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Bi=(()=>{class i{constructor(t,o,n,s,m,_){this._fuelsService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=m,this.store=_,this.fuel=new wi,this.fuels$=(0,$.of)([]),this.isLoading=!1,this.searchInputControl=new r.MJ(null),this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.fuels$=this.store.select(Ci.UC),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._fuelsService.getFuels(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteFuel(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._fuelsService.removeFuel(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeFuel.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateFuelStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._fuelsService.updateFuelStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateFuelStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Gi,{data:{fuel:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(re.d),e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-fuels"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","overflow-auto","border-b","lists-grid","md:px-8"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Combustibles"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Combustibles "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.fuel,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,Ii,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.fuels$))?25:-1,s)}},dependencies:[j.Jj,u.Hl,u.$z,b.m_,b.An,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,y.Ou,y.iy,j.YU,M.Wk],encapsulation:2,changeDetection:0})}return i})();var Ni=c(98929),le=c(90362);function Xi(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Multiplicador "),e.k0s())}function Ai(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Multiplicador "),e.k0s())}function Vi(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"valor"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.multiplier.value||"Sin valor")}}function Yi(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"valor"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.multiplierForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","value")("placeholder","Ejemplo: 3.5")}}function zi(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateMultiplier())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function Ui(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createMultiplier())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function Pi(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,zi,2,3,"button",18)(5,Ui,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Qi=(()=>{class i{constructor(t,o,n,s,m,_,v){this.data=t,this._multipliersService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this._snackBar=v,this.dialogMode="view",this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode,this.multiplier=t.multiplier}ngOnInit(){this.multiplierForm=this._formBuilder.group({id:new r.MJ(null),value:new r.MJ(null,[r.k0.min(1)])}),"edit"===this.dialogMode&&this.multiplierForm.patchValue(this.multiplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createMultiplier(){let t=this.multiplierForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._multipliersService.createMultiplier(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateMultiplier(){const t=this.multiplierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._multipliersService.updateMultiplier(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(le.y),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP),e.rXU(D.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-multiplier-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","number","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,Xi,2,0,"h2",2)(4,Ai,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,Vi,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Yi,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,Pi,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.tU,u.Hl,u.$z,p.hM,p.tx,d.RG,d.rl,d.nJ,h.fS,h.fg,r.X1,r.j4,r.JD],encapsulation:2})}return i})();class Oi{}const Ji=i=>({"pointer-events-none":i}),Wi=()=>[5,10,25,100];function qi(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateMultiplierStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Zi(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function Hi(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,qi,1,2,"mat-slide-toggle",24)(7,Zi,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteMultiplier(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" x",t.value," "),e.R7$(2),e.vxM(6,n.isSlideLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isSlideLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Ki(i,a){1&i&&e.Z7z(0,Hi,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function eo(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Valor "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,Ki,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","value"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.multipliers$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,Ji,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Wi))("showFirstLastButtons",!0)}}function to(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay multiplicadores creados para el negocio!"),e.k0s())}function io(i,a){1&i&&e.DNE(0,eo,12,13,"div",16)(1,to,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let oo=(()=>{class i{constructor(t,o,n,s,m,_){this._multipliersService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=m,this.store=_,this.multiplier=new Oi,this.multipliers$=(0,$.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.multipliers$=this.store.select(Ni.DC),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"value",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._multipliersService.getMultipliers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteMultiplier(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: x${t.value}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._multipliersService.removeMultiplier(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateMultiplierStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._multipliersService.updateMultiplierStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMultiplierStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Qi,{data:{multiplier:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(le.y),e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-multipliers"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,""],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Multiplicadores"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Multiplicadores "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.multiplier,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,io,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.multipliers$))?25:-1,s)}},dependencies:[j.Jj,u.Hl,u.$z,b.m_,b.An,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,y.Ou,y.iy,j.YU,M.Wk],encapsulation:2,changeDetection:0})}return i})();var no=c(94425),ce=c(52777);function so(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar tipo de operaci\xf3n "),e.k0s())}function ao(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar tipo de operaci\xf3n "),e.k0s())}function ro(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.operationType.name||"Sin nombre")}}function lo(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.operationTypeForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function co(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateOperationType())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function mo(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createOperationType())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function po(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",18),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,co,2,3,"button",19)(5,mo,2,3,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let uo=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._unsubscribeAll=new w.B,this._fuseConfirmationService=(0,e.WQX)(R.G),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._dialogRef=(0,e.WQX)(p.CP),this._snackBar=(0,e.WQX)(D.UG),this._operationTypesService=(0,e.WQX)(ce.k),this.dialogMode=t.dialogMode,this.operationType=t.operationType}ngOnInit(){this.operationTypeForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)])}),"edit"===this.dialogMode&&this.operationTypeForm.patchValue(this.operationType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createOperationType(){let t=this.operationTypeForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._operationTypesService.createOperationType(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateOperationType(){const t=this.operationTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._operationTypesService.updateOperationType(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-operation-type-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,so,2,0,"h2",2)(4,ao,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,ro,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,lo,8,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,po,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD,d.RG,d.rl,d.nJ,h.fS,h.fg,u.Hl,u.$z,p.tx],encapsulation:2})}return i})();class _o{}const go=(i,a)=>a.id,ho=()=>[u.$z,b.An,F.LG,k.sG],fo=i=>({"pointer-events-none":i}),Co=()=>[5,10,25,100];function bo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",33),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),m=s.$implicit,_=s.$index,v=e.XpG(2);return e.Njj(v.updateOperationTypeStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.active)("color","primary")}}function vo(i,a){1&i&&e.nrm(0,"mat-spinner",29),2&i&&e.Y8G("diameter",20)("color","primary")}function xo(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"div",26),e.EFF(4),e.k0s(),e.j41(5,"div",27),e.DNE(6,bo,1,2,"mat-slide-toggle",28)(7,vo,1,2,"mat-spinner",29),e.k0s(),e.j41(8,"div",30)(9,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",32),e.k0s(),e.j41(11,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.deleteOperationType(n))}),e.nrm(12,"mat-icon",32),e.k0s()()()}if(2&i){const t=e.XpG(),o=t.$implicit,n=t.$index,s=e.XpG(2);e.R7$(2),e.SpI(" ",n+1," "),e.R7$(2),e.SpI(" ",o.name," "),e.R7$(2),e.vxM(6,s.isSlideLoading&&s.selectedSlide===n?-1:6),e.R7$(),e.vxM(7,s.isSlideLoading&&s.selectedSlide===n?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function yo(i,a){1&i&&e.nrm(0,"div")}function ko(i,a){1&i&&(e.DNE(0,xo,13,6)(1,yo,1,0),e.nv$(2,0,ho,null,1),e.qhs(0,-1))}function Fo(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",22),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Acciones "),e.k0s()(),e.Z7z(9,ko,4,0,null,null,go),e.nrm(11,"mat-paginator",24),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.Dyx(t.operationTypes),e.R7$(2),e.Y8G("ngClass",e.eq3(7,fo,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(9,Co))("showFirstLastButtons",!0)}}function jo(i,a){1&i&&(e.j41(0,"div",34),e.EFF(1," \xa1No hay ning\xfan tipo de operaci\xf3n creado hasta el momento! "),e.k0s())}let Go=(()=>{class i{constructor(){this.isLoading=!1,this.isSlideLoading=!1,this.operationType=new _o,this.operationTypes=[],this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new w.B,this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(p.bZ),this._fuseConfirmationService=(0,e.WQX)(R.G),this._operationTypesService=(0,e.WQX)(ce.k),this._snackBar=(0,e.WQX)(D.UG),this.store=(0,e.WQX)(G.il)}ngOnInit(){this.store.select(no.nK).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.operationTypes=t,this._changeDetectorRef.markForCheck()}),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(300),(0,C.n)(t=>(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteOperationType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de operaci\xf3n: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._operationTypesService.removeOperationType(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateOperationTypeStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._operationTypesService.updateOperationTypeStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(uo,{data:{operationType:t,dialogMode:o},width:"90%",panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-operation-types"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipo de operaciones"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipos de operaciones "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.openDialog(n.operationType,"add")}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Fo,12,10,"div",19)(29,jo,2,0),e.k0s()()()),2&o&&(e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,n.operationTypes.length>0?28:29))},dependencies:[r.YN,r.me,r.BC,u.Hl,u.$z,d.RG,d.rl,d.JW,b.m_,b.An,h.fS,h.fg,y.Ou,y.iy,F.D6,k.mV,g.NQ,g.B4,g.aE,j.YU,r.X1,r.l_,M.Wk],encapsulation:2})}return i})();var wo=c(11955),Ro=c(70672),me=c(67336),P=c(36471),de=c(5864),pe=c(30242);const Do=i=>({"bg-gray-200":i});function $o(i,a){1&i&&(e.j41(0,"h2",5),e.EFF(1," Agregar pasarela de pago "),e.k0s())}function So(i,a){1&i&&(e.j41(0,"h2",5),e.EFF(1," Editar pasarela de pago "),e.k0s())}function To(i,a){if(1&i&&(e.j41(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"h6",14),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",15),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.paymentGateway.name||"Sin nombre")}}function Mo(i,a){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.title," ")}}function Eo(i,a){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.name," ")}}function Lo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-chip",35),e.bIt("removed",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.removeCurrency(n))}),e.j41(1,"div",36),e.EFF(2),e.k0s(),e.j41(3,"button",37),e.nrm(4,"mat-icon",38),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.iso),e.R7$(),e.BMQ("aria-label","Eliminar "+t.name),e.R7$(),e.Y8G("svgIcon","mat_solid:cancel")}}function Io(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",39,2),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2);return e.Njj(s.openCropperDialog(n))}),e.k0s(),e.j41(3,"label",40),e.nrm(4,"mat-icon",41),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function Bo(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",29)(1,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.nrm(2,"mat-icon",43),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function No(i,a){if(1&i&&e.nrm(0,"img",30),2&i){const t=e.XpG(2);e.Y8G("src",t.paymentGatewayForm.get("logo").value,e.B4B)}}function Xo(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",8)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",19),e.k0s(),e.j41(7,"mat-form-field",18)(8,"mat-label"),e.EFF(9,"Tipo de autenticaci\xf3n"),e.k0s(),e.j41(10,"mat-select",20),e.Z7z(11,Mo,2,2,"mat-option",21,e.fX1),e.k0s()(),e.j41(13,"mat-form-field",22)(14,"mat-label"),e.EFF(15,"Api Url"),e.k0s(),e.nrm(16,"input",19),e.k0s(),e.j41(17,"mat-form-field",23)(18,"mat-label"),e.EFF(19,"Monedas"),e.k0s(),e.nrm(20,"input",24),e.j41(21,"mat-autocomplete",25,0),e.bIt("optionSelected",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.addCurrency(n.option.value))}),e.Z7z(23,Eo,2,2,"mat-option",21,e.fX1),e.nI1(25,"async"),e.k0s(),e.j41(26,"mat-chip-grid",26,1),e.Z7z(28,Lo,5,3,"mat-chip",null,e.fX1),e.k0s()(),e.j41(30,"div",27)(31,"div",28),e.DNE(32,Io,5,3,"div")(33,Bo,3,1,"div",29),e.k0s(),e.DNE(34,No,1,1,"img",30),e.k0s(),e.j41(35,"div",31)(36,"div",32)(37,"span",33),e.EFF(38,"\xbfEst\xe1 operativo?"),e.k0s(),e.nrm(39,"mat-slide-toggle",34),e.k0s(),e.j41(40,"div",32)(41,"span",33),e.EFF(42,"Estado"),e.k0s(),e.j41(43,"mat-slide-toggle",34),e.EFF(44),e.k0s()()()()()()}if(2&i){const t=e.sdS(22),o=e.sdS(27),n=e.XpG();e.R7$(2),e.Y8G("formGroup",n.paymentGatewayForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("maxlength",50)("placeholder","Ejemplo: Transferencia"),e.R7$(4),e.Y8G("formControlName","authType"),e.R7$(),e.Dyx(n.authTypes),e.R7$(5),e.Y8G("formControlName","apiUrl")("maxlength",1e3)("placeholder","Ejemplo: https://api.balanc.app/api"),e.R7$(4),e.Y8G("formControl",n.searchCurrencyControl)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matAutocomplete",t),e.R7$(3),e.Dyx(e.bMT(25,22,n.filteredCurrencies)),e.R7$(5),e.Dyx(n.selectedCurrencies),e.R7$(2),e.Y8G("ngClass",e.eq3(24,Do,!n.paymentGatewayForm.get("logo").value)),e.R7$(2),e.vxM(32,n.paymentGatewayForm.get("logo").value?-1:32),e.R7$(),e.vxM(33,n.paymentGatewayForm.get("logo").value?33:-1),e.R7$(),e.vxM(34,n.paymentGatewayForm.get("logo").value?34:-1),e.R7$(5),e.Y8G("formControlName","isReady")("color","primary"),e.R7$(4),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===n.paymentGatewayForm.get("active").value?"Activo":"Inactivo"," ")}}function Ao(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updatePaymentGateway())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentGatewayForm.invalid)}}function Vo(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",46),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createPaymentGateway())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentGatewayForm.invalid)}}function Yo(i,a){if(1&i&&(e.j41(0,"div",9)(1,"button",44),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,Ao,2,2,"button",45)(4,Vo,2,2,"button",45),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let zo=(()=>{class i{constructor(t,o,n,s,m,_,v,O,T,Y){this.data=t,this._paymentGatewaysService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this._dialog=v,this._imagesService=O,this._snackBar=T,this.store=Y,this.dialogMode="view",this.separatorKeysCodes=[me.Fm,me.KE],this.searchCurrencyControl=new r.MJ,this.selectedCurrencies=[],this.currencies=[],this.authTypes=[{title:"Ninguna",name:"none"},{title:"Basic Auth",name:"basic"},{title:"OAuth",name:"oauth"}],this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode;const J={...t.paymentGateway};this.paymentGateway=J}ngOnInit(){this.store.select(se.y$).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{if(this.currencies=t,!de.H.IsNullOrEmpty(this.paymentGateway.currenciesId))for(const o of this.paymentGateway.currenciesId){const n=this.currencies.find(s=>s.id===o);n&&this.selectedCurrencies.push(n)}}),this.paymentGatewayForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.required,r.k0.maxLength(50)]),apiUrl:new r.MJ(null,[r.k0.required,r.k0.maxLength(1e3)]),isReady:[!1],active:[!1],currenciesId:[[]],authType:["",r.k0.required],logo:[null]}),"edit"===this.dialogMode&&this.paymentGatewayForm.patchValue(this.paymentGateway),this.filteredCurrencies=this.searchCurrencyControl.valueChanges.pipe((0,W.Z)(""),(0,I.B)(400),(0,C.n)(t=>(0,$.of)(this.currencies.filter("string"==typeof t&&t?o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&!this.selectedCurrencies.some(n=>n.id===o.id):o=>!this.selectedCurrencies.some(n=>n.id===o.id)))))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}addCurrency(t){this.searchCurrencyControl.setValue(""),this.selectedCurrencies.push(t),this.paymentGatewayForm.get("currenciesId").setValue(this.selectedCurrencies.map(o=>o.id)),this._changeDetectorRef.markForCheck()}removeCurrency(t){const o=this.selectedCurrencies.indexOf(t);o>=0&&this.selectedCurrencies.splice(o,1),this.paymentGatewayForm.get("currenciesId").setValue(this.selectedCurrencies.map(n=>n.id)),this.searchCurrencyControl.setValue("")}createPaymentGateway(){const t=this.paymentGatewayForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear pasarela de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewaysService.createPaymentGateway(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}updatePaymentGateway(){const t=this.paymentGatewayForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar pasarela de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewaysService.updatePaymentGateway(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}openCropperDialog(t){if(0===t.target.files.length)return;const o=t.target.files[0];this._imagesService.validMaxMBSize(o,2)&&this._imagesService.validImageType(o)&&this._imagesService.openCropperDialog(t,!1).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{n&&this._imagesService.uploadImage("List",o).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this.paymentGatewayForm.get("logo").setValue(s.imageUrl),this.paymentGateway.logo=s.imageUrl,"edit"===this.dialogMode?this._paymentGatewaysService.updatePaymentGatewayImage({id:this.paymentGateway.id,imageUrl:s.imageUrl}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck())}):this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})})}removeImage(){const t=this.paymentGatewayForm.get("logo").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._imagesService.removeImage(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this.paymentGatewayForm.get("logo").setValue(null),this.paymentGateway.logo=null,"edit"===this.dialogMode&&(de.H.IsNullOrEmpty(this.paymentGateway.currencies)||delete this.paymentGateway.currencies,this._paymentGatewaysService.updatePaymentGatewayImage({id:this.paymentGateway.id,imageUrl:null}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()}))})})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(pe.L),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP),e.rXU(p.bZ),e.rXU(Z.M),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["payment-gateway-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[["auto","matAutocomplete"],["currencyChipGrid",""],["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","h-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"grid","w-full","gap-4","py-4","mt-1","sm:gap-8","sm:grid-cols-2",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","",3,"formControlName","maxlength","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"w-full","col-span-2"],["appearance","fill",1,"w-full","sm:col-span-2"],["placeholder","Agregar Moneda","required","",1,"w-full",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["aria-label","Agregar moneda"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mt-2","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,""],[1,"object-contain","w-full","h-full",3,"src"],[1,"flex","flex-row","justify-around"],[1,"flex","flex-col","items-center","justify-center"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[3,"removed"],[1,"truncate","max-w-16","sm:max-w-24"],["matChipRemove","",1,"w-5","h-5"],[1,"icon-size-5",3,"svgIcon"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-red-700",3,"svgIcon"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"div",3)(1,"div",4),e.DNE(2,$o,2,0,"h2",5)(3,So,2,0,"h2",5),e.k0s(),e.j41(4,"div",6),e.DNE(5,To,9,1,"div",7)(6,Xo,45,26,"div",8),e.k0s(),e.DNE(7,Yo,5,3,"div",9),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[j.Jj,X.jL,X.$3,V.wT,X.pN,u.Hl,u.$z,u.iY,P.YN,P.Jl,P.HW,P.D7,P.Zv,p.hM,p.tx,d.RG,d.rl,d.nJ,b.m_,b.An,h.fS,h.fg,A.Ve,A.VO,k.mV,k.sG,j.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.l_,r.j4,r.JD],encapsulation:2})}return i})();var ue=c(82341);const Uo=(i,a)=>a.id,q=()=>["Super Administrador"],Po=i=>({"pointer-events-none":i}),Qo=()=>[10,25,50,100];function Oo(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createPaymentGateway())}),e.nrm(1,"mat-icon",22),e.j41(2,"span",23),e.EFF(3,"Nuevo"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","mat_solid:add"))}function Jo(i,a){if(1&i&&e.nrm(0,"img",32),2&i){const t=e.XpG().$implicit;e.Y8G("alt","PM Logo")("src",t.logo,e.B4B)}}function Wo(i,a){1&i&&(e.j41(0,"div",36),e.EFF(1," SIN LOGO "),e.k0s())}function qo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",39),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updatePaymentGatewayReadyStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.isReady)("color","primary")}}function Zo(i,a){1&i&&e.nrm(0,"mat-spinner",40),2&i&&e.Y8G("diameter",20)("color","primary")}function Ho(i,a){if(1&i&&(e.j41(0,"div",37),e.DNE(1,qo,1,2,"mat-slide-toggle",38)(2,Zo,1,2),e.k0s()),2&i){const t=e.XpG().$index,o=e.XpG(4);e.R7$(),e.vxM(1,o.isLoading&&o.selectedIsReadySlide===t?2:1)}}function Ko(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",39),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updatePaymentGatewayStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.active)("color","primary")}}function en(i,a){1&i&&e.nrm(0,"mat-spinner",40),2&i&&e.Y8G("diameter",20)("color","primary")}function tn(i,a){if(1&i&&(e.j41(0,"div",37),e.DNE(1,Ko,1,2,"mat-slide-toggle",38)(2,en,1,2),e.k0s()),2&i){const t=e.XpG().$index,o=e.XpG(4);e.R7$(),e.vxM(1,o.isLoading&&o.selectedSlide===t?2:1)}}function on(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.editPaymentGateway(n))}),e.nrm(2,"mat-icon",43),e.k0s(),e.j41(3,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.deletePaymentGateway(n.id))}),e.nrm(4,"mat-icon",43),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function nn(i,a){if(1&i&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31),e.DNE(3,Jo,1,2,"img",32)(4,Wo,2,0),e.k0s()(),e.j41(5,"div",33),e.EFF(6),e.k0s(),e.DNE(7,Ho,3,1,"div",34)(8,tn,3,1,"div",34)(9,on,5,2,"div",35),e.k0s()),2&i){const t=a.$implicit;e.R7$(3),e.vxM(3,t.logo?3:4),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngxPermissionsOnly",e.lJ4(5,q)),e.R7$(),e.Y8G("ngxPermissionsOnly",e.lJ4(6,q)),e.R7$(),e.Y8G("ngxPermissionsOnly",e.lJ4(7,q))}}function sn(i,a){1&i&&e.Z7z(0,nn,10,8,"div",29,Uo),2&i&&e.Dyx(a)}function an(i,a){if(1&i&&(e.j41(0,"div",24)(1,"div",25),e.nrm(2,"div"),e.j41(3,"div",26),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",27),e.EFF(6," Operativa "),e.k0s(),e.j41(7,"div",27),e.EFF(8," Activo "),e.k0s(),e.j41(9,"div",28),e.EFF(10," Acciones "),e.k0s()(),e.DNE(11,sn,2,0),e.nI1(12,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(8),e.vxM(11,(t=e.bMT(12,2,o.paymentGateways$))?11:-1,t)}}function rn(i,a){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado pasarela de pagos!":"\xa1No se ha creado creado ning\xfan pasarela de pago a\xfan!","")}}function ln(i,a){1&i&&e.DNE(0,an,13,4,"div",24)(1,rn,2,1),2&i&&e.vxM(0,a.length>0?0:1)}function cn(i,a){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado pasarela de pagos!":"\xa1No se ha creado creado ning\xfan pasarela de pago a\xfan!","")}}function mn(i,a){if(1&i&&e.nrm(0,"mat-paginator",20),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(6,Po,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(8,Qo))("showFirstLastButtons",!0)}}let dn=(()=>{class i{constructor(t,o,n,s,m,_){this._changeDetectorRef=t,this._paymentGatewayService=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=m,this.store=_,this.isLoading=!1,this.selectedSlide=null,this.selectedIsReadySlide=null,this.searchInputControl=new r.MJ(null),this._unsubscribeAll=new w.B}ngOnInit(){this.paymentGateways$=this.store.select(wo._J),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(300),(0,W.Z)(null),(0,C.n)(t=>null!==t?(this.isLoading=!0,this._paymentGatewayService.findAllPaymentGateways(0,10,"name","desc",t)):(0,$.of)()),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"active",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._paymentGatewayService.findAllPaymentGateways(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updatePaymentGatewayStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._paymentGatewayService.updatePaymentGatewayStatus({id:o.id,active:t.checked}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck())})}updatePaymentGatewayReadyStatus(t,o,n){this.isLoading=!0,this.selectedIsReadySlide=n,this._paymentGatewayService.updatePaymentGatewayReadyStatus({id:o.id,isReady:t.checked}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedIsReadySlide=-1,this._changeDetectorRef.markForCheck())})}createPaymentGateway(){this._openDialog(new Ro.Z,"add")}editPaymentGateway(t){this._openDialog(t,"edit")}deletePaymentGateway(t){this._fuseConfirmationService.open({title:"Eliminar Pasarela de pago",message:"\xbfEsta seguro que desea Eliminar el pasarela de pago? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewayService.removePaymentGateway(t,this.pagination.page,this.pagination.size,"active","desc").pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck())}),this._changeDetectorRef.markForCheck()})}_openDialog(t,o){this._dialog.open(zo,{data:{paymentGateway:t,dialogMode:o},disableClose:!0,panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(pe.L),e.rXU(p.bZ),e.rXU(R.G),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["payment-gateways"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:35,vars:15,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","sm:mt-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["class","mt-4 text-white sm:mt-0 bg-gradient-to-r from-primary-500 to-primary-600 hover:to-primary-900 hover:shadow-lg","mat-raised-button","",3,"click",4,"ngxPermissionsOnly"],[1,"flex","flex-auto"],[1,"flex","flex-col","justify-between","flex-auto"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","five-columns-grid"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","five-columns-grid"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],[1,"w-full","m-0.5",3,"alt","src"],[1,"truncate"],["class","flex justify-center mr-4 text-center",4,"ngxPermissionsOnly"],["class","flex flex-row justify-end gap-2",4,"ngxPermissionsOnly"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"change","checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",4),e.nrm(9,"mat-icon",6),e.j41(10,"a",7),e.EFF(11,"Nomencladores"),e.k0s()(),e.j41(12,"div",4),e.nrm(13,"mat-icon",6),e.j41(14,"a",7),e.EFF(15,"Pasarela de pagos"),e.k0s()()(),e.j41(16,"div",8)(17,"a",9),e.nrm(18,"mat-icon",6),e.j41(19,"span",10),e.EFF(20,"Regresar"),e.k0s()()()(),e.j41(21,"div",11)(22,"div",12),e.EFF(23," Listado de Pasarela de pagos "),e.k0s()()(),e.j41(24,"div",13)(25,"mat-form-field",14),e.nrm(26,"mat-icon",15)(27,"input",16),e.k0s(),e.DNE(28,Oo,4,1,"button",17),e.k0s()(),e.j41(29,"div",18)(30,"div",19),e.DNE(31,ln,2,1),e.nI1(32,"async"),e.DNE(33,cn,2,1)(34,mn,1,9,"mat-paginator",20),e.k0s()()()),2&o){let s;e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar pasarela de pagos"),e.R7$(),e.Y8G("ngxPermissionsOnly",e.lJ4(14,q)),e.R7$(3),e.vxM(31,(s=e.bMT(32,12,n.paymentGateways$))?31:33,s),e.R7$(3),e.vxM(34,n.pagination.length>0?34:-1)}},dependencies:[j.Jj,u.Hl,u.$z,d.RG,d.rl,d.JW,b.m_,b.An,h.fS,h.fg,y.Ou,y.iy,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,j.YU,r.X1,r.me,r.BC,r.l_,M.Wk,ue.Ov,ue.f6],encapsulation:2,data:{animation:ie.X},changeDetection:0})}return i})();var pn=c(84713),_e=c(82765),ge=c(78693);function un(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar m\xe9todo de pago "),e.k0s())}function _n(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar m\xe9todo de pago "),e.k0s())}function gn(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.paymentMethod.name||"Sin nombre")}}function hn(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s(),e.j41(7,"div",17)(8,"mat-slide-toggle",18),e.EFF(9),e.k0s()(),e.j41(10,"div",17)(11,"mat-checkbox",19),e.EFF(12," Usar pasarela "),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.paymentMethodForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("maxlength",50)("placeholder","Ejemplo: Transferencia"),e.R7$(2),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===t.paymentMethodForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(2),e.Y8G("color","primary")("formControlName","useGateway")}}function fn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updatePaymentMethod())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentMethodForm.invalid)}}function Cn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createPaymentMethod())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentMethodForm.invalid)}}function bn(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",20),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,fn,2,2,"button",21)(5,Cn,2,2,"button",21),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let vn=(()=>{class i{constructor(t,o,n,s,m,_,v){this.data=t,this._paymentMethodsService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this._snackBar=v,this.dialogMode="view",this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode,this.paymentMethod={...t.paymentMethod}}ngOnInit(){this.paymentMethodForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.required,r.k0.maxLength(50)]),useGateway:[!1],active:[!1]}),"edit"===this.dialogMode&&this.paymentMethodForm.patchValue(this.paymentMethod)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createPaymentMethod(){const t=this.paymentMethodForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear m\xe9todo de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.createPaymentMethod(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createPaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}updatePaymentMethod(){const t=this.paymentMethodForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar m\xe9todo de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.updatePaymentMethod(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{s&&(this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updatePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(ge.q),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP),e.rXU(D.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-payment-method-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","h-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"grid","w-full","grid-cols-2","gap-4","py-4","mt-1","sm:gap-8","sm:grid-cols-3",3,"formGroup","autocomplete"],[1,"w-full","col-span-2","sm:col-span-1","fuse-mat-no-subscript"],["matInput","","type","text","required","",3,"formControlName","maxlength","placeholder"],[1,"flex","items-center","sm:justify-center"],[1,"mt-4",3,"formControlName","color"],[1,"mt-4",3,"color","formControlName"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,un,2,0,"h2",2)(4,_n,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,gn,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,hn,13,10,"div",5),e.bVm(),e.k0s(),e.DNE(10,bn,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.X1,r.j4,r.JD,d.RG,d.rl,d.nJ,h.fS,h.fg,u.Hl,u.$z,p.tx,k.sG,_e.g7,_e.So],encapsulation:2})}return i})();class xn{}const yn=(i,a)=>a.id,kn=i=>({"pointer-events-none":i}),Fn=()=>[5,10,25,100];function jn(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",32),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updatePaymentMethodStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Gn(i,a){1&i&&e.nrm(0,"mat-spinner",28),2&i&&e.Y8G("diameter",20)("color","primary")}function wn(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"div",26),e.EFF(4),e.k0s(),e.j41(5,"div",22),e.DNE(6,jn,1,2,"mat-slide-toggle",27)(7,Gn,1,2,"mat-spinner",28),e.k0s(),e.j41(8,"div",29)(9,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",31),e.k0s(),e.j41(11,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deletePaymentMethod(n))}),e.nrm(12,"mat-icon",31),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isSlideLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isSlideLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Rn(i,a){1&i&&e.Z7z(0,wn,13,6,"div",25,yn),2&i&&e.Dyx(a)}function Dn(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",22),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,Rn,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",24),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.paymentMethods$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,kn,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Fn))("showFirstLastButtons",!0)}}function $n(i,a){1&i&&(e.j41(0,"div",33),e.EFF(1," \xa1No hay m\xe9todos de pago creadas para el negocio!"),e.k0s())}function Sn(i,a){1&i&&e.DNE(0,Dn,12,13,"div",19)(1,$n,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Tn=(()=>{class i{constructor(t,o,n,s,m,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._paymentMethodsService=s,this._snackBar=m,this.store=_,this.isLoading=!1,this.isSlideLoading=!1,this.paymentMethod=new xn,this.paymentMethods$=(0,$.of)([]),this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.paymentMethods$=this.store.select(pn.xi),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(300),(0,C.n)(t=>(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this.pagination.page,this.pagination.size,this._sort.active,this._sort.direction,t))),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deletePaymentMethod(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el m\xe9todo de pago: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.removePaymentMethod(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updatePaymentMethodStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._paymentMethodsService.updatePaymentMethodStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(vn,{data:{paymentMethod:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(ge.q),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-payment-methods"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"M\xe9todos de pago"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," M\xe9todos de pago "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.openDialog(n.paymentMethod,"add")}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Sn,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.paymentMethods$))?28:-1,s)}},dependencies:[M.Wk,b.m_,b.An,d.RG,d.rl,d.JW,h.fS,h.fg,r.YN,r.me,r.BC,r.X1,r.l_,u.Hl,u.$z,g.NQ,g.B4,g.aE,k.mV,k.sG,F.D6,F.LG,y.Ou,y.iy,j.YU,j.Jj],encapsulation:2,changeDetection:0})}return i})();var Mn=c(77581),he=c(86069);function En(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Tipo de Servicio "),e.k0s())}function Ln(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Tipo de Servicio "),e.k0s())}function In(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.serviceType.name||"Sin nombre")}}function Bn(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.serviceTypeForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function Nn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateServiceType())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function Xn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createServiceType())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function An(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,Nn,2,3,"button",18)(5,Xn,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Vn=(()=>{class i{constructor(t,o,n,s,m,_,v){this.data=t,this._serviceTypesService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this._snackBar=v,this.dialogMode="view",this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode,this.serviceType=t.serviceType}ngOnInit(){this.serviceTypeForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(100)])}),"edit"===this.dialogMode&&this.serviceTypeForm.patchValue(this.serviceType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createServiceType(){let t=this.serviceTypeForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._serviceTypesService.createServiceType(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateServiceType(){const t=this.serviceTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._serviceTypesService.updateServiceType(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(he.Q),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP),e.rXU(D.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-service-type-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,En,2,0,"h2",2)(4,Ln,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,In,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Bn,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,An,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[X.jL,u.Hl,u.$z,P.YN,p.hM,p.tx,d.RG,d.rl,d.nJ,b.m_,h.fS,h.fg,A.Ve,k.mV,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD],encapsulation:2})}return i})();class Yn{}const zn=i=>({"pointer-events-none":i}),Un=()=>[5,10,25,100];function Pn(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateServiceTypeStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Qn(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function On(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,Pn,1,2,"mat-slide-toggle",24)(7,Qn,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteServiceType(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Jn(i,a){1&i&&e.Z7z(0,On,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function Wn(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,Jn,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.serviceTypes$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,zn,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Un))("showFirstLastButtons",!0)}}function qn(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay combustibles creados para el negocio!"),e.k0s())}function Zn(i,a){1&i&&e.DNE(0,Wn,12,13,"div",16)(1,qn,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Hn=(()=>{class i{constructor(t,o,n,s,m,_){this._serviceTypesService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=m,this.store=_,this.serviceType=new Yn,this.serviceTypes$=(0,$.of)([]),this.isLoading=!1,this.searchInputControl=new r.MJ(null),this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.serviceTypes$=this.store.select(Mn.jr),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(300),(0,W.Z)(null),(0,C.n)(t=>null!==t?(this.isLoading=!0,this._serviceTypesService.getServiceTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value)):(0,$.of)()),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteServiceType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de servicio: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._serviceTypesService.removeServiceType(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateServiceTypeStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._serviceTypesService.updateServiceTypeStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateServiceTypeStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Vn,{data:{serviceType:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(he.Q),e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-service-types"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipo de servicio"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipo de servicio "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.serviceType,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,Zn,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.serviceTypes$))?25:-1,s)}},dependencies:[j.Jj,u.Hl,u.$z,d.RG,b.m_,b.An,h.fS,y.Ou,y.iy,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,j.YU,r.X1,M.Wk],encapsulation:2,changeDetection:0})}return i})();var Kn=c(17085),fe=c(21326);function es(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Unidad de Medida "),e.k0s())}function ts(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Unidad de Medida "),e.k0s())}function is(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.updateUom())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function os(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createUom())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}let ns=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._changeDetectorRef=(0,e.WQX)(e.gRc),this._destroyRef=(0,e.WQX)(e.abz),this._dialogRef=(0,e.WQX)(p.CP),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)(R.G),this._snackBar=(0,e.WQX)(D.UG),this._unsubscribeAll=new w.B,this._uomService=(0,e.WQX)(fe.N),this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.uomForm=this._formBuilder.group({id:[null],name:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],abbr:[null,[r.k0.required,r.k0.maxLength(255)]],type:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.createUom(t).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createUom.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.updateUom(t).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUom.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-uom-dialog"]],standalone:!0,features:[e.aNF],decls:39,vars:19,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,es,2,0,"h2",2)(3,ts,2,0,"h2",2),e.k0s(),e.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"form",6)(8,"mat-form-field",7)(9,"mat-label"),e.EFF(10,"Nombre"),e.k0s(),e.nrm(11,"input",8),e.k0s(),e.j41(12,"mat-form-field",7)(13,"mat-label"),e.EFF(14,"Sigla"),e.k0s(),e.nrm(15,"input",8),e.k0s(),e.j41(16,"mat-form-field",7)(17,"mat-label"),e.EFF(18,"Tipo"),e.k0s(),e.j41(19,"mat-select",9)(20,"mat-option",10),e.EFF(21,"\xc1rea"),e.k0s(),e.j41(22,"mat-option",10),e.EFF(23,"Conteo"),e.k0s(),e.j41(24,"mat-option",10),e.EFF(25,"Energ\xeda"),e.k0s(),e.j41(26,"mat-option",10),e.EFF(27,"Longitud"),e.k0s(),e.j41(28,"mat-option",10),e.EFF(29,"Peso"),e.k0s(),e.j41(30,"mat-option",10),e.EFF(31,"Tiempo"),e.k0s(),e.j41(32,"mat-option",10),e.EFF(33,"Volumen"),e.k0s()()()()()()(),e.j41(34,"div",11)(35,"button",12),e.EFF(36," Cancelar "),e.k0s(),e.DNE(37,is,2,3,"button",13)(38,os,2,3,"button",13),e.k0s()()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(4),e.Y8G("formGroup",n.uomForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.R7$(4),e.Y8G("formControlName","abbr")("placeholder","Siglas"),e.R7$(4),e.Y8G("formControlName","type"),e.R7$(),e.Y8G("value","area"),e.R7$(2),e.Y8G("value","conteo"),e.R7$(2),e.Y8G("value","energ\xeda"),e.R7$(2),e.Y8G("value","longitud"),e.R7$(2),e.Y8G("value","peso"),e.R7$(2),e.Y8G("value","tiempo"),e.R7$(2),e.Y8G("value","volumen"),e.R7$(3),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(37,"edit"===n.data.dialogMode?37:-1),e.R7$(),e.vxM(38,"add"===n.data.dialogMode?38:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.X1,r.j4,r.JD,d.RG,d.rl,d.nJ,h.fS,h.fg,A.Ve,A.VO,V.wT,V.Sy,u.Hl,u.$z,p.tx],encapsulation:2})}return i})();class ss{}const as=(i,a)=>a.id,rs=()=>[5,10,25,100];function ls(i,a){1&i&&(e.EFF(0," m"),e.j41(1,"sup"),e.EFF(2,"3"),e.k0s())}function cs(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",31),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateUomStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function ms(i,a){1&i&&e.nrm(0,"mat-spinner",28),2&i&&e.Y8G("diameter",20)("color","primary")}function ds(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",24)(1,"div",25),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.EFF(4),e.DNE(5,ls,3,0,"sup"),e.k0s(),e.j41(6,"div",22),e.EFF(7),e.k0s(),e.j41(8,"div",26),e.DNE(9,cs,1,2,"mat-slide-toggle",27)(10,ms,1,2,"mat-spinner",28),e.k0s(),e.j41(11,"div",26)(12,"button",29),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.updateUom(n))}),e.nrm(13,"mat-icon",30),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ","m3"===t.abbr?"":t.abbr," "),e.R7$(),e.vxM(5,"m3"===t.abbr?5:-1),e.R7$(2),e.SpI(" ",t.type," "),e.R7$(2),e.vxM(9,n.isSlideLoading&&n.selectedSlide===o?-1:9),e.R7$(),e.vxM(10,n.isSlideLoading&&n.selectedSlide===o?10:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit")}}function ps(i,a){1&i&&e.Z7z(0,ds,14,7,"div",24,as),2&i&&e.Dyx(a)}function us(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21),e.EFF(3,"Nombre"),e.k0s(),e.j41(4,"div",22),e.EFF(5," Siglas "),e.k0s(),e.j41(6,"div",22),e.EFF(7," Tipo "),e.k0s(),e.j41(8,"div",22),e.EFF(9," Activo "),e.k0s(),e.j41(10,"div",22),e.EFF(11,"Detalles"),e.k0s()(),e.DNE(12,ps,2,0),e.nI1(13,"async"),e.k0s(),e.nrm(14,"mat-paginator",23)),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(10),e.vxM(12,(t=e.bMT(13,7,o.uoms$))?12:-1,t),e.R7$(2),e.Y8G("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(9,rs))("showFirstLastButtons",!0)}}function _s(i,a){1&i&&(e.j41(0,"div",32),e.EFF(1,"\xa1No se ha creado ninguna unidad de medida!"),e.k0s())}function gs(i,a){1&i&&e.DNE(0,us,15,10)(1,_s,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let hs=(()=>{class i{constructor(t,o,n,s,m,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._uomService=s,this._snackBar=m,this.store=_,this.uoms$=(0,$.of)([]),this.searchInputControl=new r.MJ,this.isLoading=!1,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.uoms$=this.store.select(Kn.Ns),this.store.select(S.Dz).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,I.B)(300),(0,C.n)(t=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,x.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,L.h)(this._sort.sortChange,this._paginator.page).pipe((0,C.n)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,x.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(new ss,"add")}updateUom(t){this._openDialog(t,"edit")}updateUomStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._uomService.updateUomStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUomStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(ns,{data:{uom:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(fe.N),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-uom"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-auto","sm:mb-18"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Almac\xe9n"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Unidades de Medida"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Unidades de Medida "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.createUom()}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,gs,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.uoms$))?28:-1,s)}},dependencies:[j.Jj,r.YN,r.me,r.BC,u.Hl,u.$z,d.RG,d.rl,d.JW,b.m_,b.An,h.fS,h.fg,y.Ou,y.iy,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,r.X1,r.l_,M.Wk],styles:[".uom-grid{grid-template-columns:auto 70px 150px 72px 72px}\n"],encapsulation:2,changeDetection:0})}return i})();var fs=c(21781),Ce=c(86952);function Cs(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar tipo de comprobante "),e.k0s())}function bs(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar tipo de comprobante "),e.k0s())}function vs(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.voucher.name||"Sin nombre")}}function xs(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.voucherForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function ys(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateVoucher())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function ks(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createVoucher())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function Fs(i,a){if(1&i&&(e.j41(0,"div",6)(1,"button",18),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,ys,2,3,"button",19)(4,ks,2,3,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let js=(()=>{class i{constructor(t,o,n,s,m,_){this.data=t,this._VouchersService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=m,this._dialogRef=_,this.dialogMode="view",this._unsubscribeAll=new w.B,this.dialogMode=t.dialogMode,this.voucher=t.voucher}ngOnInit(){this.voucherForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)])}),"edit"===this.dialogMode&&this.voucherForm.patchValue(this.voucher)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createVoucher(){let t=this.voucherForm.getRawValue();t=(0,U.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._VouchersService.createVoucher(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante creado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateVoucher(){const t=this.voucherForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._VouchersService.updateVoucher(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante actualizado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(p.Vh),e.rXU(Ce.v),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(R.G),e.rXU(p.CP))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-voucher-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black/10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Cs,2,0,"h2",2)(3,bs,2,0,"h2",2),e.k0s(),e.j41(4,"div",3),e.DNE(5,vs,9,1,"div",4)(6,xs,8,4,"div",5),e.k0s(),e.DNE(7,Fs,5,3,"div",6),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[p.hM,p.tx,u.Hl,u.$z,d.RG,d.rl,d.nJ,b.m_,h.fS,h.fg,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD],encapsulation:2,changeDetection:0})}return i})();class Gs{}function ws(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),m=s.$implicit,_=s.$index,v=e.XpG(4);return e.Njj(v.updateVoucherStatus(n,m,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Rs(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function Ds(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"div",22),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.EFF(4),e.k0s(),e.j41(5,"div",23),e.DNE(6,ws,1,2,"mat-slide-toggle",24)(7,Rs,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteVoucher(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function $s(i,a){1&i&&e.Z7z(0,Ds,13,6,"div",21,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function Ss(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div"),e.j41(3,"div",18),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",19),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,$s,2,0),e.nI1(10,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,2,o.vouchers$))?9:-1,t)}}function Ts(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay tipos de comprobantes creados para la tienda! "),e.k0s())}function Ms(i,a){1&i&&e.DNE(0,Ss,11,4,"div",16)(1,Ts,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Es=(()=>{class i{constructor(t,o,n,s,m,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._vouchersService=s,this._snackBar=m,this.store=_,this.vouchers$=(0,$.of)([]),this.voucher=new Gs,this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new w.B}ngOnInit(){this.vouchers$=this.store.select(fs.gQ)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteVoucher(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de comprobante: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._vouchersService.removeVoucher(t.id).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.removeVoucher.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateVoucherStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._vouchersService.updateVoucherStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(f.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateVoucherStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(js,{data:{voucher:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(p.bZ),e.rXU(R.G),e.rXU(Ce.v),e.rXU(D.UG),e.rXU(G.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-vouchers"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(g.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","small-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","small-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipos de comprobantes"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipos de comprobantes "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.voucher,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,Ms,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.vouchers$))?25:-1,s)}},dependencies:[j.Jj,u.Hl,u.$z,d.RG,b.m_,b.An,h.fS,y.Ou,F.D6,F.LG,k.mV,k.sG,g.NQ,g.B4,g.aE,r.X1],encapsulation:2,changeDetection:0})}return i})();var Ls=c(90377),Is=c(47399),Bs=c(79451),be=c(23301),Ns=c(99433),Xs=c(57981),As=c(23285),Vs=c(86779),Ys=c(59013),zs=c(90225),Us=c(63425),Ps=c(7561);const Qs=[{path:"",component:Kt,children:[{path:"banks",component:Ue,resolve:{banks:Ls.K}},{path:"brands",component:rt,resolve:{brands:Is.l}},{path:"categories",component:Ht,resolve:{categories:Bs.V7}},{path:"currencies",component:fi,resolve:{currencies:be.p}},{path:"fuels",component:Bi,resolve:{fuels:Ns.w}},{path:"multipliers",component:oo,resolve:{multipliers:Xs.d}},{path:"operations-types",component:Go,resolve:{operationTypes:As.h}},{path:"payment-gateways",component:dn,resolve:{currencies:be.I,paymentGateways:Vs.I}},{path:"payment-methods",component:Tn,resolve:{paymentMethods:Ys.v}},{path:"service-types",component:Hn,resolve:{serviceTypes:zs.f}},{path:"uoms",component:hs,resolve:{uoms:Us.n}},{path:"vouchers",component:Es,resolve:{vouchers:Ps.Q}}]}]}}]);