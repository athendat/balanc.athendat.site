"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5396],{45396:(Se,z,l)=>{l.r(z),l.d(z,{default:()=>Me});var k=l(51188),t=l(54438);let q=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["box"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(o,n){1&o&&t.nrm(0,"router-outlet")},dependencies:[k.n3],encapsulation:2})}return i})();var D=l(95416),w=l(75351),X=l(14160),$=l(21413),m=l(56977),R=l(59640),M=l(50891),K=l(86800),B=l(46601),a=l(89417),tt=l(67376),A=l(94794),h=l(32102),_=l(59042),x=l(88834),v=l(71365),et=l(37403);function it(i,s){1&i&&(t.j41(0,"h2",2),t.EFF(1," Editar monto inicial de caja "),t.k0s())}function ot(i,s){1&i&&(t.j41(0,"h2",2),t.EFF(1," Devoluci\xf3n de efectivo de caja "),t.k0s())}function nt(i,s){1&i&&(t.j41(0,"h2",2),t.EFF(1," Pr\xe9stamo de efectivo de caja "),t.k0s())}function at(i,s){1&i&&(t.j41(0,"h2",2),t.EFF(1," Gasto de efectivo de caja "),t.k0s())}function st(i,s){1&i&&(t.j41(0,"mat-form-field",6)(1,"mat-label"),t.EFF(2,"Motivo"),t.k0s(),t.nrm(3,"textarea",11),t.k0s()),2&i&&(t.R7$(3),t.Y8G("formControlName","reason"))}let rt=(()=>{class i{constructor(e,o,n,r,u,p){this.data=e,this._boxService=o,this._changeDetectorRef=n,this._dialogRef=r,this._formBuilder=u,this._fuseConfirmationService=p,this._unsubscribeAll=new $.B,this._snackBar=(0,t.WQX)(D.UG),this.dialogMode=e.dialogMode,this.boxMovementType=this.data.boxMovementType}ngOnInit(){this.boxMovementForm=this._formBuilder.group({id:new a.MJ,amount:new a.MJ(null,[a.k0.required,a.k0.min(0),a.k0.maxLength(9)]),reason:new a.MJ(null,[a.k0.maxLength(250)])})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBoxMovement(){let e=this.boxMovementForm.getRawValue();e=(0,tt.omit)(e,["id"]),e.movementType=this.boxMovementType,this._fuseConfirmationService.open({title:"Crear movimiento",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.createBoxMovement(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&(this._snackBar.openFromComponent(A.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Movimiento creado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this.closeDialog()),this._changeDetectorRef.markForCheck()})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(w.Vh),t.rXU(v.R),t.rXU(t.gRc),t.rXU(w.CP),t.rXU(a.ok),t.rXU(B.G))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["box-admin-dialog"]],standalone:!0,features:[t.aNF],decls:19,vars:12,consts:[[1,"relative","px-6","pt-5","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-start","border-b"],["mat-dialog-title","",1,"text-xl","font-semibold"],["mat-dialog-content","",1,"flex","mt-4","flex-col","items-center","flex-auto","w-full","border-b"],[1,"flex","flex-col","w-full",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-4"],[1,"w-full"],["matInput","","type","number",3,"formControlName","required"],["mat-dialog-actions","",1,"flex","items-center","justify-between","w-full","pt-2","pb-3"],["mat-button","",3,"click","color"],["mat-button","",3,"click","disabled","color"],["matInput","","cdkTextareaAutosize","","maxlength","250","rows","4",3,"formControlName"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,it,2,0,"h2",2)(3,ot,2,0,"h2",2)(4,nt,2,0,"h2",2)(5,at,2,0,"h2",2),t.k0s(),t.j41(6,"div",3)(7,"form",4)(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Monto"),t.k0s(),t.nrm(12,"input",7),t.k0s(),t.DNE(13,st,4,1,"mat-form-field",6),t.k0s()()(),t.j41(14,"div",8)(15,"button",9),t.bIt("click",function(){return n.closeDialog()}),t.EFF(16,"Cancelar"),t.k0s(),t.j41(17,"button",10),t.bIt("click",function(){return n.createBoxMovement()}),t.EFF(18," Guardar "),t.k0s()()()),2&o&&(t.R7$(2),t.vxM(2,"initial"===n.boxMovementType?2:-1),t.R7$(),t.vxM(3,"return"===n.boxMovementType?3:-1),t.R7$(),t.vxM(4,"loan"===n.boxMovementType?4:-1),t.R7$(),t.vxM(5,"spent"===n.boxMovementType?5:-1),t.R7$(2),t.Y8G("formGroup",n.boxMovementForm)("autocomplete","off"),t.R7$(5),t.Y8G("formControlName","amount")("required",!0),t.R7$(),t.vxM(13,"initial"!==n.boxMovementType?13:-1),t.R7$(2),t.Y8G("color","warn"),t.R7$(2),t.Y8G("disabled",n.boxMovementForm.invalid)("color","primary"))},dependencies:[h.RG,h.rl,h.nJ,_.fS,_.fg,et.xb,x.Hl,x.$z,a.X1,a.qT,a.me,a.Q0,a.BC,a.cb,a.YS,a.tU,a.j4,a.JD],encapsulation:2,changeDetection:0})}return i})();var b=l(60177),y=l(99213),g=l(59115),lt=l(31849),mt=l(55542);const dt=(i,s)=>s.id,ct=i=>({"ring ring-inset ring-primary":i});function ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("initial"))}),t.nrm(1,"mat-icon",19),t.EFF(2," Editar monto inicial "),t.k0s(),t.j41(3,"button",43),t.nrm(4,"mat-icon",19),t.EFF(5," Cerrar caja "),t.k0s()}2&i&&(t.R7$(),t.Y8G("svgIcon","mat_solid:edit"),t.R7$(3),t.Y8G("svgIcon","mat_solid:lock"))}function bt(i,s){if(1&i){const e=t.RV6();t.j41(0,"button",44)(1,"span",18),t.EFF(2,"Movimientos de caja"),t.k0s(),t.nrm(3,"mat-icon",19),t.k0s(),t.j41(4,"mat-menu",null,1)(6,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("return"))}),t.nrm(7,"mat-icon",19),t.EFF(8," Devoluci\xf3n "),t.k0s(),t.j41(9,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("loan"))}),t.nrm(10,"mat-icon",19),t.EFF(11," Pr\xe9stamo "),t.k0s(),t.j41(12,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("spent"))}),t.nrm(13,"mat-icon",19),t.EFF(14," Gasto "),t.k0s(),t.j41(15,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("depot"))}),t.nrm(16,"mat-icon",19),t.EFF(17," Dep\xf3sito "),t.k0s(),t.j41(18,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openBoxAdminDialog("extraction"))}),t.nrm(19,"mat-icon",19),t.EFF(20," Extracci\xf3n "),t.k0s()()}if(2&i){const e=t.sdS(5);t.Y8G("matMenuTriggerFor",e),t.R7$(3),t.Y8G("svgIcon","mat_solid:expand_more"),t.R7$(4),t.Y8G("svgIcon","mat_solid:settings_backup_restore"),t.R7$(3),t.Y8G("svgIcon","mat_solid:real_estate_agent"),t.R7$(3),t.Y8G("svgIcon","mat_solid:paid"),t.R7$(3),t.Y8G("svgIcon","mat_solid:south_west"),t.R7$(3),t.Y8G("svgIcon","mat_solid:north_east")}}function pt(i,s){if(1&i&&(t.j41(0,"div",48)(1,"div",49),t.nrm(2,"div",50),t.j41(3,"div",51),t.EFF(4),t.k0s()(),t.j41(5,"div",52),t.EFF(6),t.nI1(7,"percent"),t.k0s()()),2&i){const e=s.$implicit,o=s.$index,n=t.XpG(3);t.R7$(2),t.xc7("background-color",n.boxMovementDistribution.colors[o]),t.R7$(2),t.JRh(n.data.labels[o]),t.R7$(2),t.SpI(" ",t.i5U(7,4,e/n.data.total,"1.2-2")," ")}}function ht(i,s){if(1&i&&(t.j41(0,"div",41)(1,"div",45),t.nrm(2,"apx-chart",46),t.k0s(),t.j41(3,"div",47),t.Z7z(4,pt,8,7,"div",48,t.fX1),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("chart",e.boxMovementDistribution.chart)("colors",e.boxMovementDistribution.colors)("labels",e.boxMovementDistribution.labels)("plotOptions",e.boxMovementDistribution.plotOptions)("series",e.boxMovementDistribution.series)("states",e.boxMovementDistribution.states)("tooltip",e.boxMovementDistribution.tooltip),t.R7$(2),t.Dyx(e.data.series)}}function ft(i,s){if(1&i&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div")(4,"a",6),t.EFF(5,"Inicio"),t.k0s()(),t.j41(6,"div",7),t.nrm(7,"mat-icon",8),t.j41(8,"a",9),t.EFF(9,"Caja"),t.k0s()(),t.j41(10,"div",7),t.nrm(11,"mat-icon",8),t.j41(12,"a",9),t.EFF(13,"Administraci\xf3n"),t.k0s()()(),t.j41(14,"div",10)(15,"h2",11),t.EFF(16," Administraci\xf3n de caja "),t.k0s(),t.j41(17,"div",12)(18,"span",13),t.EFF(19),t.nI1(20,"date"),t.k0s(),t.j41(21,"span",14),t.EFF(22),t.nI1(23,"titlecase"),t.k0s()()()(),t.j41(24,"div",15)(25,"div",16)(26,"button",17)(27,"span",18),t.EFF(28,"Opciones"),t.k0s(),t.nrm(29,"mat-icon",19),t.k0s(),t.j41(30,"mat-menu",null,0),t.DNE(32,ut,6,2),t.k0s()(),t.DNE(33,bt,21,7),t.k0s()(),t.j41(34,"div",20)(35,"div",21)(36,"div",22)(37,"div",23)(38,"div",24),t.nrm(39,"div",25),t.k0s(),t.j41(40,"div",26),t.EFF(41,"Monto inicial"),t.k0s(),t.j41(42,"div",27),t.EFF(43),t.nI1(44,"currency"),t.k0s()(),t.j41(45,"div",23)(46,"div",24),t.nrm(47,"div",28),t.k0s(),t.j41(48,"div",26),t.EFF(49,"Ingresos"),t.k0s(),t.j41(50,"div",27),t.EFF(51),t.nI1(52,"currency"),t.k0s()(),t.j41(53,"div",23)(54,"div",24),t.nrm(55,"div",29),t.k0s(),t.j41(56,"div",26),t.EFF(57,"Devoluciones"),t.k0s(),t.j41(58,"div",27),t.EFF(59),t.nI1(60,"currency"),t.k0s()(),t.j41(61,"div",23)(62,"div",24),t.nrm(63,"div",30),t.k0s(),t.j41(64,"div",26),t.EFF(65,"Pr\xe9stamos"),t.k0s(),t.j41(66,"div",27),t.EFF(67),t.nI1(68,"currency"),t.k0s()(),t.j41(69,"div",23)(70,"div",24),t.nrm(71,"div",31),t.k0s(),t.j41(72,"div",32),t.EFF(73,"Gastos"),t.k0s(),t.j41(74,"div",27),t.EFF(75),t.nI1(76,"currency"),t.k0s()(),t.j41(77,"div",23)(78,"div",24),t.nrm(79,"div",33),t.k0s(),t.j41(80,"div",32),t.EFF(81,"Dep\xf3sitos"),t.k0s(),t.j41(82,"div",27),t.EFF(83),t.nI1(84,"currency"),t.k0s()(),t.j41(85,"div",23)(86,"div",24),t.nrm(87,"div",34),t.k0s(),t.j41(88,"div",32),t.EFF(89,"Extracciones"),t.k0s(),t.j41(90,"div",27),t.EFF(91),t.nI1(92,"currency"),t.k0s()(),t.j41(93,"div",23),t.nrm(94,"div",16),t.j41(95,"div",35),t.EFF(96,"Ingresos Totales "),t.k0s(),t.j41(97,"div",36),t.EFF(98),t.nI1(99,"currency"),t.k0s()(),t.j41(100,"div",23),t.nrm(101,"div",16),t.j41(102,"div",37),t.EFF(103,"Egresos Totales "),t.k0s(),t.j41(104,"div",38),t.EFF(105),t.nI1(106,"currency"),t.k0s()(),t.j41(107,"div",23),t.nrm(108,"div",16),t.j41(109,"div",39),t.EFF(110,"Saldo"),t.k0s(),t.j41(111,"div",40),t.EFF(112),t.nI1(113,"currency"),t.k0s()()(),t.DNE(114,ht,6,7,"div",41),t.k0s()()),2&i){const e=t.sdS(31),o=t.XpG();t.R7$(7),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(8),t.SpI(" Fecha de caja: ",t.i5U(20,19,o.box.open,"dd/MM/YYYY hh:mm a")," "),t.R7$(3),t.SpI(" ",t.bMT(23,22,o.box.status)," "),t.R7$(4),t.Y8G("matMenuTriggerFor",e),t.R7$(3),t.Y8G("svgIcon","mat_solid:expand_more"),t.R7$(3),t.vxM(32,"abierta"===o.box.status?32:-1),t.R7$(),t.vxM(33,"abierta"===o.box.status?33:-1),t.R7$(10),t.JRh(t.i5U(44,24,o.data.series[0],"$ ")),t.R7$(8),t.JRh(t.i5U(52,27,o.data.series[1],"$ ")),t.R7$(8),t.JRh(t.i5U(60,30,o.data.series[2],"$ ")),t.R7$(8),t.JRh(t.i5U(68,33,o.data.series[3],"$ ")),t.R7$(8),t.JRh(t.i5U(76,36,o.data.series[4],"$ ")),t.R7$(8),t.JRh(t.i5U(84,39,o.data.series[5],"$ ")),t.R7$(8),t.JRh(t.i5U(92,42,o.data.series[6],"$ ")),t.R7$(7),t.JRh(t.i5U(99,45,o.data.series[0]+o.data.series[1]+o.data.series[5],"$ ")),t.R7$(7),t.SpI(" ",t.i5U(106,48,o.data.series[2]+o.data.series[3]+o.data.series[4]+o.data.series[6],"$ ")," "),t.R7$(7),t.JRh(t.i5U(113,51,o.data.series[0]+o.data.series[1]-o.data.series[2]-o.data.series[3]-o.data.series[4]+o.data.series[5]-o.data.series[6],"$ ")),t.R7$(2),t.vxM(114,o.data.total>0?114:-1)}}function xt(i,s){if(1&i){const e=t.RV6();t.j41(0,"fuse-card",60),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.selectTerminal(n))}),t.nrm(1,"mat-icon",61),t.j41(2,"div",62)(3,"div",63),t.EFF(4),t.k0s(),t.j41(5,"div",64),t.EFF(6),t.k0s()()()}if(2&i){const e=s.$implicit,o=t.XpG(2);t.Y8G("ngClass",t.eq3(4,ct,e===o.selectedTerminal)),t.R7$(),t.Y8G("svgIcon","mat_solid:point_of_sale"),t.R7$(3),t.JRh(e.name),t.R7$(2),t.JRh(e.depot.name)}}function gt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",53)(1,"div",54)(2,"h1",55),t.EFF(3,"Selecciona la terminal para la cual desea abrir la caja"),t.k0s()(),t.j41(4,"div",56),t.Z7z(5,xt,7,6,"fuse-card",57,dt),t.k0s(),t.j41(7,"div",56)(8,"button",58),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openBox(!0))}),t.nrm(9,"mat-icon",59),t.j41(10,"span",18),t.EFF(11,"Abrir caja con saldo anterior"),t.k0s()(),t.j41(12,"button",58),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openBox(!1))}),t.nrm(13,"mat-icon",59),t.j41(14,"span",18),t.EFF(15,"Abrir caja sin saldo"),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(5),t.Dyx(e.terminals),t.R7$(3),t.Y8G("disabled",null===e.selectedTerminal),t.R7$(),t.Y8G("svgIcon","mat_solid:key"),t.R7$(3),t.Y8G("disabled",null===e.selectedTerminal),t.R7$(),t.Y8G("svgIcon","mat_solid:key")}}let _t=(()=>{class i{constructor(){this.balance=0,this.box=null,this.data={total:0,series:[0,0,0,0,0,0,0],labels:["Monto Inicial","Ingresos","Devoluciones","Prestamos","Gastos","Dep\xf3sitos","Extracciones"],colors:["#64748B","#22C55E","#EF4444","#EAB308","#06B6D4","#3f10cd","#ff498b"]},this.selectedTerminal=null,this.terminals=[],this._boxService=(0,t.WQX)(v.R),this._changeDetectorRef=(0,t.WQX)(t.gRc),this._dialog=(0,t.WQX)(w.bZ),this._fuseConfirmationService=(0,t.WQX)(B.G),this._router=(0,t.WQX)(k.Ix),this._snackBar=(0,t.WQX)(D.UG),this._unsubscribeAll=new $.B,this.store=(0,t.WQX)(R.il)}ngOnInit(){window.Apex={chart:{events:{mounted:(e,o)=>{this._fixSvgFill(e.el)},updated:(e,o)=>{this._fixSvgFill(e.el)}}}},this.store.select(K.Ye).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.terminals=e,this._changeDetectorRef.markForCheck()}),this.store.select(M.k2).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.box=e,this.box&&(this.data.total=e.initial+e.income+e.return+e.loan+e.spent+e.depot-e.extraction,this.data.series=[e.initial,e.income,e.return,e.loan,e.spent,e.depot,e.extraction],this.balance=e.initial+e.income+e.depot-e.extraction-e.return-e.loan-e.spent,this._prepareChartData()),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectTerminal(e){this.selectedTerminal=e,this._changeDetectorRef.markForCheck()}openBox(e){this._fuseConfirmationService.open({title:"Abrir caja.",message:"\xbfEst\xe1 seguro que desea abrir la caja",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.openBox(this.selectedTerminal.id,e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(A.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.openBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}openBoxAdminDialog(e){this._dialog.open(rt,{data:{boxMovementType:e},width:"90%",maxWidth:"400px",panelClass:"ath-dialog-panel",disableClose:!0})}trackByFn(e,o){return o.id||e}_fixSvgFill(e){const o=this._router.url;Array.from(e.querySelectorAll("*[fill]")).filter(n=>-1!==n.getAttribute("fill").indexOf("url(")).forEach(n=>{const r=n.getAttribute("fill");n.setAttribute("fill",`url(${o}${r.slice(r.indexOf("#"))}`)})}_prepareChartData(){this.boxMovementDistribution={chart:{animations:{speed:400,animateGradually:{enabled:!1}},fontFamily:"inherit",foreColor:"inherit",height:"100%",type:"donut",sparkline:{enabled:!0}},colors:this.data.colors,labels:this.data.labels,plotOptions:{pie:{customScale:.9,expandOnClick:!1,donut:{size:"0%"}}},series:this.data.series,states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{enabled:!0,fillSeriesColor:!1,theme:"dark",custom:({seriesIndex:e,w:o})=>`<div class="flex items-center h-8 min-h-8 max-h-8 px-3">\n                                                     <div class="w-3 h-3 rounded-full" style="background-color: ${o.config.colors[e]};"></div>\n                                                     <div class="ml-2 text-md leading-none">${o.config.labels[e]}:</div>\n                                                     <div class="ml-2 text-md font-bold leading-none">${(o.config.series[e]/this.data.total*100).toFixed(2)}%</div>\n                                                 </div>`}}}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["box-admin"]],standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[["optionsMenu","matMenu"],["movementsMenu","matMenu"],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-col","gap-2","md:flex-row"],[1,"font-mono"],[1,"px-2.5","rounded-full","bg-primary-500","w-fit"],[1,"flex","flex-col","items-center","gap-2","mt-6","md:flex-row","shrink-0","lg:mt-0","lg:ml-4"],[1,""],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-yellow-500","to-yellow-600",3,"matMenuTriggerFor"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"svgIcon"],[1,"flex","flex-auto","overflow-hidden","overflow-y-scroll"],[1,"grid","w-full","grid-cols-1","gap-2","p-8","md:grid-cols-2"],[1,"flex","flex-col","border","divide-y"],[1,"grid","w-full","grid-cols-3"],[1,"flex","items-center","justify-center"],[1,"leading-10","rounded-full","h-7","w-7","bg-slate-500"],[1,"font-semibold","leading-10","uppercase"],[1,"font-mono","leading-10","text-center"],[1,"leading-10","bg-green-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-red-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-yellow-500","rounded-full","h-7","w-7"],[1,"leading-10","rounded-full","h-7","w-7","bg-cyan-500"],[1,"w-auto","font-semibold","leading-10","uppercase"],[1,"leading-10","bg-blue-500","rounded-full","h-7","w-7"],[1,"leading-10","bg-pink-500","rounded-full","h-7","w-7"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-green-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-green-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","text-red-500","uppercase"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","text-red-500"],[1,"w-auto","py-1","text-xl","font-bold","leading-10","uppercase","dark:text-slate-500"],[1,"py-1","font-mono","text-xl","font-bold","leading-10","text-center","dark:text-slate-500"],[1,"flex","flex-row","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLink","/modules/box/admin/closer"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"matMenuTriggerFor"],[1,"flex","flex-col","flex-auto","w-1/2","mt-6","h-44"],[1,"flex","items-center","justify-center","flex-auto","w-full","h-full",3,"chart","colors","labels","plotOptions","series","states","tooltip"],[1,"w-1/2","divide-y"],[1,"grid","grid-cols-2","py-3"],[1,"flex","items-center"],[1,"w-2","h-2","rounded-full","flex-0"],[1,"ml-3","truncate"],[1,"font-mono","font-medium","text-right"],[1,"flex","flex-col","items-center","justify-center","w-full","h-full","px-3","space-y-5"],[1,"flex","flex-col","items-center","justify-center","w-full"],[1,"text-4xl","font-bold","text-center"],[1,"flex","flex-row","flex-wrap","items-center","justify-center","w-full","gap-5"],[1,"flex","items-center","w-full","p-6","transition-all","duration-300","ease-in-out","cursor-pointer","max-w-80","filter-info","hover:ring","hover:ring-primary-200","hover:ring-inset",3,"ngClass"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click","disabled"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","w-full","p-6","transition-all","duration-300","ease-in-out","cursor-pointer","max-w-80","filter-info","hover:ring","hover:ring-primary-200","hover:ring-inset",3,"click","ngClass"],[1,"mr-6","icon-size-12",3,"svgIcon"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"]],template:function(o,n){1&o&&(t.j41(0,"div",2),t.DNE(1,ft,115,54)(2,gt,16,4),t.k0s()),2&o&&(t.R7$(),t.vxM(1,"abierta"===n.box.status?1:2))},dependencies:[b.oe,b.vh,lt.$,x.Hl,x.$z,y.m_,y.An,g.Cn,mt.uv,g.kk,g.fb,g.Cp,X.J,X.Q,b.YU,b.m1,k.Wk,b.PV],encapsulation:2,changeDetection:0})}return i})();var vt=l(10467),j=l(96695),F=l(2042),Q=l(7673),U=l(57786),V=l(70152),I=l(25558),T=l(96354),J=l(69938),P=l(47413),yt=l(63729),Ft=l(70819),E=l(97586),W=l(77235),G=l(82643);let Ct=(()=>{class i{constructor(){G.vfs=W.b.vfs}boxCloseReport(e,o,n){const r=[],u=`Cierre de caja ${E(e.close).format("DD/MM/yy hh:mm a")}`,p=[{text:"Informaci\xf3n General",style:"header"},{text:`Local: ${e.terminal.location.name}`,style:"subheader"},{text:`Nombre de la Caja: ${e.terminal.name}`,style:"subheader"},{text:`Usuario: ${e.user.fullname}`,style:"subheader"},{text:`Total Inicial: ${e.initial.toFixed(2)}`,style:"subheader"},{text:`Ingresos: ${e.income.toFixed(2)}`,style:"subheader"},{text:`Devoluciones: ${e.return.toFixed(2)}`,style:"subheader"},{text:`Pr\xe9stamos: ${e.loan.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${e.spent.toFixed(2)}`,style:"subheader"},{text:`Dep\xf3sitos: ${e.depot.toFixed(2)}`,style:"subheader"},{text:`Extracciones: ${e.extraction.toFixed(2)}`,style:"subheader"},{text:`Gastos: ${e.spent.toFixed(2)}`,style:"subheader"},{text:`Total Final: ${(e.initial+e.income+e.depot-e.return-e.loan-e.spent-e.extraction).toFixed(2)}`,style:"subheader"}],Y=[{marginTop:10,columns:[{text:"Billetes",style:"header"},{text:"Monedas",style:"header"}]},{columns:[{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Billetes de 1",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b1,style:"table_body"},{text:(1*e.cashDistribution?.b1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 3",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b3,style:"table_body"},{text:(3*e.cashDistribution?.b3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 5",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b5,style:"table_body"},{text:(5*e.cashDistribution?.b5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 10",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b10,style:"table_body"},{text:(10*e.cashDistribution?.b10).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 20",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b20,style:"table_body"},{text:(20*e.cashDistribution?.b20).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 50",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b50,style:"table_body"},{text:(50*e.cashDistribution?.b50).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 100",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b100,style:"table_body"},{text:(100*e.cashDistribution?.b100).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 200",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b200,style:"table_body"},{text:(200*e.cashDistribution?.b200).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 500",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b500,style:"table_body"},{text:(500*e.cashDistribution?.b500).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Billetes de 1000",bold:!0,style:"table_body",alignment:"left"},{text:e.cashDistribution?.b1000,style:"table_body"},{text:(1e3*e.cashDistribution?.b1000).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(d,c)=>.7,vLineWidth:(d,c)=>0,hLineColor:(d,c)=>"#eeeeee"}},{table:{headerRows:1,widths:["*",80,100],body:[[{text:"Denominaci\xf3n",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"}],[{text:"Monedas de 1",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.m1,style:"table_body"},{text:(1*e.cashDistribution?.m1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 3",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.m3,style:"table_body"},{text:(3*e.cashDistribution?.m3).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 5",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.m5,style:"table_body"},{text:(5*e.cashDistribution?.m5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.01",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.c1,style:"table_body"},{text:(.01*e.cashDistribution?.c1).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.02",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.c2,style:"table_body"},{text:(.02*e.cashDistribution?.c2).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.05",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.c5,style:"table_body"},{text:(.05*e.cashDistribution?.c5).toFixed(2),style:"table_body",alignment:"right"}],[{text:"Monedas de 0.20",style:"table_body",bold:!0,alignment:"left"},{text:e.cashDistribution?.c20,style:"table_body"},{text:(.2*e.cashDistribution?.c20).toFixed(2),style:"table_body",alignment:"right"}]]},layout:{hLineWidth:(d,c)=>.7,vLineWidth:(d,c)=>0,hLineColor:(d,c)=>"#eeeeee"}}]}],Ie=e.boxMovements.reduce((d,c)=>{const S=c.movementType,C=d.findIndex(L=>L.movementType===S);return-1===C?d.push({movementType:S,movements:[c]}):d[C].movements.push(c),d},[]),N=[[{text:"MOVIMIENTOS DE CAJA",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"Tipo",style:"table_header"},{text:"N\xba",style:"table_header"},{text:"Monto",style:"table_header"},{text:"Motivo",style:"table_header"}]];for(const d of Ie){let c="";switch(d.movementType){case"initial":c="Inicial";break;case"return":c="Devoluciones";break;case"loan":c="Pr\xe9stamos";break;case"spent":c="Gastos";break;case"depot":c="Dep\xf3sitos";break;case"extraction":c="Extracciones"}const S=[{rowSpan:d.movements.length,text:c,alignment:"left",style:"table_body"},{text:d.movements[0].no,style:"table_body"},{text:d.movements[0].amount.toFixed(2),style:"table_body"},{text:d.movements[0].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];N.push(S);for(let C=1;C<d.movements.length;C++){const L=[{text:"",alignment:"center"},{text:d.movements[C].no,style:"table_body"},{text:d.movements[C].amount.toFixed(2),style:"table_body"},{text:d.movements[C].reason,style:"table_body",margin:[8,0,0,0],alignment:"left"}];N.push(L)}}const Te=[{table:{headerRows:2,widths:[60,100,60,"*"],body:N},layout:{hLineWidth:(d,c)=>.7,vLineWidth:(d,c)=>.7,hLineColor:(d,c)=>"#eeeeee",vLineColor:(d,c)=>"#eeeeee"},marginTop:30}];r.push(p,Y),e.boxMovements.length>0&&r.push(Te);const Ge={header:{text:u,style:"header",marginTop:5},content:r,footer:(d,c)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${n.fullname} | Esta informaci\xf3n es exclusiva de ${o.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${d.toString()}/${c} - Fecha de impresi\xf3n ${E().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},subheader:{fontSize:14,bold:!0,marginBottom:2,alignment:"left",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_footer:{fontSize:12,bold:!0,alignment:"center",fillColor:"#eeeeee",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10,alignment:"center"}},pageOrientation:"portrait",pageSize:"LETTER",watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:u,author:`${n.fullname}`,creationDate:E().toDate(),modDate:E().toDate(),producer:o.name}};G.createPdf(Ge).open()}generateBoxSaleResumeDocument(e){const r={content:[{text:e.locationName,style:"header"},{text:"Resumen de Caja y Ventas",style:"subheader"},{text:`${E(e.openedAt).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"-",style:"body",fontSize:5},{text:`${E(e.closedAT).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"---------------------------------------"},{text:"Ventas",alignment:"center",bold:!0,fontSize:8},{text:"---------------------------------------"},{table:{widths:[44,16,"*"],body:[[{text:"Promociones",style:"table_body"},{text:e.salesPromotionCount,alignment:"center",style:"table_body"},{text:"$ "+e.salesPromotion.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Descuentos",style:"table_body"},{text:e.salesDiscountCount,alignment:"center",style:"table_body"},{text:"$ "+e.salesDiscount.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Efectivo",style:"table_body",marginTop:6},{text:e.salesCashCount,alignment:"center",style:"table_body",marginTop:6},{text:"$ "+e.salesCash.toFixed(2),alignment:"right",style:"table_body",marginTop:6}],[{text:"Transferencia",style:"table_body"},{text:e.salesTransferCount,alignment:"center",style:"table_body"},{text:"$ "+e.salesTransfer.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Venta Total",style:"table_body",bold:!0},{text:e.salesTransferCount+e.salesCashCount,alignment:"center",style:"table_body",bold:!0},{text:"$ "+(e.salesCash+e.salesTransfer).toFixed(2),alignment:"right",style:"table_body",bold:!0}]]},layout:{hLineWidth:(u,p)=>0,vLineWidth:(u,p)=>0}},{text:"---------------------------------------"},{text:"Caja",alignment:"center",bold:!0,fontSize:8},{text:"---------------------------------------"},{table:{widths:["*","*"],body:[[{text:"Total Inicial",style:"table_body"},{text:"$ "+e.boxData.initial.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Ingresos",style:"table_body"},{text:"$ "+e.boxData.income.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Devoluciones",style:"table_body"},{text:"$ "+e.boxData.return.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Pr\xe9stamos",style:"table_body"},{text:"$ "+e.boxData.loan.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Dep\xf3sitos",style:"table_body"},{text:"$ "+e.boxData.depot.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Extracciones",style:"table_body"},{text:"$ "+e.boxData.extraction.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Gastos",style:"table_body"},{text:"$ "+e.boxData.spent.toFixed(2),alignment:"right",style:"table_body"}],[{text:"Total final",style:"table_body",bold:!0},{text:"$ "+(e.boxData.initial+e.boxData.income+e.boxData.depot-e.boxData.return-e.boxData.loan-e.boxData.spent-e.boxData.extraction).toFixed(2),alignment:"right",style:"table_body",bold:!0}]]},layout:{hLineWidth:(u,p)=>0,vLineWidth:(u,p)=>0}}],styles:{header:{alignment:"center",fontSize:10,bold:!0},subheader:{alignment:"center",fontSize:9,bold:!0,margin:[0,2,0,2]},body:{alignment:"center",bold:!1,fontSize:6,margin:[0,0,0,0]},line:{margin:[0,3,0,3]},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:7}},pageSize:{width:150,height:320},pageMargins:[10,15,10,15]};G.createPdf(r).open()}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();G.vfs=W.b.vfs;var kt=l(56730),jt=l(67533),Et=l(23083),H=l(64193);const Dt=(i,s)=>({"pointer-events-none":i,hidden:s}),$t=()=>[10,25,50,100],Bt=(i,s)=>({"bg-primary-500":i,"bg-red-500":s});function Rt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",24)(1,"div",25),t.EFF(2),t.k0s(),t.j41(3,"div",22),t.EFF(4),t.k0s(),t.j41(5,"div",22),t.EFF(6),t.k0s(),t.j41(7,"div",26),t.EFF(8),t.nI1(9,"date"),t.k0s(),t.j41(10,"div",26),t.EFF(11),t.nI1(12,"currency"),t.k0s(),t.j41(13,"div",26),t.EFF(14),t.nI1(15,"date"),t.k0s(),t.j41(16,"div",26),t.EFF(17),t.nI1(18,"currency"),t.k0s(),t.j41(19,"div",22)(20,"span",27),t.EFF(21),t.nI1(22,"uppercase"),t.k0s()(),t.j41(23,"div",28)(24,"button",29),t.nrm(25,"mat-icon",30),t.k0s(),t.j41(26,"mat-menu",31,0)(28,"button",32),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.boxCloseReport(n))}),t.EFF(29,"Resumen de caja"),t.k0s(),t.j41(30,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.saleProductsReport(n.id))}),t.EFF(31,"Ventas por productos"),t.k0s(),t.j41(32,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.salesByCategoriesProducts(n.id))}),t.EFF(33,"Ventas por categor\xedas"),t.k0s(),t.j41(34,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.saleResumeDocument(n.id))}),t.EFF(35,"Resumen de caja y ventas"),t.k0s()(),t.j41(36,"button",34),t.nrm(37,"mat-icon",30),t.k0s(),t.j41(38,"mat-menu",31,1)(40,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.printIPV(n.id))}),t.EFF(41,"Ventas por productos"),t.k0s(),t.j41(42,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.printIPVCategories(n.id))}),t.EFF(43,"Ventas por categor\xedas"),t.k0s(),t.j41(44,"button",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,r=t.XpG(4);return t.Njj(r.printBoxAndSales(n.id))}),t.EFF(45,"Resumen de caja y ventas"),t.k0s()()()()}if(2&i){const e=s.$implicit,o=t.sdS(27),n=t.sdS(39);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.SpI(" ",e.terminal.location.name," "),t.R7$(2),t.SpI(" ",e.terminal.name," "),t.R7$(2),t.SpI(" ",t.i5U(9,15,e.open,"dd/MM/yyyy HH:mm a")," "),t.R7$(3),t.SpI(" ",t.i5U(12,18,e.initial,"$ ")," "),t.R7$(3),t.SpI(" ",t.i5U(15,21,e.close,"dd/MM/yyyy HH:mm a")," "),t.R7$(3),t.SpI(" ",t.i5U(18,24,e.initial+e.income+e.depot-e.return-e.loan-e.spent-e.extraction,"$ ")," "),t.R7$(3),t.Y8G("ngClass",t.l_i(29,Bt,"abierta"===e.status,"cerrada"===e.status)),t.R7$(),t.SpI(" ",t.bMT(22,27,e.status)," "),t.R7$(3),t.Y8G("matMenuTriggerFor",o),t.R7$(),t.Y8G("svgIcon","mat_solid:request_page"),t.R7$(3),t.Y8G("disabled","abierta"===e.status),t.R7$(8),t.Y8G("matMenuTriggerFor",n)("disabled","abierta"===e.status),t.R7$(),t.Y8G("svgIcon","mat_solid:print")}}function Mt(i,s){1&i&&t.Z7z(0,Rt,46,32,"div",24,t.BUC().trackByFn,!0),2&i&&t.Dyx(s)}function It(i,s){if(1&i&&(t.j41(0,"div",19)(1,"div",20)(2,"div",21),t.EFF(3," No. "),t.k0s(),t.j41(4,"div",22),t.EFF(5," Unidad "),t.k0s(),t.j41(6,"div",22),t.EFF(7," Caja "),t.k0s(),t.j41(8,"div",22),t.EFF(9," Fecha Apertura "),t.k0s(),t.j41(10,"div",22),t.EFF(11," Monto Apertura "),t.k0s(),t.j41(12,"div",22),t.EFF(13," Fecha Cierre "),t.k0s(),t.j41(14,"div",22),t.EFF(15," Monto Cierre "),t.k0s(),t.j41(16,"div",22),t.EFF(17," Estado "),t.k0s(),t.j41(18,"div",22),t.EFF(19," Acciones "),t.k0s()(),t.DNE(20,Mt,2,0),t.nI1(21,"async"),t.k0s(),t.nrm(22,"mat-paginator",23)),2&i){let e;const o=t.XpG(2);t.R7$(2),t.Y8G("mat-sort-header","no"),t.R7$(18),t.vxM(20,(e=t.bMT(21,8,o.boxes$))?20:-1,e),t.R7$(2),t.Y8G("ngClass",t.l_i(10,Dt,o.isLoading,o.pagination.length<10&&o.pagination.page<1))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",t.lJ4(13,$t))("showFirstLastButtons",!0)}}function Tt(i,s){1&i&&(t.j41(0,"div",35),t.EFF(1," \xa1No se ha registrado ning\xfan cierre de caja! "),t.k0s())}function Gt(i,s){1&i&&t.DNE(0,It,23,14)(1,Tt,2,0),2&i&&t.vxM(0,s.length>0?0:1)}let St=(()=>{class i{constructor(){this.boxes$=(0,Q.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.merchant=null,this.searchInputControl=new a.MJ,this.selectedSlide=null,this.user=null,this._boxReportsService=(0,t.WQX)(Ct),this._boxService=(0,t.WQX)(v.R),this._changeDetectorRef=(0,t.WQX)(t.gRc),this._fuseConfirmationService=(0,t.WQX)(B.G),this._documentsService=(0,t.WQX)(kt.Q),this._snackBar=(0,t.WQX)(D.UG),this._unsubscribeAll=new $.B,this.store=(0,t.WQX)(R.il),this._printerService=(0,t.WQX)(jt.k),this._salesService=(0,t.WQX)(Et.w)}ngOnInit(){this.store.select(Ft.Xb).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.merchant=e,this._changeDetectorRef.markForCheck()}),this.store.select(yt.SW).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.user=e,this._changeDetectorRef.markForCheck()}),this.boxes$=this.store.select(M.Gf),this.store.select(P.D).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.Q)(this._unsubscribeAll),(0,V.B)(300),(0,I.n)(e=>(this.isLoading=!0,this._boxService.getBoxes(0,this.pagination.size,"no","desc",e))),(0,T.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,U.h)(this._sort.sortChange,this._paginator.page).pipe((0,I.n)(()=>(this.isLoading=!0,this._boxService.getBoxes(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,T.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,J.Bx)())}boxCloseReport(e){this._boxService.getBoxById(e.id).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:o})=>{e&&this._boxReportsService.boxCloseReport(o.findBoxById.box,this.merchant,this.user)})}saleProductsReport(e){this._salesService.getIpvSaleResume(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{if(o){const n=o.products.filter(u=>u.quantity>0).map(u=>({Producto:u?.name,Cantidad:u.quantity,Precio:u.priceAvg,Cajero:o.employeeName}));this._documentsService.generateIpvProducts(n,{start:o.openedAt,end:o.closedAT},this.merchant,[{name:o.locationName}],this.user,o.cashPaid,o.cardPaid)}})}salesByCategoriesProducts(e){this._salesService.getIpvSaleResumeCategory(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._documentsService.generateSalesByCategoriesProducts(o,this.merchant,this.user)})}saleResumeDocument(e){this._boxService.getBoxSaleResume(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._boxReportsService.generateBoxSaleResumeDocument(o)})}trackByFn(e,o){return e||o.id}printIPV(e){this._salesService.getIpvSaleResume(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._printerService.printIpvSalesResumeTicket(o).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({message:n})=>{this._snackBar.open(n,"Aceptar",{duration:3e3,panelClass:"text-center"})})})}printIPVCategories(e){this._salesService.getIpvSaleResumeCategory(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._printerService.printIpvSalesResumeCategoryTicket(o).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({message:n})=>{this._snackBar.open(n,"Aceptar",{duration:3e3,panelClass:"text-center"})})})}printBoxAndSales(e){this._boxService.getBoxSaleResume(e).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(o=>{o&&this._printerService.printBoxSaleResumeTicket(o).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({message:n})=>{this._snackBar.open(n,"Aceptar",{duration:3e3,panelClass:"text-center"})})})}generateTicketDocument(e){var o=this;return(0,vt.A)(function*(){o._documentsService.generateTicketDocument(e,o.merchant,o.user)})()}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["box-history"]],viewQuery:function(o,n){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(n._paginator=r.first),t.mGM(r=t.lsd())&&(n._sort=r.first)}},standalone:!0,features:[t.aNF],decls:26,vars:10,consts:[["reportsMenu1","matMenu"],["reportsMenu","matMenu"],["fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/box/admin",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","boxes-grid","md:px-8","text-md","text-primary-200","bg-gray-50","dark:bg-slate-900"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"border-b","first-letter:z-10","sm:inset-x-0","sm:sticky","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-slate-900",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","boxes-grid","md:px-8"],[1,"hiddem","sm:blockfont-mono"],[1,"font-mono","text-center","hiddem","sm:block"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],[1,"flex","flex-row","justify-center","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["xPosition","before"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor","disabled"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div")(5,"a",6),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",7),t.nrm(8,"mat-icon",8),t.j41(9,"a",9),t.EFF(10,"Caja"),t.k0s()(),t.j41(11,"div",7),t.nrm(12,"mat-icon",8),t.j41(13,"a",10),t.EFF(14,"Cierres de Caja"),t.k0s()()(),t.j41(15,"div",11)(16,"h2",12),t.EFF(17," Cierres de Caja "),t.k0s()()(),t.j41(18,"div",13)(19,"mat-form-field",14),t.nrm(20,"mat-icon",15)(21,"input",16),t.k0s()()(),t.j41(22,"div",17)(23,"div",18),t.DNE(24,Gt,2,1),t.nI1(25,"async"),t.k0s()()()),2&o){let r;t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),t.R7$(3),t.vxM(24,(r=t.bMT(25,8,n.boxes$))?24:-1,r)}},dependencies:[x.Hl,x.$z,h.RG,h.rl,h.JW,_.fS,_.fg,y.m_,y.An,b.YU,a.X1,a.me,a.BC,a.l_,b.Jj,F.NQ,F.B4,F.aE,b.vh,b.oe,b.Pc,g.Cn,g.kk,g.fb,g.Cp,j.Ou,j.iy,H.p],encapsulation:2,changeDetection:0})}return i})();var f=function(i){return i.initial="initial",i.income="income",i.return="return",i.loan="loan",i.spent="spent",i.depot="depot",i.extraction="extraction",i}(f||{}),At=l(90558),O=l(14823);const Yt=(i,s)=>({"pointer-events-none":i,hidden:s}),Nt=()=>[10,25,50,100],Lt=i=>({"text-red-500":i});function zt(i,s){if(1&i&&(t.j41(0,"div",22)(1,"div",23),t.EFF(2),t.k0s(),t.j41(3,"div",23),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"div",24),t.EFF(7),t.k0s(),t.j41(8,"div",23),t.EFF(9),t.nI1(10,"currency"),t.k0s(),t.j41(11,"div",25)(12,"span",26),t.EFF(13),t.k0s()()()),2&i){const e=s.$implicit,o=t.XpG(4);t.R7$(2),t.SpI(" ",e.no," "),t.R7$(2),t.SpI(" ",t.i5U(5,7,e.createdAt,"dd/MM/yyyy HH:mm:ss")," "),t.R7$(2),t.Y8G("ngClass",t.eq3(13,Lt,null===e.reason)),t.R7$(),t.SpI(" ",e.reason||"Sin motivo"," "),t.R7$(2),t.SpI(" ",t.i5U(10,10,e.amount,"$ ")," "),t.R7$(3),t.Y8G("ngClass",o.movementClass(e.movementType)),t.R7$(),t.SpI(" ",o.translateMovementType(e.movementType)," ")}}function Xt(i,s){1&i&&t.Z7z(0,zt,14,15,"div",22,t.BUC().trackByFn,!0),2&i&&t.Dyx(s)}function Qt(i,s){if(1&i&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18),t.EFF(3," No. "),t.k0s(),t.j41(4,"div",18),t.EFF(5," Fecha "),t.k0s(),t.j41(6,"div",19),t.EFF(7," Motivo "),t.k0s(),t.j41(8,"div",18),t.EFF(9," Monto "),t.k0s(),t.j41(10,"div",20),t.EFF(11," T.Movimiento "),t.k0s()(),t.DNE(12,Xt,2,0),t.nI1(13,"async"),t.k0s(),t.nrm(14,"mat-paginator",21)),2&i){let e;const o=t.XpG(2);t.R7$(2),t.Y8G("mat-sort-header","no"),t.R7$(2),t.Y8G("mat-sort-header","createdAt"),t.R7$(2),t.Y8G("mat-sort-header","reason"),t.R7$(2),t.Y8G("mat-sort-header","amount"),t.R7$(2),t.Y8G("matTooltip","Tipo de Movimiento"),t.R7$(2),t.vxM(12,(e=t.bMT(13,12,o.boxMovements$))?12:-1,e),t.R7$(2),t.Y8G("ngClass",t.l_i(14,Yt,o.isLoading,o.pagination.length<10&&o.pagination.page<1))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",t.lJ4(17,Nt))("showFirstLastButtons",!0)}}function Ut(i,s){1&i&&(t.j41(0,"div",27),t.EFF(1," \xa1No se ha registrado ning\xfan movimiento de caja! "),t.k0s())}function Vt(i,s){1&i&&t.DNE(0,Qt,15,18)(1,Ut,2,0),2&i&&t.vxM(0,s.length>0?0:1)}let Jt=(()=>{class i{constructor(e,o,n,r,u){this._boxService=e,this._changeDetectorRef=o,this._fuseConfirmationService=n,this._snackBar=r,this.store=u,this.boxMovements$=(0,Q.of)([]),this.isLoading=!1,this.pagination=new At.xN,this.searchInputControl=new a.MJ,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new $.B}ngOnInit(){this.boxMovements$=this.store.select(M.Q9),this.store.select(P.D).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.Q)(this._unsubscribeAll),(0,V.B)(300),(0,I.n)(e=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,e))),(0,T.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,U.h)(this._sort.sortChange,this._paginator.page).pipe((0,I.n)(()=>(this.isLoading=!0,this._boxService.getBoxMovements(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,T.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,J.hr)())}translateMovementType(e){switch(e){case f.initial:return"Inicial";case f.income:return"Ingreso";case f.return:return"Devoluci\xf3n";case f.loan:return"Pr\xe9stamo";case f.spent:return"Gasto"}}movementClass(e){switch(e){case f.initial:return"dark:bg-slate-500";case f.income:return"bg-green-500";case f.return:return"bg-yellow-500";case f.loan:return"bg-red-500";case f.spent:return"bg-cyan-500"}}trackByFn(e,o){return e||o.id}static#t=this.\u0275fac=function(o){return new(o||i)(t.rXU(v.R),t.rXU(t.gRc),t.rXU(B.G),t.rXU(D.UG),t.rXU(R.il))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["box-movements"]],viewQuery:function(o,n){if(1&o&&(t.GBs(j.iy,5),t.GBs(F.B4,5)),2&o){let r;t.mGM(r=t.lsd())&&(n._paginator=r.first),t.mGM(r=t.lsd())&&(n._sort=r.first)}},standalone:!0,features:[t.aNF],decls:26,vars:10,consts:[["fuseScrollbar","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","lg:mt-0","lg:ml-4","gap-2"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","box-movements-grid","md:px-8","text-md","text-primary-200","bg-gray-50","dark:bg-slate-900"],[1,"hiddem","sm:block","text-center",3,"mat-sort-header"],[1,"hiddem","sm:block",3,"mat-sort-header"],[1,"hiddem","sm:block","text-center",3,"matTooltip"],[1,"border-b","first-letter:z-10","sm:inset-x-0","sm:sticky","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-slate-900",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","box-movements-grid","md:px-8"],[1,"hiddem","sm:block","font-mono"],[1,"hiddem","sm:block",3,"ngClass"],[1,"hiddem","sm:block","text-center"],[1,"px-2.5","py-1","rounded-full",3,"ngClass"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",5),t.nrm(8,"mat-icon",6),t.j41(9,"a",7),t.EFF(10,"Caja"),t.k0s()(),t.j41(11,"div",5),t.nrm(12,"mat-icon",6),t.j41(13,"a",7),t.EFF(14,"Movimientos de Caja"),t.k0s()()(),t.j41(15,"div",8)(16,"h2",9),t.EFF(17," Movimientos de Caja "),t.k0s()()(),t.j41(18,"div",10)(19,"mat-form-field",11),t.nrm(20,"mat-icon",12)(21,"input",13),t.k0s()()(),t.j41(22,"div",14)(23,"div",15),t.DNE(24,Vt,2,1),t.nI1(25,"async"),t.k0s()()()),2&o){let r;t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("subscriptSizing","dynamic"),t.R7$(),t.Y8G("svgIcon","mat_solid:search"),t.R7$(),t.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para buscar..."),t.R7$(3),t.vxM(24,(r=t.bMT(25,8,n.boxMovements$))?24:-1,r)}},dependencies:[b.Jj,b.oe,b.vh,x.Hl,h.RG,h.rl,h.JW,y.m_,y.An,_.fS,_.fg,g.Cn,j.Ou,j.iy,F.NQ,F.B4,F.aE,b.YU,a.X1,a.me,a.BC,a.l_,k.Wk,O.uc,O.oV,H.p],encapsulation:2,changeDetection:0})}return i})(),Z=(()=>{class i{constructor(e){this._boxService=e}resolve(e,o){return this._boxService.getLastBox()}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(v.R))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Pt=(()=>{class i{constructor(e){this._boxService=e}resolve(e,o){return this._boxService.getBoxes()}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(v.R))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Wt=(()=>{class i{constructor(e){this._boxService=e}resolve(e,o){return this._boxService.getBoxMovements()}static#t=this.\u0275fac=function(o){return new(o||i)(t.KVO(v.R))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ht(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 1 peso es obligatoria. "),t.k0s())}function Ot(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function Zt(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 3 pesos es obligatoria. "),t.k0s())}function qt(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function Kt(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 5 pesos es obligatoria. "),t.k0s())}function te(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function ee(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 10 pesos es obligatoria. "),t.k0s())}function ie(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function oe(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 20 pesos es obligatoria. "),t.k0s())}function ne(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function ae(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 50 pesos es obligatoria. "),t.k0s())}function se(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function re(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 100 pesos es obligatoria. "),t.k0s())}function le(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function me(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 200 pesos es obligatoria. "),t.k0s())}function de(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function ce(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 500 pesos es obligatoria. "),t.k0s())}function ue(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function be(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de 1000 pesos es obligatoria. "),t.k0s())}function pe(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de billetes de estar entre 0 y 9999999999. "),t.k0s())}function he(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 1 centavo es obligatoria. "),t.k0s())}function fe(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),t.k0s())}function xe(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 2 centavos es obligatoria. "),t.k0s())}function ge(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),t.k0s())}function _e(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 5 centavos es obligatoria. "),t.k0s())}function ve(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),t.k0s())}function ye(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 20 centavos es obligatoria. "),t.k0s())}function Fe(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar centavos 0 y 9999999999. "),t.k0s())}function Ce(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 1 peso es obligatoria. "),t.k0s())}function ke(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),t.k0s())}function je(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 3 pesos es obligatoria. "),t.k0s())}function Ee(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),t.k0s())}function De(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de 5 pesos es obligatoria. "),t.k0s())}function $e(i,s){1&i&&(t.j41(0,"mat-error"),t.EFF(1," La cantidad de monedas de estar entre 0 y 9999999999. "),t.k0s())}let Be=(()=>{class i{constructor(){this.totalCashAmount=0,this.balance=0,this.box=null,this._boxService=(0,t.WQX)(v.R),this._changeDetectorRef=(0,t.WQX)(t.gRc),this._formBuilder=(0,t.WQX)(a.ok),this._fuseConfirmationService=(0,t.WQX)(B.G),this._router=(0,t.WQX)(k.Ix),this._snackBar=(0,t.WQX)(D.UG),this._unsubscribeAll=new $.B,this.store=(0,t.WQX)(R.il)}ngOnInit(){this.cashDistributionForm=this._formBuilder.group({b1:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b3:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b5:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b10:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b20:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b50:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b100:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b200:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b500:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),b1000:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),c1:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),c2:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),c5:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),c20:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),m1:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),m3:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)]),m5:new a.MJ(0,[a.k0.required,a.k0.min(0),a.k0.max(9999999999)])}),this.store.select(M.k2).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(e=>{this.box=e,this.balance=e.initial+e.income+e.depot-e.return-e.loan-e.spent-e.extraction,this._changeDetectorRef.markForCheck()}),this.cashDistributionForm.valueChanges.pipe((0,m.Q)(this._unsubscribeAll)).subscribe(()=>{this.totalCashAmount=this.calculateTotalCashAmount(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}calculateTotalCashAmount(){return Object.keys(this.cashDistributionForm.controls).map(n=>{const r=this.cashDistributionForm.controls[n].value;let u=parseFloat(n.substring(1));return n.startsWith("c")&&(u*=.01),r*u}).reduce((n,r)=>n+r,0)}closeBox(){const e=this._fuseConfirmationService.open({title:"Cerrar caja.",message:"\xbfEst\xe1 seguro que desea cerrar la caja?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}),o=this.cashDistributionForm.getRawValue();e.afterClosed().pipe((0,m.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._boxService.closeBox({id:this.box.id,cashDistribution:o}).pipe((0,m.Q)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(A.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.closeBox.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/box/history"),this._changeDetectorRef.markForCheck()})})}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-box-closer"]],standalone:!0,features:[t.aNF],decls:143,vars:107,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/box/admin",1,"ml-1","text-primary-500"],["routerLink","/modules/box/history",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","lg:mt-0","lg:ml-4"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click","disabled"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto","w-full","gap-3","p-6"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10"],[1,"text-2xl","font-extrabold","leading-3","tracking-tight","truncate","md:text-3xl","sm:leading-10",3,"ngClass"],[3,"formGroup"],[1,"grid","gap-5","md:grid-cols-2"],[1,"grid","w-full","gap-5","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense"],["type","number","matInput","","required","",3,"formControlName","min","max"],[1,"grid","w-full","gap-5","gap-y-10","sm:grid-cols-2","xl:grid-cols-3"],[1,"w-full","fuse-mat-dense",3,"subscriptSizing"],[1,"max-h-20"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t.EFF(6,"Inicio"),t.k0s()(),t.j41(7,"div",5),t.nrm(8,"mat-icon",6),t.j41(9,"a",7),t.EFF(10,"Caja"),t.k0s()(),t.j41(11,"div",5),t.nrm(12,"mat-icon",6),t.j41(13,"a",8),t.EFF(14,"Historial"),t.k0s()(),t.j41(15,"div",5),t.nrm(16,"mat-icon",6),t.j41(17,"a",9),t.EFF(18,"Cerrar"),t.k0s()()(),t.j41(19,"div",10)(20,"h2",11),t.EFF(21," Cerrar de caja "),t.k0s()()(),t.j41(22,"div",12)(23,"button",13),t.bIt("click",function(){return n.closeBox()}),t.nrm(24,"mat-icon",14),t.j41(25,"span",15),t.EFF(26,"Cerrar Caja"),t.k0s()()()(),t.j41(27,"div",16)(28,"h2",17),t.EFF(29),t.nI1(30,"number"),t.k0s(),t.j41(31,"h2",18),t.EFF(32),t.nI1(33,"number"),t.k0s(),t.j41(34,"form",19)(35,"div",20)(36,"div",21)(37,"mat-form-field",22)(38,"mat-label"),t.EFF(39,"Billetes de 1 peso:"),t.k0s(),t.nrm(40,"input",23),t.DNE(41,Ht,2,0,"mat-error")(42,Ot,2,0,"mat-error"),t.k0s(),t.j41(43,"mat-form-field",22)(44,"mat-label"),t.EFF(45,"Billetes de 3 pesos:"),t.k0s(),t.nrm(46,"input",23),t.DNE(47,Zt,2,0,"mat-error")(48,qt,2,0,"mat-error"),t.k0s(),t.j41(49,"mat-form-field",22)(50,"mat-label"),t.EFF(51,"Billetes de 5 pesos:"),t.k0s(),t.nrm(52,"input",23),t.DNE(53,Kt,2,0,"mat-error")(54,te,2,0,"mat-error"),t.k0s(),t.j41(55,"mat-form-field",22)(56,"mat-label"),t.EFF(57,"Billetes de 10 pesos:"),t.k0s(),t.nrm(58,"input",23),t.DNE(59,ee,2,0,"mat-error")(60,ie,2,0,"mat-error"),t.k0s(),t.j41(61,"mat-form-field",22)(62,"mat-label"),t.EFF(63,"Billetes de 20 pesos:"),t.k0s(),t.nrm(64,"input",23),t.DNE(65,oe,2,0,"mat-error")(66,ne,2,0,"mat-error"),t.k0s(),t.j41(67,"mat-form-field",22)(68,"mat-label"),t.EFF(69,"Billetes de 50 pesos:"),t.k0s(),t.nrm(70,"input",23),t.DNE(71,ae,2,0,"mat-error")(72,se,2,0,"mat-error"),t.k0s(),t.j41(73,"mat-form-field",22)(74,"mat-label"),t.EFF(75,"Billetes de 100 pesos:"),t.k0s(),t.nrm(76,"input",23),t.DNE(77,re,2,0,"mat-error")(78,le,2,0,"mat-error"),t.k0s(),t.j41(79,"mat-form-field",22)(80,"mat-label"),t.EFF(81,"Billetes de 200 pesos:"),t.k0s(),t.nrm(82,"input",23),t.DNE(83,me,2,0,"mat-error")(84,de,2,0,"mat-error"),t.k0s(),t.j41(85,"mat-form-field",22)(86,"mat-label"),t.EFF(87,"Billetes de 500 pesos:"),t.k0s(),t.nrm(88,"input",23),t.DNE(89,ce,2,0,"mat-error")(90,ue,2,0,"mat-error"),t.k0s(),t.j41(91,"mat-form-field",22)(92,"mat-label"),t.EFF(93,"Billetes de 1000 pesos:"),t.k0s(),t.nrm(94,"input",23),t.DNE(95,be,2,0,"mat-error")(96,pe,2,0,"mat-error"),t.k0s()(),t.j41(97,"div")(98,"div",24)(99,"mat-form-field",25)(100,"mat-label"),t.EFF(101,"Monedas de 1 centavo:"),t.k0s(),t.nrm(102,"input",23),t.DNE(103,he,2,0,"mat-error")(104,fe,2,0,"mat-error"),t.k0s(),t.j41(105,"mat-form-field",25)(106,"mat-label"),t.EFF(107,"Monedas de 2 centavos:"),t.k0s(),t.nrm(108,"input",23),t.DNE(109,xe,2,0,"mat-error")(110,ge,2,0,"mat-error"),t.k0s(),t.j41(111,"mat-form-field",25)(112,"mat-label"),t.EFF(113,"Monedas de 5 centavos:"),t.k0s(),t.nrm(114,"input",23),t.DNE(115,_e,2,0,"mat-error")(116,ve,2,0,"mat-error"),t.k0s(),t.j41(117,"mat-form-field",25)(118,"mat-label"),t.EFF(119,"Monedas de 20 centavos:"),t.k0s(),t.nrm(120,"input",23),t.DNE(121,ye,2,0,"mat-error")(122,Fe,2,0,"mat-error"),t.k0s(),t.j41(123,"mat-form-field",25)(124,"mat-label"),t.EFF(125,"Monedas de 1 peso:"),t.k0s(),t.nrm(126,"input",23),t.DNE(127,Ce,2,0,"mat-error")(128,ke,2,0,"mat-error"),t.k0s(),t.j41(129,"mat-form-field",25)(130,"mat-label"),t.EFF(131,"Monedas de 3 pesos:"),t.k0s(),t.nrm(132,"input",23),t.DNE(133,je,2,0,"mat-error")(134,Ee,2,0,"mat-error"),t.k0s(),t.j41(135,"div",26)(136,"mat-form-field",25)(137,"mat-label"),t.EFF(138,"Monedas de 5 pesos:"),t.k0s(),t.nrm(139,"input",23),t.DNE(140,De,2,0,"mat-error")(141,$e,2,0,"mat-error"),t.k0s()(),t.nrm(142,"div"),t.k0s()()()()()()),2&o&&(t.R7$(8),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(4),t.Y8G("svgIcon","mat_solid:chevron_right"),t.R7$(7),t.Y8G("disabled",n.balance!==n.totalCashAmount),t.R7$(),t.Y8G("svgIcon","mat_solid:lock"),t.R7$(5),t.SpI(" Importe de la caja: ",t.i5U(30,101,n.balance,"1.2-2")," "),t.R7$(2),t.Y8G("ngClass",n.balance!==n.totalCashAmount?"text-red-500":"text-green-600"),t.R7$(),t.SpI(" Distribuci\xf3n de efectivo por denominaciones: ",t.i5U(33,104,n.totalCashAmount,"1.2-2")," "),t.R7$(2),t.Y8G("formGroup",n.cashDistributionForm),t.R7$(6),t.Y8G("formControlName","b1")("min",0)("max",9999999999),t.R7$(),t.vxM(41,n.cashDistributionForm.get("b1").hasError("required")?41:-1),t.R7$(),t.vxM(42,n.cashDistributionForm.get("b1").hasError("min")||n.cashDistributionForm.get("b1").hasError("max")?42:-1),t.R7$(4),t.Y8G("formControlName","b3")("min",0)("max",9999999999),t.R7$(),t.vxM(47,n.cashDistributionForm.get("b3").hasError("required")?47:-1),t.R7$(),t.vxM(48,n.cashDistributionForm.get("b3").hasError("min")||n.cashDistributionForm.get("b3").hasError("max")?48:-1),t.R7$(4),t.Y8G("formControlName","b5")("min",0)("max",9999999999),t.R7$(),t.vxM(53,n.cashDistributionForm.get("b5").hasError("required")?53:-1),t.R7$(),t.vxM(54,n.cashDistributionForm.get("b5").hasError("min")||n.cashDistributionForm.get("b5").hasError("max")?54:-1),t.R7$(4),t.Y8G("formControlName","b10")("min",0)("max",9999999999),t.R7$(),t.vxM(59,n.cashDistributionForm.get("b10").hasError("required")?59:-1),t.R7$(),t.vxM(60,n.cashDistributionForm.get("b10").hasError("min")||n.cashDistributionForm.get("b10").hasError("max")?60:-1),t.R7$(4),t.Y8G("formControlName","b20")("min",0)("max",9999999999),t.R7$(),t.vxM(65,n.cashDistributionForm.get("b20").hasError("required")?65:-1),t.R7$(),t.vxM(66,n.cashDistributionForm.get("b20").hasError("min")||n.cashDistributionForm.get("b20").hasError("max")?66:-1),t.R7$(4),t.Y8G("formControlName","b50")("min",0)("max",9999999999),t.R7$(),t.vxM(71,n.cashDistributionForm.get("b50").hasError("required")?71:-1),t.R7$(),t.vxM(72,n.cashDistributionForm.get("b50").hasError("min")||n.cashDistributionForm.get("b50").hasError("max")?72:-1),t.R7$(4),t.Y8G("formControlName","b100")("min",0)("max",9999999999),t.R7$(),t.vxM(77,n.cashDistributionForm.get("b100").hasError("required")?77:-1),t.R7$(),t.vxM(78,n.cashDistributionForm.get("b100").hasError("min")||n.cashDistributionForm.get("b100").hasError("max")?78:-1),t.R7$(4),t.Y8G("formControlName","b200")("min",0)("max",9999999999),t.R7$(),t.vxM(83,n.cashDistributionForm.get("b200").hasError("required")?83:-1),t.R7$(),t.vxM(84,n.cashDistributionForm.get("b200").hasError("min")||n.cashDistributionForm.get("b200").hasError("max")?84:-1),t.R7$(4),t.Y8G("formControlName","b500")("min",0)("max",9999999999),t.R7$(),t.vxM(89,n.cashDistributionForm.get("b500").hasError("required")?89:-1),t.R7$(),t.vxM(90,n.cashDistributionForm.get("b500").hasError("min")||n.cashDistributionForm.get("b500").hasError("max")?90:-1),t.R7$(4),t.Y8G("formControlName","b1000")("min",0)("max",9999999999),t.R7$(),t.vxM(95,n.cashDistributionForm.get("b1000").hasError("required")?95:-1),t.R7$(),t.vxM(96,n.cashDistributionForm.get("b1000").hasError("min")||n.cashDistributionForm.get("b1000").hasError("max")?96:-1),t.R7$(3),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","c1")("min",0)("max",9999999999),t.R7$(),t.vxM(103,n.cashDistributionForm.get("c1").hasError("required")?103:-1),t.R7$(),t.vxM(104,n.cashDistributionForm.get("c1").hasError("min")||n.cashDistributionForm.get("c1").hasError("max")?104:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","c2")("min",0)("max",9999999999),t.R7$(),t.vxM(109,n.cashDistributionForm.get("c2").hasError("required")?109:-1),t.R7$(),t.vxM(110,n.cashDistributionForm.get("c2").hasError("min")||n.cashDistributionForm.get("c2").hasError("max")?110:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","c5")("min",0)("max",9999999999),t.R7$(),t.vxM(115,n.cashDistributionForm.get("c5").hasError("required")?115:-1),t.R7$(),t.vxM(116,n.cashDistributionForm.get("c5").hasError("min")||n.cashDistributionForm.get("c5").hasError("max")?116:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","c20")("min",0)("max",9999999999),t.R7$(),t.vxM(121,n.cashDistributionForm.get("c20").hasError("required")?121:-1),t.R7$(),t.vxM(122,n.cashDistributionForm.get("c20").hasError("min")||n.cashDistributionForm.get("c20").hasError("max")?122:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","m1")("min",0)("max",9999999999),t.R7$(),t.vxM(127,n.cashDistributionForm.get("m1").hasError("required")?127:-1),t.R7$(),t.vxM(128,n.cashDistributionForm.get("m1").hasError("min")||n.cashDistributionForm.get("m1").hasError("max")?128:-1),t.R7$(),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","m3")("min",0)("max",9999999999),t.R7$(),t.vxM(133,n.cashDistributionForm.get("m3").hasError("required")?133:-1),t.R7$(),t.vxM(134,n.cashDistributionForm.get("m3").hasError("min")||n.cashDistributionForm.get("m3").hasError("max")?134:-1),t.R7$(2),t.Y8G("subscriptSizing","dynamic"),t.R7$(3),t.Y8G("formControlName","m5")("min",0)("max",9999999999),t.R7$(),t.vxM(140,n.cashDistributionForm.get("m5").hasError("required")?140:-1),t.R7$(),t.vxM(141,n.cashDistributionForm.get("m5").hasError("min")||n.cashDistributionForm.get("m5").hasError("max")?141:-1))},dependencies:[b.QX,x.Hl,x.$z,h.RG,h.rl,h.nJ,h.TL,_.fS,_.fg,y.m_,y.An,b.YU,a.X1,a.qT,a.me,a.Q0,a.BC,a.cb,a.YS,a.VZ,a.zX,a.j4,a.JD,k.Wk],encapsulation:2,changeDetection:0})}return i})();const Me=[{path:"",component:q,children:[{path:"admin",component:_t,resolve:{box:Z,terminals:l(40382).n5}},{path:"history",component:St,resolve:{boxes:Pt}},{path:"movements",component:Jt,resolve:{boxMovements:Wt}},{path:"admin/closer",component:Be,resolve:{box:Z}}]}]}}]);