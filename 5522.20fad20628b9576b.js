"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5522],{85522:(S,u,e)=>{e.r(u),e.d(u,{default:()=>B});var b=e(91602),g=e(22674),C=e(94023),j=e(48874),d=e(21413),c=e(56977),Q=e(94268),y=e(21809),t=e(54438),m=e(46601),x=e(9005),h=e(95416),f=e(75351),v=e(59640);function D(s,E){1&s&&(t.j41(0,"div",1)(1,"button",2),t.EFF(2," Pagar por Transfermovil "),t.k0s(),t.j41(3,"button",3),t.EFF(4," Pagar por Enzona "),t.k0s()())}let U=(()=>{class s{constructor(n,o,i,a,l,r){this._fuseConfirmationService=n,this._changeDetectorRef=o,this._invoiceService=i,this._snackBar=a,this._dialog=l,this.store=r,this.selectedInvoice$=null,this.selectedInvoice=null,this._unsubscribeAll=new d.B}ngOnInit(){this.selectedInvoice$=this.store.select(Q.WK),this.selectedInvoice$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{this.selectedInvoice=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||s)(t.rXU(m.G),t.rXU(t.gRc),t.rXU(x.U),t.rXU(h.UG),t.rXU(f.bZ),t.rXU(v.il))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["invoice-public-detail"]],standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[[1,"w-full","flex","flex-col"],[1,"flex","items-center","justify-around","md:justify-center","border-t","px-8","py-4"],["mat-flat-button","",1,"mr-4","bg-green-500","text-white"],["color","primary","mat-flat-button","",1,"ml-4"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"invoice-details"),t.DNE(2,D,5,0,"div",1),t.k0s()),2&o&&(t.R7$(2),t.vxM(2,"UseAthendatPayments"===i.selectedInvoice.quotationId.paymentMethodData.paymentBy?2:-1))},dependencies:[y.F],encapsulation:2,changeDetection:0})}return s})();var I=e(78268),R=e(5004),F=e(53440),p=e(94794),P=e(55181);function X(s,E){if(1&s){const n=t.RV6();t.j41(0,"div",1)(1,"button",2),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.rejectQuotation())}),t.EFF(2," Rechazar "),t.k0s(),t.j41(3,"button",3),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.acceptQuotation())}),t.EFF(4," Aceptar "),t.k0s()()}}const B=[{path:"request/:requestId",component:C.B,resolve:{request:j.K}},{path:"quotation/:quotationId",component:(()=>{class s{constructor(n,o,i,a,l,r){this._fuseConfirmationService=n,this._changeDetectorRef=o,this._quotationService=i,this._snackBar=a,this._dialog=l,this.store=r,this.selectedQuotation$=null,this.selectedQuotation=null,this._unsubscribeAll=new d.B}ngOnInit(){this.selectedQuotation$=this.store.select(I.dM),this.selectedQuotation$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{this.selectedQuotation=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}acceptQuotation(){this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"\xbfEsta seguro que desea aceptar esta oferta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._quotationService.acceptQuotation(this.selectedQuotation._id).subscribe(i=>{this._snackBar.openFromComponent(p.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:i.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}})})})}rejectQuotation(){this._dialog.open(F.s,{data:{title:"Rechazar Oferta",message:"\xbfEst\xe1 seguro desea Rechazar esta Oferta ?",rejectedReason:"",rejectedReasonRequired:!1},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(o=>{void 0!==o&&this._quotationService.rejectQuotation(this.selectedQuotation._id,o.reason).subscribe(a=>{this._snackBar.openFromComponent(p.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}})})})}static#t=this.\u0275fac=function(o){return new(o||s)(t.rXU(m.G),t.rXU(t.gRc),t.rXU(P.X),t.rXU(h.UG),t.rXU(f.bZ),t.rXU(v.il))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["quotation-public-detail"]],standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[[1,"flex","flex-col","w-full"],[1,"flex","items-center","justify-around","px-8","py-4","border-t","md:justify-center"],["color","warn","mat-stroked-button","",1,"mr-4",3,"click"],["color","primary","mat-flat-button","",1,"ml-4",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"quotation-details"),t.DNE(2,X,5,0,"div",1),t.k0s()),2&o&&(t.R7$(2),t.vxM(2,"Nueva"===i.selectedQuotation.status?2:-1))},dependencies:[R.Q],encapsulation:2,changeDetection:0})}return s})(),resolve:{request:g.z}},{path:"invoice/:invoiceId",component:U,resolve:{request:b.M}},{path:"",loadChildren:()=>Promise.all([e.e(9454),e.e(9159),e.e(8566)]).then(e.bind(e,78566))}]}}]);