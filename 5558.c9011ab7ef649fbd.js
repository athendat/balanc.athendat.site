"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5558],{21809:(Q,M,n)=>{n.d(M,{F:()=>p});var R=n(63729),r=n(21413),y=n(56977),m=n(94268),s=n(77235),E=n(82643),C=n(97586),i=n.n(C),O=n(60177),h=n(88834),c=n(99213),e=n(51188),t=n(54438),u=n(59640);const _=(o,I)=>[o,I],g=(o,I)=>({"text-lg":o,"text-2xl":I}),D=(o,I)=>({"col-span-3":o,"col-span-2":I}),$=()=>[""],A=()=>["$"],S=(o,I)=>({"my-4":o,"my-3":I});function z(o,I){if(1&o){const a=t.RV6();t.j41(0,"div",2)(1,"button",36),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("open"))}),t.nrm(2,"mat-icon",37),t.k0s(),t.j41(3,"button",36),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("download"))}),t.nrm(4,"mat-icon",37),t.k0s(),t.j41(5,"button",36),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("print"))}),t.nrm(6,"mat-icon",37),t.k0s()()}2&o&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))}function W(o,I){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const a=I.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,a.total,t.lJ4(5,$))," ",a.currency,"")}}function N(o,I){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.SpI(" ",a.merchantInvoice.phoneNumbers[0].stateCode+" "+a.merchantInvoice.phoneNumbers[0].phoneNumber,"")}}function F(o,I){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.merchantInvoice.emails[0].email)}}function L(o,I){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.divInSpaces())}}function v(o,I){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.E5c("",a.requestQuotation.address,", ",a.requestQuotation.city,", ",a.requestQuotation.state,", Cuba ")}}function U(o,I){if(1&o&&(t.j41(0,"div",21),t.nrm(1,"div",38),t.j41(2,"div",39),t.EFF(3),t.k0s(),t.j41(4,"div",40),t.EFF(5),t.k0s(),t.j41(6,"div",41),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"div",41),t.EFF(10),t.nI1(11,"currency"),t.k0s()()),2&o){const a=I.$implicit;t.R7$(3),t.JRh(a.name),t.R7$(2),t.JRh(a.amount),t.R7$(2),t.Lme("",t.i5U(8,5,a.price,t.lJ4(11,$))," ",a.currency,""),t.R7$(3),t.JRh(t.i5U(11,8,a.quantity,t.lJ4(12,A)))}}function x(o,I){1&o&&t.nrm(0,"div",22)}function j(o,I){if(1&o&&t.nrm(0,"div",23),2&o){const a=t.XpG();t.Y8G("ngClass",t.l_i(1,S,a.quotationInvoice.description,!a.quotationInvoice.description))}}function q(o,I){if(1&o&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const a=I.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,a.total,t.lJ4(5,$))," ",a.currency,"")}}function w(o,I){1&o&&(t.j41(0,"div",27),t.EFF(1," OBSERVACIONES"),t.k0s())}function V(o,I){if(1&o&&(t.j41(0,"span",28),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.quotationInvoice.description)}}function f(o,I){if(1&o&&(t.j41(0,"div",34)(1,"div",42)(2,"span"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5,"-"),t.k0s()(),t.j41(6,"span",43),t.EFF(7),t.k0s()()),2&o){const a=I.$implicit;t.R7$(3),t.SpI("",a.percent,"%"),t.R7$(4),t.JRh(a.description)}}function T(o,I){if(1&o&&(t.j41(0,"div",44)(1,"span",45),t.EFF(2),t.k0s(),t.nrm(3,"img",46),t.k0s()),2&o){const a=t.XpG(2);t.R7$(2),t.JRh(a.eQr.name),t.R7$(),t.Y8G("src",a.eQr.qrUrl,t.B4B)}}function d(o,I){if(1&o&&(t.j41(0,"div",44)(1,"span",45),t.EFF(2),t.k0s(),t.nrm(3,"img",46),t.k0s()),2&o){const a=t.XpG(2);t.R7$(2),t.JRh(a.tQr.name),t.R7$(),t.Y8G("src",a.tQr.qrUrl,t.B4B)}}function B(o,I){if(1&o&&(t.j41(0,"div",35),t.DNE(1,T,4,2,"div",44)(2,d,4,2,"div",44),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.vxM(1,a.eQr?1:-1),t.R7$(),t.vxM(2,a.tQr?2:-1)}}E.vfs=s.b.vfs,i().locale("es");let p=(()=>{class o{constructor(a,k){this.store=a,this._changeDetectorRef=k,this.selectedInvoice$=null,this.selectedInvoice=null,this.authUser=null,this.eQr=null,this.tQr=null,this.totalQuantity=[],this._unsubscribeAll=new r.B}ngOnInit(){this.store.select(R.SW).pipe((0,y.Q)(this._unsubscribeAll)).subscribe(a=>{this.linkRequest=a?"/modules/commercial/quotations":"/public/quotation",this.authUser=a,this._changeDetectorRef.markForCheck()}),this.selectedInvoice$=this.store.select(m.WK),this.selectedInvoice$.pipe((0,y.Q)(this._unsubscribeAll)).subscribe(a=>{this.selectedInvoice=a,this.merchantInvoice=a.merchantId,this.quotationInvoice=a.quotationId,this.requestQuotation=this.quotationInvoice.requestId,this.totalQuantity=this.getTotalQuantity(this.quotationInvoice),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(a){const l={content:[{columns:[{stack:[{columns:[{stack:[{text:"FACTURA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedInvoice.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedInvoice.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(b=>[{text:`${b.total.toFixed(2)} ${b.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}]},{columns:[{text:"OFERTA",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedInvoice.quotationNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,10,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:80,lineWidth:.5}],width:1},{stack:[{text:this.merchantInvoice.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantInvoice.address}  ${this.merchantInvoice.city}   ${this.merchantInvoice.state}   ${this.merchantInvoice.country}`,alignment:"left",fontSize:8},this.merchantInvoice.phoneNumbers.length>0?{text:`${this.merchantInvoice.phoneNumbers[0].stateCode}  ${this.merchantInvoice.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantInvoice.emails.length>0?{text:`${this.merchantInvoice.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantInvoice.website,alignment:"left",fontSize:8},this.quotationInvoice.paymentMethodData.includeBankAccount?{text:this.divInSpaces(),alignment:"left",fontSize:8}:{}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.quotationInvoice.goodsData.map(b=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:b.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:b.amount,alignment:"center",fontSize:9,width:40},{text:`${b.price.toFixed(2)} ${b.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${b.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(b=>[{text:`${b.total.toFixed(2)} ${b.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.quotationInvoice.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.quotationInvoice.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(b,K,G)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.quotationInvoice.paymentMethodData.terms.map(X=>[{text:`${X.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:X.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]},"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy?{stack:[{columns:[this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[],width:1}:{stack:[],width:55},this.merchantInvoice.commercialManagement.enzonaQr?{stack:[{text:"Enzona",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"enzonaUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:55},this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[{text:"Transfermovil",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"transfermovilUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:1}],columnGap:15}],width:150,margin:[15,0,0,0]}:{stack:[],width:1}],margin:[0,8,0,0]}],margin:K>1?[40,30,40,15]:[40,50,40,15]},K>1?{text:b.toString()+" de "+K,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:G.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Factura",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantInvoice.logoUrl,enzonaUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.enzonaQr?this.merchantInvoice.commercialManagement.enzonaQr:"",transfermovilUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.transfermovilQr?this.merchantInvoice.commercialManagement.transfermovilQr:""}};switch(a){case a="download":E.createPdf(l).download();break;case a="open":E.createPdf(l).open();break;case a="print":E.createPdf(l).print()}}getTotalQuantity(a){return a.goodsData.reduce((k,{currency:l})=>{if(!k.some(b=>b.currency===l)){const b=a.goodsData.filter(K=>K.currency===l).map(K=>K.quantity).reduce((K,G)=>K+G,0);k.push({currency:l,total:b})}return k},[])}getValidity(){return`${i()(this.selectedInvoice.createdAt).format("L")} - ${i()(this.selectedInvoice.createdAt).add(this.selectedInvoice.expirationDays,"days").format("L")}`}divInSpaces(){const a=this.selectedInvoice.bankAccount,k=[];for(let l=0;l<a.length;l++)k.push(a.substring(l,l+4)),l+=3;return k.join("-")}static#t=this.\u0275fac=function(k){return new(k||o)(t.rXU(u.il),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["invoice-details"]],standalone:!0,features:[t.aNF],decls:78,vars:43,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"whitespace-nowrap","grid","grid-cols-2","gap-y-1",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"mt-16","grid","grid-cols-3"],[1,"",3,"ngClass"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],[1,"col-span-1","flex","justify-end","gap-8"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"flex","justify-between"],[1,"ml-4"],[1,"text-center"],[1,"text-md","font-medium","text-secondary"],[1,"w-24","h-24","object-cover","mt-2",3,"src"]],template:function(k,l){1&k&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,z,7,3,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.EFF(7,"FACTURA"),t.k0s(),t.j41(8,"div",7),t.EFF(9),t.k0s(),t.j41(10,"div",8),t.EFF(11,"VALIDEZ"),t.k0s(),t.j41(12,"div",9),t.EFF(13),t.k0s(),t.j41(14,"div",8),t.EFF(15,"ESTADO"),t.k0s(),t.j41(16,"div",9),t.EFF(17),t.k0s(),t.j41(18,"div",8),t.EFF(19,"IMPORTE TOTAL"),t.k0s(),t.j41(20,"div",9),t.Z7z(21,W,3,6,"div",null,t.fX1),t.k0s(),t.j41(23,"div",8),t.EFF(24,"OFERTA"),t.k0s(),t.j41(25,"a",10),t.EFF(26),t.k0s()(),t.j41(27,"div",11)(28,"div",12),t.nrm(29,"img",13),t.k0s(),t.j41(30,"div",14)(31,"div",9),t.EFF(32),t.k0s(),t.j41(33,"div"),t.EFF(34),t.k0s(),t.DNE(35,N,2,1,"div")(36,F,2,1,"div"),t.j41(37,"div"),t.EFF(38),t.k0s(),t.DNE(39,L,2,1,"div"),t.k0s()()(),t.j41(40,"div",15)(41,"div",16),t.EFF(42),t.k0s(),t.DNE(43,v,2,3,"div"),t.j41(44,"div"),t.EFF(45),t.k0s(),t.j41(46,"div"),t.EFF(47),t.k0s()(),t.j41(48,"div",17)(49,"div",18),t.EFF(50,"PRODUCTO O SERVICIO"),t.k0s(),t.j41(51,"div",19),t.EFF(52,"CANTIDAD"),t.k0s(),t.j41(53,"div",20),t.EFF(54,"PRECIO"),t.k0s(),t.j41(55,"div",20),t.EFF(56,"TOTAL"),t.k0s(),t.Z7z(57,U,12,13,"div",21,t.fX1),t.DNE(59,x,1,0,"div",22)(60,j,1,4,"div",23),t.j41(61,"div",24),t.EFF(62,"TOTAL"),t.k0s(),t.j41(63,"div",25),t.Z7z(64,q,3,6,"div",26,t.fX1),t.k0s(),t.DNE(66,w,2,0,"div",27)(67,V,2,1,"span",28),t.k0s(),t.j41(68,"div",29)(69,"div",30)(70,"div",9),t.EFF(71,"T\xe9rminos o condiciones de pago."),t.k0s(),t.j41(72,"div",31),t.nrm(73,"img",32),t.j41(74,"div",33),t.Z7z(75,f,8,2,"div",34,t.fX1),t.k0s()()(),t.DNE(77,B,3,2,"div",35),t.k0s()()()()),2&k&&(t.R7$(2),t.vxM(2,l.authUser?-1:2),t.R7$(7),t.SpI("#",l.selectedInvoice.no,""),t.R7$(4),t.JRh(l.getValidity()),t.R7$(4),t.JRh(l.selectedInvoice.status.toUpperCase()),t.R7$(4),t.Dyx(l.totalQuantity),t.R7$(4),t.Y8G("routerLink",t.l_i(31,_,l.linkRequest,l.quotationInvoice._id)),t.R7$(),t.SpI("#",l.selectedInvoice.quotationNo,""),t.R7$(3),t.Y8G("src",l.merchantInvoice.logoUrl,t.B4B),t.R7$(3),t.JRh(l.merchantInvoice.name),t.R7$(2),t.LHq("",l.merchantInvoice.address,", ",l.merchantInvoice.city,", ",l.merchantInvoice.state,", ",l.merchantInvoice.country," "),t.R7$(),t.vxM(35,l.merchantInvoice.phoneNumbers.length>0?35:-1),t.R7$(),t.vxM(36,l.merchantInvoice.emails.length>0?36:-1),t.R7$(2),t.JRh(l.merchantInvoice.website),t.R7$(),t.vxM(39,l.quotationInvoice.paymentMethodData.includeBankAccount?39:-1),t.R7$(3),t.Lme("",l.requestQuotation.name," ",l.requestQuotation.lastname,""),t.R7$(),t.vxM(43,l.requestQuotation.address?43:-1),t.R7$(2),t.Lme("",l.requestQuotation.phoneNumber.stateCode," ",l.requestQuotation.phoneNumber.phoneNumber,""),t.R7$(2),t.JRh(l.requestQuotation.email),t.R7$(10),t.Dyx(l.quotationInvoice.goodsData),t.R7$(2),t.vxM(59,l.quotationInvoice.description?-1:59),t.R7$(),t.vxM(60,l.quotationInvoice.description?60:-1),t.R7$(),t.Y8G("ngClass",t.l_i(34,g,l.quotationInvoice.description,!l.quotationInvoice.description)),t.R7$(2),t.Y8G("ngClass",t.l_i(37,g,l.quotationInvoice.description,!l.quotationInvoice.description)),t.R7$(),t.Dyx(l.totalQuantity),t.R7$(2),t.vxM(66,l.quotationInvoice.description?66:-1),t.R7$(),t.vxM(67,l.quotationInvoice.description?67:-1),t.R7$(2),t.Y8G("ngClass",t.l_i(40,D,!l.eQr&&!l.tQr||"UseMerchantPayments"!==l.quotationInvoice.paymentMethodData.paymentBy,!(!l.eQr&&!l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy)),t.R7$(4),t.Y8G("src",l.merchantInvoice.logoUrl,t.B4B),t.R7$(2),t.Dyx(l.quotationInvoice.paymentMethodData.terms),t.R7$(2),t.vxM(77,(l.eQr||l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy?77:-1))},dependencies:[O.oe,h.Hl,h.$z,c.m_,c.An,O.YU,e.Wk],encapsulation:2,changeDetection:0})}return o})()},91602:(Q,M,n)=>{n.d(M,{M:()=>C,R:()=>P});var R=n(18810),r=n(99437),y=n(96354),m=n(54438),s=n(9005),E=n(51188);let P=(()=>{class i{constructor(h){this._invoicesService=h}resolve(h,c){return this._invoicesService.getInvoices()}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.U))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(h,c){this._invoicesService=h,this._router=c}resolve(h,c){return this._invoicesService.getInvoiceById(h.params.invoiceId).pipe((0,r.W)(t=>{console.error(t);const u=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(u),(0,R.$)(t)}),(0,y.T)(t=>{if(!t.ok){let u=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(u=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(u)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.U),m.KVO(E.Ix))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},94268:(Q,M,n)=>{n.d(M,{WK:()=>y,nX:()=>m});var R=n(59640);const r=s=>s.invoices,y=(0,R.Mz)(r,s=>s.invoice),m=(0,R.Mz)(r,s=>s.invoices)},9005:(Q,M,n)=>{n.d(M,{U:()=>i});var R=n(21626),r=n(88141),y=n(98216),m=n(45312),s=n(19117),E=n(54438),P=n(59640);const C=m.c.API_URL;let i=(()=>{class O{constructor(c,e){this._httpClient=c,this.store=e}getInvoices(c=0,e=20,t="createdAt",u="desc",_="",g=""){const D=(new R.Nl).append("page",c).append("size",e).append("sort",t).append("order",u).append("search",_).append("filter",g);return this._httpClient.get(`${C}/invoices/`,{params:D}).pipe((0,r.M)($=>{this.store.dispatch((0,y.Bp)({pagination:$.pagination})),this.store.dispatch((0,s.$6)({invoices:$.dataArr}))}))}getInvoiceById(c){return this._httpClient.get(`${C}/invoices/${c}`).pipe((0,r.M)(e=>{this.store.dispatch((0,s.ep)({invoice:e.data}))}))}createInvoice(c){return this._httpClient.post(`${C}/invoices`,c).pipe((0,r.M)(e=>{this.store.dispatch((0,s.iO)({invoice:e.data}))}))}updateInvoice(c){return this._httpClient.patch(`${C}/invoices/${c._id}`,c).pipe((0,r.M)(e=>{this.store.dispatch((0,s.Dq)({invoice:e.data}))}))}updateStatus(c,e,t=""){return this._httpClient.patch(`${C}/invoices/update-status`,{_id:c,status:e,canceledReason:t}).pipe((0,r.M)(u=>{this.store.dispatch((0,s.Dq)({invoice:u.data}))}))}deleteInvoice(c,e=0,t=20,u="createdAt",_="desc",g="",D=""){const $=(new R.Nl).append("page",e).append("size",t).append("sort",u).append("order",_).append("search",g).append("filter",D);return this._httpClient.delete(`${C}/invoices/${c}`,{params:$}).pipe((0,r.M)(A=>{this.store.dispatch((0,y.Bp)({pagination:A.pagination})),this.store.dispatch((0,s.$6)({invoices:A.dataArr}))}))}static#t=this.\u0275fac=function(e){return new(e||O)(E.KVO(R.Qq),E.KVO(P.il))};static#e=this.\u0275prov=E.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},62621:(Q,M,n)=>{n.d(M,{W:()=>O});var R=n(21626),r=n(88141),y=n(96354),m=n(87037),s=n(98216),E=n(45312),P=n(54438),C=n(59640);const i=E.c.API_URL;let O=(()=>{class h{constructor(e,t){this._httpClient=e,this.store=t}getPaymentConditions(e=0,t=20,u="active",_="desc",g=""){const D=(new R.Nl).append("page",e).append("size",t).append("sort",u).append("order",_).append("search",g);return this._httpClient.get(`${i}/payment-conditions/`,{params:D}).pipe((0,r.M)($=>{this.store.dispatch((0,s.Bp)({pagination:$.pagination})),this.store.dispatch((0,m.Ze)({paymentConditions:$.dataArr}))}))}getActivePaymentConditions(){return this._httpClient.get(`${i}/payment-conditions/active`).pipe((0,y.T)(e=>e.dataArr),(0,r.M)(e=>{this.store.dispatch((0,m.Ze)({paymentConditions:e}))}))}getPaymentConditionById(e){return this._httpClient.get(`${i}/payment-conditions/${e}`).pipe((0,r.M)(t=>{this.store.dispatch((0,m.QH)({paymentCondition:t.data}))}))}createPaymentCondition(e){return this._httpClient.post(`${i}/payment-conditions`,e).pipe((0,r.M)(t=>{this.store.dispatch((0,m.yX)({paymentCondition:t.data}))}))}updatePaymentCondition(e){return this._httpClient.patch(`${i}/payment-conditions/${e._id}`,e).pipe((0,r.M)(t=>{this.store.dispatch((0,m.vK)({paymentCondition:t.data}))}))}deletePaymentCondition(e,t=0,u=20,_="active",g="desc",D=""){const $=(new R.Nl).append("page",t).append("size",u).append("sort",_).append("order",g).append("search",D);return this._httpClient.delete(`${i}/payment-conditions/${e}`,{params:$}).pipe((0,r.M)(A=>{this.store.dispatch((0,s.Bp)({pagination:A.pagination})),this.store.dispatch((0,m.Ze)({paymentConditions:A.dataArr}))}))}static#t=this.\u0275fac=function(t){return new(t||h)(P.KVO(R.Qq),P.KVO(C.il))};static#e=this.\u0275prov=P.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},5004:(Q,M,n)=>{n.d(M,{Q:()=>V});var R=n(63729),r=n(21413),y=n(56977),m=n(78268),s=n(77235),E=n(82643),C=n(97586),i=n.n(C),O=n(60177),h=n(88834),c=n(99213),e=n(51188),t=n(54438),u=n(59640);const _=(f,T)=>[f,T],g=(f,T)=>({"text-lg":f,"text-2xl":T}),D=()=>[""],$=()=>["$"],A=(f,T)=>({"my-4":f,"my-3":T});function S(f,T){if(1&f){const d=t.RV6();t.j41(0,"div",2)(1,"button",34),t.bIt("click",function(){t.eBV(d);const p=t.XpG();return t.Njj(p.generatePDF("open"))}),t.nrm(2,"mat-icon",35),t.k0s(),t.j41(3,"button",34),t.bIt("click",function(){t.eBV(d);const p=t.XpG();return t.Njj(p.generatePDF("download"))}),t.nrm(4,"mat-icon",35),t.k0s(),t.j41(5,"button",34),t.bIt("click",function(){t.eBV(d);const p=t.XpG();return t.Njj(p.generatePDF("print"))}),t.nrm(6,"mat-icon",35),t.k0s()()}2&f&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))}function z(f,T){if(1&f&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&f){const d=T.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,d.total,t.lJ4(5,D))," ",d.currency,"")}}function W(f,T){if(1&f&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&f){const d=t.XpG();t.R7$(),t.SpI(" ",d.merchantQuotation.phoneNumbers[0].stateCode+" "+d.merchantQuotation.phoneNumbers[0].phoneNumber,"")}}function N(f,T){if(1&f&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&f){const d=t.XpG();t.R7$(),t.JRh(d.merchantQuotation.emails[0].email)}}function F(f,T){if(1&f&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&f){const d=t.XpG();t.R7$(),t.E5c("",d.requestQuotation.address,", ",d.requestQuotation.city,", ",d.requestQuotation.state,", Cuba ")}}function L(f,T){if(1&f&&(t.j41(0,"div",21),t.nrm(1,"div",36),t.j41(2,"div",37),t.EFF(3),t.k0s(),t.j41(4,"div",38),t.EFF(5),t.k0s(),t.j41(6,"div",39),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"div",39),t.EFF(10),t.nI1(11,"currency"),t.k0s()()),2&f){const d=T.$implicit;t.R7$(3),t.JRh(d.name),t.R7$(2),t.JRh(d.amount),t.R7$(2),t.Lme("",t.i5U(8,5,d.price,t.lJ4(11,D))," ",d.currency,""),t.R7$(3),t.JRh(t.i5U(11,8,d.quantity,t.lJ4(12,$)))}}function v(f,T){1&f&&t.nrm(0,"div",22)}function U(f,T){if(1&f&&t.nrm(0,"div",23),2&f){const d=t.XpG();t.Y8G("ngClass",t.l_i(1,A,d.selectedQuotation.description,!d.selectedQuotation.description))}}function x(f,T){if(1&f&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&f){const d=T.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,d.total,t.lJ4(5,D))," ",d.currency,"")}}function j(f,T){1&f&&(t.j41(0,"div",27),t.EFF(1,"OBSERVACIONES"),t.k0s())}function q(f,T){if(1&f&&(t.j41(0,"span",28),t.EFF(1),t.k0s()),2&f){const d=t.XpG();t.R7$(),t.JRh(d.selectedQuotation.description)}}function w(f,T){if(1&f&&(t.j41(0,"div",33)(1,"div",40)(2,"span"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5,"-"),t.k0s()(),t.j41(6,"span",41),t.EFF(7),t.k0s()()),2&f){const d=T.$implicit;t.R7$(3),t.SpI("",d.percent,"%"),t.R7$(4),t.JRh(d.description)}}E.vfs=s.b.vfs,i().locale("es");let V=(()=>{class f{constructor(d,B){this.store=d,this._changeDetectorRef=B,this.selectedQuotation$=null,this.selectedQuotation=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new r.B}ngOnInit(){this.store.select(R.SW).pipe((0,y.Q)(this._unsubscribeAll)).subscribe(d=>{this.linkRequest=d?"/modules/commercial/request":"/public/request",this.authUser=d,this._changeDetectorRef.markForCheck()}),this.selectedQuotation$=this.store.select(m.dM),this.selectedQuotation$.pipe((0,y.Q)(this._unsubscribeAll)).subscribe(d=>{this.selectedQuotation=d,this.merchantQuotation=d.merchantId,this.requestQuotation=d.requestId,this.totalQuantity=this.getTotalQuantity(d),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(d){const p={content:[{columns:[{stack:[{columns:[{stack:[{text:"OFERTA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedQuotation.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedQuotation.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}],width:320},{columns:[{text:"SOLICITUD",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedQuotation.requestNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,7,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:73,lineWidth:.1}],width:1},{stack:[{text:this.merchantQuotation.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantQuotation.address}  ${this.merchantQuotation.city}   ${this.merchantQuotation.state}   ${this.merchantQuotation.country}`,alignment:"left",fontSize:8},this.merchantQuotation.phoneNumbers.length>0?{text:`${this.merchantQuotation.phoneNumbers[0].stateCode}  ${this.merchantQuotation.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantQuotation.emails.length>0?{text:`${this.merchantQuotation.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantQuotation.website,alignment:"left",fontSize:8}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.selectedQuotation.goodsData.map(o=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:o.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:o.amount,alignment:"center",fontSize:9,width:40},{text:`${o.price.toFixed(2)} ${o.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${o.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.selectedQuotation.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.selectedQuotation.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(o,I,a)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.selectedQuotation.paymentMethodData.terms.map(k=>[{text:`${k.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:k.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]}],margin:[0,8,0,0]}],margin:I>1?[40,30,40,15]:[40,70,40,15]},I>1?{text:o.toString()+" de "+I,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:a.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Oferta",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantQuotation.logoUrl}};switch(d){case d="download":E.createPdf(p).download();break;case d="open":E.createPdf(p).open();break;case d="print":E.createPdf(p).print()}}getTotalQuantity(d){return d.goodsData.reduce((B,{currency:p})=>{if(!B.some(o=>o.currency===p)){const o=d.goodsData.filter(I=>I.currency===p).map(I=>I.quantity).reduce((I,a)=>I+a,0);B.push({currency:p,total:o})}return B},[])}getValidity(){return`${i()(this.selectedQuotation.createdAt).format("L")} - ${i()(this.selectedQuotation.createdAt).add(this.selectedQuotation.expirationDays,"days").format("L")}`}static#t=this.\u0275fac=function(B){return new(B||f)(t.rXU(u.il),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:f,selectors:[["quotation-details"]],standalone:!0,features:[t.aNF],decls:75,vars:37,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"grid","grid-cols-2","gap-y-1","whitespace-nowrap",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"mt-16"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"flex","justify-between"],[1,"ml-4"]],template:function(B,p){1&B&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,S,7,3,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.EFF(7,"OFERTA"),t.k0s(),t.j41(8,"div",7),t.EFF(9),t.k0s(),t.j41(10,"div",8),t.EFF(11,"VALIDEZ"),t.k0s(),t.j41(12,"div",9),t.EFF(13),t.k0s(),t.j41(14,"div",8),t.EFF(15,"ESTADO"),t.k0s(),t.j41(16,"div",9),t.EFF(17),t.k0s(),t.j41(18,"div",8),t.EFF(19,"IMPORTE TOTAL"),t.k0s(),t.j41(20,"div",9),t.Z7z(21,z,3,6,"div",null,t.fX1),t.k0s(),t.j41(23,"div",8),t.EFF(24,"SOLICITUD"),t.k0s(),t.j41(25,"a",10),t.EFF(26),t.k0s()(),t.j41(27,"div",11)(28,"div",12),t.nrm(29,"img",13),t.k0s(),t.j41(30,"div",14)(31,"div",9),t.EFF(32),t.k0s(),t.j41(33,"div"),t.EFF(34),t.k0s(),t.DNE(35,W,2,1,"div")(36,N,2,1,"div"),t.j41(37,"div"),t.EFF(38),t.k0s()()()(),t.j41(39,"div",15)(40,"div",16),t.EFF(41),t.k0s(),t.DNE(42,F,2,3,"div"),t.j41(43,"div"),t.EFF(44),t.k0s(),t.j41(45,"div"),t.EFF(46),t.k0s()(),t.j41(47,"div",17)(48,"div",18),t.EFF(49,"PRODUCTO O SERVICIO"),t.k0s(),t.j41(50,"div",19),t.EFF(51,"CANTIDAD"),t.k0s(),t.j41(52,"div",20),t.EFF(53,"PRECIO"),t.k0s(),t.j41(54,"div",20),t.EFF(55,"TOTAL"),t.k0s(),t.Z7z(56,L,12,13,"div",21,t.fX1),t.DNE(58,v,1,0,"div",22)(59,U,1,4,"div",23),t.j41(60,"div",24),t.EFF(61,"TOTAL"),t.k0s(),t.j41(62,"div",25),t.Z7z(63,x,3,6,"div",26,t.fX1),t.k0s(),t.DNE(65,j,2,0,"div",27)(66,q,2,1,"span",28),t.k0s(),t.j41(67,"div",29)(68,"div",9),t.EFF(69,"T\xe9rminos o condiciones de pago."),t.k0s(),t.j41(70,"div",30),t.nrm(71,"img",31),t.j41(72,"div",32),t.Z7z(73,w,8,2,"div",33,t.fX1),t.k0s()()()()()()),2&B&&(t.R7$(2),t.vxM(2,p.authUser?-1:2),t.R7$(7),t.SpI("#",p.selectedQuotation.no,""),t.R7$(4),t.JRh(p.getValidity()),t.R7$(4),t.JRh(p.selectedQuotation.status.toUpperCase()),t.R7$(4),t.Dyx(p.totalQuantity),t.R7$(4),t.Y8G("routerLink",t.l_i(28,_,p.linkRequest,p.requestQuotation._id)),t.R7$(),t.SpI("#",p.selectedQuotation.requestNo,""),t.R7$(3),t.Y8G("src",p.merchantQuotation.logoUrl,t.B4B),t.R7$(3),t.JRh(p.merchantQuotation.name),t.R7$(2),t.LHq("",p.merchantQuotation.address,", ",p.merchantQuotation.city,", ",p.merchantQuotation.state,", ",p.merchantQuotation.country," "),t.R7$(),t.vxM(35,p.merchantQuotation.phoneNumbers.length>0?35:-1),t.R7$(),t.vxM(36,p.merchantQuotation.emails.length>0?36:-1),t.R7$(2),t.JRh(p.merchantQuotation.website),t.R7$(3),t.Lme("",p.requestQuotation.name," ",p.requestQuotation.lastname,""),t.R7$(),t.vxM(42,p.requestQuotation.address?42:-1),t.R7$(2),t.Lme("",p.requestQuotation.phoneNumber.stateCode," ",p.requestQuotation.phoneNumber.phoneNumber,""),t.R7$(2),t.JRh(p.requestQuotation.email),t.R7$(10),t.Dyx(p.selectedQuotation.goodsData),t.R7$(2),t.vxM(58,p.selectedQuotation.description?-1:58),t.R7$(),t.vxM(59,p.selectedQuotation.description?59:-1),t.R7$(),t.Y8G("ngClass",t.l_i(31,g,p.selectedQuotation.description,!p.selectedQuotation.description)),t.R7$(2),t.Y8G("ngClass",t.l_i(34,g,p.selectedQuotation.description,!p.selectedQuotation.description)),t.R7$(),t.Dyx(p.totalQuantity),t.R7$(2),t.vxM(65,p.selectedQuotation.description?65:-1),t.R7$(),t.vxM(66,p.selectedQuotation.description?66:-1),t.R7$(5),t.Y8G("src",p.merchantQuotation.logoUrl,t.B4B),t.R7$(2),t.Dyx(p.selectedQuotation.paymentMethodData.terms))},dependencies:[O.oe,h.Hl,h.$z,c.m_,c.An,O.YU,e.Wk],encapsulation:2,changeDetection:0})}return f})()},22674:(Q,M,n)=>{n.d(M,{G:()=>P,z:()=>C});var R=n(18810),r=n(99437),y=n(96354),m=n(54438),s=n(55181),E=n(51188);let P=(()=>{class i{constructor(h){this._quotationsService=h}resolve(h,c){return this._quotationsService.getQuotations()}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.X))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(h,c){this._quotationsService=h,this._router=c}resolve(h,c){return this._quotationsService.getQuotationById(h.params.quotationId).pipe((0,r.W)(t=>{console.error(t);const u=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(u),(0,R.$)(t)}),(0,y.T)(t=>{if(!t.ok){let u=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(u=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(u)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.X),m.KVO(E.Ix))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},78268:(Q,M,n)=>{n.d(M,{EG:()=>m,dM:()=>y});var R=n(59640);const r=s=>s.quotations,y=(0,R.Mz)(r,s=>s.quotation),m=(0,R.Mz)(r,s=>s.quotations)},55181:(Q,M,n)=>{n.d(M,{X:()=>h});var R=n(21626),r=n(88141),y=n(98216),m=n(55867),s=n(45312),E=n(23309),P=n(54438),C=n(82341),i=n(59640);const O=s.c.API_URL;let h=(()=>{class c{constructor(t,u,_){this._httpClient=t,this.rolesService=u,this.store=_}getQuotations(t=0,u=20,_="createdAt",g="desc",D="",$=""){const A=(new R.Nl).append("page",t).append("size",u).append("sort",_).append("order",g).append("search",D).append("filter",$);return this._httpClient.get(`${O}/quotations/`,{params:A}).pipe((0,r.M)(S=>{this.store.dispatch((0,y.Bp)({pagination:S.pagination})),this.store.dispatch((0,E.gp)({quotations:S.dataArr}))}))}getQuotationById(t){return this._httpClient.get(`${O}/quotations/${t}`).pipe((0,r.M)(u=>{this.store.dispatch((0,E.Fh)({quotation:u.data}))}))}createQuotation(t){return this._httpClient.post(`${O}/quotations`,t).pipe((0,r.M)(u=>{this.store.dispatch((0,E.fl)({quotation:u.data})),this.store.dispatch((0,E.Fh)({quotation:u.data}))}))}updateQuotation(t){return this._httpClient.patch(`${O}/quotations/${t._id}`,t).pipe((0,r.M)(u=>{this.store.dispatch((0,E.Wh)({quotation:u.data}))}))}acceptQuotation(t){return this._httpClient.patch(`${O}/quotations/accept`,{_id:t,status:m.Sb.Aceptada}).pipe((0,r.M)(u=>{this.store.dispatch((0,E.Wh)({quotation:u.data})),this.store.dispatch((0,E.Fh)({quotation:u.data}))}))}rejectQuotation(t,u=""){return this._httpClient.patch(`${O}/quotations/reject`,{_id:t,rejectedReason:u,status:m.Sb.Rechazada}).pipe((0,r.M)(_=>{this.store.dispatch((0,E.Wh)({quotation:_.data})),this.store.dispatch((0,E.Fh)({quotation:_.data}))}))}deleteQuotation(t,u=0,_=20,g="createdAt",D="desc",$="",A=""){const S=(new R.Nl).append("page",u).append("size",_).append("sort",g).append("order",D).append("search",$).append("filter",A);return this._httpClient.delete(`${O}/quotations/${t}`,{params:S}).pipe((0,r.M)(z=>{this.store.dispatch((0,y.Bp)({pagination:z.pagination})),this.store.dispatch((0,E.gp)({quotations:z.dataArr}))}))}static#t=this.\u0275fac=function(u){return new(u||c)(P.KVO(R.Qq),P.KVO(C.y9),P.KVO(i.il))};static#e=this.\u0275prov=P.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},55867:(Q,M,n)=>{n.d(M,{Sb:()=>r,me:()=>y});var r=function(m){return m.Nueva="Nueva",m.Aceptada="Aceptada",m.Facturada="Facturada",m.Rechazada="Rechazada",m.Vencida="Vencida",m}(r||{});class y{constructor(s){this.paymentMethodId=s._id,this.name=s.name,this.merchantId=s.merchantId,this.terms=s.terms,this.paymentBy=s.paymentBy,this.includeBankAccount=s.includeBankAccount}}},94023:(Q,M,n)=>{n.d(M,{B:()=>N});var R=n(21413),r=n(56977),y=n(40740),m=n(77235),s=n(82643),P=n(97586),C=n.n(P),i=n(63729),O=n(88834),h=n(99213),c=n(60177),e=n(54438),t=n(59640);const u=()=>[""],_=()=>["$"];function g(F,L){if(1&F){const v=e.RV6();e.j41(0,"div",2)(1,"button",27),e.bIt("click",function(){e.eBV(v);const x=e.XpG();return e.Njj(x.generatePDF("open"))}),e.nrm(2,"mat-icon",28),e.k0s(),e.j41(3,"button",27),e.bIt("click",function(){e.eBV(v);const x=e.XpG();return e.Njj(x.generatePDF("download"))}),e.nrm(4,"mat-icon",28),e.k0s(),e.j41(5,"button",27),e.bIt("click",function(){e.eBV(v);const x=e.XpG();return e.Njj(x.generatePDF("print"))}),e.nrm(6,"mat-icon",28),e.k0s()()}2&F&&(e.R7$(2),e.Y8G("svgIcon","heroicons_outline:eye"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:download"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:printer"))}function D(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const v=e.XpG();e.R7$(),e.SpI(" ",v.merchantRequest.phoneNumbers[0].stateCode+" "+v.merchantRequest.phoneNumbers[0].phoneNumber,"")}}function $(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const v=e.XpG();e.R7$(),e.JRh(v.merchantRequest.emails[0].email)}}function A(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const v=e.XpG();e.R7$(),e.E5c("",v.selectedRequest.address,", ",v.selectedRequest.city,", ",v.selectedRequest.state,", Cuba ")}}function S(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&F){const v=L.$implicit;e.R7$(),e.Lme("",e.i5U(2,2,v.total,e.lJ4(5,u))," ",v.currency,"")}}function z(F,L){if(1&F&&(e.j41(0,"div",21),e.nrm(1,"div",22),e.j41(2,"div",29)(3,"div",30),e.EFF(4),e.k0s(),e.j41(5,"div",31),e.EFF(6),e.k0s()(),e.j41(7,"div",32),e.EFF(8),e.k0s(),e.j41(9,"div",33),e.EFF(10),e.nI1(11,"currency"),e.k0s(),e.j41(12,"div",33),e.EFF(13),e.nI1(14,"currency"),e.k0s()()),2&F){const v=L.$implicit;e.R7$(4),e.JRh(v.name),e.R7$(2),e.SpI(" ",v.description," "),e.R7$(2),e.JRh(v.amount),e.R7$(2),e.Lme("",e.i5U(11,6,v.price,e.lJ4(12,u))," ",v.currency,""),e.R7$(3),e.JRh(e.i5U(14,9,v.quantity,e.lJ4(13,_)))}}function W(F,L){if(1&F&&(e.j41(0,"div",26),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&F){const v=L.$implicit;e.R7$(),e.Lme("",e.i5U(2,2,v.total,e.lJ4(5,u))," ",v.currency,"")}}s.vfs=m.b.vfs,C().locale("es");let N=(()=>{class F{constructor(v,U){this.store=v,this._changeDetectorRef=U,this.selectedRequest$=null,this.selectedRequest=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new R.B}ngOnInit(){this.store.select(i.SW).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(v=>{this.authUser=v,this._changeDetectorRef.markForCheck()}),this.selectedRequest$=this.store.select(y.W9),this.selectedRequest$.pipe((0,r.Q)(this._unsubscribeAll)).subscribe(v=>{this.selectedRequest=v,this.merchantRequest=v.merchantId,this.totalQuantity=this.getTotalQuantity(v),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(v){const x={content:[{columns:[{columns:[this.merchantRequest.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,9,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:77,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:this.merchantRequest.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantRequest.address}, ${this.merchantRequest.city}, ${this.merchantRequest.state}, ${this.merchantRequest.country}`,alignment:"left",fontSize:8},this.merchantRequest.phoneNumbers.length>0?{text:`${this.merchantRequest.phoneNumbers[0].stateCode}  ${this.merchantRequest.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantRequest.emails.length>0?{text:`${this.merchantRequest.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantRequest.website,alignment:"left",fontSize:8}],width:150,margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,5,0,0]},{columns:[{stack:[{text:"SOLICITUD",alignment:"right",fontSize:16},{text:"CREADA EL",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",alignment:"right",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedRequest.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:C()(this.selectedRequest.createdAt).format("L"),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedRequest.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},...this.totalQuantity.map(j=>[{stack:[{text:`${j.total.toFixed(2)} ${j.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}],margin:[0,4,0,0]}])]}],columnGap:10}],margin:[16,0,0,15]},{columns:[{text:"Por",alignment:"center",color:"#7b838e",width:60,fontSize:14,margin:[0,this.selectedRequest.address?17:7,20,0]},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:this.selectedRequest.address?56:33,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:`${this.selectedRequest.name}  ${this.selectedRequest.lastname}`,alignment:"left",fontSize:8,bold:!0,opacity:.8},this.selectedRequest.address?{text:`${this.selectedRequest.address}, ${this.selectedRequest.city}, ${this.selectedRequest.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.selectedRequest.phoneNumber.stateCode} ${this.selectedRequest.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.selectedRequest.email,alignment:"left",lineHeight:1.2,fontSize:8}],lineHeight:1.2,width:150,margin:[15,0,0,0]}],margin:[16,16,0,5]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},...this.selectedRequest.goodsData.map(j=>[{stack:[{columns:[{stack:[{text:j.name,alignment:"left",fontSize:9,bold:!0,opacity:.7},{text:j.description,alignment:"left",fontSize:7,bold:!0,color:"#64748B",opacity:.7}],lineHeight:1.5,width:350},{stack:[{columns:[{text:j.amount,alignment:"center",fontSize:9,width:40},{text:`${j.price.toFixed(2)} ${j.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${j.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:j.description?[0,7,0,0]:[0,0,0,0]}]}],margin:[0,4,0,2]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]}]}]),{columns:[{text:"Total",alignment:"left",fontSize:12,color:"#7b838e"},{stack:[...this.totalQuantity.map(j=>[{stack:[{text:`${j.total.toFixed(2)} ${j.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:12}]}])]}],margin:[0,35,0,0]}],footer:(j,q,w)=>[q>1?{text:j.toString()+" de "+q,alignment:"center",margin:[0,30,0,0]}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:w.width-170,h:40}],margin:[0,30,0,0]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,80],info:{title:"Solicitud",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantRequest.logoUrl}};switch(v){case v="download":s.createPdf(x).download();break;case v="open":s.createPdf(x).open();break;case v="print":s.createPdf(x).print()}}getTotalQuantity(v){return v.goodsData.reduce((U,{currency:x})=>{if(!U.some(j=>j.currency===x)){const j=v.goodsData.filter(q=>q.currency===x).map(q=>q.quantity).reduce((q,w)=>q+w,0);U.push({currency:x,total:j})}return U},[])}static#t=this.\u0275fac=function(U){return new(U||F)(e.rXU(t.il),e.rXU(e.gRc))};static#e=this.\u0275cmp=e.VBU({type:F,selectors:[["request-details"]],standalone:!0,features:[e.aNF],decls:65,vars:21,consts:[["cdkScrollable","",1,"flex","w-full","md:justify-center","print:overflow-visible"],[1,"inline-block","p-6","text-left","sm:p-10","print:p-0"],[1,"flex","items-center","justify-end","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4"],[1,"p-16","shadow","w-240","min-w-240","rounded-2xl","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","overflow-hidden"],[1,"grid","w-6/12","grid-rows-2","overflow-hidden","place-items-start","gap-y-12"],[1,"grid","w-full","overflow-hidden","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","place-self-center"],[1,"w-24",3,"src"],[1,"pl-10","overflow-auto","border-l","text-md","break-word"],[1,"font-medium"],[1,"grid","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","text-2xl","text-center","place-self-center","text-secondary"],[1,"grid","ml-auto","gap-x-4","gap-y-1",2,"grid-template-columns","123px auto !important"],[1,"text-3xl","tracking-tight","justify-self-end","text-secondary"],[1,"flex","items-center","text-2xl","font-medium"],[1,"font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"grid","grid-cols-12","mt-8","gap-x-1"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","pl-10","font-medium","text-center","text-md","text-secondary"],[1,"col-span-2","font-medium","text-right","text-md","text-secondary"],[1,"grid","grid-cols-12","col-span-12","gap-x-1"],[1,"col-span-12","my-4","border-b"],[1,"col-span-12","mt-16"],[1,"col-span-4","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"flex","flex-col","justify-end","col-span-8","text-2xl","font-medium","text-right"],[1,"col-span-2"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-6"],[1,"text-lg","font-medium"],[1,"mt-2","whitespace-pre-line","text-md","text-secondary"],[1,"self-center","col-span-2","pl-10","text-center"],[1,"self-center","col-span-2","text-right"]],template:function(U,x){1&U&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,g,7,3,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e.nrm(8,"img",8),e.k0s(),e.j41(9,"div",9)(10,"div",10),e.EFF(11),e.k0s(),e.j41(12,"div"),e.EFF(13),e.k0s(),e.DNE(14,D,2,1,"div")(15,$,2,1,"div"),e.k0s()(),e.j41(16,"div",11)(17,"div",12),e.EFF(18," Por "),e.k0s(),e.j41(19,"div",9)(20,"div",10),e.EFF(21),e.k0s(),e.nrm(22,"div"),e.DNE(23,A,2,3,"div"),e.j41(24,"div"),e.EFF(25),e.k0s(),e.j41(26,"div"),e.EFF(27),e.k0s()()()(),e.j41(28,"div",13)(29,"div",14),e.EFF(30,"SOLICITUD"),e.k0s(),e.j41(31,"div",15),e.EFF(32),e.k0s(),e.j41(33,"div",16),e.EFF(34,"CREADA EL"),e.k0s(),e.j41(35,"div",10),e.EFF(36),e.nI1(37,"date"),e.k0s(),e.j41(38,"div",16),e.EFF(39,"ESTADO"),e.k0s(),e.j41(40,"div",10),e.EFF(41),e.k0s(),e.j41(42,"div",16),e.EFF(43,"IMPORTE TOTAL"),e.k0s(),e.j41(44,"div",10),e.Z7z(45,S,3,6,"div",null,e.fX1),e.k0s()()(),e.j41(47,"div",17)(48,"div",18),e.EFF(49,"PRODUCTO O SERVICIO"),e.k0s(),e.j41(50,"div",19),e.EFF(51,"CANTIDAD"),e.k0s(),e.j41(52,"div",20),e.EFF(53,"PRECIO"),e.k0s(),e.j41(54,"div",20),e.EFF(55,"TOTAL"),e.k0s(),e.Z7z(56,z,15,14,"div",21,e.fX1),e.nrm(58,"div",22)(59,"div",23),e.j41(60,"div",24),e.EFF(61,"TOTAL"),e.k0s(),e.j41(62,"div",25),e.Z7z(63,W,3,6,"div",26,e.fX1),e.k0s()()()()()),2&U&&(e.R7$(2),e.vxM(2,x.authUser?-1:2),e.R7$(6),e.Y8G("src",x.merchantRequest.logoUrl,e.B4B),e.R7$(3),e.JRh(x.merchantRequest.name),e.R7$(2),e.LHq("",x.merchantRequest.address,", ",x.merchantRequest.city,", ",x.merchantRequest.state,", ",x.merchantRequest.country," "),e.R7$(),e.vxM(14,x.merchantRequest.phoneNumbers.length>0?14:-1),e.R7$(),e.vxM(15,x.merchantRequest.emails.length>0?15:-1),e.R7$(6),e.Lme("",x.selectedRequest.name," ",x.selectedRequest.lastname,""),e.R7$(2),e.vxM(23,x.selectedRequest.address?23:-1),e.R7$(2),e.Lme("",x.selectedRequest.phoneNumber.stateCode," ",x.selectedRequest.phoneNumber.phoneNumber,""),e.R7$(2),e.JRh(x.selectedRequest.email),e.R7$(5),e.SpI("#",x.selectedRequest.no,""),e.R7$(4),e.JRh(e.i5U(37,18,x.selectedRequest.createdAt,"dd/MM/yyyy")),e.R7$(5),e.JRh(x.selectedRequest.status.toUpperCase()),e.R7$(4),e.Dyx(x.totalQuantity),e.R7$(11),e.Dyx(x.selectedRequest.goodsData),e.R7$(7),e.Dyx(x.totalQuantity))},dependencies:[c.oe,c.vh,O.Hl,O.$z,h.m_,h.An],encapsulation:2,changeDetection:0})}return F})()},48874:(Q,M,n)=>{n.d(M,{K:()=>O,R:()=>i});var R=n(27468),r=n(18810),y=n(99437),m=n(96354),s=n(54438),E=n(90328),P=n(62621),C=n(51188);let i=(()=>{class h{constructor(e,t){this._requestsService=e,this._paymentMethods=t}resolve(e,t){return(0,R.p)([this._requestsService.getRequests(),this._paymentMethods.getActivePaymentConditions()])}static#t=this.\u0275fac=function(t){return new(t||h)(s.KVO(E.k),s.KVO(P.W))};static#e=this.\u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})(),O=(()=>{class h{constructor(e,t){this._requestsService=e,this._router=t}resolve(e,t){return this._requestsService.getRequestById(e.params.requestId).pipe((0,y.W)(_=>{console.error(_);const g=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(g),(0,r.$)(_)}),(0,m.T)(_=>{if(!_.ok){let g=t.url.split("/").slice(0,-1).join("/");t.url.includes("public")&&(g=t.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(g)}}))}static#t=this.\u0275fac=function(t){return new(t||h)(s.KVO(E.k),s.KVO(C.Ix))};static#e=this.\u0275prov=s.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()},40740:(Q,M,n)=>{n.d(M,{W9:()=>y,lz:()=>m});var R=n(59640);const r=s=>s.requests,y=(0,R.Mz)(r,s=>s.request),m=(0,R.Mz)(r,s=>s.requests)},90328:(Q,M,n)=>{n.d(M,{k:()=>e});var R=n(21626),r=n(88141),y=n(98216),s=function(t){return t.Nueva="Nueva",t.Aceptada="Aceptada",t.Rechazada="Rechazada",t}(s||{}),P=n(45312),C=n(91013),i=n(54438),O=n(82341),h=n(59640);const c=P.c.API_URL;let e=(()=>{class t{constructor(_,g,D){this._httpClient=_,this.rolesService=g,this.store=D}getRequests(_=0,g=20,D="createdAt",$="desc",A="",S=""){const z=(new R.Nl).append("page",_).append("size",g).append("sort",D).append("order",$).append("search",A).append("filter",S);return this._httpClient.get(`${c}/requests/`,{params:z}).pipe((0,r.M)(W=>{this.store.dispatch((0,y.Bp)({pagination:W.pagination})),this.store.dispatch((0,C.Zg)({requests:W.dataArr}))}))}getRequestById(_){return this._httpClient.get(`${c}/requests/${_}`).pipe((0,r.M)(g=>{this.store.dispatch((0,C.Id)({request:g.data}))}))}createRequest(_){return this._httpClient.post(`${c}/requests`,_).pipe((0,r.M)(g=>{this.store.dispatch((0,C.WL)({request:g.data}))}))}updateRequest(_){return this._httpClient.patch(`${c}/requests/${_._id}`,_).pipe((0,r.M)(g=>{this.store.dispatch((0,C.H5)({request:g.data}))}))}rejectRequest(_,g){return this._httpClient.patch(`${c}/requests/reject`,{_id:_,rejectedReason:g,status:s.Rechazada}).pipe((0,r.M)(D=>{this.store.dispatch((0,C.H5)({request:D.data}))}))}deleteRequest(_,g=0,D=20,$="createdAt",A="desc",S="",z=""){const W=(new R.Nl).append("page",g).append("size",D).append("sort",$).append("order",A).append("search",S).append("filter",z);return this._httpClient.delete(`${c}/requests/${_}`,{params:W}).pipe((0,r.M)(N=>{this.store.dispatch((0,y.Bp)({pagination:N.pagination})),this.store.dispatch((0,C.Zg)({requests:N.dataArr}))}))}static#t=this.\u0275fac=function(g){return new(g||t)(i.KVO(R.Qq),i.KVO(O.y9),i.KVO(h.il))};static#e=this.\u0275prov=i.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},53440:(Q,M,n)=>{n.d(M,{s:()=>e});var R=n(60177),r=n(89417),y=n(88834),m=n(75351),s=n(32102),E=n(99213),P=n(59042),C=n(87122),i=n(54438);const O=t=>({"cursor-not-allowed":t});function h(t,u){1&t&&(i.j41(0,"mat-error"),i.EFF(1," EL motivo del rechazo es obligatorio "),i.k0s())}function c(t,u){1&t&&(i.j41(0,"mat-error"),i.EFF(1," EL motivo del rechazo debe contener entre 3 y 1000 caracteres. "),i.k0s())}let e=(()=>{class t{constructor(_,g){this.data=_,this._dialogRef=g,this.rejectControl=new r.MJ(""),this.rejectedReasonRequired=!0,this.rejectedReasonRequired=_.rejectedReasonRequired}ngOnInit(){this.rejectControl.setValidators(this.rejectedReasonRequired?[r.k0.required,r.k0.minLength(3),r.k0.maxLength(1e3)]:[r.k0.minLength(3),r.k0.maxLength(1e3)]),this.rejectControl.setValue(this.data.rejectedReason)}accept(){this._dialogRef.close({reason:this.rejectControl.value})}cancel(){this._dialogRef.close()}static#t=this.\u0275fac=function(g){return new(g||t)(i.rXU(m.Vh),i.rXU(m.CP))};static#e=this.\u0275cmp=i.VBU({type:t,selectors:[["commercial-reject-confirm-dialog"]],standalone:!0,features:[i.aNF],decls:28,vars:15,consts:[[1,"h-full","ng-star-inserted"],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","h-full"],[1,"block","w-full"],[1,"flex","flex-col","items-center","flex-auto","p-8","pb-4","sm:flex-row","sm:items-start","sm:pb-6"],["ng-reflect-ng-class","[object Object]",1,"flex","items-center","justify-center","w-10","h-10","text-blue-600","bg-blue-100","rounded-full","flex-0","sm:mr-4","dark:text-blue-50","dark:bg-blue-600","ng-star-inserted"],["role","img","aria-hidden","true","ng-reflect-svg-icon","heroicons_outline:question-mar","data-mat-icon-type","svg","data-mat-icon-name","question-mark-circle","data-mat-icon-namespace","heroicons_outline",1,"text-current","mat-icon","notranslate","mat-icon-no-color"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","fit","","height","100%","width","100%","preserveAspectRatio","xMidYMid meet","focusable","false"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col","items-center","mt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","ng-star-inserted"],[1,"text-xl","font-medium","leading-6","ng-star-inserted"],[1,"text-secondary","ng-star-inserted"],[1,"pb-6","pl-8","pr-8","mt-10","sm:mt-0","sm:pl-22",3,"autocomplete"],[1,"w-full","fuse-mat-textarea"],["matPrefix","","svgIcon","mat_solid:subject",1,"hidden","sm:flex","icon-size-5"],["matInput","",3,"formControl","placeholder","minLength","maxLength","required"],[1,"flex","flex-wrap","justify-center","px-6","py-4","space-x-3","tems-center","md:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10","ng-star-inserted"],["mat-stroked-button","",3,"click"],["mat-flat-button","","mat-button","",3,"click","color","disabled","ngClass"]],template:function(g,D){1&g&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),i.qSk(),i.j41(7,"svg",7),i.nrm(8,"path",8),i.k0s()()(),i.joV(),i.j41(9,"div",9)(10,"div",10),i.EFF(11),i.k0s(),i.j41(12,"div",11),i.EFF(13),i.k0s()()(),i.j41(14,"form",12)(15,"div")(16,"mat-form-field",13)(17,"mat-label"),i.EFF(18,"Motivo"),i.k0s(),i.nrm(19,"mat-icon",14)(20,"textarea",15),i.DNE(21,h,2,0,"mat-error")(22,c,2,0,"mat-error"),i.k0s()()()()(),i.j41(23,"div",16)(24,"button",17),i.bIt("click",function(){return D.cancel()}),i.EFF(25,"Cancelar"),i.k0s(),i.j41(26,"button",18),i.bIt("click",function(){return D.accept()}),i.EFF(27," Aceptar "),i.k0s()()()()),2&g&&(i.R7$(11),i.JRh(D.data.title),i.R7$(2),i.JRh(D.data.message),i.R7$(),i.Y8G("autocomplete","off"),i.R7$(6),i.Y8G("formControl",D.rejectControl)("placeholder","Escriba el motivo del rechazo")("minLength",3)("maxLength",1e3)("required",D.rejectedReasonRequired),i.R7$(),i.vxM(21,D.rejectControl.hasError("required")?21:-1),i.R7$(),i.vxM(22,D.rejectControl.hasError("maxlength")||D.rejectControl.hasError("minlength")?22:-1),i.R7$(4),i.Y8G("color","primary")("disabled",D.rejectControl.invalid)("ngClass",i.eq3(13,O,D.rejectControl.invalid)))},dependencies:[m.hM,s.RG,s.rl,s.nJ,s.TL,s.JW,P.fS,P.fg,E.m_,E.An,y.Hl,y.$z,R.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.l_],encapsulation:2,data:{animation:C.X},changeDetection:0})}return t})()}}]);