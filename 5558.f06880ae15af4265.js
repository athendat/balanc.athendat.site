"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5558],{21809:(Q,M,n)=>{n.d(M,{F:()=>u});var R=n(63729),r=n(21413),I=n(56977),m=n(94268),s=n(77235),E=n(82643),C=n(97586),i=n.n(C),O=n(60177),p=n(88834),c=n(99213),e=n(51188),t=n(54438),h=n(59640);function g(o,y){if(1&o){const a=t.RV6();t.j41(0,"div",33)(1,"button",34),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("open"))}),t.nrm(2,"mat-icon",35),t.k0s(),t.j41(3,"button",34),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("download"))}),t.nrm(4,"mat-icon",35),t.k0s(),t.j41(5,"button",34),t.bIt("click",function(){t.eBV(a);const l=t.XpG();return t.Njj(l.generatePDF("print"))}),t.nrm(6,"mat-icon",35),t.k0s()()}2&o&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))}const _=()=>[""];function x(o,y){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const a=y.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,a.total,t.lJ4(5,_))," ",a.currency,"")}}function $(o,y){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.SpI(" ",a.merchantInvoice.phoneNumbers[0].stateCode+" "+a.merchantInvoice.phoneNumbers[0].phoneNumber,"")}}function A(o,y){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.merchantInvoice.emails[0].email)}}function S(o,y){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.divInSpaces())}}function z(o,y){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.E5c("",a.requestQuotation.address,", ",a.requestQuotation.city,", ",a.requestQuotation.state,", Cuba ")}}const W=()=>["$"];function w(o,y){if(1&o&&(t.j41(0,"div",36),t.nrm(1,"div",37),t.j41(2,"div",38),t.EFF(3),t.k0s(),t.j41(4,"div",39),t.EFF(5),t.k0s(),t.j41(6,"div",40),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"div",40),t.EFF(10),t.nI1(11,"currency"),t.k0s()()),2&o){const a=y.$implicit;t.R7$(3),t.JRh(a.name),t.R7$(2),t.JRh(a.amount),t.R7$(2),t.Lme("",t.i5U(8,5,a.price,t.lJ4(11,_))," ",a.currency,""),t.R7$(3),t.JRh(t.i5U(11,8,a.quantity,t.lJ4(12,W)))}}function F(o,y){1&o&&t.nrm(0,"div",41)}const L=(o,y)=>({"my-4":o,"my-3":y});function f(o,y){if(1&o&&t.nrm(0,"div",42),2&o){const a=t.XpG();t.Y8G("ngClass",t.l_i(1,L,a.quotationInvoice.description,!a.quotationInvoice.description))}}function U(o,y){if(1&o&&(t.j41(0,"div",43),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&o){const a=y.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,a.total,t.lJ4(5,_))," ",a.currency,"")}}function D(o,y){1&o&&(t.j41(0,"div",44),t.EFF(1," OBSERVACIONES"),t.k0s())}function j(o,y){if(1&o&&(t.j41(0,"span",45),t.EFF(1),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.JRh(a.quotationInvoice.description)}}function q(o,y){if(1&o&&(t.j41(0,"div",46)(1,"div",47)(2,"span"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5,"-"),t.k0s()(),t.j41(6,"span",48),t.EFF(7),t.k0s()()),2&o){const a=y.$implicit;t.R7$(3),t.SpI("",a.percent,"%"),t.R7$(4),t.JRh(a.description)}}function N(o,y){if(1&o&&(t.j41(0,"div",51)(1,"span",52),t.EFF(2),t.k0s(),t.nrm(3,"img",53),t.k0s()),2&o){const a=t.XpG(2);t.R7$(2),t.JRh(a.eQr.name),t.R7$(),t.Y8G("src",a.eQr.qrUrl,t.B4B)}}function V(o,y){if(1&o&&(t.j41(0,"div",51)(1,"span",52),t.EFF(2),t.k0s(),t.nrm(3,"img",53),t.k0s()),2&o){const a=t.XpG(2);t.R7$(2),t.JRh(a.tQr.name),t.R7$(),t.Y8G("src",a.tQr.qrUrl,t.B4B)}}function v(o,y){if(1&o&&(t.j41(0,"div",49),t.DNE(1,N,4,2,"div",50)(2,V,4,2,"div",50),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.vxM(1,a.eQr?1:-1),t.R7$(),t.vxM(2,a.tQr?2:-1)}}const T=(o,y)=>[o,y],d=(o,y)=>({"text-lg":o,"text-2xl":y}),B=(o,y)=>({"col-span-3":o,"col-span-2":y});E.vfs=s.b.vfs,i().locale("es");let u=(()=>{class o{constructor(a,k){this.store=a,this._changeDetectorRef=k,this.selectedInvoice$=null,this.selectedInvoice=null,this.authUser=null,this.eQr=null,this.tQr=null,this.totalQuantity=[],this._unsubscribeAll=new r.B}ngOnInit(){this.store.select(R.SW).pipe((0,I.Q)(this._unsubscribeAll)).subscribe(a=>{this.linkRequest=a?"/modules/commercial/quotations":"/public/quotation",this.authUser=a,this._changeDetectorRef.markForCheck()}),this.selectedInvoice$=this.store.select(m.WK),this.selectedInvoice$.pipe((0,I.Q)(this._unsubscribeAll)).subscribe(a=>{this.selectedInvoice=a,this.merchantInvoice=a.merchantId,this.quotationInvoice=a.quotationId,this.requestQuotation=this.quotationInvoice.requestId,this.totalQuantity=this.getTotalQuantity(this.quotationInvoice),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(a){const l={content:[{columns:[{stack:[{columns:[{stack:[{text:"FACTURA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedInvoice.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedInvoice.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(b=>[{text:`${b.total.toFixed(2)} ${b.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}]},{columns:[{text:"OFERTA",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedInvoice.quotationNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,10,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:80,lineWidth:.5}],width:1},{stack:[{text:this.merchantInvoice.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantInvoice.address}  ${this.merchantInvoice.city}   ${this.merchantInvoice.state}   ${this.merchantInvoice.country}`,alignment:"left",fontSize:8},this.merchantInvoice.phoneNumbers.length>0?{text:`${this.merchantInvoice.phoneNumbers[0].stateCode}  ${this.merchantInvoice.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantInvoice.emails.length>0?{text:`${this.merchantInvoice.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantInvoice.website,alignment:"left",fontSize:8},this.quotationInvoice.paymentMethodData.includeBankAccount?{text:this.divInSpaces(),alignment:"left",fontSize:8}:{}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.quotationInvoice.goodsData.map(b=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:b.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:b.amount,alignment:"center",fontSize:9,width:40},{text:`${b.price.toFixed(2)} ${b.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${b.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(b=>[{text:`${b.total.toFixed(2)} ${b.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.quotationInvoice.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.quotationInvoice.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(b,K,G)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantInvoice.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.quotationInvoice.paymentMethodData.terms.map(X=>[{text:`${X.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:X.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]},"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy?{stack:[{columns:[this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[],width:1}:{stack:[],width:55},this.merchantInvoice.commercialManagement.enzonaQr?{stack:[{text:"Enzona",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"enzonaUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:55},this.merchantInvoice.commercialManagement.transfermovilQr?{stack:[{text:"Transfermovil",alignment:"center",fontSize:8,opacity:.6,bold:!0,margin:[0,0,0,2]},{image:"transfermovilUrl",width:55,alignment:"center"}],margin:[0,-10,0,0]}:{stack:[],width:1}],columnGap:15}],width:150,margin:[15,0,0,0]}:{stack:[],width:1}],margin:[0,8,0,0]}],margin:K>1?[40,30,40,15]:[40,50,40,15]},K>1?{text:b.toString()+" de "+K,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:G.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Factura",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantInvoice.logoUrl,enzonaUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.enzonaQr?this.merchantInvoice.commercialManagement.enzonaQr:"",transfermovilUrl:"UseMerchantPayments"===this.quotationInvoice.paymentMethodData.paymentBy&&this.merchantInvoice.commercialManagement.transfermovilQr?this.merchantInvoice.commercialManagement.transfermovilQr:""}};switch(a){case a="download":E.createPdf(l).download();break;case a="open":E.createPdf(l).open();break;case a="print":E.createPdf(l).print()}}getTotalQuantity(a){return a.goodsData.reduce((k,{currency:l})=>{if(!k.some(b=>b.currency===l)){const b=a.goodsData.filter(K=>K.currency===l).map(K=>K.quantity).reduce((K,G)=>K+G,0);k.push({currency:l,total:b})}return k},[])}getValidity(){return`${i()(this.selectedInvoice.createdAt).format("L")} - ${i()(this.selectedInvoice.createdAt).add(this.selectedInvoice.expirationDays,"days").format("L")}`}divInSpaces(){const a=this.selectedInvoice.bankAccount,k=[];for(let l=0;l<a.length;l++)k.push(a.substring(l,l+4)),l+=3;return k.join("-")}static#t=this.\u0275fac=function(k){return new(k||o)(t.rXU(h.il),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["invoice-details"]],standalone:!0,features:[t.aNF],decls:78,vars:43,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],["class","flex items-center flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4 justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"whitespace-nowrap","grid","grid-cols-2","gap-y-1",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],["class","col-span-12 mt-16"],["class","col-span-12  border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],["class","col-span-8 font-medium text-md mt-10 text-secondary"],["class","col-span-12 break-words mt-2"],[1,"mt-16","grid","grid-cols-3"],[1,"",3,"ngClass"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],["class","col-span-1 flex justify-end gap-8"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],[1,"flex","justify-between"],[1,"ml-4"],[1,"col-span-1","flex","justify-end","gap-8"],["class","text-center"],[1,"text-center"],[1,"text-md","font-medium","text-secondary"],[1,"w-24","h-24","object-cover","mt-2",3,"src"],["class","col-span-12 grid grid-cols-12 gap-x-1"],["class","col-span-2"],["style","grid-template-columns: 45px auto !important;","class","grid grid-cols-2 text-sm text-secondary w-full"]],template:function(k,l){1&k&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,g,7,3,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.EFF(7,"FACTURA"),t.k0s(),t.j41(8,"div",7),t.EFF(9),t.k0s(),t.j41(10,"div",8),t.EFF(11,"VALIDEZ"),t.k0s(),t.j41(12,"div",9),t.EFF(13),t.k0s(),t.j41(14,"div",8),t.EFF(15,"ESTADO"),t.k0s(),t.j41(16,"div",9),t.EFF(17),t.k0s(),t.j41(18,"div",8),t.EFF(19,"IMPORTE TOTAL"),t.k0s(),t.j41(20,"div",9),t.Z7z(21,x,3,6,"div",null,t.fX1),t.k0s(),t.j41(23,"div",8),t.EFF(24,"OFERTA"),t.k0s(),t.j41(25,"a",10),t.EFF(26),t.k0s()(),t.j41(27,"div",11)(28,"div",12),t.nrm(29,"img",13),t.k0s(),t.j41(30,"div",14)(31,"div",9),t.EFF(32),t.k0s(),t.j41(33,"div"),t.EFF(34),t.k0s(),t.DNE(35,$,2,1,"div")(36,A,2,1,"div"),t.j41(37,"div"),t.EFF(38),t.k0s(),t.DNE(39,S,2,1,"div"),t.k0s()()(),t.j41(40,"div",15)(41,"div",16),t.EFF(42),t.k0s(),t.DNE(43,z,2,3,"div"),t.j41(44,"div"),t.EFF(45),t.k0s(),t.j41(46,"div"),t.EFF(47),t.k0s()(),t.j41(48,"div",17)(49,"div",18),t.EFF(50,"PRODUCTO O SERVICIO"),t.k0s(),t.j41(51,"div",19),t.EFF(52,"CANTIDAD"),t.k0s(),t.j41(53,"div",20),t.EFF(54,"PRECIO"),t.k0s(),t.j41(55,"div",20),t.EFF(56,"TOTAL"),t.k0s(),t.Z7z(57,w,12,13,"div",54,t.fX1),t.DNE(59,F,1,0,"div",21)(60,f,1,4,"div",22),t.j41(61,"div",23),t.EFF(62,"TOTAL"),t.k0s(),t.j41(63,"div",24),t.Z7z(64,U,3,6,"div",55,t.fX1),t.k0s(),t.DNE(66,D,2,0,"div",25)(67,j,2,1,"span",26),t.k0s(),t.j41(68,"div",27)(69,"div",28)(70,"div",9),t.EFF(71,"T\xe9rminos o condiciones de pago."),t.k0s(),t.j41(72,"div",29),t.nrm(73,"img",30),t.j41(74,"div",31),t.Z7z(75,q,8,2,"div",56,t.fX1),t.k0s()()(),t.DNE(77,v,3,2,"div",32),t.k0s()()()()),2&k&&(t.R7$(2),t.vxM(2,l.authUser?-1:2),t.R7$(7),t.SpI("#",l.selectedInvoice.no,""),t.R7$(4),t.JRh(l.getValidity()),t.R7$(4),t.JRh(l.selectedInvoice.status.toUpperCase()),t.R7$(4),t.Dyx(l.totalQuantity),t.R7$(4),t.Y8G("routerLink",t.l_i(31,T,l.linkRequest,l.quotationInvoice._id)),t.R7$(),t.SpI("#",l.selectedInvoice.quotationNo,""),t.R7$(3),t.Y8G("src",l.merchantInvoice.logoUrl,t.B4B),t.R7$(3),t.JRh(l.merchantInvoice.name),t.R7$(2),t.LHq("",l.merchantInvoice.address,", ",l.merchantInvoice.city,", ",l.merchantInvoice.state,", ",l.merchantInvoice.country," "),t.R7$(),t.vxM(35,l.merchantInvoice.phoneNumbers.length>0?35:-1),t.R7$(),t.vxM(36,l.merchantInvoice.emails.length>0?36:-1),t.R7$(2),t.JRh(l.merchantInvoice.website),t.R7$(),t.vxM(39,l.quotationInvoice.paymentMethodData.includeBankAccount?39:-1),t.R7$(3),t.Lme("",l.requestQuotation.name," ",l.requestQuotation.lastname,""),t.R7$(),t.vxM(43,l.requestQuotation.address?43:-1),t.R7$(2),t.Lme("",l.requestQuotation.phoneNumber.stateCode," ",l.requestQuotation.phoneNumber.phoneNumber,""),t.R7$(2),t.JRh(l.requestQuotation.email),t.R7$(10),t.Dyx(l.quotationInvoice.goodsData),t.R7$(2),t.vxM(59,l.quotationInvoice.description?-1:59),t.R7$(),t.vxM(60,l.quotationInvoice.description?60:-1),t.R7$(),t.Y8G("ngClass",t.l_i(34,d,l.quotationInvoice.description,!l.quotationInvoice.description)),t.R7$(2),t.Y8G("ngClass",t.l_i(37,d,l.quotationInvoice.description,!l.quotationInvoice.description)),t.R7$(),t.Dyx(l.totalQuantity),t.R7$(2),t.vxM(66,l.quotationInvoice.description?66:-1),t.R7$(),t.vxM(67,l.quotationInvoice.description?67:-1),t.R7$(2),t.Y8G("ngClass",t.l_i(40,B,!l.eQr&&!l.tQr||"UseMerchantPayments"!==l.quotationInvoice.paymentMethodData.paymentBy,!(!l.eQr&&!l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy)),t.R7$(4),t.Y8G("src",l.merchantInvoice.logoUrl,t.B4B),t.R7$(2),t.Dyx(l.quotationInvoice.paymentMethodData.terms),t.R7$(2),t.vxM(77,(l.eQr||l.tQr)&&"UseMerchantPayments"===l.quotationInvoice.paymentMethodData.paymentBy?77:-1))},dependencies:[O.oe,p.Hl,p.$z,c.m_,c.An,O.YU,e.Wk],encapsulation:2,changeDetection:0})}return o})()},91602:(Q,M,n)=>{n.d(M,{M:()=>C,R:()=>P});var R=n(18810),r=n(99437),I=n(96354),m=n(54438),s=n(9005),E=n(51188);let P=(()=>{class i{constructor(p){this._invoicesService=p}resolve(p,c){return this._invoicesService.getInvoices()}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.U))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(p,c){this._invoicesService=p,this._router=c}resolve(p,c){return this._invoicesService.getInvoiceById(p.params.invoiceId).pipe((0,r.W)(t=>{console.error(t);const h=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(h),(0,R.$)(t)}),(0,I.T)(t=>{if(!t.ok){let h=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(h=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(h)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.U),m.KVO(E.Ix))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},94268:(Q,M,n)=>{n.d(M,{WK:()=>I,nX:()=>m});var R=n(59640);const r=s=>s.invoices,I=(0,R.Mz)(r,s=>s.invoice),m=(0,R.Mz)(r,s=>s.invoices)},9005:(Q,M,n)=>{n.d(M,{U:()=>i});var R=n(21626),r=n(88141),I=n(98216),m=n(45312),s=n(19117),E=n(54438),P=n(59640);const C=m.c.API_URL;let i=(()=>{class O{constructor(c,e){this._httpClient=c,this.store=e}getInvoices(c=0,e=20,t="createdAt",h="desc",g="",_=""){const x=(new R.Nl).append("page",c).append("size",e).append("sort",t).append("order",h).append("search",g).append("filter",_);return this._httpClient.get(`${C}/invoices/`,{params:x}).pipe((0,r.M)($=>{this.store.dispatch((0,I.Bp)({pagination:$.pagination})),this.store.dispatch((0,s.$6)({invoices:$.dataArr}))}))}getInvoiceById(c){return this._httpClient.get(`${C}/invoices/${c}`).pipe((0,r.M)(e=>{this.store.dispatch((0,s.ep)({invoice:e.data}))}))}createInvoice(c){return this._httpClient.post(`${C}/invoices`,c).pipe((0,r.M)(e=>{this.store.dispatch((0,s.iO)({invoice:e.data}))}))}updateInvoice(c){return this._httpClient.patch(`${C}/invoices/${c._id}`,c).pipe((0,r.M)(e=>{this.store.dispatch((0,s.Dq)({invoice:e.data}))}))}updateStatus(c,e,t=""){return this._httpClient.patch(`${C}/invoices/update-status`,{_id:c,status:e,canceledReason:t}).pipe((0,r.M)(h=>{this.store.dispatch((0,s.Dq)({invoice:h.data}))}))}deleteInvoice(c,e=0,t=20,h="createdAt",g="desc",_="",x=""){const $=(new R.Nl).append("page",e).append("size",t).append("sort",h).append("order",g).append("search",_).append("filter",x);return this._httpClient.delete(`${C}/invoices/${c}`,{params:$}).pipe((0,r.M)(A=>{this.store.dispatch((0,I.Bp)({pagination:A.pagination})),this.store.dispatch((0,s.$6)({invoices:A.dataArr}))}))}static#t=this.\u0275fac=function(e){return new(e||O)(E.KVO(R.Qq),E.KVO(P.il))};static#e=this.\u0275prov=E.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})()},62621:(Q,M,n)=>{n.d(M,{W:()=>O});var R=n(21626),r=n(88141),I=n(96354),m=n(87037),s=n(98216),E=n(45312),P=n(54438),C=n(59640);const i=E.c.API_URL;let O=(()=>{class p{constructor(e,t){this._httpClient=e,this.store=t}getPaymentConditions(e=0,t=20,h="active",g="desc",_=""){const x=(new R.Nl).append("page",e).append("size",t).append("sort",h).append("order",g).append("search",_);return this._httpClient.get(`${i}/payment-conditions/`,{params:x}).pipe((0,r.M)($=>{this.store.dispatch((0,s.Bp)({pagination:$.pagination})),this.store.dispatch((0,m.Ze)({paymentConditions:$.dataArr}))}))}getActivePaymentConditions(){return this._httpClient.get(`${i}/payment-conditions/active`).pipe((0,I.T)(e=>e.dataArr),(0,r.M)(e=>{this.store.dispatch((0,m.Ze)({paymentConditions:e}))}))}getPaymentConditionById(e){return this._httpClient.get(`${i}/payment-conditions/${e}`).pipe((0,r.M)(t=>{this.store.dispatch((0,m.QH)({paymentCondition:t.data}))}))}createPaymentCondition(e){return this._httpClient.post(`${i}/payment-conditions`,e).pipe((0,r.M)(t=>{this.store.dispatch((0,m.yX)({paymentCondition:t.data}))}))}updatePaymentCondition(e){return this._httpClient.patch(`${i}/payment-conditions/${e._id}`,e).pipe((0,r.M)(t=>{this.store.dispatch((0,m.vK)({paymentCondition:t.data}))}))}deletePaymentCondition(e,t=0,h=20,g="active",_="desc",x=""){const $=(new R.Nl).append("page",t).append("size",h).append("sort",g).append("order",_).append("search",x);return this._httpClient.delete(`${i}/payment-conditions/${e}`,{params:$}).pipe((0,r.M)(A=>{this.store.dispatch((0,s.Bp)({pagination:A.pagination})),this.store.dispatch((0,m.Ze)({paymentConditions:A.dataArr}))}))}static#t=this.\u0275fac=function(t){return new(t||p)(P.KVO(R.Qq),P.KVO(C.il))};static#e=this.\u0275prov=P.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},5004:(Q,M,n)=>{n.d(M,{Q:()=>V});var R=n(63729),r=n(21413),I=n(56977),m=n(78268),s=n(77235),E=n(82643),C=n(97586),i=n.n(C),O=n(60177),p=n(88834),c=n(99213),e=n(51188),t=n(54438),h=n(59640);function g(v,T){if(1&v){const d=t.RV6();t.j41(0,"div",31)(1,"button",32),t.bIt("click",function(){t.eBV(d);const u=t.XpG();return t.Njj(u.generatePDF("open"))}),t.nrm(2,"mat-icon",33),t.k0s(),t.j41(3,"button",32),t.bIt("click",function(){t.eBV(d);const u=t.XpG();return t.Njj(u.generatePDF("download"))}),t.nrm(4,"mat-icon",33),t.k0s(),t.j41(5,"button",32),t.bIt("click",function(){t.eBV(d);const u=t.XpG();return t.Njj(u.generatePDF("print"))}),t.nrm(6,"mat-icon",33),t.k0s()()}2&v&&(t.R7$(2),t.Y8G("svgIcon","heroicons_outline:eye"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:download"),t.R7$(2),t.Y8G("svgIcon","heroicons_outline:printer"))}const _=()=>[""];function x(v,T){if(1&v&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&v){const d=T.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,d.total,t.lJ4(5,_))," ",d.currency,"")}}function $(v,T){if(1&v&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&v){const d=t.XpG();t.R7$(),t.SpI(" ",d.merchantQuotation.phoneNumbers[0].stateCode+" "+d.merchantQuotation.phoneNumbers[0].phoneNumber,"")}}function A(v,T){if(1&v&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&v){const d=t.XpG();t.R7$(),t.JRh(d.merchantQuotation.emails[0].email)}}function S(v,T){if(1&v&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&v){const d=t.XpG();t.R7$(),t.E5c("",d.requestQuotation.address,", ",d.requestQuotation.city,", ",d.requestQuotation.state,", Cuba ")}}const z=()=>["$"];function W(v,T){if(1&v&&(t.j41(0,"div",34),t.nrm(1,"div",35),t.j41(2,"div",36),t.EFF(3),t.k0s(),t.j41(4,"div",37),t.EFF(5),t.k0s(),t.j41(6,"div",38),t.EFF(7),t.nI1(8,"currency"),t.k0s(),t.j41(9,"div",38),t.EFF(10),t.nI1(11,"currency"),t.k0s()()),2&v){const d=T.$implicit;t.R7$(3),t.JRh(d.name),t.R7$(2),t.JRh(d.amount),t.R7$(2),t.Lme("",t.i5U(8,5,d.price,t.lJ4(11,_))," ",d.currency,""),t.R7$(3),t.JRh(t.i5U(11,8,d.quantity,t.lJ4(12,z)))}}function w(v,T){1&v&&t.nrm(0,"div",39)}const F=(v,T)=>({"my-4":v,"my-3":T});function L(v,T){if(1&v&&t.nrm(0,"div",40),2&v){const d=t.XpG();t.Y8G("ngClass",t.l_i(1,F,d.selectedQuotation.description,!d.selectedQuotation.description))}}function f(v,T){if(1&v&&(t.j41(0,"div",41),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&v){const d=T.$implicit;t.R7$(),t.Lme("",t.i5U(2,2,d.total,t.lJ4(5,_))," ",d.currency,"")}}function U(v,T){1&v&&(t.j41(0,"div",42),t.EFF(1,"OBSERVACIONES"),t.k0s())}function D(v,T){if(1&v&&(t.j41(0,"span",43),t.EFF(1),t.k0s()),2&v){const d=t.XpG();t.R7$(),t.JRh(d.selectedQuotation.description)}}function j(v,T){if(1&v&&(t.j41(0,"div",44)(1,"div",45)(2,"span"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5,"-"),t.k0s()(),t.j41(6,"span",46),t.EFF(7),t.k0s()()),2&v){const d=T.$implicit;t.R7$(3),t.SpI("",d.percent,"%"),t.R7$(4),t.JRh(d.description)}}const q=(v,T)=>[v,T],N=(v,T)=>({"text-lg":v,"text-2xl":T});E.vfs=s.b.vfs,i().locale("es");let V=(()=>{class v{constructor(d,B){this.store=d,this._changeDetectorRef=B,this.selectedQuotation$=null,this.selectedQuotation=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new r.B}ngOnInit(){this.store.select(R.SW).pipe((0,I.Q)(this._unsubscribeAll)).subscribe(d=>{this.linkRequest=d?"/modules/commercial/request":"/public/request",this.authUser=d,this._changeDetectorRef.markForCheck()}),this.selectedQuotation$=this.store.select(m.dM),this.selectedQuotation$.pipe((0,I.Q)(this._unsubscribeAll)).subscribe(d=>{this.selectedQuotation=d,this.merchantQuotation=d.merchantId,this.requestQuotation=d.requestId,this.totalQuantity=this.getTotalQuantity(d),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(d){const u={content:[{columns:[{stack:[{columns:[{stack:[{text:"OFERTA",fontSize:16},{text:"VALIDEZ",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedQuotation.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:this.getValidity(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedQuotation.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}])],margin:[0,4,0,0]}]}],width:320},{columns:[{text:"SOLICITUD",margin:[0,4,0,0],fontSize:9,width:100,color:"#7b838e"},{text:this.selectedQuotation.requestNo,margin:[0,4,0,0],alignment:"left",fontSize:9}],width:320}],width:320},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,7,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:73,lineWidth:.1}],width:1},{stack:[{text:this.merchantQuotation.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantQuotation.address}  ${this.merchantQuotation.city}   ${this.merchantQuotation.state}   ${this.merchantQuotation.country}`,alignment:"left",fontSize:8},this.merchantQuotation.phoneNumbers.length>0?{text:`${this.merchantQuotation.phoneNumbers[0].stateCode}  ${this.merchantQuotation.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantQuotation.emails.length>0?{text:`${this.merchantQuotation.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantQuotation.website,alignment:"left",fontSize:8}],margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,4,0,0]}]},{stack:[{text:`${this.requestQuotation.name}  ${this.requestQuotation.lastname}`,alignment:"left",fontSize:12,lineHeight:1.2,bold:!0,opacity:.8},this.requestQuotation.address?{text:`${this.requestQuotation.address}, ${this.requestQuotation.city}, ${this.requestQuotation.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.requestQuotation.phoneNumber.stateCode} ${this.requestQuotation.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.requestQuotation.email,alignment:"left",lineHeight:1.2,fontSize:8}],margin:[0,20,0,0]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,5]},...this.selectedQuotation.goodsData.map(o=>[{stack:[{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:o.name,alignment:"left",fontSize:9,bold:!0,opacity:.7,width:350},{text:o.amount,alignment:"center",fontSize:9,width:40},{text:`${o.price.toFixed(2)} ${o.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${o.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:[0,4,0,4]}]}]),{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},{columns:[{text:"Total",alignment:"left",fontSize:9,color:"#7b838e"},{stack:[...this.totalQuantity.map(o=>[{text:`${o.total.toFixed(2)} ${o.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:9}])]}],margin:[0,5,0,0]},this.selectedQuotation.description?{stack:[{text:"OBSERVACIONES",color:"#64748B",alignment:"left",fontSize:8},{text:this.selectedQuotation.description,alignment:"left",fontSize:9,margin:[0,2,0,0]}],margin:[0,25,0,0]}:{}],footer:(o,y,a)=>[{stack:[{text:"T\xe9rminos o condiciones de pago.",alignment:"left",fontSize:9,bold:!0,opacity:.9},{columns:[this.merchantQuotation.logoUrl?{image:"logo",width:20,alignment:"center"}:{},{layout:"noBorders",lineHeight:1,table:{headerRows:0,widths:[15,2,"*"],body:[...this.selectedQuotation.paymentMethodData.terms.map(k=>[{text:`${k.percent}%`,alignment:"left",fontSize:6,opacity:.6},{text:"-",alignment:"left",fontSize:6,opacity:.6},{text:k.description,alignment:"left",fontSize:6,opacity:.6}])]},margin:[10,0,0,0]}],margin:[0,8,0,0]}],margin:y>1?[40,30,40,15]:[40,70,40,15]},y>1?{text:o.toString()+" de "+y,alignment:"center"}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:a.width-170,h:40}]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,145],info:{title:"Oferta",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantQuotation.logoUrl}};switch(d){case d="download":E.createPdf(u).download();break;case d="open":E.createPdf(u).open();break;case d="print":E.createPdf(u).print()}}getTotalQuantity(d){return d.goodsData.reduce((B,{currency:u})=>{if(!B.some(o=>o.currency===u)){const o=d.goodsData.filter(y=>y.currency===u).map(y=>y.quantity).reduce((y,a)=>y+a,0);B.push({currency:u,total:o})}return B},[])}getValidity(){return`${i()(this.selectedQuotation.createdAt).format("L")} - ${i()(this.selectedQuotation.createdAt).add(this.selectedQuotation.expirationDays,"days").format("L")}`}static#t=this.\u0275fac=function(B){return new(B||v)(t.rXU(h.il),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:v,selectors:[["quotation-details"]],standalone:!0,features:[t.aNF],decls:75,vars:37,consts:[["cdkScrollable","",1,"flex","md:justify-center","w-full","print:overflow-visible"],[1,"inline-block","p-6","sm:p-10","text-left","print:p-0"],["class","flex items-center flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4 justify-end"],[1,"w-240","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","justify-between"],[1,"grid","grid-cols-2","gap-y-1","whitespace-nowrap",2,"width","260px !important"],[1,"text-3xl","tracking-tight","text-secondary"],[1,"text-2xl","flex","items-center","font-medium"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"font-medium","text-primary-500","hover:text-primary-700","cursor-pointer",3,"routerLink"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","light"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-8","overflow-auto","break-word","border-l","text-md",2,"width","220px !important","border-color","black"],[1,"mt-4","text-md","w-96","pr-8"],[1,"text-xl","font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-14"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","font-medium","text-md","text-center","text-secondary","pl-10"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],["class","col-span-12 mt-16"],["class","col-span-12  border-b",3,"ngClass"],[1,"col-span-10","font-medium","tracking-tight","text-secondary",3,"ngClass"],[1,"flex","flex-col","col-span-2","text-right","font-medium",3,"ngClass"],["class","col-span-8 font-medium text-md mt-10 text-secondary"],["class","col-span-12 break-words mt-2"],[1,"mt-16"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-1",3,"src"],[1,"flex","flex-col","ml-6","w-full"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-end"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"col-span-12","grid","grid-cols-12","gap-x-1"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6","text-lg","font-medium"],[1,"col-span-2","self-center","text-center","pl-10"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-16"],[1,"col-span-12","border-b",3,"ngClass"],[1,"col-span-2"],[1,"col-span-8","font-medium","text-md","mt-10","text-secondary"],[1,"col-span-12","break-words","mt-2"],[1,"grid","grid-cols-2","text-sm","text-secondary","w-full",2,"grid-template-columns","45px auto !important"],[1,"flex","justify-between"],[1,"ml-4"],["class","col-span-12 grid grid-cols-12 gap-x-1"],["class","col-span-2"],["style","grid-template-columns: 45px auto !important;","class","grid grid-cols-2 text-sm text-secondary w-full"]],template:function(B,u){1&B&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,g,7,3,"div",2),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.EFF(7,"OFERTA"),t.k0s(),t.j41(8,"div",7),t.EFF(9),t.k0s(),t.j41(10,"div",8),t.EFF(11,"VALIDEZ"),t.k0s(),t.j41(12,"div",9),t.EFF(13),t.k0s(),t.j41(14,"div",8),t.EFF(15,"ESTADO"),t.k0s(),t.j41(16,"div",9),t.EFF(17),t.k0s(),t.j41(18,"div",8),t.EFF(19,"IMPORTE TOTAL"),t.k0s(),t.j41(20,"div",9),t.Z7z(21,x,3,6,"div",null,t.fX1),t.k0s(),t.j41(23,"div",8),t.EFF(24,"SOLICITUD"),t.k0s(),t.j41(25,"a",10),t.EFF(26),t.k0s()(),t.j41(27,"div",11)(28,"div",12),t.nrm(29,"img",13),t.k0s(),t.j41(30,"div",14)(31,"div",9),t.EFF(32),t.k0s(),t.j41(33,"div"),t.EFF(34),t.k0s(),t.DNE(35,$,2,1,"div")(36,A,2,1,"div"),t.j41(37,"div"),t.EFF(38),t.k0s()()()(),t.j41(39,"div",15)(40,"div",16),t.EFF(41),t.k0s(),t.DNE(42,S,2,3,"div"),t.j41(43,"div"),t.EFF(44),t.k0s(),t.j41(45,"div"),t.EFF(46),t.k0s()(),t.j41(47,"div",17)(48,"div",18),t.EFF(49,"PRODUCTO O SERVICIO"),t.k0s(),t.j41(50,"div",19),t.EFF(51,"CANTIDAD"),t.k0s(),t.j41(52,"div",20),t.EFF(53,"PRECIO"),t.k0s(),t.j41(54,"div",20),t.EFF(55,"TOTAL"),t.k0s(),t.Z7z(56,W,12,13,"div",47,t.fX1),t.DNE(58,w,1,0,"div",21)(59,L,1,4,"div",22),t.j41(60,"div",23),t.EFF(61,"TOTAL"),t.k0s(),t.j41(62,"div",24),t.Z7z(63,f,3,6,"div",48,t.fX1),t.k0s(),t.DNE(65,U,2,0,"div",25)(66,D,2,1,"span",26),t.k0s(),t.j41(67,"div",27)(68,"div",9),t.EFF(69,"T\xe9rminos o condiciones de pago."),t.k0s(),t.j41(70,"div",28),t.nrm(71,"img",29),t.j41(72,"div",30),t.Z7z(73,j,8,2,"div",49,t.fX1),t.k0s()()()()()()),2&B&&(t.R7$(2),t.vxM(2,u.authUser?-1:2),t.R7$(7),t.SpI("#",u.selectedQuotation.no,""),t.R7$(4),t.JRh(u.getValidity()),t.R7$(4),t.JRh(u.selectedQuotation.status.toUpperCase()),t.R7$(4),t.Dyx(u.totalQuantity),t.R7$(4),t.Y8G("routerLink",t.l_i(28,q,u.linkRequest,u.requestQuotation._id)),t.R7$(),t.SpI("#",u.selectedQuotation.requestNo,""),t.R7$(3),t.Y8G("src",u.merchantQuotation.logoUrl,t.B4B),t.R7$(3),t.JRh(u.merchantQuotation.name),t.R7$(2),t.LHq("",u.merchantQuotation.address,", ",u.merchantQuotation.city,", ",u.merchantQuotation.state,", ",u.merchantQuotation.country," "),t.R7$(),t.vxM(35,u.merchantQuotation.phoneNumbers.length>0?35:-1),t.R7$(),t.vxM(36,u.merchantQuotation.emails.length>0?36:-1),t.R7$(2),t.JRh(u.merchantQuotation.website),t.R7$(3),t.Lme("",u.requestQuotation.name," ",u.requestQuotation.lastname,""),t.R7$(),t.vxM(42,u.requestQuotation.address?42:-1),t.R7$(2),t.Lme("",u.requestQuotation.phoneNumber.stateCode," ",u.requestQuotation.phoneNumber.phoneNumber,""),t.R7$(2),t.JRh(u.requestQuotation.email),t.R7$(10),t.Dyx(u.selectedQuotation.goodsData),t.R7$(2),t.vxM(58,u.selectedQuotation.description?-1:58),t.R7$(),t.vxM(59,u.selectedQuotation.description?59:-1),t.R7$(),t.Y8G("ngClass",t.l_i(31,N,u.selectedQuotation.description,!u.selectedQuotation.description)),t.R7$(2),t.Y8G("ngClass",t.l_i(34,N,u.selectedQuotation.description,!u.selectedQuotation.description)),t.R7$(),t.Dyx(u.totalQuantity),t.R7$(2),t.vxM(65,u.selectedQuotation.description?65:-1),t.R7$(),t.vxM(66,u.selectedQuotation.description?66:-1),t.R7$(5),t.Y8G("src",u.merchantQuotation.logoUrl,t.B4B),t.R7$(2),t.Dyx(u.selectedQuotation.paymentMethodData.terms))},dependencies:[O.oe,p.Hl,p.$z,c.m_,c.An,O.YU,e.Wk],encapsulation:2,changeDetection:0})}return v})()},22674:(Q,M,n)=>{n.d(M,{G:()=>P,z:()=>C});var R=n(18810),r=n(99437),I=n(96354),m=n(54438),s=n(55181),E=n(51188);let P=(()=>{class i{constructor(p){this._quotationsService=p}resolve(p,c){return this._quotationsService.getQuotations()}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.X))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),C=(()=>{class i{constructor(p,c){this._quotationsService=p,this._router=c}resolve(p,c){return this._quotationsService.getQuotationById(p.params.quotationId).pipe((0,r.W)(t=>{console.error(t);const h=c.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(h),(0,R.$)(t)}),(0,I.T)(t=>{if(!t.ok){let h=c.url.split("/").slice(0,-1).join("/");c.url.includes("public")&&(h=c.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(h)}}))}static#t=this.\u0275fac=function(c){return new(c||i)(m.KVO(s.X),m.KVO(E.Ix))};static#e=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},78268:(Q,M,n)=>{n.d(M,{EG:()=>m,dM:()=>I});var R=n(59640);const r=s=>s.quotations,I=(0,R.Mz)(r,s=>s.quotation),m=(0,R.Mz)(r,s=>s.quotations)},55181:(Q,M,n)=>{n.d(M,{X:()=>p});var R=n(21626),r=n(88141),I=n(98216),m=n(55867),s=n(45312),E=n(23309),P=n(54438),C=n(82341),i=n(59640);const O=s.c.API_URL;let p=(()=>{class c{constructor(t,h,g){this._httpClient=t,this.rolesService=h,this.store=g}getQuotations(t=0,h=20,g="createdAt",_="desc",x="",$=""){const A=(new R.Nl).append("page",t).append("size",h).append("sort",g).append("order",_).append("search",x).append("filter",$);return this._httpClient.get(`${O}/quotations/`,{params:A}).pipe((0,r.M)(S=>{this.store.dispatch((0,I.Bp)({pagination:S.pagination})),this.store.dispatch((0,E.gp)({quotations:S.dataArr}))}))}getQuotationById(t){return this._httpClient.get(`${O}/quotations/${t}`).pipe((0,r.M)(h=>{this.store.dispatch((0,E.Fh)({quotation:h.data}))}))}createQuotation(t){return this._httpClient.post(`${O}/quotations`,t).pipe((0,r.M)(h=>{this.store.dispatch((0,E.fl)({quotation:h.data})),this.store.dispatch((0,E.Fh)({quotation:h.data}))}))}updateQuotation(t){return this._httpClient.patch(`${O}/quotations/${t._id}`,t).pipe((0,r.M)(h=>{this.store.dispatch((0,E.Wh)({quotation:h.data}))}))}acceptQuotation(t){return this._httpClient.patch(`${O}/quotations/accept`,{_id:t,status:m.Sb.Aceptada}).pipe((0,r.M)(h=>{this.store.dispatch((0,E.Wh)({quotation:h.data})),this.store.dispatch((0,E.Fh)({quotation:h.data}))}))}rejectQuotation(t,h=""){return this._httpClient.patch(`${O}/quotations/reject`,{_id:t,rejectedReason:h,status:m.Sb.Rechazada}).pipe((0,r.M)(g=>{this.store.dispatch((0,E.Wh)({quotation:g.data})),this.store.dispatch((0,E.Fh)({quotation:g.data}))}))}deleteQuotation(t,h=0,g=20,_="createdAt",x="desc",$="",A=""){const S=(new R.Nl).append("page",h).append("size",g).append("sort",_).append("order",x).append("search",$).append("filter",A);return this._httpClient.delete(`${O}/quotations/${t}`,{params:S}).pipe((0,r.M)(z=>{this.store.dispatch((0,I.Bp)({pagination:z.pagination})),this.store.dispatch((0,E.gp)({quotations:z.dataArr}))}))}static#t=this.\u0275fac=function(h){return new(h||c)(P.KVO(R.Qq),P.KVO(C.y9),P.KVO(i.il))};static#e=this.\u0275prov=P.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},55867:(Q,M,n)=>{n.d(M,{Sb:()=>r,me:()=>I});var r=function(m){return m.Nueva="Nueva",m.Aceptada="Aceptada",m.Facturada="Facturada",m.Rechazada="Rechazada",m.Vencida="Vencida",m}(r||{});class I{constructor(s){this.paymentMethodId=s._id,this.name=s.name,this.merchantId=s.merchantId,this.terms=s.terms,this.paymentBy=s.paymentBy,this.includeBankAccount=s.includeBankAccount}}},94023:(Q,M,n)=>{n.d(M,{B:()=>w});var R=n(21413),r=n(56977),I=n(40740),m=n(77235),s=n(82643),P=n(97586),C=n.n(P),i=n(63729),O=n(88834),p=n(99213),c=n(60177),e=n(54438),t=n(59640);function h(F,L){if(1&F){const f=e.RV6();e.j41(0,"div",25)(1,"button",26),e.bIt("click",function(){e.eBV(f);const D=e.XpG();return e.Njj(D.generatePDF("open"))}),e.nrm(2,"mat-icon",27),e.k0s(),e.j41(3,"button",26),e.bIt("click",function(){e.eBV(f);const D=e.XpG();return e.Njj(D.generatePDF("download"))}),e.nrm(4,"mat-icon",27),e.k0s(),e.j41(5,"button",26),e.bIt("click",function(){e.eBV(f);const D=e.XpG();return e.Njj(D.generatePDF("print"))}),e.nrm(6,"mat-icon",27),e.k0s()()}2&F&&(e.R7$(2),e.Y8G("svgIcon","heroicons_outline:eye"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:download"),e.R7$(2),e.Y8G("svgIcon","heroicons_outline:printer"))}function g(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const f=e.XpG();e.R7$(),e.SpI(" ",f.merchantRequest.phoneNumbers[0].stateCode+" "+f.merchantRequest.phoneNumbers[0].phoneNumber,"")}}function _(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const f=e.XpG();e.R7$(),e.JRh(f.merchantRequest.emails[0].email)}}function x(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&F){const f=e.XpG();e.R7$(),e.E5c("",f.selectedRequest.address,", ",f.selectedRequest.city,", ",f.selectedRequest.state,", Cuba ")}}const $=()=>[""];function A(F,L){if(1&F&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&F){const f=L.$implicit;e.R7$(),e.Lme("",e.i5U(2,2,f.total,e.lJ4(5,$))," ",f.currency,"")}}const S=()=>["$"];function z(F,L){if(1&F&&(e.j41(0,"div",28),e.nrm(1,"div",21),e.j41(2,"div",29)(3,"div",30),e.EFF(4),e.k0s(),e.j41(5,"div",31),e.EFF(6),e.k0s()(),e.j41(7,"div",32),e.EFF(8),e.k0s(),e.j41(9,"div",33),e.EFF(10),e.nI1(11,"currency"),e.k0s(),e.j41(12,"div",33),e.EFF(13),e.nI1(14,"currency"),e.k0s()()),2&F){const f=L.$implicit;e.R7$(4),e.JRh(f.name),e.R7$(2),e.SpI(" ",f.description," "),e.R7$(2),e.JRh(f.amount),e.R7$(2),e.Lme("",e.i5U(11,6,f.price,e.lJ4(12,$))," ",f.currency,""),e.R7$(3),e.JRh(e.i5U(14,9,f.quantity,e.lJ4(13,S)))}}function W(F,L){if(1&F&&(e.j41(0,"div",34),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&F){const f=L.$implicit;e.R7$(),e.Lme("",e.i5U(2,2,f.total,e.lJ4(5,$))," ",f.currency,"")}}s.vfs=m.b.vfs,C().locale("es");let w=(()=>{class F{constructor(f,U){this.store=f,this._changeDetectorRef=U,this.selectedRequest$=null,this.selectedRequest=null,this.authUser=null,this.totalQuantity=[],this._unsubscribeAll=new R.B}ngOnInit(){this.store.select(i.SW).pipe((0,r.Q)(this._unsubscribeAll)).subscribe(f=>{this.authUser=f,this._changeDetectorRef.markForCheck()}),this.selectedRequest$=this.store.select(I.W9),this.selectedRequest$.pipe((0,r.Q)(this._unsubscribeAll)).subscribe(f=>{this.selectedRequest=f,this.merchantRequest=f.merchantId,this.totalQuantity=this.getTotalQuantity(f),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generatePDF(f){const D={content:[{columns:[{columns:[this.merchantRequest.logoUrl?{image:"logo",width:60,alignment:"center",margin:[0,9,15,0]}:{},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:77,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:this.merchantRequest.name,alignment:"left",fontSize:8,bold:!0},{text:`${this.merchantRequest.address}, ${this.merchantRequest.city}, ${this.merchantRequest.state}, ${this.merchantRequest.country}`,alignment:"left",fontSize:8},this.merchantRequest.phoneNumbers.length>0?{text:`${this.merchantRequest.phoneNumbers[0].stateCode}  ${this.merchantRequest.phoneNumbers[0].phoneNumber}`,alignment:"left",fontSize:8}:{},this.merchantRequest.emails.length>0?{text:`${this.merchantRequest.emails[0].email}`,alignment:"left",fontSize:8}:{},{text:this.merchantRequest.website,alignment:"left",fontSize:8}],width:150,margin:[15,2,0,0],lineHeight:1.2,alignment:"right"}],margin:[0,5,0,0]},{columns:[{stack:[{text:"SOLICITUD",alignment:"right",fontSize:16},{text:"CREADA EL",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"ESTADO",alignment:"right",margin:[0,4,0,0],fontSize:9},{text:"IMPORTE TOTAL",alignment:"right",margin:[0,4,0,0],fontSize:9}],width:100,color:"#7b838e"},{stack:[{text:this.selectedRequest.no,alignment:"left",fontSize:16,margin:[0,0,0,0],bold:!0},{text:C()(this.selectedRequest.createdAt).format("L"),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},{text:this.selectedRequest.status.toUpperCase(),alignment:"left",bold:!0,opacity:.7,margin:[0,4,0,0],fontSize:9},...this.totalQuantity.map(j=>[{stack:[{text:`${j.total.toFixed(2)} ${j.currency}`,alignment:"left",bold:!0,opacity:.7,fontSize:9}],margin:[0,4,0,0]}])]}],columnGap:10}],margin:[16,0,0,15]},{columns:[{text:"Por",alignment:"center",color:"#7b838e",width:60,fontSize:14,margin:[0,this.selectedRequest.address?17:7,20,0]},{canvas:[{type:"line",x1:0,y1:0,x2:0,y2:this.selectedRequest.address?56:33,lineWidth:.1,lineColor:"#d2d6dd"}],width:1},{stack:[{text:`${this.selectedRequest.name}  ${this.selectedRequest.lastname}`,alignment:"left",fontSize:8,bold:!0,opacity:.8},this.selectedRequest.address?{text:`${this.selectedRequest.address}, ${this.selectedRequest.city}, ${this.selectedRequest.state}, Cuba`,alignment:"left",lineHeight:1.2,fontSize:8}:{},{text:`${this.selectedRequest.phoneNumber.stateCode} ${this.selectedRequest.phoneNumber.phoneNumber}`,alignment:"left",lineHeight:1.2,fontSize:8},{text:this.selectedRequest.email,alignment:"left",lineHeight:1.2,fontSize:8}],lineHeight:1.2,width:150,margin:[15,0,0,0]}],margin:[16,16,0,5]},{columns:[{text:"PRODUCTO O SERVICIO",color:"#64748B",alignment:"left",fontSize:8,width:350},{text:"CANTIDAD",color:"#64748B",alignment:"center",fontSize:8,width:40},{text:"PRECIO",color:"#64748B",alignment:"right",fontSize:8,width:70},{text:"TOTAL",color:"#64748B",alignment:"right",fontSize:8}],margin:[0,35,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]},...this.selectedRequest.goodsData.map(j=>[{stack:[{columns:[{stack:[{text:j.name,alignment:"left",fontSize:9,bold:!0,opacity:.7},{text:j.description,alignment:"left",fontSize:7,bold:!0,color:"#64748B",opacity:.7}],lineHeight:1.5,width:350},{stack:[{columns:[{text:j.amount,alignment:"center",fontSize:9,width:40},{text:`${j.price.toFixed(2)} ${j.currency}`,alignment:"right",fontSize:9,width:70},{text:`$${j.quantity.toFixed(2)}`,alignment:"right",fontSize:9}],margin:j.description?[0,7,0,0]:[0,0,0,0]}]}],margin:[0,4,0,2]},{canvas:[{type:"line",x1:0,y1:0,x2:535,y2:0,lineWidth:.1,lineColor:"#d2d6dd"}]}]}]),{columns:[{text:"Total",alignment:"left",fontSize:12,color:"#7b838e"},{stack:[...this.totalQuantity.map(j=>[{stack:[{text:`${j.total.toFixed(2)} ${j.currency}`,alignment:"right",bold:!0,opacity:.7,fontSize:12}]}])]}],margin:[0,35,0,0]}],footer:(j,q,N)=>[q>1?{text:j.toString()+" de "+q,alignment:"center",margin:[0,30,0,0]}:{text:"",alignment:"center"},{canvas:[{type:"rect",x:170,y:32,w:N.width-170,h:40}],margin:[0,30,0,0]}],defaultStyle:{fontSize:12},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,80],info:{title:"Solicitud",author:"",subject:"",creationDate:new Date},images:{logo:this.merchantRequest.logoUrl}};switch(f){case f="download":s.createPdf(D).download();break;case f="open":s.createPdf(D).open();break;case f="print":s.createPdf(D).print()}}getTotalQuantity(f){return f.goodsData.reduce((U,{currency:D})=>{if(!U.some(j=>j.currency===D)){const j=f.goodsData.filter(q=>q.currency===D).map(q=>q.quantity).reduce((q,N)=>q+N,0);U.push({currency:D,total:j})}return U},[])}static#t=this.\u0275fac=function(U){return new(U||F)(e.rXU(t.il),e.rXU(e.gRc))};static#e=this.\u0275cmp=e.VBU({type:F,selectors:[["request-details"]],standalone:!0,features:[e.aNF],decls:65,vars:21,consts:[["cdkScrollable","",1,"flex","w-full","md:justify-center","print:overflow-visible"],[1,"inline-block","p-6","text-left","sm:p-10","print:p-0"],["class","flex items-center justify-end flex-shrink-0 mt-6 md:mt-0 sm:ml-4 gap-x-4"],[1,"p-16","shadow","w-240","min-w-240","rounded-2xl","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start","overflow-hidden"],[1,"grid","w-6/12","grid-rows-2","overflow-hidden","place-items-start","gap-y-12"],[1,"grid","w-full","overflow-hidden","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","place-self-center"],[1,"w-24",3,"src"],[1,"pl-10","overflow-auto","border-l","text-md","break-word"],[1,"font-medium"],[1,"grid","gap-x-8",2,"grid-template-columns","96px auto !important"],[1,"w-24","text-2xl","text-center","place-self-center","text-secondary"],[1,"grid","ml-auto","gap-x-4","gap-y-1",2,"grid-template-columns","123px auto !important"],[1,"text-3xl","tracking-tight","justify-self-end","text-secondary"],[1,"flex","items-center","text-2xl","font-medium"],[1,"font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"grid","grid-cols-12","mt-8","gap-x-1"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"col-span-2","pl-10","font-medium","text-center","text-md","text-secondary"],[1,"col-span-2","font-medium","text-right","text-md","text-secondary"],[1,"col-span-12","my-4","border-b"],[1,"col-span-12","mt-16"],[1,"col-span-4","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"flex","flex-col","justify-end","col-span-8","text-2xl","font-medium","text-right"],[1,"flex","items-center","justify-end","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4"],["mat-button","",1,"rounded-full",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"grid","grid-cols-12","col-span-12","gap-x-1"],[1,"col-span-6"],[1,"text-lg","font-medium"],[1,"mt-2","whitespace-pre-line","text-md","text-secondary"],[1,"self-center","col-span-2","pl-10","text-center"],[1,"self-center","col-span-2","text-right"],[1,"col-span-2"],["class","grid grid-cols-12 col-span-12 gap-x-1"],["class","col-span-2"]],template:function(U,D){1&U&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,h,7,3,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e.nrm(8,"img",8),e.k0s(),e.j41(9,"div",9)(10,"div",10),e.EFF(11),e.k0s(),e.j41(12,"div"),e.EFF(13),e.k0s(),e.DNE(14,g,2,1,"div")(15,_,2,1,"div"),e.k0s()(),e.j41(16,"div",11)(17,"div",12),e.EFF(18," Por "),e.k0s(),e.j41(19,"div",9)(20,"div",10),e.EFF(21),e.k0s(),e.nrm(22,"div"),e.DNE(23,x,2,3,"div"),e.j41(24,"div"),e.EFF(25),e.k0s(),e.j41(26,"div"),e.EFF(27),e.k0s()()()(),e.j41(28,"div",13)(29,"div",14),e.EFF(30,"SOLICITUD"),e.k0s(),e.j41(31,"div",15),e.EFF(32),e.k0s(),e.j41(33,"div",16),e.EFF(34,"CREADA EL"),e.k0s(),e.j41(35,"div",10),e.EFF(36),e.nI1(37,"date"),e.k0s(),e.j41(38,"div",16),e.EFF(39,"ESTADO"),e.k0s(),e.j41(40,"div",10),e.EFF(41),e.k0s(),e.j41(42,"div",16),e.EFF(43,"IMPORTE TOTAL"),e.k0s(),e.j41(44,"div",10),e.Z7z(45,A,3,6,"div",null,e.fX1),e.k0s()()(),e.j41(47,"div",17)(48,"div",18),e.EFF(49,"PRODUCTO O SERVICIO"),e.k0s(),e.j41(50,"div",19),e.EFF(51,"CANTIDAD"),e.k0s(),e.j41(52,"div",20),e.EFF(53,"PRECIO"),e.k0s(),e.j41(54,"div",20),e.EFF(55,"TOTAL"),e.k0s(),e.Z7z(56,z,15,14,"div",35,e.fX1),e.nrm(58,"div",21)(59,"div",22),e.j41(60,"div",23),e.EFF(61,"TOTAL"),e.k0s(),e.j41(62,"div",24),e.Z7z(63,W,3,6,"div",36,e.fX1),e.k0s()()()()()),2&U&&(e.R7$(2),e.vxM(2,D.authUser?-1:2),e.R7$(6),e.Y8G("src",D.merchantRequest.logoUrl,e.B4B),e.R7$(3),e.JRh(D.merchantRequest.name),e.R7$(2),e.LHq("",D.merchantRequest.address,", ",D.merchantRequest.city,", ",D.merchantRequest.state,", ",D.merchantRequest.country," "),e.R7$(),e.vxM(14,D.merchantRequest.phoneNumbers.length>0?14:-1),e.R7$(),e.vxM(15,D.merchantRequest.emails.length>0?15:-1),e.R7$(6),e.Lme("",D.selectedRequest.name," ",D.selectedRequest.lastname,""),e.R7$(2),e.vxM(23,D.selectedRequest.address?23:-1),e.R7$(2),e.Lme("",D.selectedRequest.phoneNumber.stateCode," ",D.selectedRequest.phoneNumber.phoneNumber,""),e.R7$(2),e.JRh(D.selectedRequest.email),e.R7$(5),e.SpI("#",D.selectedRequest.no,""),e.R7$(4),e.JRh(e.i5U(37,18,D.selectedRequest.createdAt,"dd/MM/yyyy")),e.R7$(5),e.JRh(D.selectedRequest.status.toUpperCase()),e.R7$(4),e.Dyx(D.totalQuantity),e.R7$(11),e.Dyx(D.selectedRequest.goodsData),e.R7$(7),e.Dyx(D.totalQuantity))},dependencies:[c.oe,c.vh,O.Hl,O.$z,p.m_,p.An],encapsulation:2,changeDetection:0})}return F})()},48874:(Q,M,n)=>{n.d(M,{K:()=>O,R:()=>i});var R=n(27468),r=n(18810),I=n(99437),m=n(96354),s=n(54438),E=n(90328),P=n(62621),C=n(51188);let i=(()=>{class p{constructor(e,t){this._requestsService=e,this._paymentMethods=t}resolve(e,t){return(0,R.p)([this._requestsService.getRequests(),this._paymentMethods.getActivePaymentConditions()])}static#t=this.\u0275fac=function(t){return new(t||p)(s.KVO(E.k),s.KVO(P.W))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})(),O=(()=>{class p{constructor(e,t){this._requestsService=e,this._router=t}resolve(e,t){return this._requestsService.getRequestById(e.params.requestId).pipe((0,I.W)(g=>{console.error(g);const _=t.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(_),(0,r.$)(g)}),(0,m.T)(g=>{if(!g.ok){let _=t.url.split("/").slice(0,-1).join("/");t.url.includes("public")&&(_=t.url.split("/").slice(0,-2).join("/")),this._router.navigateByUrl(_)}}))}static#t=this.\u0275fac=function(t){return new(t||p)(s.KVO(E.k),s.KVO(C.Ix))};static#e=this.\u0275prov=s.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()},40740:(Q,M,n)=>{n.d(M,{W9:()=>I,lz:()=>m});var R=n(59640);const r=s=>s.requests,I=(0,R.Mz)(r,s=>s.request),m=(0,R.Mz)(r,s=>s.requests)},90328:(Q,M,n)=>{n.d(M,{k:()=>e});var R=n(21626),r=n(88141),I=n(98216),s=function(t){return t.Nueva="Nueva",t.Aceptada="Aceptada",t.Rechazada="Rechazada",t}(s||{}),P=n(45312),C=n(91013),i=n(54438),O=n(82341),p=n(59640);const c=P.c.API_URL;let e=(()=>{class t{constructor(g,_,x){this._httpClient=g,this.rolesService=_,this.store=x}getRequests(g=0,_=20,x="createdAt",$="desc",A="",S=""){const z=(new R.Nl).append("page",g).append("size",_).append("sort",x).append("order",$).append("search",A).append("filter",S);return this._httpClient.get(`${c}/requests/`,{params:z}).pipe((0,r.M)(W=>{this.store.dispatch((0,I.Bp)({pagination:W.pagination})),this.store.dispatch((0,C.Zg)({requests:W.dataArr}))}))}getRequestById(g){return this._httpClient.get(`${c}/requests/${g}`).pipe((0,r.M)(_=>{this.store.dispatch((0,C.Id)({request:_.data}))}))}createRequest(g){return this._httpClient.post(`${c}/requests`,g).pipe((0,r.M)(_=>{this.store.dispatch((0,C.WL)({request:_.data}))}))}updateRequest(g){return this._httpClient.patch(`${c}/requests/${g._id}`,g).pipe((0,r.M)(_=>{this.store.dispatch((0,C.H5)({request:_.data}))}))}rejectRequest(g,_){return this._httpClient.patch(`${c}/requests/reject`,{_id:g,rejectedReason:_,status:s.Rechazada}).pipe((0,r.M)(x=>{this.store.dispatch((0,C.H5)({request:x.data}))}))}deleteRequest(g,_=0,x=20,$="createdAt",A="desc",S="",z=""){const W=(new R.Nl).append("page",_).append("size",x).append("sort",$).append("order",A).append("search",S).append("filter",z);return this._httpClient.delete(`${c}/requests/${g}`,{params:W}).pipe((0,r.M)(w=>{this.store.dispatch((0,I.Bp)({pagination:w.pagination})),this.store.dispatch((0,C.Zg)({requests:w.dataArr}))}))}static#t=this.\u0275fac=function(_){return new(_||t)(i.KVO(R.Qq),i.KVO(O.y9),i.KVO(p.il))};static#e=this.\u0275prov=i.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})()},53440:(Q,M,n)=>{n.d(M,{s:()=>e});var R=n(60177),r=n(89417),I=n(88834),m=n(75351),s=n(32102),E=n(99213),P=n(59042),C=n(87122),i=n(54438);function O(t,h){1&t&&(i.j41(0,"mat-error"),i.EFF(1," EL motivo del rechazo es obligatorio "),i.k0s())}function p(t,h){1&t&&(i.j41(0,"mat-error"),i.EFF(1," EL motivo del rechazo debe contener entre 3 y 1000 caracteres. "),i.k0s())}const c=t=>({"cursor-not-allowed":t});let e=(()=>{class t{constructor(g,_){this.data=g,this._dialogRef=_,this.rejectControl=new r.MJ(""),this.rejectedReasonRequired=!0,this.rejectedReasonRequired=g.rejectedReasonRequired}ngOnInit(){this.rejectControl.setValidators(this.rejectedReasonRequired?[r.k0.required,r.k0.minLength(3),r.k0.maxLength(1e3)]:[r.k0.minLength(3),r.k0.maxLength(1e3)]),this.rejectControl.setValue(this.data.rejectedReason)}accept(){this._dialogRef.close({reason:this.rejectControl.value})}cancel(){this._dialogRef.close()}static#t=this.\u0275fac=function(_){return new(_||t)(i.rXU(m.Vh),i.rXU(m.CP))};static#e=this.\u0275cmp=i.VBU({type:t,selectors:[["commercial-reject-confirm-dialog"]],standalone:!0,features:[i.aNF],decls:28,vars:15,consts:[[1,"h-full","ng-star-inserted"],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","h-full"],[1,"block","w-full"],[1,"flex","flex-col","items-center","flex-auto","p-8","pb-4","sm:flex-row","sm:items-start","sm:pb-6"],["ng-reflect-ng-class","[object Object]",1,"flex","items-center","justify-center","w-10","h-10","text-blue-600","bg-blue-100","rounded-full","flex-0","sm:mr-4","dark:text-blue-50","dark:bg-blue-600","ng-star-inserted"],["role","img","aria-hidden","true","ng-reflect-svg-icon","heroicons_outline:question-mar","data-mat-icon-type","svg","data-mat-icon-name","question-mark-circle","data-mat-icon-namespace","heroicons_outline",1,"text-current","mat-icon","notranslate","mat-icon-no-color"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","fit","","height","100%","width","100%","preserveAspectRatio","xMidYMid meet","focusable","false"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col","items-center","mt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","ng-star-inserted"],[1,"text-xl","font-medium","leading-6","ng-star-inserted"],[1,"text-secondary","ng-star-inserted"],[1,"pb-6","pl-8","pr-8","mt-10","sm:mt-0","sm:pl-22",3,"autocomplete"],[1,"w-full","fuse-mat-textarea"],["matPrefix","","svgIcon","mat_solid:subject",1,"hidden","sm:flex","icon-size-5"],["matInput","",3,"formControl","placeholder","minLength","maxLength","required"],[1,"flex","flex-wrap","justify-center","px-6","py-4","space-x-3","tems-center","md:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10","ng-star-inserted"],["mat-stroked-button","",3,"click"],["mat-flat-button","","mat-button","",3,"color","disabled","ngClass","click"]],template:function(_,x){1&_&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),i.qSk(),i.j41(7,"svg",7),i.nrm(8,"path",8),i.k0s()()(),i.joV(),i.j41(9,"div",9)(10,"div",10),i.EFF(11),i.k0s(),i.j41(12,"div",11),i.EFF(13),i.k0s()()(),i.j41(14,"form",12)(15,"div")(16,"mat-form-field",13)(17,"mat-label"),i.EFF(18,"Motivo"),i.k0s(),i.nrm(19,"mat-icon",14)(20,"textarea",15),i.DNE(21,O,2,0,"mat-error")(22,p,2,0,"mat-error"),i.k0s()()()()(),i.j41(23,"div",16)(24,"button",17),i.bIt("click",function(){return x.cancel()}),i.EFF(25,"Cancelar"),i.k0s(),i.j41(26,"button",18),i.bIt("click",function(){return x.accept()}),i.EFF(27," Aceptar "),i.k0s()()()()),2&_&&(i.R7$(11),i.JRh(x.data.title),i.R7$(2),i.JRh(x.data.message),i.R7$(),i.Y8G("autocomplete","off"),i.R7$(6),i.Y8G("formControl",x.rejectControl)("placeholder","Escriba el motivo del rechazo")("minLength",3)("maxLength",1e3)("required",x.rejectedReasonRequired),i.R7$(),i.vxM(21,x.rejectControl.hasError("required")?21:-1),i.R7$(),i.vxM(22,x.rejectControl.hasError("maxlength")||x.rejectControl.hasError("minlength")?22:-1),i.R7$(4),i.Y8G("color","primary")("disabled",x.rejectControl.invalid)("ngClass",i.eq3(13,c,x.rejectControl.invalid)))},dependencies:[m.hM,s.RG,s.rl,s.nJ,s.TL,s.JW,P.fS,P.fg,E.m_,E.An,I.Hl,I.$z,R.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.l_],encapsulation:2,data:{animation:C.X},changeDetection:0})}return t})()}}]);