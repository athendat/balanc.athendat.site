"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[558],{31849:(C,v,n)=>{n.d(v,{$:()=>h});var t=n(14085),l=n(87122),o=n(54438);function b(i,p){1&i&&(o.j41(0,"div",0),o.SdG(1),o.k0s(),o.j41(2,"div",1),o.SdG(3,1),o.k0s())}function k(i,p){1&i&&(o.j41(0,"div",3),o.SdG(1,3),o.k0s()),2&i&&o.Y8G("@expandCollapse",void 0)}function F(i,p){if(1&i&&(o.SdG(0,2),o.DNE(1,k,2,1,"div",2)),2&i){const c=o.XpG();o.R7$(),o.vxM(1,c.expanded?1:-1)}}const x=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],f=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let h=(()=>{class i{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(c){"expanded"in c&&(this.expanded=(0,t.he)(c.expanded.currentValue)),"flippable"in c&&(this.flippable=(0,t.he)(c.flippable.currentValue))}static#t=this.\u0275fac=function(u){return new(u||i)};static#e=this.\u0275cmp=o.VBU({type:i,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(u,d){2&u&&o.HbH(d.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[o.OA$,o.aNF],ngContentSelectors:f,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(u,d){1&u&&(o.NAR(x),o.DNE(0,b,4,0)(1,F,2,1)),2&u&&(o.vxM(0,d.flippable?0:-1),o.R7$(),o.vxM(1,d.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:l.X}})}return i})()},89654:(C,v,n)=>{n.d(v,{n:()=>U});var t=n(54438),l=n(89417),o=n(21413),b=n(56977),k=n(99172),F=n(96354),x=n(70152),f=n(32102),h=n(59042),i=n(88834),p=n(99213),c=n(60850),u=n(82798),d=n(14823),A=n(60177),y=n(96817),w=n(73512);let B=(()=>{class a{constructor(e){this.apolloProvider=e,this._apollo=this.apolloProvider.use("BALANC")}getCardType(e){return this._apollo.query({query:y.LU,variables:{cardNumber:e},errorPolicy:"all"})}static#t=this.\u0275fac=function(s){return new(s||a)(t.KVO(w.Ic))};static#e=this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var E=n(86600);const R=["bankAccountNgForm"];function N(a,m){1&a&&(t.j41(0,"mat-label"),t.EFF(1,"N\xfamero de Cuenta"),t.k0s())}function j(a,m){if(1&a&&t.nrm(0,"img",10),2&a){const e=t.XpG();t.Y8G("src",e.cardImage,t.B4B)}}function $(a,m){1&a&&(t.j41(0,"mat-error"),t.EFF(1," El n\xfamero de cuenta es obligatorio "),t.k0s())}function G(a,m){1&a&&(t.j41(0,"mat-label"),t.EFF(1,"Banco"),t.k0s())}function I(a,m){if(1&a&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.JRh(e)}}function D(a,m){1&a&&(t.j41(0,"mat-label"),t.EFF(1,"Moneda"),t.k0s())}function T(a,m){if(1&a&&(t.j41(0,"mat-option",11),t.EFF(1),t.k0s()),2&a){const e=m.$implicit;t.Y8G("value",e.iso),t.R7$(),t.SpI(" ",e.iso," ")}}function M(a,m){1&a&&(t.j41(0,"mat-label"),t.EFF(1,"Beneficiario"),t.k0s())}function Y(a,m){1&a&&(t.j41(0,"mat-error"),t.EFF(1," El beneficiario no presenta un formato v\xe1lido "),t.k0s())}function S(a,m){1&a&&(t.j41(0,"mat-error"),t.EFF(1," El beneficiario es obligatorio "),t.k0s())}function V(a,m){if(1&a){const e=t.RV6();t.j41(0,"div",12)(1,"button",13),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.removeBankAccount(r.index))}),t.nrm(2,"mat-icon",14),t.k0s()()}2&a&&(t.R7$(2),t.Y8G("svgIcon","mat_solid:delete"))}let U=(()=>{class a{constructor(e,s){this._changeDetectorRef=e,this._cardTypesService=s,this.currencies=[],this.remove=new t.bkB,this.cardImage=null,this.cubanBanks=["Metropolitano (BMP)","Popular de Ahorro (BPA)","Cr\xe9dito y Comercio (BANDEC)"],this._unsubscribeAll=new o.B}ngOnInit(){this.bankAccountForm.get("cardType").value&&this.fillFormData(this.bankAccountForm.get("cardType").value),this.filteredBanks=this.bankAccountForm.get("bank").valueChanges.pipe((0,b.Q)(this._unsubscribeAll),(0,k.Z)(""),(0,F.T)(e=>e?this.cubanBanks.filter(s=>s.toLowerCase().includes(e.toLowerCase())):[])),this.bankAccountForm.get("no").valueChanges.pipe((0,x.B)(600),(0,b.Q)(this._unsubscribeAll)).subscribe(e=>{e.length>5&&e.length<11&&this._cardTypesService.getCardType(e).subscribe(({})=>{}),e||(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeBankAccount(e){this.remove.next(e)}clearForm(){this.bankAccountNgForm.resetForm()}fillFormData(e){e?(this.bankAccountForm.get("bank").setValue(e.name),this.bankAccountForm.get("currency").setValue(e.currency),this.bankAccountForm.get("bank").disable(),this.bankAccountForm.get("currency").disable(),("BMPU"===e.bank||"BMPUW"===e.bank)&&(this.cardImage="assets/images/cards/banmet.webp"),("BPAU"===e.bank||"BPAUW"===e.bank)&&(this.cardImage="assets/images/cards/bpa.webp"),("BANU"===e.bank||"BANW"===e.bank)&&(this.cardImage="assets/images/cards/bandec.webp"),"AIS"===e.name&&(this.cardImage="assets/images/cards/ais.webp"),"MN"===e.currency&&this.bankAccountForm.get("currency").setValue("CUP"),"USD"===e.currency&&this.bankAccountForm.get("currency").setValue("USD"),this.bankAccountForm.get("cardType").setValue(e._id)):(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null)}static#t=this.\u0275fac=function(s){return new(s||a)(t.rXU(t.gRc),t.rXU(B))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["bank-account"]],viewQuery:function(s,r){if(1&s&&t.GBs(R,5),2&s){let g;t.mGM(g=t.lsd())&&(r.bankAccountNgForm=g.first)}},inputs:{currencies:"currencies",bankAccountForm:"bankAccountForm",first:"first",last:"last",index:"index"},outputs:{remove:"remove"},standalone:!0,features:[t.aNF],decls:29,vars:33,consts:[[1,"grid","grid-cols-1","gap-3","md:grid-cols-2",3,"formGroup"],[1,"flex-auto","mat-fuse-dense"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","minlength","maxlength","formControlName","placeholder","spellcheck"],["class","w-12 h-8","matSuffix","",3,"src"],["maxlength","255","matInput","",3,"type","formControlName","matAutocomplete","placeholder","spellcheck"],["auto","matAutocomplete"],["required","",3,"formControlName","placeholder"],["maxlength","255","matInput","",3,"type","formControlName","placeholder","spellcheck"],["class","flex items-center w-10 pl-2"],["matSuffix","",1,"w-12","h-8",3,"src"],[3,"value"],[1,"flex","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Eliminar cuenta",1,"w-8","h-8","min-h-8",3,"click"],[1,"icon-size-5",3,"svgIcon"]],template:function(s,r){if(1&s&&(t.j41(0,"form",0)(1,"mat-form-field",1),t.DNE(2,N,2,0,"mat-label"),t.nrm(3,"mat-icon",2)(4,"input",3),t.DNE(5,j,1,1,"img",4)(6,$,2,0,"mat-error"),t.k0s(),t.j41(7,"mat-form-field",1),t.DNE(8,G,2,0,"mat-label"),t.nrm(9,"mat-icon",2)(10,"input",5),t.j41(11,"mat-autocomplete",null,6),t.Z7z(13,I,2,2,"mat-option",11,t.fX1),t.nI1(15,"async"),t.k0s()(),t.j41(16,"mat-form-field",1),t.DNE(17,D,2,0,"mat-label"),t.nrm(18,"mat-icon",2),t.j41(19,"mat-select",7),t.Z7z(20,T,2,2,"mat-option",11,t.fX1),t.k0s()(),t.j41(22,"mat-form-field",1),t.DNE(23,M,2,0,"mat-label"),t.nrm(24,"mat-icon",2)(25,"input",8),t.DNE(26,Y,2,0,"mat-error")(27,S,2,0,"mat-error"),t.k0s(),t.DNE(28,V,3,1,"div",9),t.k0s()),2&s){const g=t.sdS(12);t.Y8G("formGroup",r.bankAccountForm),t.R7$(2),t.vxM(2,r.first?2:-1),t.R7$(),t.Y8G("svgIcon","mat_solid:credit_card"),t.R7$(),t.Y8G("type","text")("minlength",16)("maxlength",24)("formControlName","no")("placeholder","Ejemplo: 1234567890123456")("spellcheck",!1),t.R7$(),t.vxM(5,r.cardImage?5:-1),t.R7$(),t.vxM(6,r.bankAccountForm.get("no").hasError("required")?6:-1),t.R7$(2),t.vxM(8,r.first?8:-1),t.R7$(),t.Y8G("svgIcon","mat_solid:account_balance"),t.R7$(),t.Y8G("type","text")("formControlName","bank")("matAutocomplete",g)("placeholder","Ejemplo: Banco Financiero")("spellcheck",!1),t.R7$(3),t.Dyx(t.bMT(15,31,r.filteredBanks)),t.R7$(4),t.vxM(17,r.first?17:-1),t.R7$(),t.Y8G("svgIcon","mat_solid:monetization_on"),t.R7$(),t.Y8G("formControlName","currency")("placeholder","Ejemplo: USD"),t.R7$(),t.Dyx(r.currencies),t.R7$(3),t.vxM(23,r.first?23:-1),t.R7$(),t.Y8G("svgIcon","mat_solid:business"),t.R7$(),t.Y8G("type","text")("formControlName","beneficiary")("placeholder","Ejemplo: Empresa SRL")("spellcheck",!1),t.R7$(),t.vxM(26,r.bankAccountForm.get("beneficiary").hasError("pattern")?26:-1),t.R7$(),t.vxM(27,r.bankAccountForm.get("beneficiary").hasError("required")?27:-1),t.R7$(),t.vxM(28,r.first&&r.last?-1:28)}},dependencies:[A.Jj,c.jL,c.$3,E.wT,c.pN,i.Hl,i.iY,f.RG,f.rl,f.nJ,f.TL,f.JW,f.yw,p.m_,p.An,h.fS,h.fg,u.Ve,u.VO,d.uc,d.oV,l.X1,l.qT,l.me,l.BC,l.cb,l.YS,l.xh,l.tU,l.j4,l.JD],encapsulation:2,changeDetection:0})}return a})()}}]);