"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6638],{76638:(z,h,o)=>{o.r(h),o.d(h,{default:()=>X});var d=o(60177),t=o(54438),a=o(89417),u=o(60850),g=o(88834),v=o(82765),I=o(86600),c=o(32102),F=o(99213),b=o(59042),x=o(9183),f=o(51188),j=o(21413),k=o(31397),S=o(7673),y=o(99172),C=o(56977),E=o(70980),w=o(87122),R=o(35524),A=o(45312);const N=["signInNgForm"],G=()=>[d.kt],L=()=>["/sign-up"],$=()=>["/forgot-password"];function M(i,m){1&i&&(t.j41(0,"div",29)(1,"div",30),t.nrm(2,"img",31),t.k0s()())}function T(i,m){if(1&i){const e=t.RV6();t.j41(0,"mat-option",15)(1,"div",32)(2,"span",33),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.selectEmail(s))}),t.EFF(3),t.k0s(),t.j41(4,"div",34),t.bIt("click",function(s){return t.eBV(e),t.Njj(s.stopPropagation())}),t.j41(5,"button",35),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.deleteEmail(s))}),t.nrm(6,"mat-icon",36),t.k0s()()()()}if(2&i){const e=m.$implicit;t.Y8G("value",e),t.R7$(3),t.SpI(" ",e," "),t.R7$(3),t.Y8G("svgIcon","mat_solid:delete")}}function B(i,m){1&i&&(t.j41(0,"mat-error"),t.EFF(1," El correo electr\xf3nico es obligatorio "),t.k0s())}function Y(i,m){1&i&&(t.j41(0,"mat-error"),t.EFF(1," Por favor ingrese un correo electr\xf3nico v\xe1lido "),t.k0s())}function D(i,m){1&i&&t.nrm(0,"mat-icon",18),2&i&&t.Y8G("svgIcon","mat_solid:visibility")}function U(i,m){1&i&&t.nrm(0,"mat-icon",18),2&i&&t.Y8G("svgIcon","mat_solid:visibility_off")}function O(i,m){1&i&&(t.j41(0,"span",23),t.EFF(1," Aceptar "),t.k0s())}function V(i,m){1&i&&t.nrm(0,"mat-progress-spinner",37),2&i&&t.Y8G("diameter",24)("mode","indeterminate")}const X=[{path:"",component:(()=>{class i{constructor(){this._unsubscribeAll=new j.B,this._activatedRoute=(0,t.WQX)(f.nX),this._authService=(0,t.WQX)(R.u),this._formBuilder=(0,t.WQX)(a.ok),this._router=(0,t.WQX)(f.Ix)}get emails(){const e=localStorage.getItem("emails");return e?JSON.parse(e):(localStorage.setItem("emails",JSON.stringify([])),[])}ngOnInit(){localStorage.removeItem("SESSION_LOCKED"),"/unlock-session"===this._activatedRoute.snapshot.queryParamMap.get("redirectURL")&&this._router.navigate(["sign-in"]),this.signInForm=this._formBuilder.group({email:["",[a.k0.required,a.k0.email]],pwd:["",a.k0.required],rememberMe:[this.rememberMe]}),this.filteredEmails=this.signInForm.get("email").valueChanges.pipe((0,y.Z)(null),(0,k.Z)(n=>n?(0,S.of)(this.emails.filter(s=>s.includes(n.toLowerCase().trim()))):(this.signInForm.get("pwd").reset(),this.signInForm.get("rememberMe").reset(),(0,S.of)(this.emails)))),google.accounts.id.initialize({client_id:A.c.GOOGLE_CLIENT_ID,callback:n=>this.handleGoogleResponse(n)}),google.accounts.id.renderButton(document.getElementById("google-sign-in-button"),{theme:"filled_blue",size:"large",text:"continue_with",locale:"es",shape:"pill",width:320})}handleGoogleResponse(e){this.signInForm.disable(),e.credential&&this._authService.signInWithGoogleCredential(e.credential).subscribe(()=>{const n=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this._router.navigateByUrl(n)},n=>{this.signInForm.enable(),this.signInNgForm.resetForm()})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),delete this.signInForm.value.rememberMe,this._authService.signIn(this.signInForm.value).pipe((0,C.Q)(this._unsubscribeAll),(0,E.j)(()=>{this.signInForm.enable(),this.signInNgForm.resetForm()})).subscribe(()=>{const e=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this.rememberMe(),this._router.navigateByUrl(e)},e=>{this.signInForm.enable(),406===e.status&&this._router.navigate(["confirmation-required"])}))}selectEmail(e){this.signInForm.patchValue({email:e,rememberMe:!0,pwd:""})}deleteEmail(e){const n=this.emails,s=n.findIndex(r=>r===e);if(-1!==s){n.splice(s,1);const r=JSON.stringify(n);localStorage.setItem("emails",r),this.signInForm.get("email").setValue("")}}rememberMe(){const e=this.signInForm.get("email").value;if(this.signInForm.get("rememberMe").value){const n=this.emails,s=n.findIndex(l=>l===e);-1===s?n.push(e):n[s]=e;const r=JSON.stringify(n);localStorage.setItem("emails",r)}else this.deleteEmail(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["auth-sign-in"]],viewQuery:function(n,s){if(1&n&&t.GBs(N,5),2&n){let r;t.mGM(r=t.lsd())&&(s.signInNgForm=r.first)}},standalone:!0,features:[t.aNF],decls:54,vars:19,consts:[["signInNgForm","ngForm"],["emailAutocomplete","matAutocomplete"],["passwordField",""],[1,"flex","flex-col","items-center","flex-auto","min-w-0","sm:flex-row","md:items-start","sm:justify-center","md:justify-start"],[1,"w-full","px-4","py-8","border-l","md:flex","md:items-center","md:justify-end","sm:w-auto","md:h-full","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","mx-auto","max-w-80","sm:w-80","sm:mx-0"],["height","50","width","380","ngSrc","/v1710869343/balanc/logos/logo-text_jo2r1s.webp","alt","Logo image",1,"w-auto","h-13","dark:hidden","aspect-auto"],["height","50","width","380","ngSrc","/v1710869344/balanc/logos/logo-text-on-dark_wvkqfx.webp","alt","Logo image",1,"hidden","w-auto","h-13","dark:flex","aspect-auto"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"formGroup"],[1,"w-full","fuse-mat-dense"],["id","email","matInput","",3,"formControlName","matAutocomplete"],[1,"ath-autocomplete"],[1,"w-full",3,"value"],["id","pwd","matInput","",3,"type","formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"inline-flex","items-center","justify-between","w-full","mt-1.5"],[3,"color","formControlName"],[1,"font-medium","text-md","text-primary-500","hover:underline",3,"routerLink"],["mat-raised-button","",1,"w-full","mt-6","fuse-mat-button-large","bg-gradient-to-r","from-primary-500","to-primary-800","hover:bg-gradient-to-bl",3,"click","disabled"],[1,"text-white"],[1,"flex","items-center","mt-4"],[1,"flex-auto","mt-px","border-t"],[1,"mx-2","text-secondary"],[1,"flex","items-center","justify-center","mt-4","space-x-4"],["id","google-sign-in-button"],[1,"relative","items-center","justify-center","flex-auto","hidden","w-2/3","h-screen","p-16","overflow-hidden","bg-white","bg-cover","dark:bg-transparent","md:flex","lg:px-28","dark:border-r"],[1,"relative","z-10","w-2/3","aspect-auto"],["ngSrc","/v1710869734/balanc/illustrations/auth-dark_lvzt8p.webp","height","564","width","564","alt","Imagen de Inicio"],[1,"grid","w-full","grid-cols-6"],[1,"flex","items-center","col-span-4","truncate","sm:col-span-5",3,"click"],[1,"flex","items-center","justify-center","w-full","col-span-2","sm:col-span-1",3,"click"],["mat-icon-button","",1,"p-2","leading-6","h-7","w-7","min-w-6","min-h-6",3,"click"],[1,"mr-0","icon-size-4",3,"svgIcon"],[3,"diameter","mode"]],template:function(n,s){if(1&n){const r=t.RV6();t.j41(0,"div",3),t.DNE(1,M,3,0),t.nv$(2,1,G),t.g25(),t.j41(4,"div",4)(5,"div",5)(6,"div"),t.nrm(7,"img",6)(8,"img",7),t.k0s(),t.j41(9,"div",8),t.EFF(10,"Iniciar Sesi\xf3n"),t.k0s(),t.j41(11,"div",9)(12,"div"),t.EFF(13,"\xbfA\xfan no tiene cuenta?"),t.k0s(),t.j41(14,"a",10),t.EFF(15,"Registrarme "),t.k0s()(),t.j41(16,"form",11,0)(18,"mat-form-field",12)(19,"mat-label"),t.EFF(20,"Correo electr\xf3nico"),t.k0s(),t.nrm(21,"input",13),t.j41(22,"mat-autocomplete",14,1),t.Z7z(24,T,7,3,"mat-option",15,t.fX1),t.nI1(26,"async"),t.k0s(),t.DNE(27,B,2,0,"mat-error")(28,Y,2,0,"mat-error"),t.k0s(),t.j41(29,"mat-form-field",12)(30,"mat-label"),t.EFF(31,"Contrase\xf1a"),t.k0s(),t.nrm(32,"input",16,2),t.j41(34,"button",17),t.bIt("click",function(){t.eBV(r);const p=t.sdS(33);return t.Njj(p.type="password"===p.type?"text":"password")}),t.DNE(35,D,1,1,"mat-icon",18)(36,U,1,1,"mat-icon",18),t.k0s(),t.j41(37,"mat-error"),t.EFF(38," La contrase\xf1a es obligatoria "),t.k0s()(),t.j41(39,"div",19)(40,"mat-checkbox",20),t.EFF(41," Recordarme "),t.k0s(),t.j41(42,"a",21),t.EFF(43," \xbfOlvid\xf3 su contrase\xf1a? "),t.k0s()(),t.j41(44,"button",22),t.bIt("click",function(){return t.eBV(r),t.Njj(s.signIn())}),t.DNE(45,O,2,0,"span",23)(46,V,1,2),t.k0s()(),t.j41(47,"div",24),t.nrm(48,"div",25),t.j41(49,"div",26),t.EFF(50,"Iniciar sesi\xf3n con mi cuenta de"),t.k0s(),t.nrm(51,"div",25),t.k0s(),t.j41(52,"div",27),t.nrm(53,"div",28),t.k0s()()()()}if(2&n){const r=t.sdS(23),l=t.sdS(33);t.R7$(14),t.Y8G("routerLink",t.lJ4(17,L)),t.R7$(2),t.Y8G("formGroup",s.signInForm),t.R7$(5),t.Y8G("formControlName","email")("matAutocomplete",r),t.R7$(3),t.Dyx(t.bMT(26,15,s.filteredEmails)),t.R7$(3),t.vxM(27,s.signInForm.get("email").hasError("required")?27:-1),t.R7$(),t.vxM(28,s.signInForm.get("email").hasError("email")?28:-1),t.R7$(4),t.Y8G("type","password")("formControlName","pwd"),t.R7$(3),t.vxM(35,"password"===l.type?35:-1),t.R7$(),t.vxM(36,"text"===l.type?36:-1),t.R7$(4),t.Y8G("color","primary")("formControlName","rememberMe"),t.R7$(2),t.Y8G("routerLink",t.lJ4(18,$)),t.R7$(2),t.Y8G("disabled",s.signInForm.disabled),t.R7$(),t.vxM(45,s.signInForm.disabled?46:45)}},dependencies:[d.Jj,a.YN,a.qT,a.me,a.BC,a.cb,u.jL,u.$3,I.wT,u.pN,g.Hl,g.$z,g.iY,v.g7,v.So,c.RG,c.rl,c.nJ,c.TL,c.yw,F.m_,F.An,b.fS,b.fg,I.Sy,x.D6,x.LG,d.kt,a.X1,a.j4,a.JD,f.Wk],encapsulation:2,data:{animation:w.X}})}return i})()}]}}]);