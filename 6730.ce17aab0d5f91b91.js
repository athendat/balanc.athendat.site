"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6730],{56730:(N,$,S)=>{S.d($,{Q:()=>U});var s=S(97586),C=S(44549),E=S(77235),_=S(82643),L=S(67376),F=S(5864),D=S(45312),I=S(90558),w=S(33984),O=S(54438);const B={Roboto:{normal:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Regular.ttf",bold:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Medium.ttf",italics:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Italic.ttf",bolditalics:"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-MediumItalic.ttf"}};let U=(()=>{class T{constructor(){this.merchantLogo=null,_.fonts=B,_.vfs=E.b.vfs}generateTicketCollectionDocument(e,b,m){const a={content:[{text:b.name,style:"header"},{text:b.address,style:"header"},{text:`NIT: ${b.nit}`,style:"body"},{text:`Ticket #. ${e.no}`,style:"body"},{text:"---------------------------------------",style:"line"},{text:`Cobrado por: ${e.paymentGateway.name}`,style:"body"},{text:`${e.currency.iso}: ${e.total.toFixed(2)}`,style:"amount"},{text:"---------------------------------------",style:"line"},{text:`Fecha ${s(e.createdAt).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"\xa1Gracias por su comprar en nuestro negocio, disfrute su compra!",style:"body"},{text:" ",style:"body"},{text:"Este cobro fue procesado por el m\xf3dulo de cobros de balanc.app",style:"body"}],styles:{header:{alignment:"center",fontSize:8,bold:!0},subheader:{alignment:"center",fontSize:7,bold:!0,margin:[0,5,0,5]},body:{alignment:"center",bold:!1,fontSize:6,margin:[0,0,0,0]},line:{margin:[0,3,0,3]},amount:{alignment:"center",bold:!1,fontSize:15,margin:[0,3,0,0]}},pageSize:{width:150,height:300},pageMargins:[10,20,10,20]};_.createPdf(a).open()}generateBillDocument(e,b,m,c){let n=e.bankAccount;!F.H.IsNullOrEmpty(m.bankAccounts)&&F.H.IsNullOrEmpty(n)&&(n=m.bankAccounts.find(t=>t.currencyId===e.currency.id));const a={images:{logo:m.logoUrl?"cloudinary"===D.c.IMAGE_PROVIDER?`${D.c.IMAGE_PROVIDER_URL}image/upload/f_auto,q_auto,w_auto/${m.logoUrl}`:`${D.c.IMAGE_PROVIDER_URL}${m.logoUrl}?width=300&format=png`:D.c.NO_LOGO},content:[{table:{widths:[100,"*"],body:[[{rowSpan:7,image:"logo",width:100},{text:`Proveedor: ${m.name}`,fontSize:12,bold:!0}],[{},{text:`Direcci\xf3n: ${m.address}, municipio ${m.city}, provincia ${m.state}`,fontSize:9}],[{},F.H.IsNullOrEmpty(m.phoneNumbers)?{text:"Tel\xe9fono: ",fontSize:9}:{text:`Tel\xe9fono: ${m.phoneNumbers[0].stateCode}${m.phoneNumbers[0].phoneNumber}`,fontSize:9}],[{},F.H.IsNullOrEmpty(m.emails)?{text:"Correo electr\xf3nico: ",fontSize:9}:{text:`Correo electr\xf3nico: ${m.emails[0].email}`,fontSize:9}],[{},m.nit?{text:`N\xfamero de Identificaci\xf3n Tributaria (NIT): ${m.nit}`,fontSize:9}:{text:"N\xfamero de Identificaci\xf3n Tributaria (NIT): ",fontSize:9}],[{},n.no?{text:`Cuenta Bancaria: ${e.currency.iso} - ${n.no}`,fontSize:9}:{text:"Cuenta Bancaria: ",fontSize:9}],[{},n.beneficiary?{text:`Titular de la cuenta: ${n.beneficiary}`,fontSize:9}:{text:"Titular de la cuenta: ",fontSize:9}]]},layout:"noBorders"},{marginTop:15,table:{widths:["*",20,210],body:[[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:[65,60,"*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:b.toUpperCase(),fontSize:10,bold:!0},{text:`${s(e.billDate).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Tipo de venta",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Moneda",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Forma de pago",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.operationType.name,fontSize:10},{text:e.currency.iso,fontSize:10,alignment:"left"},{text:e.paymentMethod.name,fontSize:10,alignment:"left"}]]}},{},{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Cliente",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left",colSpan:2},{}],[{text:e.customer.name,fontSize:10,bold:!0,colSpan:2},{}],[{text:"NIT",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Tel\xe9fono",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.customer.nit?e.customer.nit:" ",fontSize:10},{text:e.customer.phoneNumber?e.customer.phoneNumber.phoneNumber:" ",fontSize:10}]]}}]]},layout:"noBorders"},{table:{headerRows:1,widths:[30,"*",35,60,60,60],body:[[{text:"Item",style:"table_header"},{text:`${e.products.length>0?"Productos":""} ${e.assistances.length>0&&e.products.length>0?" y":""}  ${e.assistances.length>0?"Servicios":""}`,style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(t=>[{text:e.products.indexOf(t)+1,alignment:"center",style:"table_body"},{text:t.product.name,style:"table_body"},{text:t.product.uom.abbr,alignment:"center",style:"table_body"},{text:t.quantity,alignment:"center",style:"table_body"},{text:t.price.toFixed(2),alignment:"right",style:"table_body"},{text:(t.quantity*t.price).toFixed(2),alignment:"right",style:"table_body"}]),...e.assistances.map(t=>[{text:e.assistances.indexOf(t)+1+e.products.length,alignment:"center",style:"table_body"},{text:t.assistance.description,style:"table_body"},{text:t.assistance.uom.abbr,alignment:"center",style:"table_body"},{text:t.quantity,alignment:"center",style:"table_body"},{text:t.price.toFixed(2),alignment:"right",style:"table_body"},{text:(t.quantity*t.price).toFixed(2),alignment:"right",style:"table_body"}]),[{colSpan:4,rowSpan:4,text:`Observaciones: ${e.obs?e.obs:""}`,bold:!0,alignment:"left",fontSize:10},"","","",{text:"Subtotal",alignment:"left",style:"totals_name"},{text:e.subtotal.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Descuento",alignment:"left",style:"totals_name"},{text:e.discount.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Recargo",alignment:"left",style:"totals_name"},{text:e.surcharge.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Total "+e.currency.iso,alignment:"left",style:"totals_name"},{text:e.total.toFixed(2),alignment:"right",style:"totals_value"}]]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20}],footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"contabiliza",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos:",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},e.courier?{style:"table_header_simple",text:e.courier.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]}:{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Carnet de identidad",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Carnet de identidad",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:s().format("DD-MM-yyyy"),fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"},e.courier?{style:"table_header_simple",text:e.courier.idNumber,fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"}:{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Chapa del Veh\xedculo",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}],[{},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Factura: ${e.no} generada para ${e.customer.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:e.paymentStatus===I.dX.cobrada?"COBRADA":"",color:"red",opacity:.3,angle:-35,bold:!0,italics:!1},info:{title:`Factura: ${e.no}`,author:c.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:m.name}};_.createPdf(a).open()}generateOfferDocument(e,b,m,c){const n={images:{logo:m.logoUrl?"cloudinary"===D.c.IMAGE_PROVIDER?`${D.c.IMAGE_PROVIDER_URL}image/upload/f_auto,q_auto,w_auto/${m.logoUrl}`:`${D.c.IMAGE_PROVIDER_URL}${m.logoUrl}?width=300&format=png`:D.c.NO_LOGO},content:[{table:{widths:[100,"*"],body:[[{rowSpan:5,image:"logo",width:100},{text:`Proveedor: ${m.name}`,fontSize:10,bold:!0}],[{},{text:`Direcci\xf3n: ${m.address}, municipio ${m.city}, provincia ${m.state}`,fontSize:10}],[{},F.H.IsNullOrEmpty(m.phoneNumbers)?{text:"Tel\xe9fono: ",fontSize:10}:{text:`Tel\xe9fono: ${m.phoneNumbers[0].stateCode}${m.phoneNumbers[0].phoneNumber}`,fontSize:10}],[{},F.H.IsNullOrEmpty(m.emails)?{text:"Correo electr\xf3nico:",fontSize:10}:{text:`Correo electr\xf3nico: ${m.emails[0].email}`,fontSize:10}],[{},m.nit?{text:`N\xfamero de Identificaci\xf3n Tributaria (NIT): ${m.nit}`,fontSize:10}:{text:"N\xfamero de Identificaci\xf3n Tributaria (NIT): ",fontSize:10}]]},layout:"noBorders"},{marginTop:15,table:{widths:["*",20,210],body:[[{layout:{hLineWidth:(a,t)=>.5,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},table:{headerRows:1,widths:[65,60,"*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:b.toUpperCase(),fontSize:10,bold:!0},{text:`${s(e.date).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Moneda",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Estado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.currency.iso,fontSize:10},{text:e.status.toUpperCase(),fontSize:10,alignment:"left"},{text:"",fontSize:10,alignment:"left"}]]}},{},{layout:{hLineWidth:(a,t)=>.5,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Cliente",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left",colSpan:2},{}],[{text:e.customer.name,fontSize:10,bold:!0,colSpan:2},{}],[{text:"NIT",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Tel\xe9fono",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.customer.nit?e.customer.nit:" ",fontSize:10},{text:e.customer.phoneNumber?e.customer.phoneNumber.phoneNumber:" ",fontSize:10}]]}}]]},layout:"noBorders"},{table:{headerRows:1,widths:[30,"*",35,60,60,60],body:[[{text:"Item",style:"table_header"},{text:`${e.products.length>0?"Productos":""} ${e.assistances.length>0&&e.products.length>0?" y ":""}${e.assistances.length>0?"Servicios":""}`,style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(a=>[{text:e.products.indexOf(a)+1,alignment:"center",style:"table_body"},{text:a.product.name,style:"table_body"},{text:a.product.uom.abbr,alignment:"center",style:"table_body"},{text:a.quantity,alignment:"center",style:"table_body"},{text:a.price.toFixed(2),alignment:"right",style:"table_body"},{text:(a.quantity*a.price).toFixed(2),alignment:"right",style:"table_body"}]),...e.assistances.map(a=>[{text:e.assistances.indexOf(a)+1+e.products.length,alignment:"center",style:"table_body"},{text:a.assistance.description,style:"table_body"},{text:a.assistance.uom.abbr,alignment:"center",style:"table_body"},{text:a.quantity,alignment:"center",style:"table_body"},{text:a.price.toFixed(2),alignment:"right",style:"table_body"},{text:(a.quantity*a.price).toFixed(2),alignment:"right",style:"table_body"}]),[{colSpan:4,rowSpan:3,text:`Observaciones: ${e.obs?e.obs:""}`,bold:!0,alignment:"left",fontSize:10},"","","",{text:"Subtotal",alignment:"left",style:"totals_name"},{text:e.subtotal.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Descuento",alignment:"left",style:"totals_name"},{text:e.discount.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Total "+e.currency.iso,alignment:"left",style:"totals_name"},{text:e.total.toFixed(2),alignment:"right",style:"totals_value"}]]},layout:{hLineWidth:(a,t)=>.7,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},marginTop:20}],footer:(a,t)=>({stack:[a===t?{layout:{hLineWidth:(l,i)=>.7,vLineWidth:(l,i)=>0,hLineColor:(l,i)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"aprueba",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos:",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:s().format("DD-MM-yyyy"),fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Oferta: ${e.no} generada para ${e.customer.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${a.toString()}/${t} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:a===t?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],info:{title:`Oferta: ${e.no}`,author:c.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:m.name}};_.createPdf(n).open()}generateDispatchDocument(e,b,m){const c={content:[{layout:{hLineWidth:(n,a)=>.5,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Despacho de Mercanc\xedas",fontSize:10,bold:!0},{text:`${s(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Origen",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Destino",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Confirmaci\xf3n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.depotInit.name,fontSize:10},{text:e.depotEnd.name,fontSize:10,alignment:"left"},{text:e.confirmed?"Confirmado":"Pendiente",fontSize:10,alignment:"left"}],[{text:"Confirmado por",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de confirmaci\xf3n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.confirmed?e.confirmedBy:"",fontSize:10},{text:e.confirmed?`${s(e.confirmedAt).format("DD-MM-yyyy hh:mm a")}`:"",fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"}]]}},{table:{headerRows:1,widths:[30,"*",35,50,50,50,50],body:[[{text:"Item",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Sobrante",style:"table_header"},{text:"Faltante",style:"table_header"},{text:"Merma",style:"table_header"}],...e.products.map(n=>[{text:e.products.indexOf(n)+1,alignment:"center",style:"table_body"},{text:n.name,style:"table_body"},{text:n.uom,alignment:"center",style:"table_body"},{text:n.quantity,alignment:"center",style:"table_body"},{text:n.spare,alignment:"center",style:"table_body"},{text:n.missing,alignment:"center",style:"table_body"},{text:n.damaged,alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},marginTop:20},e.obsSpare||e.obsMissing||e.obsDamaged?{text:"Observaciones",fontSize:10,bold:!0,fillColor:"#eeeeee",marginTop:20}:null,e.obsSpare?{text:"Observaciones sobre sobrantes",fontSize:8,bold:!0,marginTop:5}:null,e.obsSpare?{text:e.obsSpare,fontSize:7}:null,e.obsMissing?{text:"Observaciones sobre faltantes",fontSize:8,bold:!0,marginTop:5}:null,e.obsMissing?{text:e.obsMissing,fontSize:7}:null,e.obsDamaged?{text:"Observaciones sobre aver\xedas",fontSize:8,bold:!0,marginTop:5}:null,e.obsDamaged?{text:e.obsDamaged,fontSize:7}:null],footer:(n,a)=>({stack:[n===a?{layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Despacho: ${e.no} generado para ${e.depotEnd.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${n.toString()}/${a} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:n===a?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Despacho: ${e.no}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(c).open()}generateReceptionDocument(e,b,m){const n=e.purchase.products,a=e.products.map(i=>{const r=n.find(p=>p.productId===i.productId);return{...i,...r}}),t={ctQuantity:a.reduce((i,r)=>i+(r.cud+r.cui)*r.quantity,0),ctQuantitySpare:a.reduce((i,r)=>i+(r.cud+r.cui)*r.quantitySpare,0),ctQuantityMissing:a.reduce((i,r)=>i+(r.cud+r.cui)*r.quantityMissing,0),ctQuantityDamaged:a.reduce((i,r)=>i+(r.cud+r.cui)*r.quantityDamaged,0)},l={content:[{layout:{hLineWidth:(i,r)=>.5,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Recepci\xf3n de Mercanc\xedas",fontSize:10,bold:!0},{text:`${s(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"N\xfamero de Orden",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Destino",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Recepcionado por",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.purchase.code,fontSize:10},{text:e?.depot?.name,fontSize:10,alignment:"left"},{text:e.user.fullname,fontSize:10,alignment:"left"}]]}},{table:{headerRows:1,widths:[30,"*",35,50,50,50,50],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Sobrante",style:"table_header"},{text:"Faltante",style:"table_header"},{text:"Merma",style:"table_header"}],...e.products.map(i=>[{text:e.products.indexOf(i)+1,alignment:"center",style:"table_body"},{text:i.product.name,style:"table_body"},{text:i.product.uom.abbr,alignment:"center",style:"table_body"},{text:i.quantity,alignment:"center",style:"table_body"},{text:i.quantitySpare,alignment:"center",style:"table_body"},{text:i.quantityMissing,alignment:"center",style:"table_body"},{text:i.quantityDamaged,alignment:"center",style:"table_body"}]),[{text:"Costos Totales",colSpan:3,style:"table_header",alignment:"left",margin:[10,0,0,0]},{},{},{text:t.ctQuantity.toFixed(2),style:"table_header",alignment:"center"},{text:t.ctQuantitySpare.toFixed(2),style:"table_header",alignment:"center"},{text:t.ctQuantityMissing.toFixed(2),style:"table_header",alignment:"center"},{text:t.ctQuantityDamaged.toFixed(2),style:"table_header",alignment:"center"}]]},layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},marginTop:20},e.obs||e.obsSpare||e.obsMissing||e.obsDamaged?{text:"Observaciones",fontSize:10,bold:!0,fillColor:"#eeeeee",marginTop:20}:null,e.obs?{text:"Observaciones generales",fontSize:8,bold:!0,marginTop:5}:null,e.obs?{text:e.obs,fontSize:7}:null,e.obsSpare?{text:"Observaciones sobre sobrantes",fontSize:8,bold:!0,marginTop:5}:null,e.obsSpare?{text:e.obsSpare,fontSize:7}:null,e.obsMissing?{text:"Observaciones sobre faltantes",fontSize:8,bold:!0,marginTop:5}:null,e.obsMissing?{text:e.obsMissing,fontSize:7}:null,e.obsDamaged?{text:"Observaciones sobre aver\xedas",fontSize:8,bold:!0,marginTop:5}:null,e.obsDamaged?{text:e.obsDamaged,fontSize:7}:null],footer:(i,r)=>({stack:[i===r?{layout:{hLineWidth:(p,z)=>.7,vLineWidth:(p,z)=>0,hLineColor:(p,z)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{text:"",style:"table_header_simple"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:e.user.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Recepci\xf3n: ${e.no} generado para ${e?.depot?.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${i.toString()}/${r} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:i===r?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Recepci\xf3n: ${e.no}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(l).open()}generatePurchaseDocument(e,b,m){const c={content:[{layout:{hLineWidth:(n,a)=>.5,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Comprobante",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"ORDEN DE COMPRA",fontSize:10,bold:!0},{text:`${s(e.voucherDate).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.code,fontSize:10,bold:!0,alignment:"left"},{text:e?.voucherNo,fontSize:10,bold:!0,alignment:"left"}],[{text:"Tipo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Moneda",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"M\xe9todo de pago",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Estado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.indirectCost.fobCosts>0||e.indirectCost.freight>0||e.indirectCost.customsDuties>0||e.indirectCost.customsServices>0?"Importaci\xf3n":"En Plaza",fontSize:10},{text:e.currency.iso,fontSize:10,alignment:"left"},{text:e.paymentMethod.name,fontSize:10,alignment:"left"},{text:e.status.toUpperCase(),fontSize:10,alignment:"left"}]]}},{columns:[{table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Empresa",alignment:"left",style:"table_header"},{text:b.name,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Tel\xe9fono",alignment:"left",style:"table_header"},{text:F.H.IsNullOrEmpty(b.phoneNumbers)?"":`${b.phoneNumbers[0].stateCode}${b.phoneNumbers[0].phoneNumber}`,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Direcci\xf3n",alignment:"left",style:"table_header"},{text:`${b.address}, municipio ${b.city}, provincia ${b.state}`,alignment:"left",style:"table_body",colSpan:3},{},{}]]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>.7,hLineColor:(n,a)=>"#eeeeee",vLineColor:(n,a)=>"#eeeeee"},marginRight:5},{table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Proveedor",alignment:"left",style:"table_header"},{text:e.supplier.name,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Tel\xe9fono",alignment:"left",style:"table_header"},{text:e.supplier?.phone,alignment:"left",style:"table_body",colSpan:3},{},{}]]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>.7,hLineColor:(n,a)=>"#eeeeee",vLineColor:(n,a)=>"#eeeeee"},marginLeft:5}],marginTop:20},{table:{headerRows:1,widths:[30,"*",35,60,80,80],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio Unitario",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(n=>[{text:e.products.indexOf(n)+1,alignment:"center",style:"table_body"},{text:n.product.name,style:"table_body"},{text:n.product.uom.abbr,alignment:"center",style:"table_body"},{text:n.quantity,alignment:"center",style:"table_body"},{text:n.cud,alignment:"center",style:"table_body"},{text:n.quantity*n.cud,alignment:"right",style:"table_body"}]),[{colSpan:4,rowSpan:3,text:""},"","","",{text:"Subtotal",alignment:"left",style:"totals_name"},{text:e.products.reduce((n,a)=>n+a.cud*a.quantity,0).toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Costos Indirectos",alignment:"left",style:"totals_name"},{text:e.products.reduce((n,a)=>n+a.cui*a.quantity,0).toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Total",alignment:"left",style:"totals_name"},{text:e.products.reduce((n,a)=>n+(a.cud*a.quantity+a.cui*a.quantity),0).toFixed(2),alignment:"right",style:"totals_value"}]]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>.7,hLineColor:(n,a)=>"#eeeeee",vLineColor:(n,a)=>"#eeeeee"},marginTop:20}],footer:(n,a)=>({stack:[n===a?{layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Orden: ${e.code} generado por ${m.fullname}`,bold:!0,fontSize:8},{text:`P\xe1gina ${n.toString()}/${a} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:n===a?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Orden de Compra: ${e.code}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(c).open()}generateStowageCardDocument(e,b,m){const c={content:[{layout:{hLineWidth:(n,a)=>.5,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Tarjeta de Estiba",fontSize:10,bold:!0},{text:`${s().format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.depot.name,fontSize:10,bold:!0,alignment:"left"}],[{text:"Producto",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Marca",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"C\xf3digo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.product.name,fontSize:10},{text:e.product.brand.name,fontSize:10,alignment:"left"},{text:e.product.upc,fontSize:10,alignment:"left"}],[{text:"Unidad de Medida",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Precio",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Perecedero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.product.uom.abbr,fontSize:10},{text:e.product.price.toFixed(2),fontSize:10,alignment:"left"},{text:e.product.isPerishable?"Si":"No",fontSize:10,alignment:"left"}]]}},{table:{headerRows:2,widths:[20,"*",32,80,40,50,40,80,40],body:[[{text:"REGISTROS DE MOVIMIENTOS DEL PRODUCTO",style:"table_header",colSpan:9},{},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Fecha",style:"table_header",alignment:"left"},{text:"Compra",style:"table_header",fontSize:9},{text:"Tipo",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Final",style:"table_header"},{text:"Saldo",style:"table_header"},{text:"Firma",style:"table_header"}],...e.movements.map(n=>[{text:e.movements.indexOf(n)+1,alignment:"center",style:"table_body"},{text:`${s(n.createdAt).format("DD-MM-YY hh:mm")}`,style:"table_body"},{text:n?.stock?.purchase?.voucherNo,alignment:"center",fontSize:8},{text:n.type.toUpperCase(),alignment:"center",style:"table_body"},{text:n.initQuantity,alignment:"center",style:"table_body"},{text:n.quantity,alignment:"center",style:"table_body"},{text:n.endQuantity,alignment:"center",style:"table_body"},{text:(n.endQuantity*e.product.price).toFixed(2),alignment:"center",style:"table_body"},{text:" ",alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},marginTop:20}],footer:(n,a)=>({stack:[n===a?{layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"responsable",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Tarjeta de estiba, producto: ${e.product.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${n.toString()}/${a} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:n===a?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Tarjeta de estiba, producto: ${e.product.name}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(c).open()}generateTicketDocument(e,b,m){const a={content:[{text:b.name,style:"header"},{text:b.address,style:"header"},{text:`NIT: ${b.nit}`,style:"body"},{text:`Ticket #. ${e.no}`,style:"body"},{text:`Cobrado por: ${e.paymentMethod.name}`,style:"body"},{text:"---------------------------------------",style:"line"},{text:"Producto             Qty         Precio",style:"body"},...e.products.map(t=>[{text:t.product.name+t.quantity,styles:"body"}]),{text:`${e.currency.iso}: ${e.total.toFixed(2)}`,style:"amount"},{text:"---------------------------------------",style:"line"},{text:`Fecha ${s(e.createdAt).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"\xa1Gracias por su comprar en nuestro negocio, disfrute su compra!",style:"body"},{text:" ",style:"body"},{text:"Este cobro fue procesado por el m\xf3dulo de cobros de balanc.app",style:"body"}],styles:{header:{alignment:"center",fontSize:8,bold:!0},subheader:{alignment:"center",fontSize:7,bold:!0,margin:[0,5,0,5]},body:{alignment:"center",bold:!1,fontSize:6,margin:[0,0,0,0]},line:{margin:[0,3,0,3]},amount:{alignment:"center",bold:!1,fontSize:15,margin:[0,3,0,0]}},pageSize:{width:150,height:300},pageMargins:[10,20,10,20]};_.createPdf(a).open()}generateReceiptDataSheetDocument(e,b,m){const a={content:[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*"],body:[[{text:"Ficha T\xe9cnica "+e.name,style:"table_header"}]]}},{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*","*",50,"*","*"],body:[[{text:"Negocio",style:"table_header_simple",bold:!0,alignment:"left"},{text:b.name,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Clasificaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.classification,style:"table_body",bold:!0,alignment:"left"}],[{text:"Tama\xf1o de la porci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.portionSize+e.uom.abbr,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Moneda",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.currency.iso,style:"table_body",bold:!0,alignment:"left"}],[{text:"Tiempo de preparaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.preparationTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Costo",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.cost.toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"Tiempo de cocci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.cookingTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Precio",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.price.toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"Temperatura de servicio",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.temperature} \xbaC`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Beneficio",style:"table_header_simple",bold:!0,alignment:"left"},{text:(e.price-e.cost).toFixed(2),style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*",110,110],body:[[{text:"Ingredientes",style:"table_header_simple",bold:!0,alignment:"left"},{text:"Unidad de Medida",style:"table_header_simple",bold:!0,alignment:"center"},{text:"Cantidad",style:"table_header_simple",bold:!0,alignment:"center"}],...e.ingredients.map(t=>[{text:t.product.name,style:"table_body",bold:!0,alignment:"left"},{text:t.uom.abbr,style:"table_body",bold:!0,alignment:"center"},{text:t.quantity,style:"table_body",bold:!0,alignment:"center"}])]}},{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Descripci\xf3n del a receta",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.description,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Elaboraci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.elaboration,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Presentaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.presentation,style:"table_body",bold:!0,alignment:"left"}]]}},{alignment:"justify",columns:[[{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Equipos necesarios",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.equipments,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Al\xe9rgenos",style:"table_header_simple",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}],...e.allergens.map(t=>[{text:t,style:"table_body",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}])]}}],{layout:{hLineWidth:(t,l)=>.5,hLineColor:(t,l)=>"#eeeeee",vLineWidth:(t,l)=>.5,vLineColor:(t,l)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Foto",style:"table_header_simple",bold:!0,alignment:"left"}],[{}]]}}]}],styles:{table_header_simple:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:16,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10}},pageOrientation:"portrait",pageSize:"LETTER",info:{title:`Ficha t\xe9cnica receta: ${e.name}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(a).open()}generateProductionDataSheetDataSheetDocument(e,b){const m=[{layout:{hLineWidth:(a,t)=>.5,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},table:{headerRows:1,widths:["*"],body:[[{text:"Ficha T\xe9cnica "+e.name,style:"table_header"}]]}},{layout:{hLineWidth:(a,t)=>.5,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*","*",50,"*","*"],body:[[{text:"Negocio",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.merchant.name,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Clasificaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.category.name,style:"table_body",bold:!0,alignment:"left"}],[{text:"",border:[!1,!1,!1,!1],colSpan:5}],[{text:"Tama\xf1o de la porci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.portionSize+e.uom.abbr,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Moneda",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.currency.iso,style:"table_body",bold:!0,alignment:"left"}],[{text:"Cantidad de porciones",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.portions,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Precio de Venta",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.price.toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"",border:[!1,!1,!1,!1],colSpan:5}],[{text:"Tiempo de preparaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.preparationTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Costo Unitario",style:"table_header_simple",bold:!0,alignment:"left"},{text:(e.totalCost/e.portions).toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"Tiempo de cocci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.cookingTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Impuesto",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.tax+" %",style:"table_body",bold:!0,alignment:"left"}],[{text:"Temperatura de servicio",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.temperature} \xbaC`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Beneficio",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.margin+" %",style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,t)=>.5,vLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:[25,"*",60,60,60,60],body:[[{text:"N\xba",style:"table_header_simple",bold:!0,alignment:"left"},{text:"Ingredientes",style:"table_header_simple",bold:!0,alignment:"left"},{text:"UM",style:"table_header_simple",bold:!0,alignment:"center"},{text:"Cantidad",style:"table_header_simple",bold:!0,alignment:"center"},{text:"Costo",style:"table_header_simple",bold:!0,alignment:"center"},{text:"Total",style:"table_header_simple",bold:!0,alignment:"center"}],...e.ingredients.map(a=>[{text:e.ingredients.indexOf(a)+1,alignment:"center",style:"table_body",bold:!0},{text:a.product.name,style:"table_body",bold:!0,alignment:"left"},{text:"peso"===a.uom.type?"g":"ml",style:"table_body",bold:!0,alignment:"center"},{text:a.quantity,style:"table_body",bold:!0,alignment:"center"},{text:a.cost.toFixed(2),style:"table_body",bold:!0,alignment:"center"},{text:(a.quantity*a.cost).toFixed(2),style:"table_body",bold:!0,alignment:"center"}]),[{text:" ",style:"table_header_simple",bold:!0,alignment:"left",colSpan:4},{},{},{},{text:"Costo Total",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.totalCost.toFixed(2),style:"table_header_simple",bold:!0,alignment:"center"}]]}},{layout:{hLineWidth:(a,t)=>.5,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>.5,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Descripci\xf3n del a receta",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.description,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,t)=>.5,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>.5,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Elaboraci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.elaboration,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,t)=>.5,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>.5,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Presentaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.presentation,style:"table_body",bold:!0,alignment:"left"}]]}},{alignment:"justify",columns:[[{layout:{hLineWidth:(a,t)=>.5,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>.5,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Equipos necesarios",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.equipments,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>0,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Al\xe9rgenos",style:"table_header_simple",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}],...e.allergens.map(a=>[{text:a,style:"table_body",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}])]}}],{layout:{hLineWidth:(a,t)=>0,hLineColor:(a,t)=>"#eeeeee",vLineWidth:(a,t)=>0,vLineColor:(a,t)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Foto",style:"table_header_simple",bold:!0,alignment:"left"}],[{image:"thumbnail",width:230,alignment:"center"}]]}}]}],n={images:{thumbnail:this.#e(e.thumbnail)},content:m,styles:{table_header_simple:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:16,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10}},pageOrientation:"portrait",pageSize:"LETTER",info:{title:`Ficha t\xe9cnica receta: ${e.name}`,author:b.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:e.merchant.name}};_.createPdf(n).open()}generateProductionRequestDocument(e,b){const m=`Solicitud de Producci\xf3n No: ${e.no}`,c=[{marginTop:15,table:{widths:["*",20,210],body:[[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:[65,60,"*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Solicitud de Producci\xf3n",fontSize:10,bold:!0,colSpan:2},{text:" ",fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Estado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de Entrega",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.status,fontSize:10,bold:!0,alignment:"left"},{text:`${C.c9.fromISO(e.requestedDate.toString()).toFormat("dd/MM/yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:`${C.c9.fromISO(e.dueDate.toString()).toFormat("dd/MM/yyyy")}`,fontSize:10,bold:!0}]]}},{},{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Cliente",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left",colSpan:2},{}],[{text:e.customer.name,fontSize:10,bold:!0,colSpan:2},{}],[{text:"Solicitado por:",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Prioridad",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.requestedBy,fontSize:10,bold:!0},{text:e.priority,fontSize:10,bold:!0}]]}}]]},layout:"noBorders"},{table:{headerRows:1,widths:[30,"*",35,60,80,80],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio Unitario",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(t=>[{text:e.products.indexOf(t)+1,alignment:"center",style:"table_body"},{text:t.product.name,style:"table_body"},{text:" ",alignment:"center",style:"table_body"},{text:t.quantity,alignment:"center",style:"table_body"},{text:t.price,alignment:"center",style:"table_body"},{text:t.quantity*t.price,alignment:"center",style:"table_body"}]),[{colSpan:4,text:" ",bold:!0,alignment:"left",fontSize:10},"","","",{text:"Total",alignment:"left",style:"totals_name"},{text:e.products.reduce((t,l)=>t+l.price*l.quantity,0).toFixed(2),alignment:"center",style:"totals_value"}]]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20}],n={title:m,author:b.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:e.merchant.name};_.createPdf({content:c,footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"aprueba",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos:",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:b.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""}],[{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" ",fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Solicitud de Producci\xf3n No: ${e.no}`,bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${C.c9.now().toFormat("dd/MM/yyyy hh:mm a")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],info:n}).open()}generateProductionOrderDocument(e,b){const m=`Orden de Producci\xf3n No: ${e.no}`,c=[{marginTop:15,table:{widths:["*",20,210],body:[[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:[65,60,"*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Orden de Producci\xf3n",fontSize:10,bold:!0,colSpan:2},{text:" ",fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Estado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de Entrega",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.status,fontSize:10,bold:!0,alignment:"left"},{text:`${C.c9.fromISO(e.request.requestedDate.toString()).toFormat("dd/MM/yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:`${C.c9.fromISO(e.request.dueDate.toString()).toFormat("dd/MM/yyyy")}`,fontSize:10,bold:!0}]]}},{},{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Cliente",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left",colSpan:2},{}],[{text:e.request.customer.name,fontSize:10,bold:!0,colSpan:2},{}],[{text:"Solicitado por:",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Prioridad",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.request.requestedBy,fontSize:10,bold:!0},{text:e.request.priority,fontSize:10,bold:!0}]]}}]]},layout:"noBorders"},{table:{headerRows:1,widths:[30,"*",35,60,80,80],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio Unitario",style:"table_header"},{text:"Total",style:"table_header"}],...e.request.products.map(t=>[{text:e.request.products.indexOf(t)+1,alignment:"center",style:"table_body"},{text:t.product.name,style:"table_body"},{text:" ",alignment:"center",style:"table_body"},{text:t.quantity,alignment:"center",style:"table_body"},{text:t.price,alignment:"center",style:"table_body"},{text:t.quantity*t.price,alignment:"center",style:"table_body"}]),[{colSpan:4,text:" ",bold:!0,alignment:"left",fontSize:10},"","","",{text:"Total",alignment:"left",style:"totals_name"},{text:e.request.products.reduce((t,l)=>t+l.price*l.quantity,0).toFixed(2),alignment:"center",style:"totals_value"}]]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20}],n={title:m,author:b.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:e.request.merchant.name};_.createPdf({content:c,footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"aprueba",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos:",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:b.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""}],[{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" ",fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Orden de Producci\xf3n No: ${e.no}`,bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${C.c9.now().toFormat("dd/MM/yyyy hh:mm a")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],info:n}).open()}generatePeriodCloseDocument(e,b,m,c,n,a){let t=1,l=1,i=1,r=1,p=1,z=1,M=0;e.stockMovements=e.stockMovements.sort((o,d)=>o.product.name.localeCompare(d.product.name));const v=Object.values((0,L.groupBy)(e.stockMovements,o=>`${o.stockId}_${o.productId}`)),P={content:[{layout:{hLineWidth:(o,d)=>.5,vLineWidth:(o,d)=>0,hLineColor:(o,d)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:c?"Fecha":"Per\xedodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:c?"left":"center"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:c?"left":"center"}],[{text:c?"Cierre de Almac\xe9n":"Cierres de Almac\xe9n",fontSize:10,bold:!0},{text:c?`${s(c.createdAt).format("DD-MM-yyyy hh:mm a")}`:`${s(n.start).format("DD-MM-yyyy hh:mm a")} - ${s(n.end).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:c?c.depot.name:a.name,fontSize:10,bold:!0,alignment:c?"left":"center"}],c?[{text:"Empleado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de apertura",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de cierre",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}]:[{},{},{}],c?[{text:c.user.fullname,fontSize:10,alignment:"left"},{text:`${s(c.open).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,alignment:"left"},{text:`${s(c.close).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,alignment:"left"}]:[{},{},{}]].splice(0,c?4:2)}},{table:{headerRows:2,widths:[20,"*",20,50,40,40,40,50,40,50,40,80],body:[[{text:"LISTADO DE PRODUCTOS",style:"table_header",colSpan:12},{},{},{},{},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"U/M",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Entrada",style:"table_header"},{text:"Merma",style:"table_header"},{text:"Perdido",style:"table_header"},{text:"Vendido",style:"table_header"},{text:"Devuelto",style:"table_header"},{text:"Final",style:"table_header"},{text:"V.Neto",style:"table_header"},{text:"Venta Neta",style:"table_header"}],...e.ipvProductsData.map(o=>[{text:e.ipvProductsData.indexOf(o)+1,alignment:"center",style:"table_body"},{text:o.productName,style:"table_body"},{text:o.uomAbbr,alignment:"center",style:"table_body"},{text:o.initialInventory,alignment:"center",style:"table_body"},{text:o.entries,alignment:"center",style:"table_body"},{text:o.shrinkages,alignment:"center",style:"table_body"},{text:o.losses,alignment:"center",style:"table_body"},{text:o.sold,alignment:"center",style:"table_body"},{text:o.returned,alignment:"center",style:"table_body"},{text:o.finalInventory,alignment:"center",style:"table_body"},{text:o.sold-o.returned,alignment:"center",style:"table_body"},{text:o.totalSales.toFixed(2),alignment:"right",margin:[0,0,10,0],style:"table_body"}]),[{text:"Totales",colSpan:2,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+d.shrinkages,0),style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+d.losses,0),style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+d.sold,0),style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+d.returned,0),style:"table_header"},{text:"",style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+(d.sold-d.returned),0),style:"table_header"},{text:e.ipvProductsData.reduce((o,d)=>o+d.totalSales,0).toFixed(2),style:"table_header",alignment:"right",margin:[0,0,10,0]}]]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>0,hLineColor:(o,d)=>"#eeeeee"},marginTop:20},e.shrinkageProducts.length>0?{table:{headerRows:2,widths:[25,210,50,58,"*"],body:[[{text:"PRODUCTOS MERMADOS",style:"table_header",colSpan:5},{text:""},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Clasificaci\xf3n",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...e.shrinkageProducts.map((o,d)=>{let h={},f={};if(0===e.shrinkageProducts.filter((y,u)=>u<d).length){const y=e.shrinkageProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},f={text:"1",style:"table_body",alignment:"center",rowSpan:y}}else if(e.shrinkageProducts[d].productId!==e.shrinkageProducts[d-1].productId){const y=e.shrinkageProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},t++,f={text:t.toString(),style:"table_body",alignment:"center",rowSpan:y}}return[f,h,{text:o.quantity.toString(),style:"table_body",alignment:"center"},{text:o.type.toUpperCase(),style:"table_body",alignment:"center"},{text:o.observation,style:"table_body"}]})]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30}:null,e.lossProducts.length>0?{table:{headerRows:2,widths:[25,210,58,"*"],body:[[{text:"PRODUCTOS PERDIDOS",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...e.lossProducts.map((o,d)=>{let h={},f={};if(0===e.lossProducts.filter((y,u)=>u<d).length){const y=e.lossProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},f={text:"1",style:"table_body",alignment:"center",rowSpan:y}}else if(e.lossProducts[d].productId!==e.lossProducts[d-1].productId){const y=e.lossProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},l++,f={text:l.toString(),style:"table_body",alignment:"center",rowSpan:y}}return[f,h,{text:o.quantity.toString(),style:"table_body",alignment:"center"},{text:o.observation,style:"table_body"}]})]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30}:null,e.returnSaleProducts.length>0?{table:{headerRows:2,widths:[25,"*",60,60],body:[[{text:"PRODUCTOS DEVUELTOS",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"}],...e.returnSaleProducts.map((o,d)=>{let h={},f={};if(0===e.returnSaleProducts.filter((y,u)=>u<d).length){const y=e.returnSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},f={text:"1",style:"table_body",alignment:"center",rowSpan:y}}else if(e.returnSaleProducts[d].productId!==e.returnSaleProducts[d-1].productId){const y=e.returnSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},r++,f={text:r.toString(),style:"table_body",alignment:"center",rowSpan:y}}return[f,h,{text:o.quantity.toString(),style:"table_body",alignment:"center"},{text:o.price,style:"table_body",alignment:"left"}]})]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30}:null,e.promotionSaleProducts.length>0?{table:{headerRows:2,widths:[25,"*",60,60,60],body:[[{text:"PRODUCTOS VENDIDOS POR PROMOCIONES",style:"table_header",colSpan:5},{text:""},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"},{text:"Importe",style:"table_header"}],...e.promotionSaleProducts.map((o,d)=>{let h={},f={};if(0===e.promotionSaleProducts.filter((y,u)=>u<d).length){const y=e.promotionSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},f={text:"1",style:"table_body",alignment:"center",rowSpan:y}}else if(e.promotionSaleProducts[d].productId!==e.promotionSaleProducts[d-1].productId){const y=e.promotionSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},p++,f={text:p.toString(),style:"table_body",alignment:"center",rowSpan:y}}return[f,h,{text:o.quantity.toString(),style:"table_body",alignment:"center"},{text:o.price,style:"table_body",alignment:"center"},{text:(o.quantity*o.price).toFixed(2),style:"table_body",alignment:"right",margin:[0,0,10,0]}]}),[{text:"Total",colSpan:4,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:""},{text:""},{text:""},{text:e.promotionSaleProducts.reduce((o,d)=>o+d.quantity*d.price,0).toFixed(2),style:"table_header",alignment:"right",margin:[0,0,10,0]}]]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30}:null,e.priceChangeSaleProducts.length>0?{table:{headerRows:2,widths:[25,"*",60,80,60,80,80],body:[[{text:"PRODUCTOS VENDIDOS POR CAMBIOS DE PRECIOS",style:"table_header",colSpan:7},{text:""},{text:""},{text:""},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio Original",style:"table_header"},{text:"Importe",style:"table_header"},{text:"Precio de Venta",style:"table_header"},{text:"Importe de Venta",style:"table_header"}],...e.priceChangeSaleProducts.map((o,d)=>{let h={},f={};if(0===e.priceChangeSaleProducts.filter((y,u)=>u<d).length){const y=e.priceChangeSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},f={text:"1",style:"table_body",alignment:"center",rowSpan:y}}else if(e.priceChangeSaleProducts[d].productId!==e.priceChangeSaleProducts[d-1].productId){const y=e.priceChangeSaleProducts.filter(u=>u.productId===o.productId).length;h={text:o.product.name,style:"table_body",rowSpan:y},z++,f={text:z.toString(),style:"table_body",alignment:"center",rowSpan:y}}return[f,h,{text:o.quantity.toString(),style:"table_body",alignment:"center"},{text:o.originalPrice.toString(),style:"table_body",alignment:"center"},{text:(o.quantity*o.originalPrice).toFixed(2),style:"table_body",alignment:"right",margin:[0,0,10,0]},{text:o.price,style:"table_body",alignment:"center"},{text:(o.quantity*o.price).toFixed(2),style:"table_body",alignment:"right",margin:[0,0,10,0]}]}),[{text:"Total",colSpan:4,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:""},{text:""},{text:""},{text:e.priceChangeSaleProducts.reduce((o,d)=>o+d.quantity*d.originalPrice,0).toFixed(2),style:"table_header",alignment:"center"},{text:"",style:"table_header"},{text:e.priceChangeSaleProducts.reduce((o,d)=>o+d.quantity*d.price,0).toFixed(2),style:"table_header",alignment:"right",margin:[0,0,10,0]}]]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30}:null,e.stockMovements.length>0?{table:{headerRows:2,widths:[25,170,45,30,40,45,40,"*"],body:[[{text:"MOVIMIENTOS EN INVENTARIO",style:"table_header",colSpan:8},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header"},{text:"Tipo",style:"table_header"},{text:"Hora",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Final",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...v.map((o,d)=>{const x=[],h=e.stockMovements.filter(y=>y.productId===o[0].productId).length,f=o.length;M+=o.length;for(const y of o)x.push([{text:i.toString(),style:"table_body",alignment:"center",rowSpan:h},{text:y.product.name,style:"table_body",rowSpan:f},{text:y.type.toUpperCase(),style:"table_body",alignment:"center"},{text:s(y.createdAt).format("HH:mm"),style:"table_body",alignment:"center"},{text:y.initQuantity.toString(),style:"table_body",alignment:"center"},{text:y.quantity.toString(),style:"table_body",alignment:"center"},{text:y.endQuantity.toString(),style:"table_body",alignment:"center"},{text:y.observation,style:"table_body"}]);return h===M&&(i++,M=0),x}).flat()]},layout:{hLineWidth:(o,d)=>.7,vLineWidth:(o,d)=>.7,hLineColor:(o,d)=>"#eeeeee",vLineColor:(o,d)=>"#eeeeee"},marginTop:30,marginBottom:30}:null],footer:(o,d)=>({stack:[o===d?{layout:{hLineWidth:(x,h)=>.7,vLineWidth:(x,h)=>0,hLineColor:(x,h)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Cierre de almac\xe9n: ${c?c.depot.name:a.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${o.toString()}/${d} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:o===d?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"landscape",pageBreakBefore:(o,d)=>1===o.headlineLevel&&d.length>0,pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Cierre de almac\xe9n: ${c?c.depot.name:a.name}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(P).open()}generateMovementsDocument(e,b,m,c){b=b.flatMap(t=>t.reason===w.aY.between?[{...t,depotEnd:t.depotInit},{...t,depotInit:t.depotEnd}]:t);const n=(0,L.groupBy)(b,t=>t.depotInit?.name||t.depotEnd?.name),a={content:[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Per\xedodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Registro de movimientos",fontSize:10,bold:!0},{text:`${s(e.start).format("DD-MM-yyyy hh:mm a")} al ${s(e.end).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"}]]}},{table:{headerRows:1,widths:[25,170,45,80,40,45,40,"*"],body:[[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header"},{text:"Tipo",style:"table_header"},{text:"Hora",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Final",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...Object.values(n).map((t,l)=>{let i=[],r=1;const p=Object.keys(n)[l];i.push([{text:p.toUpperCase(),colSpan:8,alignment:"center",bold:!0,fontSize:10,fillColor:"whitesmoke"},{},{},{},{},{},{},{}]);const z=t.find(o=>o.depotInit?.name===p||o.depotEnd?.name===p),M=z.depotEnd?.name===p?z.depotEnd:z.depotInit;t=(t=t.filter(o=>o.depotEndId===M.id&&o.type===w.UB.entrada&&o.reason===w.aY.between||o.depotInitId===M.id&&o.type===w.UB.salida&&o.reason===w.aY.between||o.reason!==w.aY.between)).sort((o,d)=>o.product.name.localeCompare(d.product.name));const v=Object.values((0,L.groupBy)(t,o=>`${o.stockId}_${o.productId}`));let P=0;return i=[...i,...v.map(o=>{const d=[],x=t.filter(f=>f.productId===o[0].productId).length,h=o.length;return P+=o.length,o.forEach((f,y)=>{const u=f?.stock?.purchase?.voucherNo?`/ Compra: ${f.stock.purchase.voucherNo}`:"";d.push([0===y?{text:r.toString(),style:"table_body",alignment:"center",rowSpan:x}:{},{text:`${f.product.name} ${u}`,style:"table_body",rowSpan:h},{text:f.type.toUpperCase(),style:"table_body",alignment:"center"},{text:s(f.createdAt).format("DD-MM-yyyy hh:mm"),style:"table_body",alignment:"center"},{text:f.initQuantity.toString(),style:"table_body",alignment:"center"},{text:f.quantity.toString(),style:"table_body",alignment:"center"},{text:f.endQuantity.toString(),style:"table_body",alignment:"center"},{text:f.observation,style:"table_body"}])}),x===P&&(r++,P=0),d}).flat()],i}).flat()]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>.7,hLineColor:(t,l)=>"#eeeeee",vLineColor:(t,l)=>"#eeeeee"},marginTop:30,marginBottom:30}],footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Registro de movimientos en el per\xedodo ${s(e.start).format("DD-MM-yyyy hh:mm a")} al ${s(e.end).format("DD-MM-yyyy hh:mm a")}`,bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"landscape",pageBreakBefore:(t,l)=>1===t.headlineLevel&&l.length>0,pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Registro de movimientos en el per\xedodo ${s(e.start).format("DD-MM-yyyy hh:mm a")} al ${s(e.end).format("DD-MM-yyyy hh:mm a")}`,author:c.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:m.name}};_.createPdf(a).open()}generateIncomeReportDocument(e,b,m){const c={content:[{layout:{hLineWidth:(n,a)=>.5,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Entrada de Mercanc\xedas",fontSize:10,bold:!0},{text:`${s(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.depot.name,fontSize:10,bold:!0,alignment:"left"}],[{text:"Empleado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.user.fullname,fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"}]]}},{table:{headerRows:2,widths:[30,"*",80,80],body:[[{text:"LISTADO DE PRODUCTOS",style:"table_header",colSpan:4},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"}],...e.products.map(n=>[{text:e.products.indexOf(n)+1,alignment:"center",style:"table_body"},{text:n.product.name,style:"table_body"},{text:n.quantity+" ",alignment:"center",style:"table_body"},{text:n.product.price.toFixed(2),alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},marginTop:20}],footer:(n,a)=>({stack:[n===a?{layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Cierre de almac\xe9n: ${e.depot.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${n.toString()}/${a} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:n===a?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Cierre de almac\xe9n: ${e.depot.name}`,author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(c).open()}generateIpvProducts(e,b,m,c,n,a,t){const l={content:[{layout:{hLineWidth:(i,r)=>.5,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["20%","*","35%"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Unidad Comercial",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Ventas por Productos",fontSize:10,bold:!0},{text:`${s(b.start).format("DD-MM-yyyy hh:mm a")} al ${s(b.end).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"},{text:c.map(i=>i.name).join(", "),fontSize:10,bold:!0,alignment:"center"}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.reduce((i,r)=>i+(r.Cantidad*r.Precio||0),0).toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:t.toFixed(2),fontSize:10,alignment:"center"},{text:a.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:2,widths:["*",60,70,60,100],body:[[{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"P.Promedio",style:"table_header"},{text:"Total",style:"table_header"},{text:"Cajero",style:"table_header"}],...e.map(i=>[{text:i.Producto,style:"table_body"},{text:i.Cantidad,alignment:"center",style:"table_body"},{text:i.Precio.toFixed(2),alignment:"center",style:"table_body"},{text:(i.Precio*i.Cantidad).toFixed(2),alignment:"center",style:"table_body"},{text:i.Cajero,alignment:"left",style:"table_body"}])]},layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},marginTop:20}],footer:(i,r)=>({stack:[i===r?{layout:{hLineWidth:(p,z)=>.7,vLineWidth:(p,z)=>0,hLineColor:(p,z)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:n.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Reporte de Productos Vendidos",bold:!0,fontSize:8},{text:`P\xe1gina ${i.toString()}/${r} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:i===r?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Productos Vendidos",author:n.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:m.name}};_.createPdf(l).open()}generateSalesByCategoriesProducts(e,b,m){const c={content:[{layout:{hLineWidth:(n,a)=>.5,vLineWidth:(n,a)=>0,hLineColor:(n,a)=>"#eeeeee"},table:{headerRows:1,widths:["20%","*","35%"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Unidad Comercial",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Ventas por Productos",fontSize:10,bold:!0},{text:`${s(e.openedAt).format("DD-MM-yyyy hh:mm a")} al ${s(e.closedAT).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"},{text:e.locationName,fontSize:10,bold:!0,alignment:"center"}],[{text:"Cajero",style:"table_header_simple",fontSize:8,bold:!0,colSpan:3,alignment:"left"},{},{}],[{text:e.employeeName,fontSize:10,bold:!0,alignment:"left",colSpan:3},{},{}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.total.toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:e.cardPaid.toFixed(2),fontSize:10,alignment:"center"},{text:e.cashPaid.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:2,widths:[80,60,"*",45,60,50],body:[[{text:"Categor\xeda",style:"table_header",alignment:"left"},{text:"Total",style:"table_header",alignment:"left"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"P.Promedio",style:"table_header"},{text:"Total",style:"table_header"}],...e.categoriesProducts.map((n,a)=>{const t=[];let l=0;for(const i of n.products)t.push([0===l?{text:n.categoryName,rowSpan:n.products.length,style:"table_body"}:{},0===l?{text:n.total.toFixed(2),rowSpan:n.products.length,alignment:"center",style:"table_body"}:{},{text:i.name,alignment:"left",style:"table_body"},{text:i.quantity,alignment:"center",style:"table_body"},{text:i.priceAvg.toFixed(2),alignment:"center",style:"table_body"},{text:i.total.toFixed(2),alignment:"center",style:"table_body"}]),l++;return t}).flat()]},layout:{hLineWidth:(n,a)=>.7,vLineWidth:(n,a)=>.7,hLineColor:(n,a)=>"#eeeeee",vLineColor:(n,a)=>"#eeeeee"},marginTop:20}],footer:(n,a)=>({stack:[n===a?{layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Reporte de Productos Vendidos",bold:!0,fontSize:8},{text:`P\xe1gina ${n.toString()}/${a} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:n===a?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Productos Vendidos",author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(c).open()}generateSalesGroupedByLocation(e,b,m,c=!0,n=!1){const a={content:[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:n?["20%","*","35%"]:["35%","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Per\xedodo",style:"table_header_simple",fontSize:8,bold:!0,colSpan:n?1:2,alignment:"center"},n?{text:"Beneficio",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}:{}],[{text:"Ingresos por Ventas",fontSize:10,bold:!0},{text:`${s(e.startAt).format("DD-MM-yyyy hh:mm a")} al ${s(e.endAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,colSpan:n?1:2,alignment:"center"},n?{text:e.profit.toFixed(2),fontSize:10,bold:!0,alignment:"center"}:{}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.revenue.toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:e.cardPaid.toFixed(2),fontSize:10,alignment:"center"},{text:e.cashPaid.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:1,widths:n?[100,80,80,"*","*","*","*"]:[100,80,80,90,80,"*"],body:[[{text:"Fecha",style:"table_header",alignment:"left"},{text:"No",style:"table_header"},{text:"Pago",style:"table_header"},...n?[{text:"Venta",style:"table_header",alignment:"right",colSpan:2},{},{text:"Beneficio",style:"table_header",alignment:"right",colSpan:2,margin:[0,0,10,0]},{}]:[{text:"Cajero",style:"table_header",colSpan:2},{},{text:"Venta",style:"table_header",alignment:"right",margin:[0,0,10,0]}]],...e.salesPeriodLocation.map(t=>{const l=[];if(!F.H.IsNullOrEmpty(t.location)){const i=[{text:t.location.name.toUpperCase(),colSpan:n?7:6,alignment:"center",bold:!0,fontSize:10,fillColor:"whitesmoke"},{},{},{},{},{}];n&&i.push({}),l.push(i)}return t.sales.forEach(i=>{l.push([{text:s(i.createdAt).format("DD-MM-yyyy hh:mm a"),alignment:"left",style:"table_body"},{text:i.no,alignment:"center",style:"table_body"},{text:i.paymentMethod?.name,alignment:"center",style:"table_body"},...n?[{text:i.revenue.toFixed(2),alignment:"right",colSpan:2,style:"table_body"},{},{text:i.profit.toFixed(2),alignment:"right",colSpan:2,margin:[0,0,10,0],style:"table_body"},{}]:[{text:`${i?.employee.name} ${i?.employee.lastname1} ${i?.employee.lastname2?i?.employee.lastname2:""}`,alignment:"center",style:"table_body",colSpan:2},{},{text:i.revenue.toFixed(2),alignment:"right",style:"table_body",margin:[0,0,10,0]}]])}),c||l.push([{text:"Subtotales",colSpan:3,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:"",style:"table_header"},{text:"",style:"table_header"},...n?[{text:t.sales.reduce((i,r)=>i+r.revenue,0).toFixed(2),style:"table_header",alignment:"right",colSpan:2},{},{text:t.sales.reduce((i,r)=>i+r.profit,0).toFixed(2),style:"table_header",margin:[0,0,10,0],alignment:"right",colSpan:2},{}]:[{text:"",style:"table_header",colSpan:2},{},{text:t.sales.reduce((i,r)=>i+r.revenue,0).toFixed(2),style:"table_header",margin:[0,0,10,0],alignment:"right"}]]),l}).flat(),[{text:"Totales",colSpan:3,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:"",style:"table_header"},{text:"",style:"table_header"},...n?[{text:e.salesPeriodLocation.flatMap(t=>t.sales).reduce((t,l)=>t+l.revenue,0).toFixed(2),style:"table_header",alignment:"right",colSpan:2},{},{text:e.salesPeriodLocation.flatMap(t=>t.sales).reduce((t,l)=>t+l.profit,0).toFixed(2),style:"table_header",margin:[0,0,10,0],alignment:"right",colSpan:2},{}]:[{text:"",style:"table_header",colSpan:2},{},{text:e.salesPeriodLocation.flatMap(t=>t.sales).reduce((t,l)=>t+l.revenue,0).toFixed(2),style:"table_header",margin:[0,0,10,0],alignment:"right"}]]]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20}],footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Ingresos por Ventas",bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:b.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Productos Vendidos",author:m.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:b.name}};_.createPdf(a).open()}generateBoxesReport(e,b,m,c){const n=e.reduce((t,l)=>{const i=l.location.name;return t[i]?t[i].push(l):t[i]=[l],t},{}),a={content:[{layout:{hLineWidth:(t,l)=>.5,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Resumen de Cajas",fontSize:10,bold:!0},{text:`${s(b.start).format("DD-MM-yyyy hh:mm a")} al ${s(b.end).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"}]]}},{table:{headerRows:2,widths:[90,50,100,80,60,60,80,60,100],body:[[{text:"N\xba",style:"table_header",alignment:"center"},{text:"Inicial",style:"table_header",alignment:"right"},{text:"Ingresos",style:"table_header",alignment:"right"},{text:"Devoluciones",style:"table_header",alignment:"right"},{text:"Pr\xe9stamos",style:"table_header",alignment:"right"},{text:"Dep\xf3sitos",style:"table_header",alignment:"right"},{text:"Extracciones",style:"table_header",alignment:"right"},{text:"Gastos",style:"table_header",alignment:"right"},{text:"Total",style:"table_header",alignment:"right"}],...Object.keys(n).map(t=>{const l=[];return n.hasOwnProperty(t)&&(l.push([{text:t.toUpperCase(),colSpan:9,alignment:"center",bold:!0,fontSize:10,fillColor:"whitesmoke"},{},{},{},{},{},{},{},{}]),n[t].sort((r,p)=>r.no.localeCompare(p.no)).forEach(r=>{l.push([{text:r.no,alignment:"left"},{text:r.initial.toFixed(2),alignment:"right"},{text:r.income.toFixed(2),alignment:"right"},{text:r.return.toFixed(2),alignment:"right"},{text:r.loan.toFixed(2),alignment:"right"},{text:r.depot.toFixed(2),alignment:"right"},{text:r.extraction.toFixed(2),alignment:"right"},{text:r.spent.toFixed(2),alignment:"right"},{text:(r.initial+r.income+r.depot-r.return-r.loan-r.spent-r.extraction).toFixed(2),alignment:"right"}])})),l}).flat()]},layout:{hLineWidth:(t,l)=>.7,vLineWidth:(t,l)=>0,hLineColor:(t,l)=>"#eeeeee"},marginTop:20},{table:{headerRows:1,widths:[100,100],body:[[{text:"Total Inicial:",bold:!0,margin:[5,5,0,0]},{text:`${e.reduce((t,l)=>t+l.initial,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,5,5,0]}],[{text:"Ingresos",bold:!0,margin:[5,0,0,0]},{text:`${e.reduce((t,l)=>t+l.income,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Devoluciones",bold:!0,margin:[5,0,0,0]},{text:`${e.reduce((t,l)=>t+l.return,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Pr\xe9stamos",bold:!0,margin:[5,0,0,0]},{text:` ${e.reduce((t,l)=>t+l.loan,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Dep\xf3sitos",bold:!0,margin:[5,0,0,0]},{text:`${e.reduce((t,l)=>t+l.depot,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Extracciones",bold:!0,margin:[5,0,0,0]},{text:`${e.reduce((t,l)=>t+l.extraction,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Gastos",bold:!0,margin:[5,0,0,0]},{text:`${e.reduce((t,l)=>t+l.spent,0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,0]}],[{text:"Total Final",bold:!0,margin:[5,0,0,5]},{text:`${e.reduce((t,l)=>t+(l.initial+l.income+l.depot-l.return-l.loan-l.spent-l.extraction),0).toFixed(2)}`,style:"subheader",alignment:"left",margin:[0,0,5,5]}]]},layout:{hLineWidth:(t,l)=>0,vLineWidth:(t,l)=>0,fillColor:"whitesmoke"},marginTop:20}],footer:(t,l)=>({stack:[t===l?{layout:{hLineWidth:(i,r)=>.7,vLineWidth:(i,r)=>0,hLineColor:(i,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[20,0,20,0]}:null,{table:{widths:["*","*"],body:[[{text:"Reporte Cajas",bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${l} - Fecha de impresi\xf3n ${s().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===l?[20,15,20,0]:[20,145,20,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"landscape",pageSize:"LETTER",pageMargins:[20,40,20,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Cajas",author:c.fullname,creationDate:s().toDate(),modDate:s().toDate(),producer:m.name}};_.createPdf(a).open()}#e(e){let b=e;return b=b.replace(".webp",".png"),b}static#t=this.\u0275fac=function(b){return new(b||T)};static#l=this.\u0275prov=O.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})()},90558:(N,$,S)=>{S.d($,{dX:()=>W,xN:()=>s});class s{constructor(L=10,R=1){this.length=0,this.startIndex=1,this.size=L,this.page=R}}var W=function(g){return g.pendiente="pendiente",g.parcial="parcial",g.pagada="pagada",g.cobrada="cobrada",g.cancelado="cancelado",g.fallido="fallido",g.expirado="expirado",g.devuelto="devuelto",g.dPendiente="dPendiente",g.dFallida="devoluci\xf3n fallida",g.devueltoParcial="devueltoParcial",g}(W||{})}}]);