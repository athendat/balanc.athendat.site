"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6772],{86772:(q,h,i)=>{i.r(h),i.d(h,{default:()=>G});var u=i(96814),t=i(19212),a=i(56223),d=i(24630),g=i(32296),v=i(75986),I=i(23680),c=i(64170),x=i(30617),Z=i(24516),A=i(55940),p=i(64190),C=i(94748),b=i(54855),S=i(78645),T=i(27921),w=i(21631),F=i(22096),y=i(59773),N=i(64716);const J=["signInNgForm"],U=()=>[u.Zd];function M(n,l){1&n&&(t.TgZ(0,"div",23)(1,"div",24),t._UZ(2,"img",25),t.qZA()())}function _(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",26)(1,"div",27)(2,"span",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.selectEmail(r))}),t._uU(3),t.qZA(),t.TgZ(4,"div",29),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(5,"button",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteEmail(r))}),t._UZ(6,"mat-icon",31),t.qZA()()()()}if(2&n){const e=l.$implicit;t.Q6J("value",e),t.xp6(3),t.hij(" ",e," "),t.xp6(3),t.Q6J("svgIcon","mat_solid:delete")}}function E(n,l){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," El correo electr\xf3nico es obligatorio "),t.qZA())}function k(n,l){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese un correo electr\xf3nico v\xe1lido "),t.qZA())}function L(n,l){1&n&&t._UZ(0,"mat-icon",32),2&n&&t.Q6J("svgIcon","mat_solid:visibility")}function Q(n,l){1&n&&t._UZ(0,"mat-icon",32),2&n&&t.Q6J("svgIcon","mat_solid:visibility_off")}function j(n,l){1&n&&(t.TgZ(0,"span",33),t._uU(1," Aceptar "),t.qZA())}function O(n,l){1&n&&t._UZ(0,"mat-progress-spinner",34),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}const R=()=>["/sign-up"],z=()=>["/forgot-password"],G=[{path:"",component:(()=>{class n{constructor(){this._unsubscribeAll=new S.x,this._activatedRoute=(0,t.f3M)(p.gz),this._authService=(0,t.f3M)(b.e),this._formBuilder=(0,t.f3M)(a.qu),this._router=(0,t.f3M)(p.F0)}get emails(){const e=localStorage.getItem("emails");return e?JSON.parse(e):(localStorage.setItem("emails",JSON.stringify([])),[])}ngOnInit(){this.signInForm=this._formBuilder.group({email:["",[a.kI.required,a.kI.email]],pwd:["",a.kI.required],rememberMe:[this.rememberMe]}),this.filteredEmails=this.signInForm.get("email").valueChanges.pipe((0,T.O)(null),(0,w.z)(e=>e?(0,F.of)(this.emails.filter(o=>o.includes(e.toLowerCase().trim()))):(this.signInForm.get("pwd").reset(),this.signInForm.get("rememberMe").reset(),(0,F.of)(this.emails))))}signIn(){this.signInForm.invalid||(this.signInForm.disable(),delete this.signInForm.value.rememberMe,this._authService.signIn(this.signInForm.value).pipe((0,y.R)(this._unsubscribeAll),(0,N.x)(()=>{this.signInForm.enable(),this.signInNgForm.resetForm()})).subscribe(()=>{const e=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this.rememberMe(),this._router.navigateByUrl(e)},e=>{this.signInForm.enable(),(406===e.status||401===e.status)&&this._router.navigate(["confirmation-required"])}))}selectEmail(e){this.signInForm.patchValue({email:e,rememberMe:!0,pwd:""})}deleteEmail(e){const o=this.emails,s=o.findIndex(r=>r===e);if(-1!==s){o.splice(s,1);const r=JSON.stringify(o);localStorage.setItem("emails",r),this.signInForm.get("email").setValue("")}}rememberMe(){const e=this.signInForm.get("email").value;if(this.signInForm.get("rememberMe").value){const o=this.emails,s=o.findIndex(m=>m===e);-1===s?o.push(e):o[s]=e;const r=JSON.stringify(o);localStorage.setItem("emails",r)}else this.deleteEmail(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["auth-sign-in"]],viewQuery:function(o,s){if(1&o&&t.Gf(J,5),2&o){let r;t.iGM(r=t.CRH())&&(s.signInNgForm=r.first)}},standalone:!0,features:[t.jDz],decls:47,vars:19,consts:[[1,"flex","flex-col","items-center","flex-auto","min-w-0","sm:flex-row","md:items-start","sm:justify-center","md:justify-start"],[1,"w-full","px-4","py-8","border-l","md:flex","md:items-center","md:justify-end","sm:w-auto","md:h-full","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","mx-auto","max-w-80","sm:w-80","sm:mx-0"],["height","72","width","380","ngSrc","/c_scale,h_72/v1710869343/balanc/logos/logo-text_jo2r1s.webp","alt","Logo image",1,"w-auto","h-18","dark:hidden","aspect-auto"],["height","72","width","380","ngSrc","/c_scale,h_72/v1710869344/balanc/logos/logo-text-on-dark_wvkqfx.webp","alt","Logo image",1,"hidden","w-auto","h-18","dark:flex","aspect-auto"],[1,"mt-8","text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full","fuse-mat-dense"],["id","email","matInput","",3,"formControlName","matAutocomplete"],[1,"ath-autocomplete"],["emailAutocomplete","matAutocomplete"],["id","pwd","matInput","",3,"type","formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon"],[1,"inline-flex","items-end","justify-between","w-full","mt-1.5"],[3,"color","formControlName"],[1,"font-medium","text-md","text-primary-500","hover:underline",3,"routerLink"],["mat-raised-button","",1,"w-full","mt-6","fuse-mat-button-large","bg-gradient-to-r","from-primary-500","to-primary-800","hover:bg-gradient-to-bl",3,"disabled","click"],["class","text-white"],[1,"relative","items-center","justify-center","flex-auto","hidden","w-2/3","h-screen","p-16","overflow-hidden","bg-white","bg-cover","dark:bg-transparent","md:flex","lg:px-28","dark:border-r"],[1,"relative","z-10","w-2/3","aspect-auto"],["ngSrc","/c_scale,h_564/v1710869734/balanc/illustrations/auth-dark_lvzt8p.webp","height","564","width","564","alt","Imagen de Inicio"],[1,"w-full",3,"value"],[1,"grid","w-full","grid-cols-6"],[1,"flex","items-center","col-span-4","truncate","sm:col-span-5",3,"click"],[1,"flex","items-center","justify-center","w-full","col-span-2","sm:col-span-1",3,"click"],["mat-icon-button","",1,"p-2","leading-6","h-7","w-7","min-w-6","min-h-6",3,"click"],[1,"mr-0","icon-size-4",3,"svgIcon"],[1,"icon-size-5",3,"svgIcon"],[1,"text-white"],[3,"diameter","mode"],["class","w-full",3,"value"]],template:function(o,s){if(1&o){const r=t.EpF();t.TgZ(0,"div",0),t.YNc(1,M,3,0),t.EqZ(2,1,U),t.FN0(),t.TgZ(4,"div",1)(5,"div",2)(6,"div"),t._UZ(7,"img",3)(8,"img",4),t.qZA(),t.TgZ(9,"div",5),t._uU(10,"Iniciar Sesi\xf3n"),t.qZA(),t.TgZ(11,"div",6)(12,"div"),t._uU(13,"\xbfA\xfan no tiene cuenta?"),t.qZA(),t.TgZ(14,"a",7),t._uU(15,"Registrarme "),t.qZA()(),t.TgZ(16,"form",8,9)(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Correo electr\xf3nico"),t.qZA(),t._UZ(21,"input",11),t.TgZ(22,"mat-autocomplete",12,13),t.SjG(24,_,7,3,"mat-option",35,t.x6l),t.ALo(26,"async"),t.qZA(),t.YNc(27,E,2,0,"mat-error")(28,k,2,0,"mat-error"),t.qZA(),t.TgZ(29,"mat-form-field",10)(30,"mat-label"),t._uU(31,"Contrase\xf1a"),t.qZA(),t._UZ(32,"input",14,15),t.TgZ(34,"button",16),t.NdJ("click",function(){t.CHM(r);const f=t.MAs(33);return t.KtG(f.type="password"===f.type?"text":"password")}),t.YNc(35,L,1,1,"mat-icon",17)(36,Q,1,1,"mat-icon",17),t.qZA(),t.TgZ(37,"mat-error"),t._uU(38," La contrase\xf1a es obligatoria "),t.qZA()(),t.TgZ(39,"div",18)(40,"mat-checkbox",19),t._uU(41," Recordarme "),t.qZA(),t.TgZ(42,"a",20),t._uU(43," \xbfOlvid\xf3 su contrase\xf1a? "),t.qZA()(),t.TgZ(44,"button",21),t.NdJ("click",function(){return s.signIn()}),t.YNc(45,j,2,0,"span",22)(46,O,1,2),t.qZA()()()()()}if(2&o){const r=t.MAs(23),m=t.MAs(33);t.xp6(14),t.Q6J("routerLink",t.DdM(17,R)),t.xp6(2),t.Q6J("formGroup",s.signInForm),t.xp6(5),t.Q6J("formControlName","email")("matAutocomplete",r),t.xp6(3),t.wJu(t.lcZ(26,15,s.filteredEmails)),t.xp6(3),t.um2(27,s.signInForm.get("email").hasError("required")?27:-1),t.xp6(),t.um2(28,s.signInForm.get("email").hasError("email")?28:-1),t.xp6(4),t.Q6J("type","password")("formControlName","pwd"),t.xp6(3),t.um2(35,"password"===m.type?35:-1),t.xp6(),t.um2(36,"text"===m.type?36:-1),t.xp6(4),t.Q6J("color","primary")("formControlName","rememberMe"),t.xp6(2),t.Q6J("routerLink",t.DdM(18,z)),t.xp6(2),t.Q6J("disabled",s.signInForm.disabled),t.xp6(),t.um2(45,s.signInForm.disabled?46:45)}},dependencies:[u.Ov,a.u5,a._Y,a.Fj,a.JJ,a.JL,d.Bb,d.XC,I.ey,d.ZL,g.ot,g.lW,g.RK,v.p9,v.oG,c.lN,c.KE,c.hX,c.TO,c.R9,x.Ps,x.Hw,Z.c,Z.Nt,I.Ng,A.Cq,A.Ou,u.Zd,a.UX,a.sg,a.u,p.rH],encapsulation:2,data:{animation:C.L}})}return n})()}]}}]);