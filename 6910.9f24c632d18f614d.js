"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6910],{41784:(k,x,n)=>{n.d(x,{y:()=>h});var t=n(42495),l=n(94748),a=n(19212);function b(s,d){1&s&&(a.TgZ(0,"div",0),a.Hsn(1),a.qZA(),a.TgZ(2,"div",1),a.Hsn(3,1),a.qZA())}function v(s,d){1&s&&(a.TgZ(0,"div",3),a.Hsn(1,3),a.qZA()),2&s&&a.Q6J("@expandCollapse",void 0)}function A(s,d){if(1&s&&(a.Hsn(0,2),a.YNc(1,v,2,1,"div",2)),2&s){const c=a.oxw();a.xp6(),a.um2(1,c.expanded?1:-1)}}const C=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],f=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let h=(()=>{class s{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(c){"expanded"in c&&(this.expanded=(0,t.Ig)(c.expanded.currentValue)),"flippable"in c&&(this.flippable=(0,t.Ig)(c.flippable.currentValue))}static#t=this.\u0275fac=function(m){return new(m||s)};static#e=this.\u0275cmp=a.Xpm({type:s,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(m,p){2&m&&a.Tol(p.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[a.TTD,a.jDz],ngContentSelectors:f,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(m,p){1&m&&(a.F$t(C),a.YNc(0,b,4,0)(1,A,2,1)),2&m&&(a.um2(0,p.flippable?0:-1),a.xp6(),a.um2(1,p.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:l.L}})}return s})()},83788:(k,x,n)=>{n.d(x,{w:()=>P});var t=n(19212),l=n(56223),a=n(78645),b=n(59773),v=n(27921),A=n(37398),C=n(83620),f=n(64170),h=n(24516),s=n(32296),d=n(30617),c=n(24630),m=n(98525),p=n(92596),F=n(96814),w=n(39821),y=n(50967);let Z=(()=>{class o{constructor(e){this.apolloProvider=e,this._apollo=this.apolloProvider.use("BALANC")}getCardType(e){return this._apollo.query({query:w.NQ,variables:{cardNumber:e},errorPolicy:"all"})}static#t=this.\u0275fac=function(i){return new(i||o)(t.LFG(y._M))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var B=n(23680);const T=["bankAccountNgForm"];function N(o,u){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"N\xfamero de Cuenta"),t.qZA())}function U(o,u){if(1&o&&t._UZ(0,"img",10),2&o){const e=t.oxw();t.Q6J("src",e.cardImage,t.LSH)}}function I(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El n\xfamero de cuenta es obligatorio "),t.qZA())}function J(o,u){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Banco"),t.qZA())}function E(o,u){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=u.$implicit;t.Q6J("value",e),t.xp6(),t.Oqu(e)}}function Q(o,u){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Moneda"),t.qZA())}function Y(o,u){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const e=u.$implicit;t.Q6J("value",e.iso),t.xp6(),t.hij(" ",e.iso," ")}}function D(o,u){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Beneficiario"),t.qZA())}function S(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El beneficiario no presenta un formato v\xe1lido "),t.qZA())}function _(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El beneficiario es obligatorio "),t.qZA())}function L(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.removeBankAccount(r.index))}),t._UZ(2,"mat-icon",14),t.qZA()()}2&o&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:delete"))}let P=(()=>{class o{constructor(e,i){this._changeDetectorRef=e,this._cardTypesService=i,this.currencies=[],this.remove=new t.vpe,this.cardImage=null,this.cubanBanks=["Metropolitano (BMP)","Popular de Ahorro (BPA)","Cr\xe9dito y Comercio (BANDEC)"],this._unsubscribeAll=new a.x}ngOnInit(){this.bankAccountForm.get("cardType").value&&this.fillFormData(this.bankAccountForm.get("cardType").value),this.filteredBanks=this.bankAccountForm.get("bank").valueChanges.pipe((0,b.R)(this._unsubscribeAll),(0,v.O)(""),(0,A.U)(e=>e?this.cubanBanks.filter(i=>i.toLowerCase().includes(e.toLowerCase())):[])),this.bankAccountForm.get("no").valueChanges.pipe((0,C.b)(600),(0,b.R)(this._unsubscribeAll)).subscribe(e=>{e.length>5&&e.length<11&&this._cardTypesService.getCardType(e).subscribe(({})=>{}),e||(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}removeBankAccount(e){this.remove.next(e)}clearForm(){this.bankAccountNgForm.resetForm()}fillFormData(e){e?(this.bankAccountForm.get("bank").setValue(e.name),this.bankAccountForm.get("currency").setValue(e.currency),this.bankAccountForm.get("bank").disable(),this.bankAccountForm.get("currency").disable(),("BMPU"===e.bank||"BMPUW"===e.bank)&&(this.cardImage="assets/images/cards/banmet.webp"),("BPAU"===e.bank||"BPAUW"===e.bank)&&(this.cardImage="assets/images/cards/bpa.webp"),("BANU"===e.bank||"BANW"===e.bank)&&(this.cardImage="assets/images/cards/bandec.webp"),"AIS"===e.name&&(this.cardImage="assets/images/cards/ais.webp"),"MN"===e.currency&&this.bankAccountForm.get("currency").setValue("CUP"),"USD"===e.currency&&this.bankAccountForm.get("currency").setValue("USD"),this.bankAccountForm.get("cardType").setValue(e._id)):(this.bankAccountForm.get("bank").enable(),this.bankAccountForm.get("currency").enable(),this.bankAccountForm.get("cardType").setValue(""),this.cardImage=null)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(t.sBO),t.Y36(Z))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["bank-account"]],viewQuery:function(i,r){if(1&i&&t.Gf(T,5),2&i){let g;t.iGM(g=t.CRH())&&(r.bankAccountNgForm=g.first)}},inputs:{currencies:"currencies",bankAccountForm:"bankAccountForm",first:"first",last:"last",index:"index"},outputs:{remove:"remove"},standalone:!0,features:[t.jDz],decls:29,vars:33,consts:[[1,"grid","grid-cols-1","gap-3","md:grid-cols-2",3,"formGroup"],[1,"flex-auto","mat-fuse-dense"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","",3,"type","minlength","maxlength","formControlName","placeholder","spellcheck"],["class","w-12 h-8","matSuffix","",3,"src"],["maxlength","255","matInput","",3,"type","formControlName","matAutocomplete","placeholder","spellcheck"],["auto","matAutocomplete"],["required","",3,"formControlName","placeholder"],["maxlength","255","matInput","",3,"type","formControlName","placeholder","spellcheck"],["class","flex items-center w-10 pl-2"],["matSuffix","",1,"w-12","h-8",3,"src"],[3,"value"],[1,"flex","items-center","w-10","pl-2"],["mat-icon-button","","matTooltip","Eliminar cuenta",1,"w-8","h-8","min-h-8",3,"click"],[1,"icon-size-5",3,"svgIcon"]],template:function(i,r){if(1&i&&(t.TgZ(0,"form",0)(1,"mat-form-field",1),t.YNc(2,N,2,0,"mat-label"),t._UZ(3,"mat-icon",2)(4,"input",3),t.YNc(5,U,1,1,"img",4)(6,I,2,0,"mat-error"),t.qZA(),t.TgZ(7,"mat-form-field",1),t.YNc(8,J,2,0,"mat-label"),t._UZ(9,"mat-icon",2)(10,"input",5),t.TgZ(11,"mat-autocomplete",null,6),t.SjG(13,E,2,2,"mat-option",11,t.x6l),t.ALo(15,"async"),t.qZA()(),t.TgZ(16,"mat-form-field",1),t.YNc(17,Q,2,0,"mat-label"),t._UZ(18,"mat-icon",2),t.TgZ(19,"mat-select",7),t.SjG(20,Y,2,2,"mat-option",11,t.x6l),t.qZA()(),t.TgZ(22,"mat-form-field",1),t.YNc(23,D,2,0,"mat-label"),t._UZ(24,"mat-icon",2)(25,"input",8),t.YNc(26,S,2,0,"mat-error")(27,_,2,0,"mat-error"),t.qZA(),t.YNc(28,L,3,1,"div",9),t.qZA()),2&i){const g=t.MAs(12);t.Q6J("formGroup",r.bankAccountForm),t.xp6(2),t.um2(2,r.first?2:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:credit_card"),t.xp6(),t.Q6J("type","text")("minlength",16)("maxlength",24)("formControlName","no")("placeholder","Ejemplo: 1234567890123456")("spellcheck",!1),t.xp6(),t.um2(5,r.cardImage?5:-1),t.xp6(),t.um2(6,r.bankAccountForm.get("no").hasError("required")?6:-1),t.xp6(2),t.um2(8,r.first?8:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:account_balance"),t.xp6(),t.Q6J("type","text")("formControlName","bank")("matAutocomplete",g)("placeholder","Ejemplo: Banco Financiero")("spellcheck",!1),t.xp6(3),t.wJu(t.lcZ(15,31,r.filteredBanks)),t.xp6(4),t.um2(17,r.first?17:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:monetization_on"),t.xp6(),t.Q6J("formControlName","currency")("placeholder","Ejemplo: USD"),t.xp6(),t.wJu(r.currencies),t.xp6(3),t.um2(23,r.first?23:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:business"),t.xp6(),t.Q6J("type","text")("formControlName","beneficiary")("placeholder","Ejemplo: Empresa SRL")("spellcheck",!1),t.xp6(),t.um2(26,r.bankAccountForm.get("beneficiary").hasError("pattern")?26:-1),t.xp6(),t.um2(27,r.bankAccountForm.get("beneficiary").hasError("required")?27:-1),t.xp6(),t.um2(28,r.first&&r.last?-1:28)}},dependencies:[F.Ov,c.Bb,c.XC,B.ey,c.ZL,s.ot,s.RK,f.lN,f.KE,f.hX,f.TO,f.qo,f.R9,d.Ps,d.Hw,h.c,h.Nt,m.LD,m.gD,p.AV,p.gM,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.sg,l.u],encapsulation:2,changeDetection:0})}return o})()}}]);