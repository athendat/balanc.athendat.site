"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[707],{41784:(Ae,it,d)=>{d.d(it,{y:()=>x});var R=d(42495),_=d(94748),b=d(19212);function t(U,at){1&U&&(b.TgZ(0,"div",0),b.Hsn(1),b.qZA(),b.TgZ(2,"div",1),b.Hsn(3,1),b.qZA())}function q(U,at){1&U&&(b.TgZ(0,"div",3),b.Hsn(1,3),b.qZA()),2&U&&b.Q6J("@expandCollapse",void 0)}function mt(U,at){if(1&U&&(b.Hsn(0,2),b.YNc(1,q,2,1,"div",2)),2&U){const E=b.oxw();b.xp6(),b.um2(1,E.expanded?1:-1)}}const pt=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],v=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];let x=(()=>{class U{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(E){"expanded"in E&&(this.expanded=(0,R.Ig)(E.expanded.currentValue)),"flippable"in E&&(this.flippable=(0,R.Ig)(E.flippable.currentValue))}static#t=this.\u0275fac=function(h){return new(h||U)};static#e=this.\u0275cmp=b.Xpm({type:U,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(h,l){2&h&&b.Tol(l.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],standalone:!0,features:[b.TTD,b.jDz],ngContentSelectors:v,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],["class","fuse-card-expansion"],[1,"fuse-card-expansion"]],template:function(h,l){1&h&&(b.F$t(pt),b.YNc(0,t,4,0)(1,mt,2,1)),2&h&&(b.um2(0,l.flippable?0:-1),b.xp6(),b.um2(1,l.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:_.L}})}return U})()},16422:(Ae,it,d)=>{d.r(it),d.d(it,{default:()=>Ua});var R=d(78645),_=d(59773),b=d(84154),t=d(19212),q=d(64190);let mt=(()=>{class o{constructor(e,n,i){this._activatedRoute=e,this._changeDetectorRef=n,this._router=i,this.merchantId="",this._unsubscribeAll=new R.x}ngOnInit(){this._activatedRoute.params.pipe((0,_.R)(this._unsubscribeAll)).subscribe(({merchantId:e})=>{void 0!==e&&(this.merchantId=e,this._changeDetectorRef.markForCheck())})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(q.gz),t.Y36(t.sBO),t.Y36(q.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ath-commercial"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"ath-content-menu")},dependencies:[b.p],encapsulation:2,changeDetection:0})}return o})();var pt=d(60725),v=d(32296),x=d(30617);const U=["invoiceDetail"],at=()=>["../"];let E=(()=>{class o{constructor(){}ngOnInit(){}generatePDF(e){this.invoiceDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["invoice-details-header"]],viewQuery:function(n,i){if(1&n&&t.Gf(U,5),2&n){let a;t.iGM(a=t.CRH())&&(i.invoiceDetailsComponent=a.first)}},standalone:!0,features:[t.jDz],decls:35,vars:9,consts:[["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-center"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"],["invoiceDetail",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Facturas"),t.qZA()()(),t.TgZ(16,"div",9)(17,"a",10),t._UZ(18,"mat-icon",6),t.TgZ(19,"span",11),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",12)(22,"div",13)(23,"span"),t._uU(24,"Detalles de la factura"),t.qZA()()()(),t.TgZ(25,"div",14)(26,"button",15),t.NdJ("click",function(){return i.generatePDF("open")}),t._UZ(27,"mat-icon",16),t.qZA(),t.TgZ(28,"button",15),t.NdJ("click",function(){return i.generatePDF("download")}),t._UZ(29,"mat-icon",16),t.qZA(),t.TgZ(30,"button",15),t.NdJ("click",function(){return i.generatePDF("print")}),t._UZ(31,"mat-icon",16),t.qZA()()(),t.TgZ(32,"div",17),t._UZ(33,"invoice-details",null,18),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(),t.Q6J("routerLink",t.DdM(8,at)),t.xp6(3),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(9),t.Q6J("svgIcon","heroicons_outline:eye"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:download"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:printer"))},dependencies:[pt._,x.Ps,x.Hw,v.ot,v.lW,q.rH],encapsulation:2,changeDetection:0})}return o})();var h=d(96814),l=d(56223),g=d(64170),D=d(24516),j=d(77988),I=d(21476),T=d(13566),N=d(22096),et=d(63019),G=d(83620),st=d(27921),F=d(94664),P=d(37398),It=d(71191),z=d(83604),Y=d(94748),rt=d(8606),A=d(42090),ft=function(o){return o.PendientePago="Pendiente de Pago",o.PagadaParcialmente="Pagada Parcialmente",o.PagadaTotalmente="Pagada Totalmente",o.Cancelada="Cancelada",o.Vencida="Vencida",o}(ft||{}),K=d(92596),Q=d(17700),W=d(56278),Ct=d(70390),B=d(22939),S=d(84221),X=d(95407);function Ft(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"mat-form-field",20),t._UZ(2,"mat-icon",21)(3,"input",22),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","mat_solid:search"),t.xp6(),t.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar facturas")}}function St(o,s){1&o&&t.GkF(0)}const Ut=()=>[""];function Ot(o,s){if(1&o&&(t.TgZ(0,"div",50)(1,"span"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.AsE("",t.xi3(3,2,e.total,t.DdM(5,Ut))," ",e.currency,"")}}function Nt(o,s){1&o&&t._UZ(0,"mat-icon",41),2&o&&t.Q6J("svgIcon","mat_solid:done")}function Qt(o,s){1&o&&t._UZ(0,"mat-icon",41),2&o&&t.Q6J("svgIcon","mat_solid:done")}function Mt(o,s){1&o&&t._UZ(0,"mat-icon",41),2&o&&t.Q6J("svgIcon","mat_solid:done")}function Et(o,s){1&o&&t._UZ(0,"mat-icon",41),2&o&&t.Q6J("svgIcon","mat_solid:done")}const Pt=(o,s,e,n,i)=>({"bg-amber-50 text-amber-700":o,"bg-blue-50 text-blue-700":s,"bg-green-50 text-green-700":e,"bg-red-50 text-red-700":n,"bg-pink-50 text-pink-700":i}),Jt=o=>[o];function Lt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",35),t._uU(4),t.qZA(),t.TgZ(5,"div",29),t.SjG(6,Ot,4,6,"div",51,t.x6l),t.qZA(),t.TgZ(8,"div",36),t._uU(9),t.qZA(),t.TgZ(10,"div",37)(11,"span",38),t._uU(12),t.qZA()(),t.TgZ(13,"div",39)(14,"button",40),t._UZ(15,"mat-icon",41),t.qZA(),t.TgZ(16,"div")(17,"button",42),t._UZ(18,"mat-icon",41),t.qZA(),t.TgZ(19,"mat-menu",null,43)(21,"button",44)(22,"div",45),t.YNc(23,Nt,1,1,"mat-icon",46),t.qZA(),t.TgZ(24,"span",47),t._uU(25,"Pendiente de Pago"),t.qZA()(),t.TgZ(26,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updateStatus(a,"Pagada Parcialmente"))}),t.TgZ(27,"div",45),t.YNc(28,Qt,1,1,"mat-icon",46),t.qZA(),t.TgZ(29,"span",47),t._uU(30,"Pagada Parcialmente"),t.qZA()(),t.TgZ(31,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updateStatus(a,"Pagada Totalmente"))}),t.TgZ(32,"div",45),t.YNc(33,Mt,1,1,"mat-icon",46),t.qZA(),t.TgZ(34,"span",47),t._uU(35,"Pagada Totalmente"),t.qZA()(),t.TgZ(36,"button",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.cancelInvoice(a))}),t.TgZ(37,"div",45),t.YNc(38,Et,1,1,"mat-icon",46),t.qZA(),t.TgZ(39,"span",47),t._uU(40,"Cancelada"),t.qZA()()()(),t.TgZ(41,"button",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.deleteInvoice(a))}),t._UZ(42,"mat-icon",41),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.MAs(20),i=t.oxw(4);t.xp6(2),t.hij(" ",e.no," "),t.xp6(2),t.hij(" ",e.quotationNo," "),t.xp6(2),t.wJu(i.getTotalAmount(e)),t.xp6(3),t.hij(" ",e.quotationId.goodsData.length," "),t.xp6(),t.Q6J("matTooltip","Cancelada"===e.status?"Motivo: "+e.canceledReason:"")("ngClass",t.qbA(22,Pt,"Pendiente de Pago"===e.status,"Pagada Parcialmente"===e.status,"Pagada Totalmente"===e.status,"Cancelada"===e.status,"Vencida"===e.status)),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Q6J("routerLink",t.VKq(28,Jt,e._id)),t.xp6(),t.Q6J("svgIcon","mat_solid:visibility"),t.xp6(2),t.Q6J("matMenuTriggerFor",n)("disabled",e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.xp6(),t.Q6J("svgIcon","heroicons_solid:clipboard-list"),t.xp6(3),t.Q6J("disabled",!0),t.xp6(2),t.um2(23,e.status.includes("Pendiente de Pago")?23:-1),t.xp6(3),t.Q6J("disabled",e.status.includes("Pagada Parcialmente")||e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.xp6(2),t.um2(28,e.status.includes("Pagada Parcialmente")?28:-1),t.xp6(3),t.Q6J("disabled",e.status.includes("Pagada Totalmente")||e.status.includes("Cancelada")),t.xp6(2),t.um2(33,e.status.includes("Pagada Totalmente")?33:-1),t.xp6(3),t.Q6J("disabled",!e.status.includes("Pendiente de Pago")),t.xp6(2),t.um2(38,e.status.includes("Cancelada")?38:-1),t.xp6(3),t.Q6J("matTooltip","Eliminar")("disabled",!e.status.includes("Pendiente de Pago")),t.xp6(),t.Q6J("svgIcon","heroicons_solid:trash")}}function Bt(o,s){1&o&&t.SjG(0,Lt,43,30,"div",52,t.QCX().trackByFn),2&o&&t.wJu(s)}const jt=o=>({"pointer-events-none":o}),Gt=()=>[10,25,50,100];function vt(o,s){if(1&o&&(t.TgZ(0,"div",23),t.YNc(1,St,1,0,"ng-container",24),t.TgZ(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28),t._uU(6," N\xfamero "),t.qZA(),t.TgZ(7,"div",28),t._uU(8," N.Factura "),t.qZA(),t.TgZ(9,"div",29),t._uU(10," Importe "),t.qZA(),t.TgZ(11,"div",30),t._uU(12," Cantidad "),t.qZA(),t.TgZ(13,"div",31),t._uU(14," Estado "),t.qZA(),t.TgZ(15,"div",32),t._uU(16," Acciones "),t.qZA()(),t.YNc(17,Bt,2,0),t.ALo(18,"async"),t._UZ(19,"mat-paginator",33),t.qZA()()()),2&o){t.oxw();const e=t.MAs(28),n=t.oxw();let i;t.xp6(),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Q6J("mat-sort-header","no"),t.xp6(2),t.Q6J("mat-sort-header","quotationNo"),t.xp6(6),t.Q6J("mat-sort-header","status"),t.xp6(4),t.um2(17,(i=t.lcZ(18,11,n.invoices$))?17:-1,i),t.xp6(2),t.Q6J("ngClass",t.VKq(13,jt,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",t.DdM(15,Gt))("showFirstLastButtons",!0)}}function Ht(o,s){}function zt(o,s){if(1&o&&t.YNc(0,Ht,0,0,"ng-template",53),2&o){t.oxw();const e=t.MAs(28),n=t.MAs(30),i=t.oxw();t.Q6J("ngTemplateOutlet",i.filterInputControl.value?e:n)}}const bt=o=>({"bg-amber-500 text-amber-50":o}),Yt=o=>({"bg-blue-500 text-blue-50":o}),$t=o=>({"bg-green-500 text-green-50":o}),Vt=o=>({"bg-red-500 text-red-50":o}),Kt=o=>({"bg-pink-500 text-pink-50":o});function Wt(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",54)(1,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Pendiente de Pago"!==i.filterInputControl.value?"Pendiente de Pago":""))}),t.TgZ(2,"span",56),t._uU(3,"Pendiente de Pago"),t.qZA(),t._UZ(4,"div",57),t.qZA(),t.TgZ(5,"button",58),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Pagada Parcialmente"!==i.filterInputControl.value?"Pagada Parcialmente":""))}),t.TgZ(6,"span",56),t._uU(7,"Pagada Parcialmente"),t.qZA(),t._UZ(8,"div",59),t.qZA(),t.TgZ(9,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Pagada Totalmente"!==i.filterInputControl.value?"Pagada Totalmente":""))}),t.TgZ(10,"span",56),t._uU(11,"Pagada Totalmente"),t.qZA(),t._UZ(12,"div",61),t.qZA(),t.TgZ(13,"button",62),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Cancelada"!==i.filterInputControl.value?"Cancelada":""))}),t.TgZ(14,"span",56),t._uU(15,"Canceladas"),t.qZA(),t._UZ(16,"div",63),t.qZA(),t.TgZ(17,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Vencida"!==i.filterInputControl.value?"Vencida":""))}),t.TgZ(18,"span",56),t._uU(19,"Vencidas"),t.qZA(),t._UZ(20,"div",65),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(),t.Q6J("ngClass",t.VKq(5,bt,"Pendiente de Pago"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(7,Yt,"Pagada Parcialmente"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(9,$t,"Pagada Totalmente"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(11,Vt,"Cancelada"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(13,Kt,"Vencida"===e.filterInputControl.value))}}function Xt(o,s){if(1&o&&(t.TgZ(0,"div",66),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.hij(" ",e.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha creado ninguna factura a\xfan!"," ")}}const te=()=>["Super Administrador"];function ee(o,s){1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",5),t._UZ(9,"mat-icon",7),t.TgZ(10,"a",8),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",5),t._UZ(13,"mat-icon",7),t.TgZ(14,"a",9),t._uU(15,"Facturas"),t.qZA()()(),t.TgZ(16,"div",10)(17,"a",11),t._UZ(18,"mat-icon",7),t.TgZ(19,"span",12),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",14),t._uU(23," Facturas "),t.qZA()()(),t.YNc(24,Ft,4,4,"div",15),t.qZA(),t.YNc(25,vt,20,16,"div",16)(26,zt,1,1)(27,Wt,21,15,"ng-template",null,17,t.W1O)(29,Xt,2,1,"ng-template",null,18,t.W1O),t.qZA()),2&o&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(6),t.Q6J("ngxPermissionsExcept",t.DdM(6,te)),t.xp6(),t.um2(25,s.length>0?25:26))}let oe=(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._dialog=n,this._fuseConfirmationService=i,this._invoiceService=a,this._snackBar=r,this.store=u,this.isLoading=!1,this.searchInputControl=new l.NI(null),this.filterInputControl=new l.NI(""),this._unsubscribeAll=new R.x}ngOnInit(){this.invoices$=this.store.select(It.vm),this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,st.O)(null),(0,F.w)(e=>null!==e?(this.isLoading=!0,this._invoiceService.getInvoices(0,20,"createdAt","desc",e,this.filterInputControl.value)):(0,N.of)()),(0,P.U)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,F.w)(e=>this._invoiceService.getInvoices(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,et.T)(this._sort.sortChange,this._paginator.page).pipe((0,F.w)(()=>(this.isLoading=!0,this._invoiceService.getInvoices(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,P.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteInvoice(e){this._fuseConfirmationService.open({title:"Eliminar Factura",message:`\xbfEst\xe1 seguro que desea eliminar la factura # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._invoiceService.deleteInvoice(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}updateStatus(e,n){this._fuseConfirmationService.open({title:"Actualizar estado",message:`\xbfEst\xe1 seguro desea actualizar el estado de la factura # ${e.no} a ${n} `,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._invoiceService.updateStatus(e._id,n).subscribe(r=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}cancelInvoice(e){this._dialog.open(rt.g,{data:{title:"Cancelar Factura",message:`\xbfEst\xe1 seguro desea cancelar la factura # ${e.no}`,rejectedReason:e.canceledReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._invoiceService.updateStatus(e._id,ft.Cancelada,i.reason).subscribe(r=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}getTotalAmount(e){return e.quotationId.goodsData.reduce((n,{currency:i})=>{if(!n.some(a=>a.currency===i)){const a=e.quotationId.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,u)=>r+u,0);n.push({currency:i,total:a})}return n},[])}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(Q.uw),t.Y36(W.R),t.Y36(Ct.x),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["commercial-invoices"]],viewQuery:function(n,i){if(1&n&&(t.Gf(I.NW,5),t.Gf(T.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i._paginator=a.first),t.iGM(a=t.CRH())&&(i._sort=a.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","flex flex-col flex-auto min-w-0 sm:absolute sm:inset-0  bg-card dark:bg-transparent overflow-y-auto","cdkScrollable",""],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],["class","flex flex-col flex-auto"],["filter",""],["noInvoices",""],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64","w-full"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-col","flex-auto"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","invoices-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-8","mr-1","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","invoices-table","md:px-8"],[1,"whitespace-nowrap"],[1,"truncate","text-center"],[1,"flex","h-7","items-center","text-center","lock","truncate","rounded-full","dark:bg-white","dark:bg-opacity-5","mr-4","delay-100",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","justify-end","gap-2","flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","matTooltip","Cambiar estado",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor","disabled"],["listStatusMenu","matMenu"],["mat-menu-item","",1,"grid","grid-cols-4",3,"disabled"],[1,"col-span-1"],["class","icon-size-5",3,"svgIcon"],[1,"col-span-3"],["mat-menu-item","",1,"grid","grid-cols-4",3,"disabled","click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","disabled","click"],[1,"flex","flex-col","items-end"],["class","flex flex-col items-end"],["class","grid items-center gap-4 px-6 py-3 border-b invoices-table md:px-8"],[3,"ngTemplateOutlet"],[1,"self-end","h-10","mt-7","mb-3","md:mt-10","md:mb-5","pr-2","pl-2","sm:pr-6","w-full","sm:w-11/12","md:w-full","lg:w-11/12","xl:w-9/12","flex","justify-around"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-amber-700","transition-all","ease-in-out","delay-100","bg-amber-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-amber-500","hover:text-amber-50",3,"ngClass","click"],[1,"ml-2","mr-1","text-lg","hidden","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-blue-700","transition-all","ease-in-out","delay-100","bg-blue-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-blue-500","hover:text-blue-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","mr-1","h-full","text-green-700","transition-all","ease-in-out","delay-100","bg-green-50","border-0","rounded-full","w-36","md:w-auto","hover:bg-green-500","hover:text-green-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-green-500","md:hidden"],[1,"flex","justify-center","items-center","pl-6","pr-6","md:pr-4","md:pl-4","h-full","text-red-700","transition-all","ease-in-out","delay-50","bg-red-100","border-0","rounded-full","w-36","md:w-auto","hover:bg-red-500","hover:text-red-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"flex","justify-center","items-center","ml-1","sm:ml-0","pl-6","pr-6","md:pr-4","md:pl-4","h-full","text-pink-700","transition-all","ease-in-out","delay-50","bg-pink-100","border-0","rounded-full","w-36","md:w-auto","hover:bg-pink-500","hover:text-pink-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-pink-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(t.YNc(0,ee,31,7,"div",0),t.ALo(1,"async")),2&n){let a;t.um2(0,(a=t.lcZ(1,1,i.invoices$))?0:-1,a)}},dependencies:[h.Ov,h.H9,v.ot,v.lW,g.lN,g.KE,g.qo,x.Ps,x.Hw,D.c,D.Nt,j.Tx,X.PQ,j.VK,j.OP,j.p6,I.TU,I.NW,T.JX,T.YE,T.nU,K.AV,K.gM,h.mk,l.UX,l.Fj,l.JJ,l.oH,q.rH],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})();var yt=d(14137);const wt=o=>o.paymentConditions,Zt=((0,S.P1)(wt,o=>o.paymentCondition),(0,S.P1)(wt,o=>o.paymentConditions));var c=d(60738),m=d(75986),f=d(87466),y=d(82599),C=d(55497),k=d(53374),lt=d(29643);class ot{}var ne=d(25021);function ao(o,s){1&o&&(t.TgZ(0,"h2",7),t._uU(1," Agregar forma de pago"),t.qZA())}function so(o,s){1&o&&(t.TgZ(0,"h2",7),t._uU(1,"Editar forma de pago "),t.qZA())}function ro(o,s){1&o&&(t.TgZ(0,"h2",7),t._uU(1,"Detalles del forma de pago"),t.qZA())}function lo(o,s){if(1&o&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"span",14),t._uU(8),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(8),t.Oqu(e.data.paymentCondition.name||"Sin nombre")}}function co(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre es obligatorio. "),t.qZA())}function uo(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre debe contener entre 3 y 255 caracteres. "),t.qZA())}function mo(o,s){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Porciento"),t.qZA())}function po(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El porciento es obligatorio "),t.qZA())}function fo(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El valor de este campo debe estar entre 0 y 100 "),t.qZA())}function _o(o,s){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(),t.hij(" ",e.get("percent").getError("outOfRange")," ")}}function ho(o,s){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Descripci\xf3n"),t.qZA())}function go(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," La descripci\xf3n es obligatoria "),t.qZA())}function xo(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," La descripci\xf3n debe contener entre 3 y 1000 caracteres. "),t.qZA())}function Co(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$index,a=t.oxw(2);return t.KtG(a.removeTermField(i))}),t._UZ(2,"mat-icon",28),t.qZA()()}2&o&&(t.xp6(2),t.Q6J("svgIcon","heroicons_solid:trash"))}function vo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",41)(1,"mat-form-field",42),t.YNc(2,mo,2,0,"mat-label"),t.TgZ(3,"span",43),t._uU(4,"%"),t.qZA(),t.TgZ(5,"input",44),t.NdJ("blur",function(i){const r=t.CHM(e).$index,u=t.oxw(2);return t.KtG(u.checkOutOfRange(i.target.value,r))}),t.qZA(),t.YNc(6,po,2,0,"mat-error")(7,fo,2,0,"mat-error")(8,_o,2,1,"mat-error"),t.qZA(),t.TgZ(9,"mat-form-field",45),t.YNc(10,ho,2,0,"mat-label"),t._UZ(11,"mat-icon",46)(12,"textarea",47),t.YNc(13,go,2,0,"mat-error")(14,xo,2,0,"mat-error"),t.qZA(),t.YNc(15,Co,3,1,"div",48),t.qZA()}if(2&o){const e=s.$implicit,n=s.$index,i=s.$count;t.xp6(2),t.um2(2,0===n?2:-1),t.xp6(3),t.Q6J("formControl",e.get("percent"))("spellcheck",!1),t.xp6(),t.um2(6,e.get("percent").hasError("required")?6:-1),t.xp6(),t.um2(7,e.get("percent").hasError("min")||e.get("percent").hasError("max")?7:-1),t.xp6(),t.um2(8,e.get("percent").hasError("outOfRange")?8:-1),t.xp6(2),t.um2(10,0===n?10:-1),t.xp6(),t.Q6J("svgIcon","mat_solid:subject"),t.xp6(),t.Q6J("formControl",e.get("description"))("placeholder","Descripci\xf3n")("minLength",3)("maxLength",1e3),t.xp6(),t.um2(13,e.get("description").hasError("required")?13:-1),t.xp6(),t.um2(14,e.get("description").hasError("maxlength")||e.get("description").hasError("minlength")?14:-1),t.xp6(),t.um2(15,0===n&&n===i-1?-1:15)}}function bo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",9)(2,"form",16)(3,"div",17)(4,"mat-form-field",18)(5,"mat-label"),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"input",19),t.YNc(8,co,2,0,"mat-error")(9,uo,2,0,"mat-error"),t.qZA()(),t.TgZ(10,"div",20)(11,"fuse-alert",21)(12,"span",22),t._uU(13,"T\xe9rminos"),t.qZA(),t.TgZ(14,"div",23)(15,"span"),t._uU(16," Cuando usted factura la forma de pago puede tener tantos t\xe9rminos como usted pacte con sus clientes pero la sumatoria de todos debe ser el 100% del valor de la factura, por ejemplo:"),t.qZA(),t.TgZ(17,"li",24),t._uU(18,"50% a la firma del contrato"),t.qZA(),t.TgZ(19,"li",25),t._uU(20,"50% a la entrega de la mercanc\xeda"),t.qZA(),t.TgZ(21,"span"),t._uU(22," esta forma de pago tiene dos t\xe9rminos y la suma de ambos completa el valor de la factura "),t.qZA()()(),t.TgZ(23,"div",26),t.SjG(24,vo,16,15,"div",51,t.QCX().trackByFn),t.qZA(),t.TgZ(26,"div",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addTermField())}),t._UZ(27,"mat-icon",28),t.TgZ(28,"span",29),t._uU(29,"Agregar t\xe9rmino"),t.qZA()()(),t.TgZ(30,"div",30)(31,"fuse-alert",21)(32,"span",22),t._uU(33,"Pagos"),t.qZA(),t._uU(34," Para que el cliente efect\xfae el pago usted puede marcar y escoger algunas de las siguientes opciones previamente introducida en la gesti\xf3n del negocio: "),t.TgZ(35,"li",24),t._uU(36,"Mostrar en la factura su cuenta bancaria."),t.qZA(),t.TgZ(37,"li",31),t._uU(38,"Seleccionar los QRs de pago que tiene contratado con Enzona y Transfermovil que se mostrar\xe1n en la factura."),t.qZA()(),t.TgZ(39,"div",32)(40,"mat-checkbox",33),t._uU(41),t.ALo(42,"uppercase"),t.qZA(),t.TgZ(43,"mat-radio-group",34)(44,"mat-radio-button",35),t._uU(45,"Ninguno"),t.qZA(),t.TgZ(46,"mat-radio-button",36),t._uU(47),t.ALo(48,"uppercase"),t.qZA()()(),t._UZ(49,"div",37),t.qZA(),t.TgZ(50,"div",38)(51,"span",39),t._uU(52,"Estado"),t.qZA(),t.TgZ(53,"mat-slide-toggle",40),t._uU(54),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.paymentConditionForm)("autocomplete","off"),t.xp6(5),t.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del forma de pago"),t.xp6(),t.um2(8,e.paymentConditionForm.get("name").hasError("required")?8:-1),t.xp6(),t.um2(9,e.paymentConditionForm.get("name").hasError("maxlength")||e.paymentConditionForm.get("name").hasError("minlength")?9:-1),t.xp6(2),t.Q6J("type","info")("appearance","outline"),t.xp6(13),t.wJu(e.paymentConditionForm.get("terms").controls),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(4),t.Q6J("type","info")("appearance","outline"),t.xp6(9),t.Q6J("color","primary")("formControlName","includeBankAccount"),t.xp6(),t.hij(" Incluir la cuenta bancaria de ",t.lcZ(42,23,e.currentMerchant.name),""),t.xp6(2),t.Q6J("color","primary")("formControlName","paymentBy"),t.xp6(4),t.hij("Pagos por QRs de ",t.lcZ(48,25,e.currentMerchant.name),""),t.xp6(6),t.Q6J("formControlName","active")("color","primary"),t.xp6(),t.hij(" ",!0===e.paymentConditionForm.get("active").value?"Activo":"Inactivo"," ")}}const Ie=o=>({"cursor-not-allowed":o});function yo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.updatePaymentCondition())}),t._uU(1," Actualizar "),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("color","primary")("matDialogClose","confirmed")("disabled",e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value)("ngClass",t.VKq(4,Ie,e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value))}}function wo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.createPaymentCondition())}),t._uU(1," Agregar "),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("color","primary")("matDialogClose","confirmed")("disabled",e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value)("ngClass",t.VKq(4,Ie,e.paymentConditionForm.invalid||100!==e.totalPercent||"none"===e.paymentConditionForm.get("paymentBy").value&&!1===e.paymentConditionForm.get("includeBankAccount").value))}}function Zo(o,s){if(1&o&&(t.TgZ(0,"div",52)(1,"button",53),t._uU(2," Cancelar "),t.qZA(),t.YNc(3,yo,2,6,"button",54)(4,wo,2,6,"button",54),t.qZA()),2&o){const e=t.oxw();t.xp6(),t.Q6J("matDialogClose","cancelled"),t.xp6(2),t.um2(3,"edit"===e.data.dialogMode?3:-1),t.xp6(),t.um2(4,"add"===e.data.dialogMode?4:-1)}}let To=(()=>{class o{constructor(e,n,i,a,r,u,p){this.data=e,this._changeDetectorRef=n,this._formBuilder=i,this._fuseConfirmationService=a,this._paymentConditionsService=r,this._snackBar=u,this.store=p,this.paymentCondition=new ot,this.dialogMode="view",this.merchants=[],this.selectedMerchant$=null,this.user=null,this.user$=(0,N.of)(null),this.totalPercent=0,this._unsubscribeAll=new R.x}ngOnInit(){this.user$=this.store.select(k.rk),this.user$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e,this._changeDetectorRef.markForCheck()}),this.store.select(lt.Qs).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.currentMerchant=e}),this.paymentConditionForm=this._formBuilder.group({_id:[""],active:[!0,[l.kI.required]],userId:[this.user.id,[l.kI.required]],merchantId:[this.currentMerchant.id,[l.kI.required]],paymentBy:["none",[l.kI.required]],includeBankAccount:[!0],name:["",[l.kI.required,l.kI.minLength(3),l.kI.maxLength(255)]],terms:this._formBuilder.array([])}),"edit"===this.data.dialogMode&&(this.paymentConditionForm.patchValue(this.data.paymentCondition),this.paymentConditionForm.get("merchantId").setValue(this.data.paymentCondition.merchantId._id)),this.setTermsDataOnForm()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addTermField(){const e=this._formBuilder.group({percent:[0,[l.kI.required,l.kI.min(0),l.kI.max(100)]],description:["",[l.kI.required,l.kI.minLength(3),l.kI.maxLength(1e3)]]}),n=this.paymentConditionForm.get("terms");n.length<=6&&n.push(e),this._changeDetectorRef.markForCheck()}removeTermField(e){this.paymentConditionForm.get("terms").removeAt(e),this.totalPercent=this.paymentConditionForm.get("terms").getRawValue().map(i=>i.percent).reduce((i,a)=>i+a,0),this._changeDetectorRef.markForCheck()}createPaymentCondition(){if(100!==this.totalPercent||this.paymentConditionForm.invalid)return;let e=this.paymentConditionForm.getRawValue();e=(0,C.Z)(e,"_id"),this._fuseConfirmationService.open({title:"Crear Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionsService.createPaymentCondition(e).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}updatePaymentCondition(){if(100!==this.totalPercent||this.paymentConditionForm.invalid)return;const e=this.paymentConditionForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Forma de pago",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionsService.updatePaymentCondition(e).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}checkOutOfRange(e,n){if(+e<=100){const i=this.paymentConditionForm.get("terms").getRawValue().map(r=>r.percent).reduce((r,u)=>r+u,0),a=this.paymentConditionForm.get("terms").controls;i<=100&&a.forEach(r=>{r.get("percent").hasError("outOfRange")&&r.get("percent").setErrors(null)}),i>100&&a.at(n).get("percent").setErrors({outOfRange:"La suma del % de todos los t\xe9rminos no debe superar a 100"}),this.totalPercent=i}}trackByFn(e,n){return n.id||e}setTermsDataOnForm(){if("add"===this.data.dialogMode)return void this.addTermField();const e=[];this.data.paymentCondition.terms.length>0?this.data.paymentCondition.terms.forEach(n=>{e.push(this._formBuilder.group({percent:[n.percent,[l.kI.required,l.kI.min(0),l.kI.max(100)]],description:[n.description,[l.kI.required,l.kI.minLength(3),l.kI.maxLength(255)]]}))}):e.push(this._formBuilder.group({percent:[0,[l.kI.required,l.kI.min(0),l.kI.max(100)]],description:["",[l.kI.required,l.kI.minLength(3),l.kI.maxLength(255)]]})),e.forEach(n=>{this.paymentConditionForm.get("terms").push(n)}),this.totalPercent=this.paymentConditionForm.get("terms").getRawValue().map(n=>n.percent).reduce((n,i)=>n+i,0)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(Q.WI),t.Y36(t.sBO),t.Y36(l.qu),t.Y36(W.R),t.Y36(ne.c),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["paymentConditions-detail"]],standalone:!0,features:[t.jDz],decls:9,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full","overflow-y-auto"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto"],["class","w-full overflow-hidden"],["class","flex items-center justify-center px-6 py-4 space-x-3 sm:justify-end bg-gray-50 dark:bg-black dark:bg-opacity-10"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"pt-5"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"mt-4"],[3,"type","appearance"],["fuseAlertTitle",""],[1,"flex","flex-col"],[1,"mt-2","ml-3"],[1,"mb-2","ml-3"],[1,"p-6","pb-0"],[1,"inline-flex","items-center","px-4","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"mt-6"],[1,"ml-3"],[1,"grid","gap-4","p-6","pt-7","pb-7","sm:grid-cols-2"],[1,"mb-4",3,"color","formControlName"],["aria-label","Select an option",1,"flex","flex-wrap","justify-between","gap-2","sm:col-span-2",3,"color","formControlName"],["value","none",1,"sm:col-span-1"],["value","UseMerchantPayments",1,"sm:col-span-1"],[1,"w-full","border-t-2"],[1,"flex","flex-col","mt-8"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"flex","flex-col","sm:flex-row"],[1,"flex-auto","mt-2","sm:max-w-[20%]"],["matPrefix",""],["matInput","","type","number","min","0","max","100","required","",3,"formControl","spellcheck","blur"],[1,"flex-auto","w-full","mt-2","sm:ml-4","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","placeholder","minLength","maxLength"],["class","flex self-end w-10 mb-2 sm:items-center sm:pl-2"],[1,"flex","self-end","w-10","mb-2","sm:items-center","sm:pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],["class","flex flex-col sm:flex-row"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass"],["mat-flat-button","",3,"color","matDialogClose","disabled","ngClass","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,ao,2,0,"h2",2)(3,so,2,0,"h2",2)(4,ro,2,0,"h2",2),t.qZA(),t.TgZ(5,"div",3),t.YNc(6,lo,9,1,"div",4)(7,bo,55,27,"div",5),t.qZA(),t.YNc(8,Zo,5,3,"div",6),t.qZA()),2&n&&(t.xp6(2),t.um2(2,null===i.data.paymentCondition._id&&"add"===i.data.dialogMode?2:-1),t.xp6(),t.um2(3,i.data.paymentCondition._id&&"edit"===i.data.dialogMode?3:-1),t.xp6(),t.um2(4,i.data.paymentCondition._id&&"view"===i.data.dialogMode?4:-1),t.xp6(2),t.um2(6,"view"===i.data.dialogMode?6:-1),t.xp6(),t.um2(7,7),t.xp6(),t.um2(8,"view"!==i.data.dialogMode?8:-1))},dependencies:[c.W,v.ot,v.lW,v.RK,m.p9,m.oG,Q.Is,Q.ZT,g.lN,g.KE,g.hX,g.TO,g.qo,x.Ps,x.Hw,D.c,D.Nt,f.Fk,f.VQ,f.U0,y.rP,y.Rr,h.mk,l.UX,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.wO,l.nD,l.qQ,l.Fd,l.oH,l.sg,l.u,h.gd],encapsulation:2,changeDetection:0})}return o})();function ko(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"mat-form-field",18),t._UZ(2,"mat-icon",19)(3,"input",20),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createPaymentCondition())}),t._UZ(5,"mat-icon",22),t.TgZ(6,"span",23),t._uU(7,"Nueva"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("svgIcon","mat_solid:search"),t.xp6(),t.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar formas de pago"),t.xp6(2),t.Q6J("svgIcon","mat_solid:add")}}function Do(o,s){1&o&&t._UZ(0,"mat-icon",39),2&o&&t.Q6J("svgIcon","mat_solid:done")}function Ao(o,s){1&o&&t._UZ(0,"mat-icon",40),2&o&&t.Q6J("svgIcon","mat_solid:close")}function qo(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",32),t._uU(2),t.qZA(),t.TgZ(3,"div",33),t.YNc(4,Do,1,1,"mat-icon",34)(5,Ao,1,1,"mat-icon",35),t.qZA(),t.TgZ(6,"div",36)(7,"button",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.editPaymentCondition(a))}),t._UZ(8,"mat-icon",38),t.qZA(),t.TgZ(9,"button",37),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.deletePaymentCondition(a._id))}),t._UZ(10,"mat-icon",38),t.qZA()()()}if(2&o){const e=s.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.um2(4,e.active?4:-1),t.xp6(),t.um2(5,e.active?-1:5),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:pencil"),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:trash")}}function Ro(o,s){1&o&&t.SjG(0,qo,11,5,"div",41,t.QCX().trackByFn),2&o&&t.wJu(s)}const Io=o=>({"pointer-events-none":o}),Fo=()=>[10,25,50,100];function So(o,s){if(1&o&&(t.TgZ(0,"div",25)(1,"div",26)(2,"div",27),t._uU(3," Nombre "),t.qZA(),t.TgZ(4,"div",28),t._uU(5," Activo "),t.qZA(),t.TgZ(6,"div",29),t._uU(7," Acciones "),t.qZA()(),t.YNc(8,Ro,2,0),t.ALo(9,"async"),t._UZ(10,"mat-paginator",30),t.qZA()),2&o){const e=t.oxw(2);let n;t.xp6(2),t.Q6J("mat-sort-header","name")("mat-sort-header","name"),t.xp6(2),t.Q6J("mat-sort-header","active"),t.xp6(4),t.um2(8,(n=t.lcZ(9,10,e.paymentConditions$))?8:-1,n),t.xp6(2),t.Q6J("ngClass",t.VKq(12,Io,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.DdM(14,Fo))("showFirstLastButtons",!0)}}function Uo(o,s){if(1&o&&(t.TgZ(0,"div",42),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.Oqu(e.searchInputControl.value?"\xa1No se han encontrado formas de pago!":"\xa1No se ha creado ninguna forma de pago a\xfan!")}}function Oo(o,s){1&o&&t.YNc(0,So,11,15,"div",24)(1,Uo,2,1),2&o&&t.um2(0,s.length>0?0:1)}function No(o,s){if(1&o&&(t.TgZ(0,"div",42),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(),t.Oqu(e.searchInputControl.value?"\xa1No se han encontrado formas de pago!":"\xa1No se ha creado ninguna forma de pago a\xfan!")}}const Qo=()=>["Super Administrador"];let Mo=(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._paymentConditionService=n,this._dialog=i,this._fuseConfirmationService=a,this._snackBar=r,this.store=u,this.merchantId="",this.paymentConditions$=(0,N.of)([]),this.paymentCondition=new ot,this.isLoading=!1,this.searchInputControl=new l.NI(null),this._unsubscribeAll=new R.x}ngOnInit(){this.paymentConditions$=this.store.select(Zt),this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,st.O)(null),(0,F.w)(e=>null!==e?(this.isLoading=!0,this._paymentConditionService.getPaymentConditions(0,20,"active","desc",e)):(0,N.of)()),(0,P.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,et.T)(this._sort.sortChange,this._paginator.page).pipe((0,F.w)(()=>(this.isLoading=!0,this._paymentConditionService.getPaymentConditions(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,P.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createPaymentCondition(){this._openDialog(this.paymentCondition,"add")}editPaymentCondition(e){this._openDialog(e,"edit")}deletePaymentCondition(e){this._fuseConfirmationService.open({title:"Eliminar Forma de pago",message:"\xbfEsta seguro que desea Eliminar el Forma de pago? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._paymentConditionService.deletePaymentCondition(e,this.pagination.page,this.pagination.size,"active","desc",this.searchInputControl.value).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}trackByFn(e,n){return n.id||e}_openDialog(e,n){this._dialog.open(To,{data:{paymentCondition:e,dialogMode:n},panelClass:"ath-payment-method-dialog-panel"})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(ne.c),t.Y36(Q.uw),t.Y36(W.R),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["commercial-payment-conditions"]],viewQuery:function(n,i){if(1&n&&(t.Gf(I.NW,5),t.Gf(T.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i._paginator=a.first),t.iGM(a=t.CRH())&&(i._sort=a.first)}},standalone:!0,features:[t.jDz],decls:30,vars:9,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex flex-wrap items-center mt-2 shrink-0 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","sm:mt-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","sm:block"],["class","grid"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","payment-methods-table"],[3,"mat-sort-header"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"mr-4","text-center"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","payment-methods-table"],[1,"truncate"],[1,"text-center","sm:mr-4"],["class","text-green-400 icon-size-5",3,"svgIcon"],["class","text-red-400 icon-size-5",3,"svgIcon"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],["class","grid items-center gap-4 px-6 py-3 border-b md:px-8 payment-methods-table"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Formas de pago"),t.qZA()()(),t.TgZ(16,"div",9)(17,"a",10),t._UZ(18,"mat-icon",6),t.TgZ(19,"span",11),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",12)(22,"div",13),t._uU(23," Formas de Pago "),t.qZA()()(),t.YNc(24,ko,8,5,"div",14),t.qZA(),t.TgZ(25,"div",15)(26,"div",16),t.YNc(27,Oo,2,1),t.ALo(28,"async"),t.YNc(29,No,2,1),t.qZA()()()),2&n){let a;t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(6),t.Q6J("ngxPermissionsExcept",t.DdM(8,Qo)),t.xp6(3),t.um2(27,(a=t.lcZ(28,6,i.paymentConditions$))?27:29,a)}},dependencies:[h.Ov,v.ot,v.lW,g.lN,g.KE,g.qo,x.Ps,x.Hw,D.c,D.Nt,I.TU,I.NW,T.JX,T.YE,T.nU,h.mk,l.UX,l.Fj,l.JJ,l.oH,q.rH],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})(),Eo=(()=>{class o{constructor(e){this._paymentConditionsService=e}resolve(e,n){return this._paymentConditionsService.getPaymentConditions(0,20,"name","asc","")}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(ne.c))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Po=d(21118);const Jo=["quotationDetail"],Lo=()=>["../"];let Bo=(()=>{class o{constructor(){}ngOnInit(){}generatePDF(e){this.quotationDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["quotation-details-header"]],viewQuery:function(n,i){if(1&n&&t.Gf(Jo,5),2&n){let a;t.iGM(a=t.CRH())&&(i.quotationDetailsComponent=a.first)}},standalone:!0,features:[t.jDz],decls:35,vars:9,consts:[["cdkScrollable","",1,"absolute","flex","flex-col","w-full","inset-0","min-w-0","text-center","overflow-auto","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4","justify-center"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"],["quotationDetail",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Ofertas"),t.qZA()()(),t.TgZ(16,"div",9)(17,"a",10),t._UZ(18,"mat-icon",6),t.TgZ(19,"span",11),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",12)(22,"div",13)(23,"span"),t._uU(24,"Detalles de la oferta"),t.qZA()()()(),t.TgZ(25,"div",14)(26,"button",15),t.NdJ("click",function(){return i.generatePDF("open")}),t._UZ(27,"mat-icon",16),t.qZA(),t.TgZ(28,"button",15),t.NdJ("click",function(){return i.generatePDF("download")}),t._UZ(29,"mat-icon",16),t.qZA(),t.TgZ(30,"button",15),t.NdJ("click",function(){return i.generatePDF("print")}),t._UZ(31,"mat-icon",16),t.qZA()()(),t.TgZ(32,"div",17),t._UZ(33,"quotation-details",null,18),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(),t.Q6J("routerLink",t.DdM(8,Lo)),t.xp6(3),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(9),t.Q6J("svgIcon","heroicons_outline:eye"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:download"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:printer"))},dependencies:[Po.i,x.Ps,x.Hw,v.ot,v.lW,q.rH],encapsulation:2,changeDetection:0})}return o})();var Fe=d(90621),jo=d(84068),Go=d(96441),ie=d(98525),Ho=d(49388),J=d(78337),zo=d(62831),Yo=d(9666),$o=d(65619),Vo=d(2664),Tt=d(48180),Ko=d(42495);function Wo(o,s){1&o&&t.Hsn(0,2)}function Xo(o,s){1&o&&(t.TgZ(0,"thead",0),t.GkF(1,1),t.qZA(),t.TgZ(2,"tbody",0),t.GkF(3,2)(4,3),t.qZA(),t.TgZ(5,"tfoot",0),t.GkF(6,4),t.qZA())}function tn(o,s){1&o&&t.GkF(0,1)(1,2)(2,3)(3,4)}const en=[[["caption"]],[["colgroup"],["col"]],"*"],on=["caption","colgroup, col","*"];function ae(o){return class extends o{get sticky(){return this._sticky}set sticky(s){const e=this._sticky;this._sticky=(0,Ko.Ig)(s),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const s=this._hasStickyChanged;return this._hasStickyChanged=!1,s}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...s){super(...s),this._sticky=!1,this._hasStickyChanged=!1}}}const H=new t.OlP("CDK_TABLE");let ct=(()=>{class o{constructor(e){this.template=e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkCellDef",""]],standalone:!0})}return o})(),dt=(()=>{class o{constructor(e){this.template=e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}return o})(),kt=(()=>{class o{constructor(e){this.template=e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}return o})();class rn{}const ln=ae(rn);let $=(()=>{class o extends ln{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(H,8))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkColumnDef",""]],contentQueries:function(n,i,a){if(1&n&&(t.Suo(a,ct,5),t.Suo(a,dt,5),t.Suo(a,kt,5)),2&n){let r;t.iGM(r=t.CRH())&&(i.cell=r.first),t.iGM(r=t.CRH())&&(i.headerCell=r.first),t.iGM(r=t.CRH())&&(i.footerCell=r.first)}},inputs:{sticky:"sticky",name:[t.lbL.None,"cdkColumnDef","name"],stickyEnd:[t.lbL.HasDecoratorInputTransform,"stickyEnd","stickyEnd",t.VuI]},standalone:!0,features:[t._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:o}]),t.Xq5,t.qOj]})}return o})();class se{constructor(s,e){e.nativeElement.classList.add(...s._columnCssClassName)}}let re=(()=>{class o extends se{constructor(e,n){super(e,n)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36($),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[t.qOj]})}return o})(),Se=(()=>{class o extends se{constructor(e,n){super(e,n);const i=e._table?._getCellRole();i&&n.nativeElement.setAttribute("role",i)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36($),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["cdk-footer-cell"],["td","cdk-footer-cell",""]],hostAttrs:[1,"cdk-footer-cell"],standalone:!0,features:[t.qOj]})}return o})(),le=(()=>{class o extends se{constructor(e,n){super(e,n);const i=e._table?._getCellRole();i&&n.nativeElement.setAttribute("role",i)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36($),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[t.qOj]})}return o})();class Ue{constructor(){this.tasks=[],this.endTasks=[]}}const ce=new t.OlP("_COALESCED_STYLE_SCHEDULER");let Oe=(()=>{class o{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new R.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Ue,this._getScheduleObservable().pipe((0,_.R)(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new Ue;for(const n of e.tasks)n();for(const n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Yo.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,Tt.q)(1))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(t.R0b))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac})}return o})(),de=(()=>{class o{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){const n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof _t?e.headerCell.template:this instanceof ht?e.footerCell.template:e.cell.template}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc),t.Y36(t.ZZ4))};static#e=this.\u0275dir=t.lG2({type:o,features:[t.TTD]})}return o})();class cn extends de{}const dn=ae(cn);let _t=(()=>{class o extends dn{constructor(e,n,i){super(e,n),this._table=i}ngOnChanges(e){super.ngOnChanges(e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc),t.Y36(t.ZZ4),t.Y36(H,8))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[t.lbL.None,"cdkHeaderRowDef","columns"],sticky:[t.lbL.None,"cdkHeaderRowDefSticky","sticky"]},standalone:!0,features:[t.qOj,t.TTD]})}return o})();class un extends de{}const mn=ae(un);let ht=(()=>{class o extends mn{constructor(e,n,i){super(e,n),this._table=i}ngOnChanges(e){super.ngOnChanges(e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc),t.Y36(t.ZZ4),t.Y36(H,8))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[t.lbL.None,"cdkFooterRowDef","columns"],sticky:[t.lbL.None,"cdkFooterRowDefSticky","sticky"]},standalone:!0,features:[t.qOj,t.TTD]})}return o})(),Dt=(()=>{class o extends de{constructor(e,n,i){super(e,n),this._table=i}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc),t.Y36(t.ZZ4),t.Y36(H,8))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkRowDef",""]],inputs:{columns:[t.lbL.None,"cdkRowDefColumns","columns"],when:[t.lbL.None,"cdkRowDefWhen","when"]},standalone:!0,features:[t.qOj]})}return o})(),V=(()=>{class o{static#t=this.mostRecentCellOutlet=null;constructor(e){this._viewContainer=e,o.mostRecentCellOutlet=this}ngOnDestroy(){o.mostRecentCellOutlet===this&&(o.mostRecentCellOutlet=null)}static#e=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.s_b))};static#o=this.\u0275dir=t.lG2({type:o,selectors:[["","cdkCellOutlet",""]],standalone:!0})}return o})(),ue=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),me=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cdk-footer-row"],["tr","cdk-footer-row",""]],hostAttrs:["role","row",1,"cdk-footer-row"],standalone:!0,features:[t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),pe=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),At=(()=>{class o{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}return o})();const Ne=["top","bottom","left","right"];class pn{constructor(s,e,n,i,a=!0,r=!0,u){this._isNativeHtmlTable=s,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=i,this._isBrowser=a,this._needsPositionStickyOnElement=r,this._positionListener=u,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(s,e){const n=[];for(const i of s)if(i.nodeType===i.ELEMENT_NODE){n.push(i);for(let a=0;a<i.children.length;a++)n.push(i.children[a])}this._coalescedStyleScheduler.schedule(()=>{for(const i of n)this._removeStickyStyle(i,e)})}updateStickyColumns(s,e,n,i=!0){s.length&&this._isBrowser&&(e.some(a=>a)||n.some(a=>a))?this._coalescedStyleScheduler.schedule(()=>{const a=s[0],r=a.children.length,u=this._getCellWidths(a,i),p=this._getStickyStartColumnPositions(u,e),w=this._getStickyEndColumnPositions(u,n),Z=e.lastIndexOf(!0),M=n.indexOf(!0),O="rtl"===this.direction,tt=O?"right":"left",Oa=O?"left":"right";for(const xt of s)for(let L=0;L<r;L++){const no=xt.children[L];e[L]&&this._addStickyStyle(no,tt,p[L],L===Z),n[L]&&this._addStickyStyle(no,Oa,w[L],L===M)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===Z?[]:u.slice(0,Z+1).map((xt,L)=>e[L]?xt:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===M?[]:u.slice(M).map((xt,L)=>n[L+M]?xt:null).reverse()}))}):this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}))}stickRows(s,e,n){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{const i="bottom"===n?s.slice().reverse():s,a="bottom"===n?e.slice().reverse():e,r=[],u=[],p=[];for(let Z=0,M=0;Z<i.length;Z++){if(!a[Z])continue;r[Z]=M;const O=i[Z];p[Z]=this._isNativeHtmlTable?Array.from(O.children):[O];const tt=O.getBoundingClientRect().height;M+=tt,u[Z]=tt}const w=a.lastIndexOf(!0);for(let Z=0;Z<i.length;Z++){if(!a[Z])continue;const M=r[Z],O=Z===w;for(const tt of p[Z])this._addStickyStyle(tt,n,M,O)}"top"===n?this._positionListener?.stickyHeaderRowsUpdated({sizes:u,offsets:r,elements:p}):this._positionListener?.stickyFooterRowsUpdated({sizes:u,offsets:r,elements:p})})}updateStickyFooterContainer(s,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{const n=s.querySelector("tfoot");e.some(i=>!i)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(s,e){for(const i of e)s.style[i]="",s.classList.remove(this._borderCellCss[i]);Ne.some(i=>-1===e.indexOf(i)&&s.style[i])?s.style.zIndex=this._getCalculatedZIndex(s):(s.style.zIndex="",this._needsPositionStickyOnElement&&(s.style.position=""),s.classList.remove(this._stickCellCss))}_addStickyStyle(s,e,n,i){s.classList.add(this._stickCellCss),i&&s.classList.add(this._borderCellCss[e]),s.style[e]=`${n}px`,s.style.zIndex=this._getCalculatedZIndex(s),this._needsPositionStickyOnElement&&(s.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(s){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const i of Ne)s.style[i]&&(n+=e[i]);return n?`${n}`:""}_getCellWidths(s,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],i=s.children;for(let a=0;a<i.length;a++)n.push(i[a].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(s,e){const n=[];let i=0;for(let a=0;a<s.length;a++)e[a]&&(n[a]=i,i+=s[a]);return n}_getStickyEndColumnPositions(s,e){const n=[];let i=0;for(let a=s.length;a>0;a--)e[a]&&(n[a]=i,i+=s[a]);return n}}const fe=new t.OlP("CDK_SPL");let _e=(()=>{class o{constructor(e,n){this.viewContainer=e,this.elementRef=n;const i=(0,t.f3M)(H);i._rowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.s_b),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","rowOutlet",""]],standalone:!0})}return o})(),he=(()=>{class o{constructor(e,n){this.viewContainer=e,this.elementRef=n;const i=(0,t.f3M)(H);i._headerRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.s_b),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","headerRowOutlet",""]],standalone:!0})}return o})(),ge=(()=>{class o{constructor(e,n){this.viewContainer=e,this.elementRef=n;const i=(0,t.f3M)(H);i._footerRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.s_b),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","footerRowOutlet",""]],standalone:!0})}return o})(),xe=(()=>{class o{constructor(e,n){this.viewContainer=e,this.elementRef=n;const i=(0,t.f3M)(H);i._noDataRowOutlet=this,i._outletAssigned()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.s_b),t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","noDataRowOutlet",""]],standalone:!0})}return o})(),qt=(()=>{class o{_getCellRole(){if(void 0===this._cellRoleInternal){const e=this._elementRef.nativeElement.getAttribute("role"),n="grid"===e||"treegrid"===e?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&"cell"===n?null:n}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,n,i,a,r,u,p,w,Z,M,O,tt){this._differs=e,this._changeDetectorRef=n,this._elementRef=i,this._dir=r,this._platform=p,this._viewRepeater=w,this._coalescedStyleScheduler=Z,this._viewportRuler=M,this._stickyPositioningListener=O,this._ngZone=tt,this._onDestroy=new R.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasRendered=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new t.vpe,this.viewChange=new $o.X({start:0,end:Number.MAX_VALUE}),a||i.nativeElement.setAttribute("role","table"),this._document=u,this._isServer=!p.isBrowser,this._isNativeHtmlTable="TABLE"===i.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe((0,_.R)(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._hasRendered&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),(0,J.Z9)(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(i,a,r)=>this._getEmbeddedViewArgs(i.item,r),i=>i.item.data,i=>{i.operation===J.dS.INSERTED&&i.context&&this._renderCellTemplateForItem(i.record.item.rowDef,i.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(i=>{n.get(i.currentIndex).context.$implicit=i.item.data}),this._updateNoDataRow(),this._ngZone&&t.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,Tt.q)(1),(0,_.R)(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){const i=Qe(this._headerRowOutlet,"thead");i&&(i.style.display=e.length?"":"none")}const n=this._headerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){const i=Qe(this._footerRowOutlet,"tfoot");i&&(i.style.display=e.length?"":"none")}const n=this._footerRowDefs.map(i=>i.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(i=>i.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),i=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...i],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((a,r)=>{this._addStickyColumnStyles([a],this._headerRowDefs[r])}),this._rowDefs.forEach(a=>{const r=[];for(let u=0;u<n.length;u++)this._renderRows[u].rowDef===a&&r.push(n[u]);this._addStickyColumnStyles(r,a)}),i.forEach((a,r)=>{this._addStickyColumnStyles([a],this._footerRowDefs[r])}),Array.from(this._columnDefsByName.values()).forEach(a=>a.resetStickyChanged())}_outletAssigned(){!this._hasRendered&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasRendered=!0,this._render())}_render(){this._cacheRowDefs(),this._cacheColumnDefs();const n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){const e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let i=0;i<this._data.length;i++){let a=this._data[i];const r=this._getRenderRowsForData(a,i,n.get(a));this._cachedRenderRowsMap.has(a)||this._cachedRenderRowsMap.set(a,new WeakMap);for(let u=0;u<r.length;u++){let p=r[u];const w=this._cachedRenderRowsMap.get(p.data);w.has(p.rowDef)?w.get(p.rowDef).push(p):w.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,n,i){return this._getRowDefs(e,n).map(r=>{const u=i&&i.has(r)?i.get(r):[];if(u.length){const p=u.shift();return p.dataIndex=n,p}return{data:e,rowDef:r,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Rt(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=Rt(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Rt(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Rt(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(n=>!n.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(r,u)=>r||!!u.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();const i=this._headerRowDefs.reduce(e,!1);i&&this._forceRenderHeaderRows();const a=this._footerRowDefs.reduce(e,!1);return a&&this._forceRenderFooterRows(),n||i||a}_switchDataSource(e){this._data=[],(0,J.Z9)(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;(0,J.Z9)(this.dataSource)?e=this.dataSource.connect(this):(0,Vo.b)(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=(0,N.of)(this.dataSource)),this._renderChangeSubscription=e.pipe((0,_.R)(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){const i=Array.from(n.columns||[]).map(u=>this._columnDefsByName.get(u)),a=i.map(u=>u.sticky),r=i.map(u=>u.stickyEnd);this._stickyStyler.updateStickyColumns(e,a,r,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const n=[];for(let i=0;i<e.viewContainer.length;i++){const a=e.viewContainer.get(i);n.push(a.rootNodes[0])}return n}_getRowDefs(e,n){if(1==this._rowDefs.length)return[this._rowDefs[0]];let i=[];if(this.multiTemplateDataRows)i=this._rowDefs.filter(a=>!a.when||a.when(n,e));else{let a=this._rowDefs.find(r=>r.when&&r.when(n,e))||this._defaultRowDef;a&&i.push(a)}return i}_getEmbeddedViewArgs(e,n){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:n}}_renderRow(e,n,i,a={}){const r=e.viewContainer.createEmbeddedView(n.template,a,i);return this._renderCellTemplateForItem(n,a),r}_renderCellTemplateForItem(e,n){for(let i of this._getCellTemplates(e))V.mostRecentCellOutlet&&V.mostRecentCellOutlet._viewContainer.createEmbeddedView(i,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let n=0,i=e.length;n<i;n++){const r=e.get(n).context;r.count=i,r.first=0===n,r.last=n===i-1,r.even=n%2==0,r.odd=!r.even,this.multiTemplateDataRows?(r.dataIndex=this._renderRows[n].dataIndex,r.renderIndex=n):r.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,n=>{const i=this._columnDefsByName.get(n);return e.extractCellTemplate(i)}):[]}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(n,i)=>n||i.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new pn(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:(0,N.of)()).pipe((0,_.R)(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const n=0===this._rowOutlet.viewContainer.length;if(n===this._isShowingNoDataRow)return;const i=this._noDataRowOutlet.viewContainer;if(n){const a=i.createEmbeddedView(e.templateRef),r=a.rootNodes[0];1===a.rootNodes.length&&r?.nodeType===this._document.ELEMENT_NODE&&(r.setAttribute("role","row"),r.classList.add(e._contentClassName))}else i.clear();this._isShowingNoDataRow=n,this._changeDetectorRef.markForCheck()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.ZZ4),t.Y36(t.sBO),t.Y36(t.SBq),t.$8M("role"),t.Y36(Ho.Is,8),t.Y36(h.K0),t.Y36(zo.t4),t.Y36(J.k),t.Y36(ce),t.Y36(X.rL),t.Y36(fe,12),t.Y36(t.R0b,8))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(n,i,a){if(1&n&&(t.Suo(a,At,5),t.Suo(a,$,5),t.Suo(a,Dt,5),t.Suo(a,_t,5),t.Suo(a,ht,5)),2&n){let r;t.iGM(r=t.CRH())&&(i._noDataRow=r.first),t.iGM(r=t.CRH())&&(i._contentColumnDefs=r),t.iGM(r=t.CRH())&&(i._contentRowDefs=r),t.iGM(r=t.CRH())&&(i._contentHeaderRowDefs=r),t.iGM(r=t.CRH())&&(i._contentFooterRowDefs=r)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(n,i){2&n&&t.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[t.lbL.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",t.VuI],fixedLayout:[t.lbL.HasDecoratorInputTransform,"fixedLayout","fixedLayout",t.VuI]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[t._Bn([{provide:H,useExisting:o},{provide:J.k,useClass:J.yy},{provide:ce,useClass:Oe},{provide:fe,useValue:null}]),t.Xq5,t.jDz],ngContentSelectors:on,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,i){1&n&&(t.F$t(en),t.Hsn(0),t.Hsn(1,1),t.YNc(2,Wo,1,0)(3,Xo,7,0)(4,tn,4,0)),2&n&&(t.xp6(2),t.um2(2,i._isServer?2:-1),t.xp6(),t.um2(3,i._isNativeHtmlTable?3:4))},dependencies:[he,_e,xe,ge],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return o})();function Rt(o,s){return o.concat(Array.from(s))}function Qe(o,s){const e=s.toUpperCase();let n=o.viewContainer.element.nativeElement;for(;n;){const i=1===n.nodeType?n.nodeName:null;if(i===e)return n;if("TABLE"===i)break;n=n.parentNode}return null}let _n=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[X.Cl]})}return o})();var Ce=d(23680);function hn(o,s){1&o&&t.Hsn(0,2)}function gn(o,s){1&o&&(t.TgZ(0,"thead",0),t.GkF(1,1),t.qZA(),t.TgZ(2,"tbody",2),t.GkF(3,3)(4,4),t.qZA(),t.TgZ(5,"tfoot",0),t.GkF(6,5),t.qZA())}function xn(o,s){1&o&&t.GkF(0,1)(1,3)(2,4)(3,5)}const Cn=[[["caption"]],[["colgroup"],["col"]],"*"],vn=["caption","colgroup, col","*"];let Ee=(()=>{class o extends qt{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(n,i){2&n&&t.ekj("mdc-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[t._Bn([{provide:qt,useExisting:o},{provide:H,useExisting:o},{provide:ce,useClass:Oe},{provide:J.k,useClass:J.yy},{provide:fe,useValue:null}]),t.qOj,t.jDz],ngContentSelectors:vn,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,i){1&n&&(t.F$t(Cn),t.Hsn(0),t.Hsn(1,1),t.YNc(2,hn,1,0)(3,gn,7,0)(4,xn,4,0)),2&n&&(t.xp6(2),t.um2(2,i._isServer?2:-1),t.xp6(),t.um2(3,i._isNativeHtmlTable?3:4))},dependencies:[he,_e,xe,ge],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return o})(),ve=(()=>{class o extends ct{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matCellDef",""]],standalone:!0,features:[t._Bn([{provide:ct,useExisting:o}]),t.qOj]})}return o})(),be=(()=>{class o extends dt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[t._Bn([{provide:dt,useExisting:o}]),t.qOj]})}return o})(),Pe=(()=>{class o extends kt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matFooterCellDef",""]],standalone:!0,features:[t._Bn([{provide:kt,useExisting:o}]),t.qOj]})}return o})(),ye=(()=>{class o extends ${get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:[t.lbL.None,"matColumnDef","name"]},standalone:!0,features:[t._Bn([{provide:$,useExisting:o},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:o}]),t.qOj]})}return o})(),we=(()=>{class o extends re{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[t.qOj]})}return o})(),Je=(()=>{class o extends Se{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["mat-footer-cell"],["td","mat-footer-cell",""]],hostAttrs:[1,"mat-mdc-footer-cell","mdc-data-table__cell"],standalone:!0,features:[t.qOj]})}return o})(),Ze=(()=>{class o extends le{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[t.qOj]})}return o})(),Le=(()=>{class o extends _t{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[t.lbL.None,"matHeaderRowDef","columns"],sticky:[t.lbL.None,"matHeaderRowDefSticky","sticky"]},standalone:!0,features:[t._Bn([{provide:_t,useExisting:o}]),t.qOj]})}return o})(),Be=(()=>{class o extends ht{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matFooterRowDef",""]],inputs:{columns:[t.lbL.None,"matFooterRowDef","columns"],sticky:[t.lbL.None,"matFooterRowDefSticky","sticky"]},standalone:!0,features:[t._Bn([{provide:ht,useExisting:o}]),t.qOj]})}return o})(),je=(()=>{class o extends Dt{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275dir=t.lG2({type:o,selectors:[["","matRowDef",""]],inputs:{columns:[t.lbL.None,"matRowDefColumns","columns"],when:[t.lbL.None,"matRowDefWhen","when"]},standalone:!0,features:[t._Bn([{provide:Dt,useExisting:o}]),t.qOj]})}return o})(),Ge=(()=>{class o extends ue{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[t._Bn([{provide:ue,useExisting:o}]),t.qOj,t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),He=(()=>{class o extends me{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-footer-row"],["tr","mat-footer-row",""]],hostAttrs:["role","row",1,"mat-mdc-footer-row","mdc-data-table__row"],exportAs:["matFooterRow"],standalone:!0,features:[t._Bn([{provide:me,useExisting:o}]),t.qOj,t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),ze=(()=>{class o extends pe{static#t=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=t.n5z(o)))(i||o)}})();static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[t._Bn([{provide:pe,useExisting:o}]),t.qOj,t.jDz],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,i){1&n&&t.GkF(0,0)},dependencies:[V],encapsulation:2})}return o})(),Ye=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[Ce.BQ,_n,Ce.BQ]})}return o})();function Tn(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Los d\xedas en que expira deben ser mayores igual que 1 o menores igual que 60. "),t.qZA())}const kn=o=>({"cursor-not-allowed":o});let Dn=(()=>{class o{constructor(e,n,i,a,r,u){this.data=e,this._formBuilder=n,this._dialogRef=i,this._invoiceService=a,this._snackBar=r,this.store=u,this.selectedQuotation=null,this.user$=(0,N.of)(null),this._unsubscribeAll=new R.x,this.selectedQuotation=e.quotation}ngOnInit(){this.user$=this.store.select(k.rk),this.user$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e}),this.invoiceForm=this._formBuilder.group({merchantId:[this.selectedQuotation.merchantId._id,[l.kI.required]],userId:[this.user.id,[l.kI.required]],quotationId:[this.selectedQuotation._id,[l.kI.required]],quotationNo:[{disabled:!0,value:this.selectedQuotation.no},[l.kI.required]],expirationDays:[this.selectedQuotation.merchantId.commercialManagement.expirationInvoiceDays,[l.kI.required,l.kI.min(1),l.kI.max(60)]],bankAccount:["",[l.kI.minLength(16),l.kI.maxLength(24)]],status:[ft.PendientePago,[l.kI.required]]}),this.selectedQuotation.paymentMethodData.includeBankAccount&&this.invoiceForm.get("bankAccount").setValue(this.selectedQuotation.merchantId.bankAccount)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createInvoice(){const e=this.invoiceForm.getRawValue();this._invoiceService.createInvoice(e).subscribe(n=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:n.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.store.dispatch((0,Go.qm)({quotation:{...this.selectedQuotation,status:"Facturada"}})),this._dialogRef.close()})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(Q.WI),t.Y36(l.qu),t.Y36(Q.so),t.Y36(Ct.x),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["commercial-invoice-confirm-dialog"]],standalone:!0,features:[t.jDz],decls:29,vars:15,consts:[[1,"h-full","ng-star-inserted"],[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","items-center","h-full"],[1,"block","w-full"],[1,"flex","flex-col","items-center","flex-auto","p-8","pb-4","sm:flex-row","sm:items-start","sm:pb-6"],["ng-reflect-ng-class","[object Object]",1,"flex","items-center","justify-center","w-10","h-10","text-blue-600","bg-blue-100","rounded-full","flex-0","sm:mr-4","dark:text-blue-50","dark:bg-blue-600","ng-star-inserted"],["role","img","aria-hidden","true","ng-reflect-svg-icon","heroicons_outline:question-mar","data-mat-icon-type","svg","data-mat-icon-name","question-mark-circle","data-mat-icon-namespace","heroicons_outline",1,"text-current","mat-icon","notranslate","mat-icon-no-color"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","fit","","height","100%","width","100%","preserveAspectRatio","xMidYMid meet","focusable","false"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","flex-col","items-center","mt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","ng-star-inserted"],[1,"text-xl","font-medium","leading-6","ng-star-inserted"],[1,"text-secondary","ng-star-inserted"],[1,"pb-6","pl-8","pr-8","mt-10","sm:mt-0","sm:pl-22",3,"formGroup","autocomplete"],[1,"w-full"],["matSuffix","",1,"ml-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["type","number","required","","matInput","",3,"formControlName","min","max"],[1,"flex","flex-wrap","justify-center","px-6","py-4","space-x-3","tems-center","md:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10","ng-star-inserted"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","","mat-button","",3,"color","disabled","ngClass","click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),t.O4$(),t.TgZ(7,"svg",7),t._UZ(8,"path",8),t.qZA()()(),t.kcU(),t.TgZ(9,"div",9)(10,"div",10),t._uU(11),t.qZA(),t.TgZ(12,"div",11),t._uU(13),t.qZA()()(),t.TgZ(14,"form",12)(15,"div")(16,"mat-form-field",13)(17,"mat-label"),t._uU(18,"Expira en"),t.qZA(),t.TgZ(19,"span",14),t._uU(20,"D\xedas"),t.qZA(),t._UZ(21,"mat-icon",15)(22,"input",16),t.YNc(23,Tn,2,0,"mat-error"),t.qZA()()()()(),t.TgZ(24,"div",17)(25,"button",18),t._uU(26,"Cancelar"),t.qZA(),t.TgZ(27,"button",19),t.NdJ("click",function(){return i.createInvoice()}),t._uU(28," Aceptar "),t.qZA()()()()),2&n&&(t.xp6(11),t.Oqu(i.data.title),t.xp6(2),t.Oqu(i.data.message),t.xp6(),t.Q6J("formGroup",i.invoiceForm)("autocomplete","off"),t.xp6(7),t.Q6J("svgIcon","heroicons_solid:clock"),t.xp6(),t.Q6J("formControlName","expirationDays")("min",1)("max",60),t.xp6(),t.um2(23,i.invoiceForm.get("expirationDays").hasError("min")||i.invoiceForm.get("expirationDays").hasError("max")?23:-1),t.xp6(2),t.Q6J("matDialogClose",!0),t.xp6(2),t.Q6J("color","primary")("disabled",i.invoiceForm.invalid)("ngClass",t.VKq(13,kn,i.invoiceForm.invalid)))},dependencies:[v.ot,v.lW,Q.Is,Q.ZT,g.lN,g.KE,g.hX,g.TO,g.qo,g.R9,x.Ps,x.Hw,D.c,D.Nt,ie.LD,T.JX,Ye,h.mk,l.UX,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.qQ,l.Fd,l.sg,l.u],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})();var $e=d(2857);function An(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"mat-form-field",20),t._UZ(2,"mat-icon",21)(3,"input",22),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","mat_solid:search"),t.xp6(),t.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar ofertas")}}function qn(o,s){1&o&&t.GkF(0)}const Rn=()=>[""];function In(o,s){if(1&o&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.AsE("",t.xi3(3,2,e.total,t.DdM(5,Rn))," ",e.currency,"")}}const Fn=(o,s,e,n,i)=>({"bg-amber-50 text-amber-700":o,"bg-green-50 text-green-700":s,"bg-blue-50 text-blue-700":e,"bg-red-50 text-red-700":n,"bg-pink-50 text-pink-700":i}),Sn=o=>[o];function Un(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",35),t._uU(4),t.qZA(),t.TgZ(5,"div",29),t.SjG(6,In,4,6,"div",46,t.x6l),t.qZA(),t.TgZ(8,"div",36),t._uU(9),t.qZA(),t.TgZ(10,"div",37)(11,"span",38),t._uU(12),t.qZA()(),t.TgZ(13,"div",39)(14,"button",40),t._UZ(15,"mat-icon",41),t.qZA(),t.TgZ(16,"button",42),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.rejectQuotation(a))}),t._UZ(17,"mat-icon",41),t.qZA(),t.TgZ(18,"button",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.conformInvoice(a))}),t._UZ(19,"mat-icon",41),t.qZA(),t.TgZ(20,"button",44),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.deleteQuotation(a))}),t._UZ(21,"mat-icon",41),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.oxw(4);t.xp6(2),t.hij(" ",e.no," "),t.xp6(2),t.hij(" ",e.requestNo," "),t.xp6(2),t.wJu(n.getTotalAmount(e)),t.xp6(3),t.hij(" ",e.goodsData.length," "),t.xp6(),t.Q6J("matTooltip","Rechazada"===e.status?"Motivo: "+e.rejectedReason:"")("ngClass",t.qbA(15,Fn,"Nueva"===e.status,"Aceptada"===e.status,"Facturada"===e.status,"Rechazada"===e.status,"Vencida"===e.status)),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Q6J("routerLink",t.VKq(21,Sn,e._id)),t.xp6(),t.Q6J("svgIcon","mat_solid:visibility"),t.xp6(),t.Q6J("disabled",!e.status.includes("Nueva")&&!e.status.includes("Aceptada")),t.xp6(),t.Q6J("svgIcon","heroicons_solid:clipboard-copy"),t.xp6(),t.Q6J("disabled",!e.status.includes("Aceptada")),t.xp6(),t.Q6J("svgIcon","heroicons_solid:clipboard-check"),t.xp6(),t.Q6J("matTooltip","Eliminar")("disabled",!e.status.includes("Nueva")),t.xp6(),t.Q6J("svgIcon","heroicons_solid:trash")}}function On(o,s){1&o&&t.SjG(0,Un,22,23,"div",47,t.QCX().trackByFn),2&o&&t.wJu(s)}const Nn=o=>({"pointer-events-none":o}),Qn=()=>[10,25,50,100];function Mn(o,s){if(1&o&&(t.TgZ(0,"div",23),t.YNc(1,qn,1,0,"ng-container",24),t.TgZ(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28),t._uU(6," N\xfamero "),t.qZA(),t.TgZ(7,"div",28),t._uU(8," N.Oferta "),t.qZA(),t.TgZ(9,"div",29),t._uU(10," Importe "),t.qZA(),t.TgZ(11,"div",30),t._uU(12," Cantidad "),t.qZA(),t.TgZ(13,"div",31),t._uU(14," Estado "),t.qZA(),t.TgZ(15,"div",32),t._uU(16," Acciones "),t.qZA()(),t.YNc(17,On,2,0),t.ALo(18,"async"),t._UZ(19,"mat-paginator",33),t.qZA()()()),2&o){t.oxw();const e=t.MAs(28),n=t.oxw();let i;t.xp6(),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Q6J("mat-sort-header","no"),t.xp6(2),t.Q6J("mat-sort-header","requestNo"),t.xp6(6),t.Q6J("mat-sort-header","status"),t.xp6(4),t.um2(17,(i=t.lcZ(18,11,n.quotations$))?17:-1,i),t.xp6(2),t.Q6J("ngClass",t.VKq(13,Nn,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",t.DdM(15,Qn))("showFirstLastButtons",!0)}}function En(o,s){}function Pn(o,s){if(1&o&&t.YNc(0,En,0,0,"ng-template",48),2&o){t.oxw();const e=t.MAs(28),n=t.MAs(30),i=t.oxw();t.Q6J("ngTemplateOutlet",i.filterInputControl.value?e:n)}}const Jn=o=>({"bg-amber-500 text-amber-50":o}),Ln=o=>({"bg-green-500 text-green-50":o}),Bn=o=>({"bg-blue-500 text-blue-50":o}),jn=o=>({"bg-red-500 text-pink-50 text-red-5":o}),Gn=o=>({"bg-pink-500 text-pink-50":o});function Hn(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Nueva"!==i.filterInputControl.value?"Nueva":""))}),t.TgZ(2,"span",51),t._uU(3,"Nuevas"),t.qZA(),t._UZ(4,"div",52),t.qZA(),t.TgZ(5,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Aceptada"!==i.filterInputControl.value?"Aceptada":""))}),t.TgZ(6,"span",51),t._uU(7,"Aceptadas"),t.qZA(),t._UZ(8,"div",54),t.qZA(),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Facturada"!==i.filterInputControl.value?"Facturada":""))}),t.TgZ(10,"span",51),t._uU(11,"Facturadas"),t.qZA(),t._UZ(12,"div",56),t.qZA(),t.TgZ(13,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Rechazada"!==i.filterInputControl.value?"Rechazada":""))}),t.TgZ(14,"span",51),t._uU(15,"Rechazadas"),t.qZA(),t._UZ(16,"div",58),t.qZA(),t.TgZ(17,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Vencida"!==i.filterInputControl.value?"Vencida":""))}),t.TgZ(18,"span",51),t._uU(19,"Vencidas"),t.qZA(),t._UZ(20,"div",60),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(),t.Q6J("ngClass",t.VKq(5,Jn,"Nueva"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(7,Ln,"Aceptada"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(9,Bn,"Facturada"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(11,jn,"Rechazada"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(13,Gn,"Vencida"===e.filterInputControl.value))}}function zn(o,s){if(1&o&&(t.TgZ(0,"div",61),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.hij(" ",e.searchInputControl.value?"\xa1No se han encontrado ofertas!":"\xa1No se ha creado ninguna oferta a\xfan!","")}}const Yn=()=>["Super Administrador"];function $n(o,s){1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",5),t._UZ(9,"mat-icon",7),t.TgZ(10,"a",8),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",5),t._UZ(13,"mat-icon",7),t.TgZ(14,"a",9),t._uU(15,"Ofertas"),t.qZA()()(),t.TgZ(16,"div",10)(17,"a",11),t._UZ(18,"mat-icon",7),t.TgZ(19,"span",12),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",14),t._uU(23," Ofertas "),t.qZA()()(),t.YNc(24,An,4,4,"div",15),t.qZA(),t.YNc(25,Mn,20,16,"div",16)(26,Pn,1,1)(27,Hn,21,15,"ng-template",null,17,t.W1O)(29,zn,2,1,"ng-template",null,18,t.W1O),t.qZA()),2&o&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(6),t.Q6J("ngxPermissionsExcept",t.DdM(6,Yn)),t.xp6(),t.um2(25,s.length>0?25:26))}let Vn=(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._dialog=n,this._fuseConfirmationService=i,this._quotationService=a,this._snackBar=r,this.store=u,this.isLoading=!1,this.searchInputControl=new l.NI(null),this.filterInputControl=new l.NI(""),this._unsubscribeAll=new R.x}ngOnInit(){this.quotations$=this.store.select(jo.uy),this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,st.O)(null),(0,F.w)(e=>null!==e?(this.isLoading=!0,this._quotationService.getQuotations(0,20,"createdAt","desc",e,this.filterInputControl.value)):(0,N.of)()),(0,P.U)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,F.w)(e=>this._quotationService.getQuotations(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,et.T)(this._sort.sortChange,this._paginator.page).pipe((0,F.w)(()=>(this.isLoading=!0,this._quotationService.getQuotations(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,P.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteQuotation(e){this._fuseConfirmationService.open({title:"Eliminar Oferta",message:`\xbfEst\xe1 seguro que desea eliminar la oferta # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._quotationService.deleteQuotation(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectQuotation(e){this._dialog.open(rt.g,{data:{title:"Rechazar Oferta",message:`\xbfEst\xe1 seguro desea Rechazar la oferta # ${e.no}?`,rejectedReason:e.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._quotationService.rejectQuotation(e._id,i.reason).subscribe(r=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}conformInvoice(e){this._dialog.open(Dn,{data:{title:"Generar Factura",message:`\xbfEst\xe1 seguro que desea generar una factura para la oferta # ${e.no}?`,quotation:e},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"})}getTotalAmount(e){return e.goodsData.reduce((n,{currency:i})=>{if(!n.some(a=>a.currency===i)){const a=e.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,u)=>r+u,0);n.push({currency:i,total:a})}return n},[])}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(Q.uw),t.Y36(W.R),t.Y36($e.D),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["commercial-quotations"]],viewQuery:function(n,i){if(1&n&&(t.Gf(I.NW,5),t.Gf(T.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i._paginator=a.first),t.iGM(a=t.CRH())&&(i._sort=a.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","flex flex-col flex-auto min-w-0 overflow-y-auto sm:absolute sm:inset-0 bg-card dark:bg-transparent","cdkScrollable",""],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],["class","flex flex-col flex-auto"],["filter",""],["noQuotations",""],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-col","flex-auto"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","quotations-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-10","mr-6","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","quotations-table","md:px-8"],[1,"whitespace-nowrap"],[1,"text-center","truncate"],[1,"flex","items-center","mr-4","text-center","truncate","delay-100","rounded-full","h-7","lock","dark:bg-white","dark:bg-opacity-5",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["matTooltip","Rechazar Oferta","mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled","click"],["matTooltip","Generar Factura","mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled","click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","disabled","click"],[1,"flex","flex-col","items-end"],["class","flex flex-col items-end"],["class","grid items-center gap-4 px-6 py-3 border-b quotations-table md:px-8"],[3,"ngTemplateOutlet"],[1,"flex","self-end","justify-around","w-full","h-10","pl-2","pr-2","mb-3","mt-7","md:mt-10","md:mb-5","sm:pr-6","md:w-11/12","lg:w-10/12","xl:w-8/12"],[1,"flex","items-center","justify-center","h-full","mr-1","transition-all","ease-in-out","delay-100","border-0","rounded-full","text-amber-700","bg-amber-50","w-36","hover:bg-amber-500","hover:text-amber-50",3,"ngClass","click"],[1,"hidden","ml-2","mr-1","text-lg","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-green-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-green-50","w-36","hover:bg-green-500","hover:text-green-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-green-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-blue-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-blue-50","w-36","hover:bg-blue-500","hover:text-blue-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","text-red-700","transition-all","ease-in-out","bg-red-100","border-0","rounded-full","delay-50","w-36","hover:bg-red-500","hover:text-red-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","ml-1","text-pink-700","transition-all","ease-in-out","bg-pink-100","border-0","rounded-full","sm:ml-0","delay-50","w-36","hover:bg-pink-500","hover:text-pink-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-pink-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(t.YNc(0,$n,31,7,"div",0),t.ALo(1,"async")),2&n){let a;t.um2(0,(a=t.lcZ(1,1,i.quotations$))?0:-1,a)}},dependencies:[h.Ov,h.H9,v.ot,v.lW,g.lN,g.KE,g.qo,x.Ps,x.Hw,D.c,D.Nt,I.TU,I.NW,T.JX,T.YE,T.nU,K.AV,K.gM,X.PQ,h.mk,Fe.VI,Fe.gE,q.rH],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})();var Ve=d(78050),Kn=d(3437);const Wn=["requestDetail"];let Xn=(()=>{class o{constructor(){}ngOnInit(){}generatePDF(e){this.quotationDetailsComponent.generatePDF(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["request-details-header"]],viewQuery:function(n,i){if(1&n&&t.Gf(Wn,5),2&n){let a;t.iGM(a=t.CRH())&&(i.quotationDetailsComponent=a.first)}},standalone:!0,features:[t.jDz],decls:35,vars:7,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","w-full","min-w-0","overflow-auto","text-center","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","pb-4","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial/",1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/commercial/request",1,"ml-1","text-primary-500","hover:underline"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2","ml-2","text-left"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[1,"flex","items-center","justify-center","flex-shrink-0","mt-6","md:mt-0","sm:ml-4","gap-x-4"],["mat-button","",1,"rounded-full","bg-primary-100",3,"click"],[1,"text-primary-700",3,"svgIcon"],[1,"w-full"],["requestDetail",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Solicitudes"),t.qZA()()(),t.TgZ(16,"div",9)(17,"a",10),t._UZ(18,"mat-icon",6),t.TgZ(19,"span",11),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",12)(22,"div",13)(23,"span"),t._uU(24,"Detalles de la solicitud"),t.qZA()()()(),t.TgZ(25,"div",14)(26,"button",15),t.NdJ("click",function(){return i.generatePDF("open")}),t._UZ(27,"mat-icon",16),t.qZA(),t.TgZ(28,"button",15),t.NdJ("click",function(){return i.generatePDF("download")}),t._UZ(29,"mat-icon",16),t.qZA(),t.TgZ(30,"button",15),t.NdJ("click",function(){return i.generatePDF("print")}),t._UZ(31,"mat-icon",16),t.qZA()()(),t.TgZ(32,"div",17),t._UZ(33,"request-details",null,18),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(9),t.Q6J("svgIcon","heroicons_outline:eye"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:download"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:printer"))},dependencies:[Kn.d,x.Ps,x.Hw,v.ot,v.lW,q.rH],encapsulation:2,changeDetection:0})}return o})();var ti=d(60224),Ke=d(62805),We=d(40745);function ei(o,s){if(1&o&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("value",n.transformPaymentMethod(e)),t.xp6(),t.hij(" ",e.name," ")}}function oi(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El m\xe9todo de pago es obligatoria. "),t.qZA())}function ni(o,s){if(1&o&&(t.TgZ(0,"mat-form-field",6)(1,"mat-label"),t._uU(2,"M\xe9todo de pago"),t.qZA(),t._UZ(3,"mat-icon",8),t.TgZ(4,"mat-select",23),t.SjG(5,ei,2,2,"mat-option",24,t.x6l),t.qZA(),t.YNc(7,oi,2,0,"mat-error"),t.qZA()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("svgIcon","heroicons_solid:credit-card"),t.xp6(),t.Q6J("formControlName","paymentMethodData"),t.xp6(),t.wJu(s),t.xp6(2),t.um2(7,e.quotationForm.get("paymentMethodData").hasError("required")?7:-1)}}function ii(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Los d\xedas en que expira deben ser mayores igual que 1 o menores igual que 60. "),t.qZA())}const ai=(o,s)=>({"text-center pl-8  md:pl-0":o,"min-w-60 lg:w-80":s});function si(o,s){if(1&o&&(t.TgZ(0,"th",29),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.Q6J("ngClass",t.WLB(2,ai,"name"!==e,"name"===e)),t.xp6(),t.hij(" ",n.getFieldsTableHeaderNames(e)," ")}}const Xe=()=>[""];function ri(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(),t.AsE("",t.xi3(2,2,e[n],t.DdM(5,Xe))," ",e.currency," ")}}const li=()=>["$"];function ci(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(),t.hij("",t.xi3(2,1,e[n],t.DdM(4,li))," ")}}function di(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(),t.hij("",e[n]," ")}}const ui=(o,s)=>({"text-center":o,"w-60 lg:w-80":s});function mi(o,s){if(1&o&&(t.TgZ(0,"td",30),t.YNc(1,ri,3,6,"span")(2,ci,3,5,"span")(3,di,2,1,"span"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.WLB(4,ui,"name"!==e,"name"===e)),t.xp6(),t.um2(1,"price"===e?1:-1),t.xp6(),t.um2(2,"quantity"===e?2:-1),t.xp6(),t.um2(3,"price"!==e&&"quantity"!==e?3:-1)}}function pi(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"Total"),t.qZA())}const fi=(o,s)=>({"text-center":o,truncate:s});function _i(o,s){if(1&o&&(t.TgZ(0,"td",31),t.YNc(1,pi,2,0,"span"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.Q6J("ngClass",t.WLB(2,fi,"name"!==e,"name"===e)),t.xp6(),t.um2(1,"name"===e?1:-1)}}function hi(o,s){1&o&&(t.TgZ(0,"div"),t.YNc(1,si,2,5,"th",26)(2,mi,4,7,"td",27)(3,_i,2,5,"td",28),t.qZA())}function gi(o,s){if(1&o&&(t.TgZ(0,"th",35),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(),t.hij(" ",n.getFieldsTableHeaderNames(e)," ")}}function xi(o,s){if(1&o&&(t.TgZ(0,"span",39),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2).$implicit;t.xp6(),t.hij(" ",e[n],"")}}function Ci(o,s){if(1&o&&(t.TgZ(0,"div",39)(1,"mat-form-field",40),t._UZ(2,"input",41),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(2),t.Q6J("formControl",n.amountFormControl)("min",0)("max",n.getOldGoodsAmountById(e.goodsId))}}function vi(o,s){if(1&o&&(t.TgZ(0,"td",36)(1,"div",37),t.YNc(2,xi,2,1,"span",38)(3,Ci,3,3,"div",38),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(2),t.um2(2,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?-1:2),t.xp6(),t.um2(3,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?3:-1)}}function bi(o,s){1&o&&t._UZ(0,"td",42)}function yi(o,s){1&o&&(t.TgZ(0,"div"),t.YNc(1,gi,2,1,"th",32)(2,vi,4,2,"td",33)(3,bi,1,0,"td",34),t.qZA())}function wi(o,s){1&o&&(t.TgZ(0,"th",46),t._uU(1," Acciones "),t.qZA())}function Zi(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.operation(i.goodsId,-1))}),t._UZ(1,"mat-icon",53),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("disabled",0===e.amount),t.xp6(),t.Q6J("svgIcon","heroicons_solid:minus-sm")}}function Ti(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.operation(i.goodsId,1))}),t._UZ(1,"mat-icon",53),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("disabled",e.amount===n.getOldGoodsAmountById(e.goodsId)),t.xp6(),t.Q6J("svgIcon","heroicons_solid:plus-sm")}}function ki(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.toggleToEditGoods(i))}),t._UZ(1,"mat-icon",53),t.qZA()}2&o&&(t.xp6(),t.Q6J("svgIcon","heroicons_solid:pencil-alt"))}function Di(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.toggleToEditGoods(i))}),t._UZ(1,"mat-icon",53),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("color","primary")("disabled",n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)&&n.amountFormControl.invalid),t.xp6(),t.Q6J("svgIcon","heroicons_solid:pencil-alt")}}function Ai(o,s){if(1&o&&(t.TgZ(0,"td",47)(1,"div",48),t.YNc(2,Zi,2,2,"button",49)(3,Ti,2,2,"button",49)(4,ki,2,1,"button",50)(5,Di,2,3,"button",51),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(2),t.um2(2,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?-1:2),t.xp6(),t.um2(3,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?-1:3),t.xp6(),t.um2(4,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?-1:4),t.xp6(),t.um2(5,n.selectedGoodDataToEdit&&e.goodsId===(null==n.selectedGoodDataToEdit?null:n.selectedGoodDataToEdit.goodsId)?5:-1)}}function qi(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&o){const e=s.$implicit;t.xp6(),t.AsE("",t.xi3(2,2,e.total,t.DdM(5,Xe))," ",e.currency,"")}}function Ri(o,s){if(1&o&&(t.TgZ(0,"td",56),t.SjG(1,qi,3,6,"div",null,t.x6l),t.qZA()),2&o){const e=t.oxw(3);t.xp6(),t.wJu(e.getTotalQuantity())}}function Ii(o,s){1&o&&(t.TgZ(0,"div"),t.YNc(1,wi,2,0,"th",43)(2,Ai,6,4,"td",44)(3,Ri,3,0,"td",45),t.qZA())}function Fi(o,s){if(1&o&&(t.ynx(0,25),t.YNc(1,hi,4,0,"div")(2,yi,4,0,"div")(3,Ii,4,0,"div"),t.BQk()),2&o){const e=s.$implicit;t.s9C("matColumnDef",e),t.xp6(),t.um2(1,"actions"!==e&&"amount"!==e?1:-1),t.xp6(),t.um2(2,"amount"===e?2:-1),t.xp6(),t.um2(3,"actions"===e?3:-1)}}function Si(o,s){1&o&&t._UZ(0,"tr",57)}function Ui(o,s){1&o&&t._UZ(0,"tr",58)}function Oi(o,s){1&o&&t._UZ(0,"tr",59)}const Ni=o=>({"cursor-not-allowed":o});let Qi=(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._formBuilder=n,this._fuseConfirmationService=i,this._quotationsService=a,this._snackBar=r,this.store=u,this.selectedRequest=null,this.reject=new t.vpe,this.isQuotationCreated=new t.vpe,this.user$=(0,N.of)(null),this.selectedGoodDataToEdit=null,this.amountFormControl=new l.NI(0),this.paymentMethods$=(0,N.of)(null),this.displayedColumns=["name","type","uom","amount","price","quantity","actions"],this._unsubscribeAll=new R.x,this.amountFormControl.setValidators([l.kI.required])}ngOnInit(){this.goodsData=structuredClone(this.selectedRequest.goodsData),this.user$=this.store.select(k.rk),this.user$.pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.user=e,this._changeDetectorRef.markForCheck()}),this.paymentMethods$=this.store.select(Zt),this.quotationForm=this._formBuilder.group({merchantId:[this.selectedRequest.merchantId._id,[l.kI.required]],userId:[this.user.id,[l.kI.required]],requestId:[this.selectedRequest._id,[l.kI.required]],requestNo:[{disabled:!0,value:this.selectedRequest.no},[l.kI.required]],expirationDays:[this.selectedRequest.merchantId.commercialManagement.expirationQuotationDays,[l.kI.required,l.kI.min(1),l.kI.max(60)]],status:[We.qm.Nueva,[l.kI.required]],description:["",[l.kI.maxLength(1e3)]],paymentMethodData:[null,[l.kI.required]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createQuotation(){let e=this.quotationForm.getRawValue();e={...e,goodsData:this.goodsData},this._fuseConfirmationService.open({title:"Crear Oferta",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._quotationsService.createQuotation(e).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this.isQuotationCreated.next(this.selectedRequest)}),this._changeDetectorRef.markForCheck()})}transformPaymentMethod(e){return new We.R8(e)}getTotal(){return this.getTotalQuantity().map(e=>e.total).reduce((e,n)=>e+n,0)}getTotalQuantity(){return this.goodsData.reduce((e,{currency:n})=>{if(!e.some(i=>i.currency===n)){const i=this.goodsData.filter(a=>a.currency===n).map(a=>a.quantity).reduce((a,r)=>a+r,0);e.push({currency:n,total:i})}return e},[])}getFieldsTableHeaderNames(e){switch(e){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}operation(e,n){const i=this.goodsData.find(a=>a.goodsId===e);i.amount=i.amount+n,i.quantity=i.amount*i.price}getOldGoodsAmountById(e){return this.selectedRequest.goodsData.find(n=>n.goodsId===e).amount}toggleToEditGoods(e){if(this.selectedGoodDataToEdit&&this.selectedGoodDataToEdit.goodsId===e.goodsId){const i=this.amountFormControl.value;this.amountFormControl.clearValidators();const a=this.goodsData.find(r=>r.goodsId===e.goodsId);return a.amount=i,a.quantity=a.amount*a.price,this.amountFormControl.clearValidators(),void(this.selectedGoodDataToEdit=null)}const n=this.selectedRequest.goodsData.find(i=>i.goodsId===e.goodsId);this.amountFormControl.setValidators([l.kI.required,l.kI.min(0),l.kI.max(n.amount)]),this.amountFormControl.setValue(e.amount),this.selectedGoodDataToEdit=e}triggerReject(){this.reject.next(this.selectedRequest)}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(l.qu),t.Y36(W.R),t.Y36($e.D),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["quotation-confirm"]],inputs:{selectedRequest:"selectedRequest"},outputs:{reject:"reject",isQuotationCreated:"isQuotationCreated"},standalone:!0,features:[t.jDz],decls:37,vars:24,consts:[[1,"overflow-hidden","shadow-lg"],[1,"flex","flex-col","justify-between","order-b"],[1,"flex","flex-col","w-full","p-4","space-y-1","sm:p-10"],[1,"grid","w-full","grid-cols-4","gap-y-1","gap-x-6",3,"formGroup"],[1,"col-span-1"],["class","w-full"],[1,"w-full"],["matSuffix","",1,"ml-1"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["type","number","required","","matInput","",3,"formControlName","min","max"],[1,"col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matInput","","matTextareaAutosize","",1,"h-4","min-h-4","max-h-20",3,"formControlName","rows","spellcheck","maxlength"],[1,"flex","flex-col","col-span-4"],[1,"font-medium"],["tabindex","0",1,"mt-2","overflow-auto","rounded-md","max-h-80",2,"box-shadow","0 0 3px 0 rgb(0 0 0 / 10%), 0 1px 2px -1px rgb(0 0 0 / 10%) !important"],["mat-table","",1,"w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium",4,"matFooterRowDef"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","border-t"],["mat-button","",1,"-ml-4",3,"color","click"],["mat-flat-button","",3,"color","disabled","ngClass","click"],["required","",3,"formControlName"],[3,"value"],[3,"matColumnDef"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","",3,"ngClass",4,"matCellDef"],["mat-footer-cell","",3,"ngClass",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0",3,"ngClass"],["mat-cell","",3,"ngClass"],["mat-footer-cell","",3,"ngClass"],["mat-header-cell","","class","w-10 pl-8 pr-8 text-center md:w-auto md:pr-0 md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pl-8","pr-8","text-center","md:w-auto","md:pr-0","md:pl-0"],["mat-cell","",1,"text-center"],[1,"flex","justify-center"],["class","w-24"],[1,"w-24"],[1,"w-full","fuse-mat-no-subscript"],["type","number","matInput","","required","",3,"formControl","min","max"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","pl-8 pr-8 text-center md:pr-6 md:pl-0",4,"matHeaderCellDef"],["style","width: 120px;","mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"pl-8","pr-8","text-center","md:pr-6","md:pl-0"],["mat-cell","",1,"text-center",2,"width","120px"],[1,"flex","justify-center","space-x-2",2,"width","120px"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-button","",3,"disabled"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-button",""],["class","px-2 leading-6 min-h-7 h-7","mat-flat-button","",3,"color","disabled"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],["mat-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-flat-button","",1,"px-2","leading-6","min-h-7","h-7",3,"color","disabled","click"],["mat-footer-cell","",1,"text-end"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",1,"font-medium"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4),t.YNc(5,ni,8,3,"mat-form-field",5),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"div",4)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Expira en"),t.qZA(),t.TgZ(11,"span",7),t._uU(12,"D\xedas"),t.qZA(),t._UZ(13,"mat-icon",8)(14,"input",9),t.YNc(15,ii,2,0,"mat-error"),t.qZA()(),t.TgZ(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Descripci\xf3n"),t.qZA(),t._UZ(20,"mat-icon",8)(21,"textarea",12),t.qZA()()(),t.TgZ(22,"div",13)(23,"mat-label",14),t._uU(24,"Productos y servicios"),t.qZA(),t.TgZ(25,"div",15)(26,"table",16),t.SjG(27,Fi,4,4,"ng-container",25,t.x6l),t.YNc(29,Si,1,0,"tr",17)(30,Ui,1,0,"tr",18)(31,Oi,1,0,"tr",19),t.qZA()()()(),t.TgZ(32,"div",20)(33,"button",21),t.NdJ("click",function(){return i.triggerReject()}),t._uU(34," Rechazar Solicitud "),t.qZA(),t.TgZ(35,"button",22),t.NdJ("click",function(){return i.createQuotation()}),t._uU(36," Conformar Oferta "),t.qZA()()()()),2&n){let a;t.xp6(3),t.Q6J("formGroup",i.quotationForm),t.xp6(2),t.um2(5,(a=t.lcZ(6,20,i.paymentMethods$))?5:-1,a),t.xp6(8),t.Q6J("svgIcon","heroicons_solid:clock"),t.xp6(),t.Q6J("formControlName","expirationDays")("min",1)("max",60),t.xp6(),t.um2(15,i.quotationForm.get("expirationDays").hasError("min")||i.quotationForm.get("expirationDays").hasError("max")?15:-1),t.xp6(5),t.Q6J("svgIcon","mat_solid:subject"),t.xp6(),t.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("maxlength",1e3),t.xp6(5),t.Q6J("dataSource",i.goodsData),t.xp6(),t.wJu(i.displayedColumns),t.xp6(2),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(),t.Q6J("matFooterRowDef",i.displayedColumns),t.xp6(2),t.Q6J("color","warn"),t.xp6(2),t.Q6J("color","primary")("disabled",i.quotationForm.invalid||i.amountFormControl.invalid||0===i.getTotal())("ngClass",t.VKq(22,Ni,i.quotationForm.invalid||i.amountFormControl.invalid||0===i.getTotal()))}},dependencies:[h.Ov,v.ot,v.lW,g.lN,g.KE,g.hX,g.TO,g.qo,g.R9,D.c,D.Nt,x.Ps,x.Hw,ie.LD,ie.gD,Ce.ey,T.JX,h.mk,l.UX,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.nD,l.qQ,l.Fd,l.oH,l.sg,l.u,Ye,Ee,be,Le,ye,ve,je,Pe,Be,we,Ze,Je,Ge,ze,He],encapsulation:2,changeDetection:0})}return o})();var Mi=d(47363);function Ei(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"mat-form-field",20),t._UZ(2,"mat-icon",21)(3,"input",22),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("svgIcon","mat_solid:search"),t.xp6(),t.Q6J("formControl",e.searchInputControl)("autocomplete","off")("placeholder","Buscar solicitudes")}}function Pi(o,s){1&o&&t.GkF(0)}const Ji=()=>[""];function Li(o,s){if(1&o&&(t.TgZ(0,"div",45)(1,"span"),t._uU(2),t.ALo(3,"currency"),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.AsE("",t.xi3(3,2,e.total,t.DdM(5,Ji))," ",e.currency,"")}}function Bi(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"quotation-confirm",46),t.NdJ("reject",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.rejectRequest(i))})("isQuotationCreated",function(i){t.CHM(e);const a=t.oxw(5);return t.KtG(a.getRequestById(i))}),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.Q6J("selectedRequest",e)}}const ji=(o,s,e)=>({"bg-amber-50 text-amber-700":o,"bg-blue-50 text-blue-700":s,"bg-red-50 text-red-700":e}),Gi=o=>[o];function Hi(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",34)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",35),t._uU(4),t.qZA(),t.TgZ(5,"div",29),t.SjG(6,Li,4,6,"div",47,t.x6l),t.qZA(),t.TgZ(8,"div",36),t._uU(9),t.qZA(),t.TgZ(10,"div",37)(11,"span",38),t._uU(12),t.qZA()(),t.TgZ(13,"div",39)(14,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.toggleDetails(a))}),t._UZ(15,"mat-icon",41),t.qZA(),t.TgZ(16,"button",42),t._UZ(17,"mat-icon",41),t.qZA(),t.TgZ(18,"button",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.deleteRequest(a))}),t._UZ(19,"mat-icon",41),t.qZA()()(),t.TgZ(20,"div",26),t.YNc(21,Bi,1,1,"quotation-confirm",44),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(4);t.xp6(2),t.hij(" ",e.no," "),t.xp6(2),t.AsE(" ",e.name," ",e.lastname," "),t.xp6(2),t.wJu(n.getTotalAmount(e)),t.xp6(3),t.hij(" ",e.goodsData.length," "),t.xp6(),t.Q6J("matTooltip","Rechazada"===e.status?"Motivo: "+e.rejectedReason:"")("ngClass",t.kEZ(14,ji,"Nueva"===e.status,"Aceptada"===e.status,"Rechazada"===e.status)),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Q6J("disabled","Nueva"!==e.status),t.xp6(),t.Q6J("svgIcon",(null==n.selectedRequest?null:n.selectedRequest._id)===e._id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.xp6(),t.Q6J("routerLink",t.VKq(18,Gi,e._id)),t.xp6(),t.Q6J("svgIcon","mat_solid:visibility"),t.xp6(),t.Q6J("matTooltip","Eliminar"),t.xp6(),t.Q6J("svgIcon","heroicons_solid:trash"),t.xp6(2),t.um2(21,(null==n.selectedRequest?null:n.selectedRequest._id)===e._id?21:-1)}}function zi(o,s){1&o&&t.SjG(0,Hi,22,20,null,null,t.QCX().trackByFn),2&o&&t.wJu(s)}const Yi=o=>({"pointer-events-none":o}),$i=()=>[10,25,50,100];function Vi(o,s){if(1&o&&(t.TgZ(0,"div",23),t.YNc(1,Pi,1,0,"ng-container",24),t.TgZ(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28),t._uU(6," N\xfamero "),t.qZA(),t.TgZ(7,"div",28),t._uU(8," Nombre "),t.qZA(),t.TgZ(9,"div",29),t._uU(10," Importe "),t.qZA(),t.TgZ(11,"div",30),t._uU(12," Cantidad "),t.qZA(),t.TgZ(13,"div",31),t._uU(14," Estado "),t.qZA(),t.TgZ(15,"div",32),t._uU(16," Acciones "),t.qZA()(),t.YNc(17,zi,2,0),t.ALo(18,"async"),t._UZ(19,"mat-paginator",33),t.qZA()()()),2&o){t.oxw();const e=t.MAs(28),n=t.oxw();let i;t.xp6(),t.Q6J("ngTemplateOutlet",e),t.xp6(4),t.Q6J("mat-sort-header","no"),t.xp6(2),t.Q6J("mat-sort-header","name"),t.xp6(6),t.Q6J("mat-sort-header","status"),t.xp6(4),t.um2(17,(i=t.lcZ(18,11,n.requests$))?17:-1,i),t.xp6(2),t.Q6J("ngClass",t.VKq(13,Yi,n.isLoading))("length",n.pagination.length)("pageIndex",n.pagination.page)("pageSize",n.pagination.size)("pageSizeOptions",t.DdM(15,$i))("showFirstLastButtons",!0)}}function Ki(o,s){}function Wi(o,s){if(1&o&&t.YNc(0,Ki,0,0,"ng-template",48),2&o){t.oxw();const e=t.MAs(28),n=t.MAs(30),i=t.oxw();t.Q6J("ngTemplateOutlet",i.filterInputControl.value?e:n)}}const Xi=o=>({"bg-amber-500 text-amber-50":o}),ta=o=>({"bg-blue-500 text-blue-50":o}),ea=o=>({"bg-red-500 text-red-50":o});function oa(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Nueva"!==i.filterInputControl.value?"Nueva":""))}),t.TgZ(2,"span",51),t._uU(3,"Nuevas"),t.qZA(),t._UZ(4,"div",52),t.qZA(),t.TgZ(5,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Aceptada"!==i.filterInputControl.value?"Aceptada":""))}),t.TgZ(6,"span",51),t._uU(7,"Aceptadas"),t.qZA(),t._UZ(8,"div",54),t.qZA(),t.TgZ(9,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.filterInputControl.setValue("Rechazada"!==i.filterInputControl.value?"Rechazada":""))}),t.TgZ(10,"span",51),t._uU(11,"Rechazadas"),t.qZA(),t._UZ(12,"div",56),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(),t.Q6J("ngClass",t.VKq(3,Xi,"Nueva"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(5,ta,"Aceptada"===e.filterInputControl.value)),t.xp6(4),t.Q6J("ngClass",t.VKq(7,ea,"Rechazada"===e.filterInputControl.value))}}function na(o,s){if(1&o&&(t.TgZ(0,"div",57),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(),t.Oqu(e.searchInputControl.value?"\xa1No se han encontrado solicitudes!":"\xa1No le han enviado ninguna solicitud a\xfan!")}}const ia=()=>["Super Administrador"];function aa(o,s){1&o&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"div",4)(5,"div",5)(6,"a",6),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",5),t._UZ(9,"mat-icon",7),t.TgZ(10,"a",8),t._uU(11,"Gesti\xf3n Comercial"),t.qZA()(),t.TgZ(12,"div",5),t._UZ(13,"mat-icon",7),t.TgZ(14,"a",9),t._uU(15,"Solicitudes"),t.qZA()()(),t.TgZ(16,"div",10)(17,"a",11),t._UZ(18,"mat-icon",7),t.TgZ(19,"span",12),t._uU(20,"Regresar"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"div",14),t._uU(23," Solicitudes "),t.qZA()()(),t.YNc(24,Ei,4,4,"div",15),t.qZA(),t.YNc(25,Vi,20,16,"div",16)(26,Wi,1,1)(27,oa,13,9,"ng-template",null,17,t.W1O)(29,na,2,1,"ng-template",null,18,t.W1O),t.qZA()),2&o&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(6),t.Q6J("ngxPermissionsExcept",t.DdM(6,ia)),t.xp6(),t.um2(25,s.length>0?25:26))}let sa=(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._dialog=n,this._fuseConfirmationService=i,this._requestService=a,this._snackBar=r,this.store=u,this.isLoading=!1,this.searchInputControl=new l.NI(null),this.filterInputControl=new l.NI(""),this._unsubscribeAll=new R.x}ngOnInit(){this.requests$=this.store.select(ti.Mu),this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,st.O)(null),(0,F.w)(e=>(null!==e&&(this.isLoading=!0,this._requestService.getRequests(0,20,"createdAt","desc",e,this.filterInputControl.value)),(0,N.of)())),(0,P.U)(()=>{this.isLoading=!1})).subscribe(),this.filterInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(300),(0,F.w)(e=>this._requestService.getRequests(0,20,"createdAt","desc",this.searchInputControl.value,e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,et.T)(this._sort.sortChange,this._paginator.page).pipe((0,F.w)(()=>(this.isLoading=!0,this._requestService.getRequests(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value,this.filterInputControl.value))),(0,P.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteRequest(e){this._fuseConfirmationService.open({title:"Eliminar Usuario",message:`\xbfEst\xe1 seguro que desea eliminar la solicitud # ${e.no}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._requestService.deleteRequest(e._id,this.pagination.page,this.pagination.size,"createdAt","desc",this.searchInputControl.value,this.filterInputControl.value).subscribe(a=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()}rejectRequest(e){this._dialog.open(rt.g,{data:{title:"Rechazar Solicitud",message:`\xbfEst\xe1 seguro desea Rechazar la solicitud # ${e.no}?`,rejectedReason:e.rejectedReason,rejectedReasonRequired:!0},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(i=>{void 0!==i&&this._requestService.rejectRequest(e._id,i.reason).subscribe(r=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this.closeDetails(),this._changeDetectorRef.markForCheck()})})}getRequestById(e){this._requestService.getRequestById(e._id).subscribe(n=>{this.store.dispatch((0,Ke.WN)({request:n.data})),this.store.dispatch((0,Ke._P)()),this.closeDetails(),this._changeDetectorRef.markForCheck()})}getTotalAmount(e){return e.goodsData.reduce((n,{currency:i})=>{if(!n.some(a=>a.currency===i)){const a=e.goodsData.filter(r=>r.currency===i).map(r=>r.quantity).reduce((r,u)=>r+u,0);n.push({currency:i,total:a})}return n},[])}toggleDetails(e){this.selectedRequest&&this.selectedRequest._id===e._id?this.closeDetails():this.selectedRequest=e}closeDetails(){this.selectedRequest=null}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(Q.uw),t.Y36(W.R),t.Y36(Mi.r),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["hrm-requests"]],viewQuery:function(n,i){if(1&n&&(t.Gf(I.NW,5),t.Gf(T.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i._paginator=a.first),t.iGM(a=t.CRH())&&(i._sort=a.first)}},standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","flex flex-col flex-auto min-w-0 overflow-y-auto sm:absolute sm:inset-0 bg-card dark:bg-transparent","cdkScrollable",""],["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","overflow-y-auto","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/commercial",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],["class","flex flex-col flex-auto"],["filter",""],["noRequests",""],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-auto","sm:min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-col","flex-auto"],[4,"ngTemplateOutlet"],[1,"flex","flex-col","flex-auto","overflow-x-auto","lg:overflow-x-clip"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","requests-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"text-right"],[1,"text-center"],[1,"flex","justify-center",3,"mat-sort-header"],[1,"pr-8","mr-1","text-right"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","requests-table","md:px-8"],[1,"truncate","whitespace-nowrap"],[1,"text-center","truncate"],[1,"flex","items-center","mr-4","text-center","truncate","delay-100","rounded-full","h-7","lock","dark:bg-white","dark:bg-opacity-5",3,"matTooltip","ngClass"],[1,"w-full","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matTooltip","click"],[3,"selectedRequest"],[1,"flex","flex-col","items-end"],[3,"selectedRequest","reject","isQuotationCreated"],["class","flex flex-col items-end"],[3,"ngTemplateOutlet"],[1,"flex","self-end","justify-around","w-7/12","h-10","pr-6","mb-3","mt-7","md:mt-10","md:mb-5","md:w-7/12","lg:w-6/12","xl:w-5/12"],[1,"flex","items-center","justify-center","h-full","mr-1","transition-all","ease-in-out","delay-100","border-0","rounded-full","text-amber-700","bg-amber-50","w-36","hover:bg-amber-500","hover:text-amber-50",3,"ngClass","click"],[1,"hidden","ml-2","mr-1","text-lg","md:block"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-amber-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","mr-1","text-blue-700","transition-all","ease-in-out","delay-100","border-0","rounded-full","bg-blue-50","w-36","hover:bg-blue-500","hover:text-blue-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-blue-500","md:hidden"],[1,"flex","items-center","justify-center","h-full","text-red-700","transition-all","ease-in-out","bg-red-100","border-0","rounded-full","delay-50","w-36","hover:bg-red-500","hover:text-red-50",3,"ngClass","click"],[1,"w-1.5","h-1.5","sm:w-2.5","sm:h-2.5","rounded-full","bg-red-500","md:hidden"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(t.YNc(0,aa,31,7,"div",0),t.ALo(1,"async")),2&n){let a;t.um2(0,(a=t.lcZ(1,1,i.requests$))?0:-1,a)}},dependencies:[h.Ov,h.H9,v.ot,v.lW,g.KE,x.Ps,x.Hw,D.c,D.Nt,g.qo,I.TU,I.NW,T.JX,T.YE,T.nU,K.AV,K.gM,X.PQ,h.mk,Qi,l.UX,l.Fj,l.JJ,l.oH,q.rH],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})();var to=d(17598);let ra=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["selling-orders"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(n,i){1&n&&t._UZ(0,"router-outlet")},dependencies:[q.lC],encapsulation:2})}return o})();var ut=d(50967);const la=ut.Ps`
    query FindAllOrders($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllOrders(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }
            orders {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,ca=ut.Ps`
    query FindOrdersByMerchant($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findOrdersByMerchant(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            orders {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,da=ut.Ps`
    query FindOrderById($findOrderByIdId: String!) {
        findOrderById(id: $findOrderByIdId) {
            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                    address
                    state
                    city
                    nit
                    website
                }

                clientId
                client {
                    fullname
                    idNumber
                    address
                    state
                    city
                    email
                    phone
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    description
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight

            }
        }
    }
`,ua=ut.Ps`
    mutation UpdateOrder($updateOrderInput: UpdateOrderInput!) {
        updateOrder(updateOrderInput: $updateOrderInput) {

            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight
            }
        }
    }
`,ma=ut.Ps`
    mutation UpdateOrderStatus($updateOrderStatusInput: UpdateOrderStatusInput!) {
        updateOrderStatus(updateOrderStatusInput: $updateOrderStatusInput) {
            ok
            message

            order {
                id

                currencyId
                currency {
                    iso
                }

                merchantId
                merchant {
                    name
                }

                clientId
                client {
                    fullname
                }

                beneficiaryId
                beneficiary {
                    idNumber
                    fullname
                    email
                    phone
                    address
                    state
                    city
                }

                paymentMethodId
                paymentMethod {
                    name
                }

                products {
                    productId
                    quantity
                }

                productsInOrder {
                    id
                    name
                    price
                    thumbnail
                }

                canceled
                canceledAt
                cancelObs
                changeStatusAt
                createdAt
                delivered
                deliveredAt
                discount
                no
                obs
                orderType
                payed
                payedAt
                paymentStatus
                ready
                readyAt
                shipped
                shippedAt
                shippingCost
                shippingWay
                status
                subtotal
                tax
                total
                tracking
                volume
                weight
            }
        }
    }
`;var gt=d(99397),eo=d(6990),nt=d(34824),oo=d(97214);const Te=o=>o.orders,pa=(0,S.P1)(Te,o=>o.order),ke=(0,S.P1)(Te,o=>o.orders);(0,S.P1)(Te,o=>o.ordersByWeekdayStats);let De=(()=>{class o{constructor(e,n,i){this.apolloProvider=e,this._snackBar=n,this.store=i,this._apollo=this.apolloProvider.use("BALANC")}getOrders(e=1,n=10,i="name",a="asc",r=""){return this._apollo.query({query:la,errorPolicy:"all",variables:{offset:n*(e-1),limit:n,sort:i,order:a,search:r}}).pipe((0,gt.b)(({errors:u,data:p})=>{if(u){let w="";u.forEach(Z=>w+=`\n ${Z.message}.`),this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:w,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,nt.qQ)({orders:p.findAllOrders.orders})),this.store.dispatch((0,oo.Jr)({pagination:p.findAllOrders.pagination}))}))}getOrdersByMerchant(e=1,n=10,i="name",a="asc",r=""){return this._apollo.query({query:ca,errorPolicy:"all",variables:{offset:n*(e-1),limit:n,sort:i,order:a,search:r}}).pipe((0,gt.b)(({errors:u,data:p})=>{if(u){let w="";u.forEach(Z=>w+=`\n ${Z.message}.`),this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:w,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,nt.qQ)({orders:p.findOrdersByMerchant.orders})),this.store.dispatch((0,oo.Jr)({pagination:p.findOrdersByMerchant.pagination}))}))}getOrderById(e){return this._apollo.query({query:da,variables:{findOrderByIdId:e},errorPolicy:"all"}).pipe((0,gt.b)(({errors:n,data:i})=>{if(n){let a="";n.forEach(r=>a+=`\n ${r.message}.`),this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:a,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,nt.OL)({order:i.findOrderById.order}))}))}updateOrder(e){return this.store.select(ke).pipe((0,Tt.q)(1),(0,F.w)(n=>this._apollo.mutate({mutation:ua,variables:{updateOrderInput:e},errorPolicy:"all"}).pipe((0,gt.b)(({errors:i,data:a})=>{if(i){let p="";i.forEach(w=>p+=`\n ${w.message}.`),this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const r=(0,eo.cloneDeep)(n);r[n.findIndex(p=>p.id==p.id)]=a.updateOrder.order,this.store.dispatch((0,nt.qQ)({orders:r})),this.store.dispatch((0,nt.OL)({order:a.updateOrder.order}))}))))}updateOrderStatus(e){return this.store.select(ke).pipe((0,Tt.q)(1),(0,F.w)(n=>this._apollo.mutate({mutation:ma,variables:{updateOrderStatusInput:e},errorPolicy:"all"}).pipe((0,gt.b)(({errors:i,data:a})=>{if(i){let p="";i.forEach(w=>p+=`\n ${w.message}.`),this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const r=(0,eo.cloneDeep)(n);r[n.findIndex(p=>p.id==p.id)]=a.updateOrderStatus.order,this.store.dispatch((0,nt.qQ)({orders:r})),this.store.dispatch((0,nt.OL)({order:a.updateOrderStatus.order}))}))))}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(ut._M),t.LFG(B.ux),t.LFG(S.yh))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),fa=(()=>{class o{constructor(e){this._ordersService=e}resolve(e,n){const i=e.paramMap.get("orderId");if(null!==i)return this._ordersService.getOrderById(i)}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(De))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),_a=(()=>{class o{constructor(e){this._ordersService=e}resolve(e,n){return this._ordersService.getOrdersByMerchant()}static#t=this.\u0275fac=function(n){return new(n||o)(t.LFG(De))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var ha=d(55940),ga=d(27627);const xa=["htmlOrderList"],Ca=(o,s,e,n,i,a)=>({"bg-pink-200 text-pink-800 dark:bg-pink-600 dark:text-pink-50":o,"bg-teal-200 text-teal-800 dark:bg-teal-600 dark:text-teal-50":s,"bg-orange-200 text-orange-800 dark:bg-orange-600 dark:text-orange-50":e,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":n,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":i,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":a}),va=o=>["/modules/commercial/orders/invoice/",o];function ba(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",28),t._uU(2),t.qZA(),t.TgZ(3,"div",29),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",30),t._uU(7),t.qZA(),t.TgZ(8,"div",30),t._uU(9),t.qZA(),t.TgZ(10,"div",24),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"div",31)(14,"span",32)(15,"span",33),t._uU(16),t.qZA()()(),t.TgZ(17,"div",34)(18,"button",35),t._UZ(19,"mat-icon",36),t.qZA(),t.TgZ(20,"button",37),t._UZ(21,"mat-icon",36),t.qZA(),t.TgZ(22,"mat-menu",38,39)(24,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"pagada"))}),t.TgZ(25,"span"),t._uU(26,"Pagada"),t.qZA()(),t.TgZ(27,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"procesando"))}),t.TgZ(28,"span"),t._uU(29,"Procesando"),t.qZA()(),t.TgZ(30,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"lista"))}),t.TgZ(31,"span"),t._uU(32,"Lista"),t.qZA()(),t.TgZ(33,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"enviada"))}),t.TgZ(34,"span"),t._uU(35,"Enviada"),t.qZA()(),t.TgZ(36,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"entregada"))}),t.TgZ(37,"span"),t._uU(38,"Entregada"),t.qZA()(),t.TgZ(39,"button",40),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.updatedOrderStatus(a.id,"cancelada"))}),t.TgZ(40,"span"),t._uU(41,"Cancelada"),t.qZA()()()()()}if(2&o){const e=s.$implicit,n=t.MAs(23);t.xp6(2),t.hij(" ",e.no," "),t.xp6(2),t.hij(" ",t.xi3(5,17,e.createdAt,"shortDate")," "),t.xp6(3),t.hij(" ",e.client.fullname," "),t.xp6(2),t.hij(" ",e.beneficiary.fullname," "),t.xp6(2),t.hij(" $ ",t.xi3(12,20,e.total,"1.2-2")," "),t.xp6(3),t.Q6J("ngClass",t.HTZ(23,Ca,"nueva"===e.status,"procesando"===e.status,"lista"===e.status,"enviada"===e.status,"entregada"===e.status,"cancelada"===e.status)),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Q6J("routerLink",t.VKq(30,va,e.id)),t.xp6(),t.Q6J("svgIcon","mat_solid:description"),t.xp6(),t.Q6J("matMenuTriggerFor",n),t.xp6(),t.Q6J("svgIcon","mat_solid:drag_indicator"),t.xp6(3),t.Q6J("disabled",e.payed||e.canceled),t.xp6(3),t.Q6J("disabled",e.ready||e.shipped||e.delivered||e.delivered||e.canceled),t.xp6(3),t.Q6J("disabled",e.shipped||e.delivered||e.canceled),t.xp6(3),t.Q6J("disabled",e.delivered||e.canceled),t.xp6(3),t.Q6J("disabled",e.canceled),t.xp6(3),t.Q6J("disabled",e.delivered||e.canceled)}}function ya(o,s){1&o&&t.SjG(0,ba,42,32,"div",41,t.QCX().trackByFn),2&o&&t.wJu(s)}const wa=o=>({"pointer-events-none":o}),Za=()=>[5,10,25,100];function Ta(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21),t._uU(3," N\xfamero "),t.qZA(),t.TgZ(4,"div",22),t._uU(5," Fecha "),t.qZA(),t.TgZ(6,"div",23),t._uU(7," Cliente "),t.qZA(),t.TgZ(8,"div",23),t._uU(9," Beneficiario "),t.qZA(),t.TgZ(10,"div",24),t._uU(11," Importe "),t.qZA(),t.TgZ(12,"div",22),t._uU(13," Estado "),t.qZA(),t.TgZ(14,"div",25),t._uU(15," Acciones "),t.qZA()(),t.YNc(16,ya,2,0),t.ALo(17,"async"),t.qZA(),t._UZ(18,"mat-paginator",26)),2&o){const e=t.oxw(2);let n;t.xp6(2),t.Q6J("mat-sort-header","orderNo"),t.xp6(14),t.um2(16,(n=t.lcZ(17,8,e.orders$))?16:-1,n),t.xp6(2),t.Q6J("ngClass",t.VKq(10,wa,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.DdM(12,Za))("showFirstLastButtons",!0)}}function ka(o,s){1&o&&(t.TgZ(0,"div",42),t._uU(1,"\xa1No se ha generado ninguna orden!"),t.qZA())}function Da(o,s){1&o&&t.YNc(0,Ta,19,13)(1,ka,2,0),2&o&&t.um2(0,s.length>0?0:1)}function qa(o,s){1&o&&(t.TgZ(0,"div")(1,"div",8)(2,"div",9)(3,"a",10),t._uU(4,"Inicio"),t.qZA()(),t.TgZ(5,"div",9),t._UZ(6,"mat-icon",11),t.TgZ(7,"a",10),t._uU(8,"Ventas"),t.qZA()(),t.TgZ(9,"div",9),t._UZ(10,"mat-icon",11),t.TgZ(11,"a",10),t._uU(12,"\xd3rdenes"),t.qZA()(),t.TgZ(13,"div",9),t._UZ(14,"mat-icon",11),t.TgZ(15,"a",12),t._uU(16),t.qZA()(),t.TgZ(17,"div",13)(18,"a",14),t._UZ(19,"mat-icon",11),t.TgZ(20,"span",15),t._uU(21,"Regresar"),t.qZA()()()()(),t.TgZ(22,"div",16)(23,"h2",17),t._uU(24),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("routerLink","/home"),t.xp6(3),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(),t.Q6J("routerLink","/selling/panels"),t.xp6(3),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(),t.Q6J("routerLink","/selling/panels/orders"),t.xp6(3),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(2),t.Oqu(s.no),t.xp6(2),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(5),t.hij(" Orden ",s.no," "))}function Ra(o,s){if(1&o&&(t._UZ(0,"div",52),t.TgZ(1,"div",53)(2,"div",54),t._uU(3),t.qZA(),t.TgZ(4,"div",55),t._uU(5),t.qZA()(),t.TgZ(6,"div",56),t._uU(7),t.qZA(),t.TgZ(8,"div",57),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"div",58),t._uU(12),t.ALo(13,"currency"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2),i=t.oxw();t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij(" ",e.description," "),t.xp6(2),t.Oqu(i.getProductQty(e.id,n.products)),t.xp6(2),t.hij("",t.Dn7(10,5,e.price,n.currency.iso+" ","symbol")," "),t.xp6(3),t.Oqu(t.Dn7(13,9,i.getProductQty(e.id,n.products)*e.price,n.currency.iso+" ","symbol"))}}function Ia(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23),t._UZ(5,"img",24),t.qZA(),t.TgZ(6,"div",25)(7,"div",26),t._uU(8),t.qZA(),t.TgZ(9,"div"),t._uU(10),t.qZA(),t.TgZ(11,"div"),t._uU(12),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.qZA(),t.TgZ(15,"div"),t._uU(16),t.qZA(),t.TgZ(17,"div"),t._uU(18),t.qZA()()()(),t.TgZ(19,"div",27)(20,"div",28),t._uU(21,"FACTURA "),t.qZA(),t.TgZ(22,"div",29),t._uU(23),t.qZA(),t.TgZ(24,"div",30),t._uU(25,"FECHA"),t.qZA(),t.TgZ(26,"div",26),t._uU(27),t.ALo(28,"date"),t.qZA(),t.TgZ(29,"div",30),t._uU(30,"VENCIMIENTO"),t.qZA(),t.TgZ(31,"div",26),t._uU(32),t.ALo(33,"date"),t.qZA(),t.TgZ(34,"div",30),t._uU(35,"TOTAL"),t.qZA(),t.TgZ(36,"div",26),t._uU(37),t.ALo(38,"currency"),t.qZA(),t.TgZ(39,"div",30),t._uU(40,"ESTADO"),t.qZA(),t.TgZ(41,"div",26),t._uU(42),t.qZA()()(),t.TgZ(43,"table",31)(44,"thead")(45,"tr")(46,"th",32),t._uU(47,"CLIENTE"),t.qZA(),t.TgZ(48,"th",33),t._uU(49,"BENEFICIARIO"),t.qZA()()(),t.TgZ(50,"tbody")(51,"tr")(52,"td",34)(53,"div",35)(54,"div",26),t._uU(55),t.qZA(),t.TgZ(56,"div"),t._uU(57),t.qZA(),t.TgZ(58,"div"),t._uU(59),t.qZA(),t.TgZ(60,"div"),t._uU(61),t.qZA(),t.TgZ(62,"div"),t._uU(63),t.qZA(),t.TgZ(64,"div"),t._uU(65),t.qZA()()(),t.TgZ(66,"td")(67,"div",36)(68,"div",26),t._uU(69),t.qZA(),t.TgZ(70,"div"),t._uU(71),t.qZA(),t.TgZ(72,"div"),t._uU(73),t.qZA(),t.TgZ(74,"div"),t._uU(75),t.qZA(),t.TgZ(76,"div"),t._uU(77),t.qZA(),t.TgZ(78,"div"),t._uU(79),t.qZA()()()()()(),t.TgZ(80,"div",37)(81,"div",38),t._uU(82,"PRODUCTO"),t.qZA(),t.TgZ(83,"div",39),t._uU(84,"CANTIDAD"),t.qZA(),t.TgZ(85,"div",40),t._uU(86,"PRECIO"),t.qZA(),t.TgZ(87,"div",41),t._uU(88,"TOTAL"),t.qZA(),t.SjG(89,Ra,14,13,null,null,t.x6l),t._UZ(91,"div",42),t.TgZ(92,"div",43),t._uU(93,"SUBTOTAL"),t.qZA(),t.TgZ(94,"div",44),t._uU(95),t.ALo(96,"currency"),t.qZA(),t._UZ(97,"div",45),t.TgZ(98,"div",43),t._uU(99,"DESCUENTO"),t.qZA(),t.TgZ(100,"div",44),t._uU(101),t.ALo(102,"currency"),t.qZA(),t._UZ(103,"div",45),t.TgZ(104,"div",43),t._uU(105,"Recargo"),t.qZA(),t.TgZ(106,"div",44),t._uU(107),t.ALo(108,"currency"),t.qZA(),t._UZ(109,"div",45),t.TgZ(110,"div",43),t._uU(111,"ENV\xcdO"),t.qZA(),t.TgZ(112,"div",44),t._uU(113),t.ALo(114,"currency"),t.qZA(),t._UZ(115,"div",45),t.TgZ(116,"div",46),t._uU(117,"TOTAL "),t.qZA(),t.TgZ(118,"div",47),t._uU(119),t.ALo(120,"currency"),t.qZA()(),t.TgZ(121,"div",48)(122,"div",26),t._uU(123,"\xa1Muchas gracias por su compra!"),t.qZA(),t.TgZ(124,"div",49),t._UZ(125,"img",50),t.TgZ(126,"div",51),t._uU(127,' "La devoluci\xf3n de los fondos depende de la pol\xedtica de devoluciones del vendedor y no es responsabilidad de la empresa que facilita la plataforma de comercio electr\xf3nico." '),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(8),t.Oqu(e.merchant.name),t.xp6(2),t.Oqu(e.merchant.address),t.xp6(2),t.AsE("provincia ",e.merchant.state,", municipio ",e.merchant.city,""),t.xp6(2),t.Oqu(e.merchant.phone),t.xp6(2),t.Oqu(e.merchant.email),t.xp6(2),t.Oqu(e.merchant.website),t.xp6(5),t.Oqu(e.no),t.xp6(4),t.Oqu(t.xi3(28,31,e.createdAt,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.xi3(33,34,e.createdAt,"dd/MM/yyyy")),t.xp6(5),t.Oqu(t.Dn7(38,37,e.total,e.currency.iso+" ","symbol")),t.xp6(5),t.Oqu(e.status),t.xp6(13),t.hij("",e.client.fullname," "),t.xp6(2),t.hij("ID: ",e.client.idNumber,""),t.xp6(2),t.hij("Direcci\xf3n: ",e.client.address,""),t.xp6(2),t.AsE("Estado: ",e.client.state,", Ciudad: ",e.client.city,""),t.xp6(2),t.hij("Tel.: ",e.client.cell,""),t.xp6(2),t.hij("Correo electr\xf3nico: ",e.client.email,""),t.xp6(4),t.Oqu(e.beneficiary.fullname),t.xp6(2),t.hij("ID: ",e.beneficiary.idNumber,""),t.xp6(2),t.hij("Direcci\xf3n: ",e.beneficiary.address,""),t.xp6(2),t.AsE("Provincia: ",e.beneficiary.state,", Municipio: ",e.beneficiary.city," "),t.xp6(2),t.hij("Tel.: ",e.beneficiary.phone,""),t.xp6(2),t.hij("Correo electr\xf3nico: ",e.beneficiary.email,""),t.xp6(10),t.wJu(e.productsInOrder),t.xp6(6),t.hij("",t.Dn7(96,41,e.subtotal,e.currency.iso+" ","symbol")," "),t.xp6(6),t.hij("",t.Dn7(102,45,e.discount,e.currency.iso+" ","symbol")," "),t.xp6(6),t.Oqu(t.Dn7(108,49,e.tax,e.currency.iso+" ","symbol")),t.xp6(6),t.hij("",t.Dn7(114,53,e.shippingCost,e.currency.iso+" ","symbol")," "),t.xp6(6),t.hij("",t.Dn7(120,57,e.total,e.currency.iso+" ","symbol")," ")}}function Fa(o,s){1&o&&t.YNc(0,Ia,128,61,"div",18),2&o&&t.um2(0,null!==s?0:-1)}const Ua=[{path:"",component:mt},{path:"request",component:sa,resolve:{requests:to.r}},{path:"request/:requestId",component:Xn,resolve:{request:to.N}},{path:"payment-conditions",component:Mo,resolve:{paymentMethod:Eo}},{path:"quotations",component:Vn,resolve:{quotations:Ve.S}},{path:"quotations/:quotationId",component:Bo,resolve:{quotation:Ve.x}},{path:"invoices",component:oe,resolve:{quotations:yt.l}},{path:"invoices/:invoiceId",component:E,resolve:{quotation:yt.u}},{path:"orders",component:ra,resolve:{orders:_a},children:[{path:"",component:(()=>{class o{constructor(e,n,i,a,r,u){this._changeDetectorRef=e,this._fileSaverService=n,this._ordersService=i,this._router=a,this._snackBar=r,this.store=u,this.alertTitle=null,this.canceled=!1,this.delivered=!1,this.isLoading=!1,this.order=null,this.orders=[],this.orders$=(0,N.of)([]),this.payed=!1,this.ready=!1,this.roles=[],this.searchInputControl=new l.NI,this.selectedOrder=null,this.shipped=!1,this._unsubscribeAll=new R.x}ngOnInit(){this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.orders$=this.store.select(ke),this.orders$.subscribe(e=>this.orders=e),this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,G.b)(900),(0,F.w)(e=>this._ordersService.getOrders(0,10,"orderNo","asc",e))).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,et.T)(this._sort.sortChange,this._paginator.page).pipe((0,F.w)(()=>(this.closeDetails(),this._ordersService.getOrders(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction)))).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedOrder=null}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.orders,"orders")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.orders,"orders")}updatedOrderStatus(e,n){this._ordersService.updateOrderStatus({id:e,status:n}).pipe((0,_.R)(this._unsubscribeAll)).subscribe(({data:i})=>{this._snackBar.openFromComponent(A.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:i.updateOrderStatus.message,type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})}viewPurchaseOrder(e){this._router.navigateByUrl(`/modules/commercial/orders/invoice/${e}`)}trackByFn(e,n){return n.id||e}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(t.sBO),t.Y36(ga.m),t.Y36(De),t.Y36(q.F0),t.Y36(B.ux),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["selling-orders-list"]],viewQuery:function(n,i){if(1&n&&(t.Gf(xa,5),t.Gf(I.NW,5),t.Gf(T.YE,5)),2&n){let a;t.iGM(a=t.CRH())&&(i.htmlOrderList=a.first),t.iGM(a=t.CRH())&&(i._paginator=a.first),t.iGM(a=t.CRH())&&(i._sort=a.first)}},standalone:!0,features:[t.jDz],decls:32,vars:13,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-wrap","p-6","py-8","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-2xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:overflow-y-auto","sm:mb-18"],[1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","orders-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"text-center","md:block"],[1,"xl:block"],[1,"text-right","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","orders-grid","md:px-8"],[1,""],[1,"text-center","truncate","md:block"],[1,"truncate","xl:block"],[1,"flex","items-center","justify-center"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap"],[1,"flex","flex-row","items-center","justify-center","gap-1"],["mat-stroked-button","","matTooltip","Ver orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","","aria-label","Estados de la orden",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"matMenuTriggerFor"],["xPosition","before"],["orderMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["class","grid items-center gap-4 px-6 py-3 border-b orders-grid md:px-8"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",5),t._uU(11,"Ventas"),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",7),t._uU(15,"\xd3rdenes"),t.qZA()(),t.TgZ(16,"div",8)(17,"a",9),t._UZ(18,"mat-icon",6),t.TgZ(19,"span",10),t._uU(20,"Regresar"),t.qZA()()()()(),t.TgZ(21,"div",11)(22,"h2",12),t._uU(23," Listado de \xf3rdenes "),t.qZA()()(),t.TgZ(24,"div",13)(25,"mat-form-field",14),t._UZ(26,"mat-icon",15)(27,"input",16),t.qZA()()(),t.TgZ(28,"div",17)(29,"div",18),t.YNc(30,Da,2,1),t.ALo(31,"async"),t.qZA()()()),2&n){let a;t.xp6(6),t.Q6J("routerLink","/home"),t.xp6(3),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(),t.Q6J("routerLink","/selling/panels"),t.xp6(3),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("routerLink","./.."),t.xp6(),t.Q6J("svgIcon","mat_solid:chevron_left"),t.xp6(8),t.Q6J("svgIcon","mat_solid:search"),t.xp6(),t.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar \xf3rdenes"),t.xp6(3),t.um2(30,(a=t.lcZ(31,11,i.orders$))?30:-1,a)}},dependencies:[h.Ov,h.uU,h.JJ,v.ot,v.lW,g.lN,g.KE,g.qo,x.Ps,x.Hw,D.c,D.Nt,j.Tx,j.VK,j.OP,j.p6,I.TU,I.NW,ha.Cq,y.rP,T.JX,T.YE,T.nU,h.mk,l.UX,l.Fj,l.JJ,l.oH,q.rH],styles:[".orders-grid{grid-template-columns:75px 75px 180px 180px 150px 150px auto}\n"],encapsulation:2,data:{animation:Y.L},changeDetection:0})}return o})()},{path:"invoice/:orderId",component:(()=>{class o{constructor(e,n,i,a){this._activatedRoute=e,this._changeDetectorRef=n,this._router=i,this.store=a,this.order$=(0,N.of)(null),this._unsubscribeAll=new R.x}ngOnInit(){this.order$=this.store.select(pa)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}printDocument(){window.print()}getProductQty(e,n){return n.find(i=>i.productId===e).quantity}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(q.gz),t.Y36(t.sBO),t.Y36(q.F0),t.Y36(S.yh))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["selling-invoice"]],standalone:!0,features:[t.jDz],decls:13,vars:7,consts:[["cdkScrollable","",1,"absolute","inset-0","min-w-0","overflow-auto","text-center","print:overflow-visible"],[1,"flex","flex-col","flex-wrap","p-6","py-8","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-mine-50","dark:bg-transparent","print:hidden"],[1,"flex-1","min-w-0"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","","mat-button","",1,"ml-4","text-white","bg-primary-500",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"inline-block","p-6","text-left","sm:p-10","print:p-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","text-left","truncate","md:text-4xl","sm:leading-10"],["class","p-16 shadow w-240 min-w-240 rounded-2xl bg-card print:w-auto print:p-0 print:rounded-none print:shadow-none print:bg-transparent"],[1,"p-16","shadow","w-240","min-w-240","rounded-2xl","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-start"],[1,"grid","place-items-start"],[1,"grid","grid-flow-col","auto-cols-max","gap-x-8"],[1,"w-24","place-self-center"],["src","assets/images/logo/logo.svg",1,"w-24"],[1,"pl-10","border-l","text-md"],[1,"font-medium"],[1,"grid","grid-cols-2","ml-auto","gap-x-4","gap-y-1"],[1,"text-2xl","font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"text-2xl","font-medium"],[1,"font-medium","tracking-tight","justify-self-end","text-secondary"],[1,"w-full","mt-10"],[1,"px-10"],[1,"pl-10"],[1,"border-r"],[1,"flex","flex-col","px-10","text-md"],[1,"flex","flex-col","pl-10","text-md"],[1,"grid","grid-cols-12","mt-16","gap-x-1"],[1,"col-span-6","font-medium","text-md","text-secondary"],[1,"font-medium","text-right","text-md","text-secondary"],[1,"col-span-2","font-medium","text-right","text-md","text-secondary"],[1,"col-span-3","font-medium","text-right","text-md","text-secondary"],[1,"col-span-12","mt-16"],[1,"self-center","col-span-10","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-lg","text-right"],[1,"col-span-12","my-3","border-b"],[1,"self-center","col-span-10","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-2xl","font-medium","text-right"],[1,"mt-16"],[1,"flex","items-start","mt-4"],["src","assets/images/logo/logo.svg",1,"w-10","mt-2","flex-0"],[1,"ml-6","text-sm","text-secondary"],[1,"col-span-12","my-4","border-b"],[1,"col-span-6"],[1,"text-lg","font-medium"],[1,"mt-2","text-md","text-secondary"],[1,"self-center","text-right"],[1,"self-center","col-span-2","text-right"],[1,"self-center","col-span-3","text-right"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,qa,25,10),t.ALo(4,"async"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return i.printDocument()}),t._UZ(7,"mat-icon",5),t.TgZ(8,"span",6),t._uU(9,"Imprimir"),t.qZA()()()(),t.TgZ(10,"div",7),t.YNc(11,Fa,1,1),t.ALo(12,"async"),t.qZA()()),2&n){let a;t.xp6(3),t.um2(3,(a=t.lcZ(4,3,i.order$))?3:-1,a),t.xp6(4),t.Q6J("svgIcon","mat_solid:print"),t.xp6(4),t.um2(11,(a=t.lcZ(12,5,i.order$))?11:-1,a)}},dependencies:[h.Ov,h.uU,h.H9,q.rH,x.Ps,x.Hw,v.ot,v.lW],encapsulation:2,changeDetection:0})}return o})(),resolve:{order:fa}}]}]},55497:(Ae,it,d)=>{d.d(it,{Z:()=>Zt});const _=function R(c,m){for(var f=-1,y=null==c?0:c.length,C=Array(y);++f<y;)C[f]=m(c[f],f,c);return C};var b=d(89711),t=d(29977),q=d(33844),mt=d(91196);const x=function v(c){return"symbol"==typeof c||(0,mt.Z)(c)&&"[object Symbol]"==(0,q.Z)(c)};var U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/;var l=d(88410);function D(c,m){if("function"!=typeof c||null!=m&&"function"!=typeof m)throw new TypeError("Expected a function");var f=function(){var y=arguments,C=m?m.apply(this,y):y[0],k=f.cache;if(k.has(C))return k.get(C);var lt=c.apply(this,y);return f.cache=k.set(C,lt)||k,lt};return f.cache=new(D.Cache||l.Z),f}D.Cache=l.Z;const j=D;var et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/\\(\\)?/g;const F=function T(c){var m=j(c,function(y){return 500===f.size&&f.clear(),y}),f=m.cache;return m}(function(c){var m=[];return 46===c.charCodeAt(0)&&m.push(""),c.replace(et,function(f,y,C,k){m.push(C?k.replace(G,"$1"):y||f)}),m});var P=d(66875),z=P.Z?P.Z.prototype:void 0,Y=z?z.toString:void 0;const A=function rt(c){if("string"==typeof c)return c;if((0,t.Z)(c))return _(c,rt)+"";if(x(c))return Y?Y.call(c):"";var m=c+"";return"0"==m&&1/c==-1/0?"-0":m},ft=function qe(c){return null==c?"":A(c)},Q=function K(c,m){return(0,t.Z)(c)?c:function E(c,m){if((0,t.Z)(c))return!1;var f=typeof c;return!("number"!=f&&"symbol"!=f&&"boolean"!=f&&null!=c&&!x(c))||at.test(c)||!U.test(c)||null!=m&&c in Object(m)}(c,m)?[c]:F(ft(c))},X=function S(c){if("string"==typeof c||x(c))return c;var m=c+"";return"0"==m&&1/c==-1/0?"-0":m},Qt=function Nt(c,m){return m.length<2?c:function Ft(c,m){for(var f=0,y=(m=Q(m,c)).length;null!=c&&f<y;)c=c[X(m[f++])];return f&&f==y?c:void 0}(c,function Ut(c,m,f){var y=-1,C=c.length;m<0&&(m=-m>C?0:C+m),(f=f>C?C:f)<0&&(f+=C),C=m>f?0:f-m>>>0,m>>>=0;for(var k=Array(C);++y<C;)k[y]=c[y+m];return k}(m,0,-1))},Et=function Mt(c,m){return m=Q(m,c),null==(c=Qt(c,m))||delete c[X(function W(c){var m=null==c?0:c.length;return m?c[m-1]:void 0}(m))]};var Pt=d(36299),Jt=d(15511);const Bt=function Lt(c){return(0,Jt.Z)(c)?void 0:c};var jt=d(4331),Gt=d(45727),vt=P.Z?P.Z.isConcatSpreadable:void 0;const zt=function Ht(c){return(0,t.Z)(c)||(0,Gt.Z)(c)||!!(vt&&c&&c[vt])},Yt=function bt(c,m,f,y,C){var k=-1,lt=c.length;for(f||(f=zt),C||(C=[]);++k<lt;){var ot=c[k];m>0&&f(ot)?m>1?bt(ot,m-1,f,y,C):(0,jt.Z)(C,ot):y||(C[C.length]=ot)}return C},Vt=function $t(c){return null!=c&&c.length?Yt(c,1):[]};var Kt=d(9007),Wt=d(85122);var ee=d(56959);const Zt=function Xt(c){return(0,Wt.Z)((0,Kt.Z)(c,void 0,Vt),c+"")}(function(c,m){var f={};if(null==c)return f;var y=!1;m=_(m,function(k){return k=Q(k,c),y||(y=k.length>1),k}),(0,Pt.Z)(c,(0,ee.Z)(c),f),y&&(f=(0,b.Z)(f,7,Bt));for(var C=m.length;C--;)Et(f,m[C]);return f})}}]);