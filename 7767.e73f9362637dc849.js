"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7767],{87767:(xe,F,i)=>{i.r(F),i.d(F,{default:()=>ge});var a=i(89417),g=i(60177),v=i(9183),b=i(88834),C=i(99213),h=i(82798),E=i(59042),d=i(32102),p=i(76233),k=i(7673),x=i(21413),z=i(96354),c=i(56977),R=i(70980),$=i(87122),j=i(55364),N=i(94794),M=i(45312),y=i(77028),e=i(54438),G=i(85006),_=i(46601),D=i(5946),T=i(90118),S=i(35524),I=i(95416),W=i(51188),Y=i(59640),w=i(99327),L=i(86600);const B=["wizardMerchantNgForm"],A=["logoFileInput"];function U(t,n){if(1&t&&(e.j41(0,"fuse-alert",10),e.EFF(1),e.k0s()),2&t){const r=e.XpG();e.Y8G("type",r.alert.type)("showIcon",!1),e.R7$(),e.SpI(" ",r.alert.message," ")}}function P(t,n){1&t&&e.EFF(0,"Informaci\xf3n general")}function X(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del negocio es obligatorio. "),e.k0s())}function O(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del negocio debe contener entre 3 y 40 caracteres. "),e.k0s())}function Q(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Las siglas no deben superar los 10 caracteres. "),e.k0s())}function V(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Las siglas del negocio son obligatorias. "),e.k0s())}function J(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Las siglas del negocio no presentan un formato v\xe1lido. "),e.k0s())}function Z(t,n){if(1&t&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.name),e.R7$(),e.SpI(" ",r.name," ")}}function H(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Debe escoger un sector. "),e.k0s())}function K(t,n){1&t&&(e.j41(0,"mat-label"),e.EFF(1,"Tel\xe9fonos"),e.k0s())}function q(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono debe contener entre 7 d\xedgitos. "),e.k0s())}function ee(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.k0s())}function te(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.k0s())}function re(t,n){if(1&t&&(e.j41(0,"mat-form-field",22),e.DNE(1,K,2,0,"mat-label"),e.nrm(2,"input",38),e.j41(3,"mat-select",39)(4,"mat-select-trigger")(5,"span",40)(6,"span",41),e.EFF(7),e.k0s()()(),e.j41(8,"mat-option",21)(9,"span",40),e.nrm(10,"span",42),e.j41(11,"span",43),e.EFF(12),e.nI1(13,"titlecase"),e.k0s(),e.j41(14,"span",44),e.EFF(15),e.k0s()()()(),e.DNE(16,q,2,0,"mat-error")(17,ee,2,0,"mat-error")(18,te,2,0,"mat-error"),e.k0s()),2&t){const r=n.$implicit,s=n.$index,o=n.$index,m=e.XpG();e.R7$(),e.vxM(1,0===o?1:-1),e.R7$(),e.Y8G("type","tel")("formControl",r.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",7),e.R7$(),e.Y8G("formControl",r.get("stateCode")),e.R7$(4),e.JRh(m.wizardMerchantForm.get("step1.phoneNumbers").value[s].stateCode),e.R7$(),e.Y8G("value","+535"),e.R7$(4),e.JRh(e.bMT(13,14,"celular")),e.R7$(3),e.JRh("+535"),e.R7$(),e.vxM(16,r.get("phoneNumber").hasError("minlength")||r.get("phoneNumber").hasError("maxlength")?16:-1),e.R7$(),e.vxM(17,r.get("phoneNumber").hasError("pattern")?17:-1),e.R7$(),e.vxM(18,r.get("phoneNumber").hasError("required")?18:-1)}}function oe(t,n){1&t&&(e.j41(0,"mat-label"),e.EFF(1,"Correos Electr\xf3nicos"),e.k0s())}function ae(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.k0s())}function ne(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," El correos electr\xf3nico es obligatorio. "),e.k0s())}function ie(t,n){if(1&t&&(e.j41(0,"mat-form-field",22),e.DNE(1,oe,2,0,"mat-label"),e.nrm(2,"mat-icon",24)(3,"input",45),e.DNE(4,ae,2,0,"mat-error")(5,ne,2,0,"mat-error"),e.k0s()),2&t){const r=n.$implicit,s=n.$index;e.R7$(),e.vxM(1,0===s?1:-1),e.R7$(),e.Y8G("svgIcon","mat_solid:email"),e.R7$(),e.Y8G("formControl",r.get("email"))("spellcheck",!1),e.R7$(),e.vxM(4,r.get("email").hasError("email")?4:-1),e.R7$(),e.vxM(5,r.get("email").hasError("required")?5:-1)}}function se(t,n){1&t&&e.EFF(0,"Domicilio")}function me(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," La direcci\xf3n es obligatoria. "),e.k0s())}function le(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," La direcci\xf3n debe contener entre 3 y 100 caracteres. "),e.k0s())}function ce(t,n){if(1&t&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r),e.R7$(),e.SpI(" ",r," ")}}function de(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar una provincia. "),e.k0s())}function pe(t,n){if(1&t&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&t){const r=n.$implicit;e.Y8G("value",r.city),e.R7$(),e.SpI(" ",r.city," ")}}function he(t,n){1&t&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar un municipio. "),e.k0s())}function ue(t,n){1&t&&(e.j41(0,"span"),e.EFF(1," Crear Negocio "),e.k0s())}function fe(t,n){1&t&&e.nrm(0,"mat-progress-spinner",37),2&t&&e.Y8G("diameter",24)("mode","indeterminate")}const Fe=M.c.DOMAIN,ge=[{path:"",component:(()=>{class t{constructor(r,s,o,m,l,u,f,ve,be,Ce,Ee){this._merchantsService=r,this._changeDetectorRef=s,this._formBuilder=o,this._fuseConfirmationService=m,this._imagesService=l,this._locationService=u,this._authService=f,this._snackBar=ve,this._router=be,this.store=Ce,this.breakpointObserver=Ee,this.domain="",this.merchant=null,this.cities=[],this.domainCode="",this.domains=[],this.isLoading=!1,this.stateCode="",this.states=[],this.statesCodes=[],this.stateSelected="",this.user=null,this.user$=(0,k.of)(null),this._unsubscribeAll=new x.B,this.domain=Fe,this.stepperOrientation=this.breakpointObserver.observe("(min-width: 800px)").pipe((0,z.T)(({matches:ke})=>ke?"horizontal":"vertical"))}ngOnInit(){this._merchantsService.domains$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.domains=s,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.states=s,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.statesCodes=s,this._changeDetectorRef.markForCheck()}),this.wizardMerchantForm=this._formBuilder.group({step1:this._formBuilder.group({name:["",[a.k0.required,a.k0.minLength(3),a.k0.maxLength(255)]],abbr:["",[a.k0.required,a.k0.maxLength(10),a.k0.pattern("^[a-zA-Z0-9]{1,10}$")]],domain:["",[a.k0.required]],description:["",[a.k0.maxLength(1e3)]],emails:this._formBuilder.array([]),phoneNumbers:this._formBuilder.array([])}),step2:this._formBuilder.group({address:["",[a.k0.required,a.k0.minLength(3),a.k0.maxLength(255)]],state:["",[a.k0.required]],city:["",[a.k0.required]],country:[{value:"Cuba",disabled:!0},[a.k0.required]]})}),this.wizardMerchantForm.get("step2.state")?.valueChanges.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this._getCitiesByState(s),this._changeDetectorRef.markForCheck()}),this.addEmailField(),this.addPhoneNumberField()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addEmailField(){const r=this._formBuilder.group({email:["",[a.k0.required,a.k0.email,a.k0.maxLength(255)]],label:["",[a.k0.minLength(3),a.k0.maxLength(255)]]});this.wizardMerchantForm.get("step1.emails").push(r),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const r=this._formBuilder.group({stateCode:["+535",[a.k0.required]],phoneNumber:["",[a.k0.required,a.k0.minLength(7),a.k0.maxLength(7),j.t.onlyNumbersPattern()]],label:["",[a.k0.minLength(3),a.k0.maxLength(255)]]});this.wizardMerchantForm.get("step1.phoneNumbers").push(r),this._changeDetectorRef.markForCheck()}createMerchant(){const r=this.wizardMerchantForm.getRawValue(),s={...r.step1,...r.step2};this._fuseConfirmationService.open({title:"Crear negocio",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(m=>{"confirmed"===m&&(this.isLoading=!0,this._changeDetectorRef.markForCheck(),this._merchantsService.createMerchant(s).pipe((0,c.Q)(this._unsubscribeAll),(0,R.j)(()=>{this.isLoading=!1,this._changeDetectorRef.markForCheck()})).subscribe(({data:l})=>{l&&(this._snackBar.openFromComponent(N.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:l.createMerchant.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._authService.signInUsingToken().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>this._router.navigate(["profile"])))}))})}clearForm(){this.wizardMerchantNgForm.resetForm()}trackByFn(r,s){return s.id||r}_getCitiesByState(r){r!==this.stateSelected&&this._locationService.getCitiesByState(r).subscribe(s=>{this.cities=s,this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(s){return new(s||t)(e.rXU(G.b),e.rXU(e.gRc),e.rXU(a.ok),e.rXU(_.G),e.rXU(D.M),e.rXU(T.N),e.rXU(S.u),e.rXU(I.UG),e.rXU(W.Ix),e.rXU(Y.il),e.rXU(w.QP))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["ath-wizard"]],viewQuery:function(s,o){if(1&s&&(e.GBs(B,5),e.GBs(A,5)),2&s){let m;e.mGM(m=e.lsd())&&(o.wizardMerchantNgForm=m.first),e.mGM(m=e.lsd())&&(o._logoFileInput=m.first)}},standalone:!0,features:[e.aNF],decls:104,vars:54,consts:[["wizardBusinessNgForm",""],["stepper",""],["wizardStep1",""],["abbrT",""],["wizardStep2",""],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","items-center","flex-auto","p-3","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"mt-2","text-4xl","font-extrabold","leading-tight","tracking-tight","sm:text-5xl","text-primary"],[1,"mt-8","shadow","sm:mt-12","p-y-6","pb-7","sm:p-10","sm:pb-7","rounded-2xl","bg-card"],[1,"mb-8",3,"type","showIcon"],["wizardBusinessNgForm","ngForm",1,"overflow-hidden","p-y-8","sm:p-4",3,"formGroup"],["linear","",3,"orientation"],[3,"formGroupName","stepControl"],["matStepLabel",""],[1,"my-6","font-medium"],[1,"flex","mb-6"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","maxlength"],[3,"formControlName"],[3,"value"],[1,"flex-auto"],[1,"w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],[1,"text-right"],[1,"flex","justify-end"],["mat-flat-button","","type","button","matStepperNext","",1,"px-8",3,"color","disabled"],[1,"flex","flex-col","gap-6","mb-6","gt-xs:flex-row"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["required","",3,"formControlName"],["value","Cuba"],[1,"flex","justify-between"],["mat-flat-button","","type","button","matStepperPrevious","",1,"px-8","mr-2",3,"color"],["mat-flat-button","","type","button",1,"px-8",3,"click","color","disabled"],[3,"diameter","mode"],["matInput","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],["matInput","","required","",3,"formControl","spellcheck"]],template:function(s,o){if(1&s){const m=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e.EFF(4," Est\xe1 solo a tres pasos de crear su primer negocio. "),e.k0s(),e.j41(5,"div",9),e.DNE(6,U,2,3,"fuse-alert",10),e.j41(7,"form",11,0)(9,"mat-stepper",12,1),e.nI1(11,"async"),e.j41(12,"mat-step",13,2),e.DNE(14,P,1,0,"ng-template",14),e.j41(15,"p",15),e.EFF(16," Ingrese la informaci\xf3n m\xednima necesaria para que sus clientes conozcan el negocio. "),e.k0s(),e.j41(17,"div",16)(18,"mat-form-field",17)(19,"mat-label"),e.EFF(20,"Nombre"),e.k0s(),e.nrm(21,"input",18),e.DNE(22,X,2,0,"mat-error")(23,O,2,0,"mat-error"),e.k0s()(),e.j41(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),e.EFF(27,"Siglas"),e.k0s(),e.nrm(28,"input",19,3),e.j41(30,"mat-hint"),e.EFF(31),e.k0s(),e.DNE(32,Q,2,0,"mat-error")(33,V,2,0,"mat-error")(34,J,2,0,"mat-error"),e.k0s()(),e.j41(35,"div",16)(36,"mat-form-field",17)(37,"mat-label"),e.EFF(38,"Sector"),e.k0s(),e.j41(39,"mat-select",20),e.Z7z(40,Z,2,2,"mat-option",21,o.trackByFn,!0),e.k0s(),e.j41(42,"mat-hint"),e.EFF(43,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.k0s(),e.DNE(44,H,2,0,"mat-error"),e.k0s()(),e.j41(45,"div",16),e.Z7z(46,re,19,16,"mat-form-field",22,o.trackByFn,!0),e.k0s(),e.j41(48,"div",16),e.Z7z(49,ie,6,6,"mat-form-field",22,o.trackByFn,!0),e.k0s(),e.j41(51,"div",16)(52,"mat-form-field",23)(53,"mat-label"),e.EFF(54,"Descripci\xf3n del Negocio"),e.k0s(),e.nrm(55,"mat-icon",24)(56,"textarea",25),e.j41(57,"mat-hint",26),e.EFF(58),e.k0s()()(),e.j41(59,"div",27)(60,"button",28),e.EFF(61," Avanzar "),e.k0s()()(),e.j41(62,"mat-step",13,4),e.DNE(64,se,1,0,"ng-template",14),e.j41(65,"p",15),e.EFF(66," La direcci\xf3n donde radica el negocio aporta confianza a los clientes a la hora de tomar una decisi\xf3n de compra. "),e.k0s(),e.j41(67,"div",29)(68,"mat-form-field",17)(69,"mat-label"),e.EFF(70,"Direcci\xf3n"),e.k0s(),e.nrm(71,"mat-icon",24)(72,"input",30),e.DNE(73,me,2,0,"mat-error")(74,le,2,0,"mat-error"),e.k0s(),e.j41(75,"mat-form-field",17)(76,"mat-label"),e.EFF(77,"Provincia"),e.k0s(),e.nrm(78,"mat-icon",31),e.j41(79,"mat-select",32),e.Z7z(80,ce,2,2,"mat-option",21,o.trackByFn,!0),e.k0s(),e.DNE(82,de,2,0,"mat-error"),e.k0s(),e.j41(83,"mat-form-field",17)(84,"mat-label"),e.EFF(85,"Municipio"),e.k0s(),e.nrm(86,"mat-icon",31),e.j41(87,"mat-select",32),e.Z7z(88,pe,2,2,"mat-option",21,o.trackByFn,!0),e.k0s(),e.DNE(90,he,2,0,"mat-error"),e.k0s(),e.j41(91,"mat-form-field",17)(92,"mat-label"),e.EFF(93,"Pa\xeds"),e.k0s(),e.j41(94,"mat-select",32)(95,"mat-option",33),e.EFF(96,"Cuba"),e.k0s()(),e.nrm(97,"mat-icon",31),e.k0s()(),e.j41(98,"div",34)(99,"button",35),e.EFF(100," Regresar "),e.k0s(),e.j41(101,"button",36),e.bIt("click",function(){return e.eBV(m),e.Njj(o.createMerchant())}),e.DNE(102,ue,2,0,"span")(103,fe,1,2,"mat-progress-spinner",37),e.k0s()()()()()()()()()}if(2&s){let m;const l=e.sdS(13),u=e.sdS(29),f=e.sdS(63);e.R7$(6),e.vxM(6,o.alert?6:-1),e.R7$(),e.Y8G("formGroup",o.wizardMerchantForm),e.R7$(2),e.Y8G("orientation",e.bMT(11,52,o.stepperOrientation)),e.R7$(3),e.Y8G("formGroupName","step1")("stepControl",o.wizardMerchantForm.get("step1")),e.R7$(9),e.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.R7$(),e.vxM(22,o.wizardMerchantForm.get("step1.name").hasError("required")?22:-1),e.R7$(),e.vxM(23,o.wizardMerchantForm.get("step1.name").hasError("maxlength")||o.wizardMerchantForm.get("step1.name").hasError("minlength")?23:-1),e.R7$(5),e.Y8G("type","text")("formControlName","abbr")("maxlength",10),e.R7$(3),e.Lme("Direcci\xf3n de su cat\xe1logo: https://",u.value,".",o.domain,""),e.R7$(),e.vxM(32,o.wizardMerchantForm.get("step1.abbr").hasError("maxlength")?32:-1),e.R7$(),e.vxM(33,o.wizardMerchantForm.get("step1.abbr").hasError("required")?33:-1),e.R7$(),e.vxM(34,o.wizardMerchantForm.get("step1.abbr").hasError("pattern")?34:-1),e.R7$(5),e.Y8G("formControlName","domain"),e.R7$(),e.Dyx(o.domains),e.R7$(4),e.vxM(44,o.wizardMerchantForm.get("step1.domain").hasError("required")?44:-1),e.R7$(2),e.Dyx(o.wizardMerchantForm.get("step1.phoneNumbers").controls),e.R7$(3),e.Dyx(o.wizardMerchantForm.get("step1.emails").controls),e.R7$(6),e.Y8G("svgIcon","mat_solid:subject"),e.R7$(),e.Y8G("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.R7$(2),e.SpI("",(null==(m=o.wizardMerchantForm.get("step1.description").value)?null:m.length)||0,"/1000"),e.R7$(2),e.Y8G("color","primary")("disabled",l.stepControl.pristine||l.stepControl.invalid),e.R7$(2),e.Y8G("formGroupName","step2")("stepControl",o.wizardMerchantForm.get("step2")),e.R7$(9),e.Y8G("svgIcon","mat_solid:home"),e.R7$(),e.Y8G("type","text")("formControlName","address")("minlength",3)("maxlength",255),e.R7$(),e.vxM(73,o.wizardMerchantForm.get("step2.address").hasError("required")?73:-1),e.R7$(),e.vxM(74,o.wizardMerchantForm.get("step2.address").hasError("maxlength")||o.wizardMerchantForm.get("step2.address").hasError("minlength")?74:-1),e.R7$(4),e.Y8G("svgIcon","mat_solid:map"),e.R7$(),e.Y8G("formControlName","state"),e.R7$(),e.Dyx(o.states),e.R7$(2),e.vxM(82,o.wizardMerchantForm.get("step2.state").hasError("required")?82:-1),e.R7$(4),e.Y8G("svgIcon","mat_solid:location_on"),e.R7$(),e.Y8G("formControlName","city"),e.R7$(),e.Dyx(o.cities),e.R7$(2),e.vxM(90,o.wizardMerchantForm.get("step2.city").hasError("required")?90:-1),e.R7$(4),e.Y8G("formControlName","country"),e.R7$(3),e.Y8G("svgIcon","mat_solid:public"),e.R7$(2),e.Y8G("color","accent"),e.R7$(2),e.Y8G("color","primary")("disabled",o.isLoading||f.stepControl.invalid),e.R7$(),e.vxM(102,o.isLoading?-1:102),e.R7$(),e.vxM(103,o.isLoading?103:-1)}},dependencies:[a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.xh,a.tU,y.F,b.Hl,b.$z,d.RG,d.rl,d.nJ,d.MV,d.TL,d.JW,C.m_,C.An,E.fS,E.fg,v.D6,v.LG,h.Ve,h.VO,h.$2,L.wT,p.aP,p.V5,p.Ti,p.M6,p.F7,p.FR,a.X1,a.l_,a.j4,a.JD,a.$R,g.PV,g.Jj],encapsulation:2,data:{animation:$.X}})}return t})(),resolve:{}}]}}]);