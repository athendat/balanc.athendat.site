"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7926],{57926:(F,u,e)=>{e.r(u),e.d(u,{default:()=>q});var b=e(14137),g=e(78050),x=e(3437),C=e(17598),d=e(78645),c=e(59773),y=e(71191),D=e(60725),t=e(19212),m=e(56278),j=e(70390),h=e(22939),f=e(17700),p=e(84221);function Q(s,z){1&s&&(t.TgZ(0,"div",2)(1,"button",3),t._uU(2," Pagar por Transfermovil "),t.qZA(),t.TgZ(3,"button",4),t._uU(4," Pagar por Enzona "),t.qZA()())}let A=(()=>{class s{constructor(n,o,i,a,l,r){this._fuseConfirmationService=n,this._changeDetectorRef=o,this._invoiceService=i,this._snackBar=a,this._dialog=l,this.store=r,this.selectedInvoice$=null,this.selectedInvoice=null,this._unsubscribeAll=new d.x}ngOnInit(){this.selectedInvoice$=this.store.select(y.xF),this.selectedInvoice$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedInvoice=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(m.R),t.Y36(t.sBO),t.Y36(j.x),t.Y36(h.ux),t.Y36(f.uw),t.Y36(p.yh))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["invoice-public-detail"]],standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[[1,"w-full","flex","flex-col"],["class","flex items-center justify-around  md:justify-center  border-t px-8 py-4"],[1,"flex","items-center","justify-around","md:justify-center","border-t","px-8","py-4"],["mat-flat-button","",1,"mr-4","bg-green-500","text-white"],["color","primary","mat-flat-button","",1,"ml-4"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"invoice-details"),t.YNc(2,Q,5,0,"div",1),t.qZA()),2&o&&(t.xp6(2),t.um2(2,"UseAthendatPayments"===i.selectedInvoice.quotationId.paymentMethodData.paymentBy?2:-1))},dependencies:[D._],encapsulation:2,changeDetection:0})}return s})();var R=e(84068),I=e(21118),P=e(8606),v=e(42090),Y=e(2857);function Z(s,z){if(1&s){const n=t.EpF();t.TgZ(0,"div",2)(1,"button",3),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.rejectQuotation())}),t._uU(2," Rechazar "),t.qZA(),t.TgZ(3,"button",4),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.acceptQuotation())}),t._uU(4," Aceptar "),t.qZA()()}}const q=[{path:"request/:requestId",component:x.d,resolve:{request:C.N}},{path:"quotation/:quotationId",component:(()=>{class s{constructor(n,o,i,a,l,r){this._fuseConfirmationService=n,this._changeDetectorRef=o,this._quotationService=i,this._snackBar=a,this._dialog=l,this.store=r,this.selectedQuotation$=null,this.selectedQuotation=null,this._unsubscribeAll=new d.x}ngOnInit(){this.selectedQuotation$=this.store.select(R.$i),this.selectedQuotation$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedQuotation=n,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}acceptQuotation(){this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"\xbfEsta seguro que desea aceptar esta oferta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._quotationService.acceptQuotation(this.selectedQuotation._id).subscribe(i=>{this._snackBar.openFromComponent(v.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:i.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}})})})}rejectQuotation(){this._dialog.open(P.g,{data:{title:"Rechazar Oferta",message:"\xbfEst\xe1 seguro desea Rechazar esta Oferta ?",rejectedReason:"",rejectedReasonRequired:!1},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,c.R)(this._unsubscribeAll)).subscribe(o=>{void 0!==o&&this._quotationService.rejectQuotation(this.selectedQuotation._id,o.reason).subscribe(a=>{this._snackBar.openFromComponent(v.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}})})})}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(m.R),t.Y36(t.sBO),t.Y36(Y.D),t.Y36(h.ux),t.Y36(f.uw),t.Y36(p.yh))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["quotation-public-detail"]],standalone:!0,features:[t.jDz],decls:3,vars:1,consts:[[1,"flex","flex-col","w-full"],["class","flex items-center justify-around px-8 py-4 border-t md:justify-center"],[1,"flex","items-center","justify-around","px-8","py-4","border-t","md:justify-center"],["color","warn","mat-stroked-button","",1,"mr-4",3,"click"],["color","primary","mat-flat-button","",1,"ml-4",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"quotation-details"),t.YNc(2,Z,5,0,"div",1),t.qZA()),2&o&&(t.xp6(2),t.um2(2,"Nueva"===i.selectedQuotation.status?2:-1))},dependencies:[I.i],encapsulation:2,changeDetection:0})}return s})(),resolve:{request:g.x}},{path:"invoice/:invoiceId",component:A,resolve:{request:b.u}}]}}]);