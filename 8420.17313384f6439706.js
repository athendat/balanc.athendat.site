"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8420],{48420:(T,D,p)=>{p.d(D,{S:()=>M});var d=p(16676),L=p(36236),_=p(57069),S=function(h){return h.natural="natural",h.juridica="juridica",h}(S||{}),z=p(55568),F=p(19212),w=p(69862);let M=(()=>{class h{constructor(e){this._httpClient=e,this.merchantLogo=null,_.vfs=L.I.vfs}generateTicketCollectionDocument(e,o,m){const n={content:[{text:o.name,style:"header"},{text:o.address,style:"header"},{text:`NIT: ${o.nit}`,style:"body"},{text:`Ticket #. ${e.no}`,style:"body"},{text:"---------------------------------------",style:"line"},{text:`Cobrado por: ${e.paymentGateway.name}`,style:"body"},{text:`${e.currency.iso}: ${e.total.toFixed(2)}`,style:"amount"},{text:"---------------------------------------",style:"line"},{text:`Fecha ${d(e.createdAt).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"\xa1Gracias por su comprar en nuestro negocio, disfrute su compra!",style:"body"},{text:" ",style:"body"},{text:"Este cobro fue procesado por el m\xf3dulo de cobros de balanc.app",style:"body"}],styles:{header:{alignment:"center",fontSize:8,bold:!0},subheader:{alignment:"center",fontSize:7,bold:!0,margin:[0,5,0,5]},body:{alignment:"center",bold:!1,fontSize:6,margin:[0,0,0,0]},line:{margin:[0,3,0,3]},amount:{alignment:"center",bold:!1,fontSize:15,margin:[0,3,0,0]}},pageSize:{width:150,height:300},pageMargins:[10,20,10,20]};_.createPdf(n).open()}generateBillDocument(e,o,m,c){let l=e.bankAccount;!z.W.IsNullOrEmpty(m.bankAccounts)&&z.W.IsNullOrEmpty(l)&&(l=m.bankAccounts.find(a=>a.currency===e.currency.iso));const n={content:[{table:{widths:[100,"*"],body:[[{rowSpan:7,image:"merchant.logoBase64",width:100},{text:`Proveedor: ${m.name}`,fontSize:10,bold:!0}],[{},{text:`Direcci\xf3n: ${m.address}, municipio ${m.city}, provincia ${m.state}`,fontSize:8}],[{},{text:"Tel\xe9fono: merchant.phone",fontSize:8}],[{},{text:"Correo electr\xf3nico: merchant.email",fontSize:8}],[{},m.nit?{text:`N\xfamero de Identificaci\xf3n Tributaria (NIT): ${m.nit}`,fontSize:8}:{}],[{},l.no?{text:`Cuenta Bancaria: ${e.currency.iso}: ${l.no}`,fontSize:8}:{}],[{},l.beneficiary?{text:`Titular de la cuenta: ${l.beneficiary}`,fontSize:8}:{}]]},layout:"noBorders"},{marginTop:15,table:{widths:["*",20,210],body:[[{layout:{hLineWidth:(a,r)=>.5,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:[65,60,"*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:o.toUpperCase(),fontSize:10,bold:!0},{text:`${d(e.billDate).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Tipo de venta",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Moneda",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Forma de pago",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.operationType.name,fontSize:10},{text:e.currency.iso,fontSize:10,alignment:"left"},{text:"Efectivo.: __ Transferencia.: __",fontSize:10,alignment:"left"}]]}},{},{layout:{hLineWidth:(a,r)=>.5,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*"],body:[[{text:"Cliente",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left",colSpan:2},{}],[{text:e.customer.type===S.natural?e.customer.fullname:e.customer.name,fontSize:10,bold:!0,colSpan:2},{}],[{text:"NIT",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Tel\xe9fono",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.customer.nit,fontSize:10},{text:e.customer.phone,fontSize:10}]]}}]]},layout:"noBorders"},{table:{headerRows:1,widths:[30,"*",35,60,60,60],body:[[{text:"Item",style:"table_header"},{text:`${e.products.length>0?"Productos":""} ${e.assistances.length>0&&e.products.length>0?" y ":""}  ${e.assistances.length>0?"Servicios":""}`,style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(a=>[{text:e.products.indexOf(a)+1,alignment:"center",style:"table_body"},{text:a.product.name,style:"table_body"},{text:a.product.uom.abbr,alignment:"center",style:"table_body"},{text:a.quantity,alignment:"center",style:"table_body"},{text:a.price.toFixed(2),alignment:"right",style:"table_body"},{text:(a.quantity*a.price).toFixed(2),alignment:"right",style:"table_body"}]),...e.assistances.map(a=>[{text:e.assistances.indexOf(a)+1+e.products.length,alignment:"center",style:"table_body"},{text:e.assistancesInBill.find(r=>r.id===a.assistanceId).description,style:"table_body",rowSpan:2},{},{text:a.quantity,alignment:"center",style:"table_body"},{text:a.price.toFixed(2),alignment:"right",style:"table_body"},{text:(a.quantity*a.price).toFixed(2),alignment:"right",style:"table_body"}]),[""!==e.observation||"c96ddaa1-cc72-498e-b82a-62c83a04281f"===e.operationTypeId?{rowSpan:4,colSpan:4,stack:[{text:"",bold:!0,alignment:"left",fontSize:10},{text:e.observation+"Pago Recibido en el exterior sobre cuenta Tropipay compra por\n                                                  comercio electr\xf3nico \n\n Titular:\n                                                  TITANES TELECOMUNICACIONES 225352\n                                                  IBAN:\n                                                  ES26 3058 4201 3727 2000 3155\n                                                  Nombre del Banco:\n                                                  CAJAMAR CAJA RURAL, S.C.C.\n                                                  Swift:\n                                                  CCRIES2A\n                                                  Direcci\xf3n:\n                                                  Paseo Sagasta, 15, Zaragoza CP 50008 Espa\xf1a",alignment:"left",fontSize:10,margin:[0,2,0,0]}]}:{rowSpan:4,colSpan:4,text:""},"","","",{text:"Subtotal",alignment:"left",style:"totals_name"},{text:e.subtotal.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Descuento",alignment:"left",style:"totals_name"},{text:e.discount.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Recargo",alignment:"left",style:"totals_name"},{text:e.surcharge.toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Total "+e.currency.iso,alignment:"left",style:"totals_name"},{text:e.total.toFixed(2),alignment:"right",style:"totals_value"}]]},layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},marginTop:20}],footer:(a,r)=>({stack:[a===r?{layout:{hLineWidth:(i,t)=>.7,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"contabiliza",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos:",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},e.courier?{style:"table_header_simple",text:e.courier.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]}:{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Carnet de identidad",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Carnet de identidad",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:d().format("DD-MM-yyyy"),fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"},e.courier?{style:"table_header_simple",text:e.courier.idNumber,fontFeatures:["c2sc","smcp"],fontSize:10,alignment:"left"}:{style:"table_header_simple",text:""},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Chapa del Veh\xedculo",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Fecha",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}],[{},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Factura: ${e.no} generada para ${e.customer.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${a.toString()}/${r} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:a===r?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Factura: ${e.no}`,author:c.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:m.name}};_.createPdf(n).open()}generateDispatchDocument(e,o,m){const c={content:[{layout:{hLineWidth:(l,n)=>.5,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Despacho de Mercanc\xedas",fontSize:10,bold:!0},{text:`${d(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"Origen",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Destino",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Confirmaci\xf3n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.depotInit.name,fontSize:10},{text:e.depotEnd.name,fontSize:10,alignment:"left"},{text:e.confirmed?"Confirmado":"Pendiente",fontSize:10,alignment:"left"}],[{text:"Confirmado por",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de confirmaci\xf3n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.confirmed?e.confirmedBy:"",fontSize:10},{text:e.confirmed?`${d(e.confirmedAt).format("DD-MM-yyyy hh:mm a")}`:"",fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"}]]}},{table:{headerRows:1,widths:[30,"*",35,50,50,50,50],body:[[{text:"Item",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Sobrante",style:"table_header"},{text:"Faltante",style:"table_header"},{text:"Merma",style:"table_header"}],...e.products.map(l=>[{text:e.products.indexOf(l)+1,alignment:"center",style:"table_body"},{text:l.name,style:"table_body"},{text:l.uom,alignment:"center",style:"table_body"},{text:l.quantity,alignment:"center",style:"table_body"},{text:l.spare,alignment:"center",style:"table_body"},{text:l.missing,alignment:"center",style:"table_body"},{text:l.damaged,alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},marginTop:20}],footer:(l,n)=>({stack:[l===n?{layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Despacho: ${e.no} generado para ${e.depotEnd.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${l.toString()}/${n} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:l===n?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Despacho: ${e.no}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(c).open()}generateReceptionDocument(e,o,m){const l=e.purchase.products,n=e.products.map(i=>{const t=l.find(s=>s.productId===i.productId);return{...i,...t}}),a={ctQuantity:n.reduce((i,t)=>i+(t.cud+t.cui)*t.quantity,0),ctQuantitySpare:n.reduce((i,t)=>i+(t.cud+t.cui)*t.quantitySpare,0),ctQuantityMissing:n.reduce((i,t)=>i+(t.cud+t.cui)*t.quantityMissing,0),ctQuantityDamaged:n.reduce((i,t)=>i+(t.cud+t.cui)*t.quantityDamaged,0)},r={content:[{layout:{hLineWidth:(i,t)=>.5,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Recepci\xf3n de Mercanc\xedas",fontSize:10,bold:!0},{text:`${d(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.no,fontSize:10,bold:!0,alignment:"left"}],[{text:"N\xfamero de Orden",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Destino",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Recepcionado por",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.purchase.code,fontSize:10},{text:e?.depot?.name,fontSize:10,alignment:"left"},{text:e.user.fullname,fontSize:10,alignment:"left"}]]}},{table:{headerRows:1,widths:[30,"*",35,50,50,50,50],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Sobrante",style:"table_header"},{text:"Faltante",style:"table_header"},{text:"Merma",style:"table_header"}],...e.products.map(i=>[{text:e.products.indexOf(i)+1,alignment:"center",style:"table_body"},{text:i.product.name,style:"table_body"},{text:i.product.uom.abbr,alignment:"center",style:"table_body"},{text:i.quantity,alignment:"center",style:"table_body"},{text:i.quantitySpare,alignment:"center",style:"table_body"},{text:i.quantityMissing,alignment:"center",style:"table_body"},{text:i.quantityDamaged,alignment:"center",style:"table_body"}]),[{text:"Costos Totales",colSpan:3,style:"table_header",alignment:"left",margin:[10,0,0,0]},{},{},{text:a.ctQuantity.toFixed(2),style:"table_header",alignment:"center"},{text:a.ctQuantitySpare.toFixed(2),style:"table_header",alignment:"center"},{text:a.ctQuantityMissing.toFixed(2),style:"table_header",alignment:"center"},{text:a.ctQuantityDamaged.toFixed(2),style:"table_header",alignment:"center"}]]},layout:{hLineWidth:(i,t)=>.7,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},marginTop:20}],footer:(i,t)=>({stack:[i===t?{layout:{hLineWidth:(s,f)=>.7,vLineWidth:(s,f)=>0,hLineColor:(s,f)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{text:"",style:"table_header_simple"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:e.user.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Recepci\xf3n: ${e.no} generado para ${e?.depot?.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${i.toString()}/${t} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:i===t?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Recepci\xf3n: ${e.no}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(r).open()}generatePurchaseDocument(e,o,m){const c={content:[{layout:{hLineWidth:(l,n)=>.5,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"N\xfamero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Comprobante",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"ORDEN DE COMPRA",fontSize:10,bold:!0},{text:`${d(e.voucherDate).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.code,fontSize:10,bold:!0,alignment:"left"},{text:e?.voucherNo,fontSize:10,bold:!0,alignment:"left"}],[{text:"Tipo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Moneda",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"M\xe9todo de pago",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Estado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.indirectCost.fobCosts>0||e.indirectCost.freight>0||e.indirectCost.customsDuties>0||e.indirectCost.customsServices>0?"Importaci\xf3n":"En Plaza",fontSize:10},{text:e.currency.iso,fontSize:10,alignment:"left"},{text:e.paymentMethod.name,fontSize:10,alignment:"left"},{text:e.status.toUpperCase(),fontSize:10,alignment:"left"}]]}},{columns:[{table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Empresa",alignment:"left",style:"table_header"},{text:o.name,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Tel\xe9fono",alignment:"left",style:"table_header"},{text:o?.phone,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Direcci\xf3n",alignment:"left",style:"table_header"},{text:`${o.address}, municipio ${o.city}, provincia ${o.state}`,alignment:"left",style:"table_body",colSpan:3},{},{}]]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>.7,hLineColor:(l,n)=>"#eeeeee",vLineColor:(l,n)=>"#eeeeee"},marginRight:5},{table:{headerRows:1,widths:["*","*","*","*"],body:[[{text:"Proveedor",alignment:"left",style:"table_header"},{text:e.supplier.name,alignment:"left",style:"table_body",colSpan:3},{},{}],[{text:"Tel\xe9fono",alignment:"left",style:"table_header"},{text:e.supplier?.phone,alignment:"left",style:"table_body",colSpan:3},{},{}]]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>.7,hLineColor:(l,n)=>"#eeeeee",vLineColor:(l,n)=>"#eeeeee"},marginLeft:5}],marginTop:20},{table:{headerRows:1,widths:[30,"*",35,60,80,80],body:[[{text:"N\xba",style:"table_header"},{text:"Productos",style:"table_header",alignment:"left"},{text:"UM",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Precio Unitario",style:"table_header"},{text:"Total",style:"table_header"}],...e.products.map(l=>[{text:e.products.indexOf(l)+1,alignment:"center",style:"table_body"},{text:l.product.name,style:"table_body"},{text:l.product.uom.abbr,alignment:"center",style:"table_body"},{text:l.quantity,alignment:"center",style:"table_body"},{text:l.cud,alignment:"center",style:"table_body"},{text:l.quantity*l.cud,alignment:"right",style:"table_body"}]),[{colSpan:4,rowSpan:3,text:""},"","","",{text:"Subtotal",alignment:"left",style:"totals_name"},{text:e.products.reduce((l,n)=>l+n.cud*n.quantity,0).toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Costos Indirectos",alignment:"left",style:"totals_name"},{text:e.products.reduce((l,n)=>l+n.cui*n.quantity,0).toFixed(2),alignment:"right",style:"totals_value"}],[{colSpan:4,text:""},"","","",{text:"Total",alignment:"left",style:"totals_name"},{text:e.products.reduce((l,n)=>l+(n.cud*n.quantity+n.cui*n.quantity),0).toFixed(2),alignment:"right",style:"totals_value"}]]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>.7,hLineColor:(l,n)=>"#eeeeee",vLineColor:(l,n)=>"#eeeeee"},marginTop:20}],footer:(l,n)=>({stack:[l===n?{layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"transporta",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"recibe",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Orden: ${e.code} generado por ${m.fullname}`,bold:!0,fontSize:8},{text:`P\xe1gina ${l.toString()}/${n} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:l===n?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Orden de Compra: ${e.code}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(c).open()}generateStowageCardDocument(e,o,m){const c={content:[{layout:{hLineWidth:(l,n)=>.5,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Tarjeta de Estiba",fontSize:10,bold:!0},{text:`${d().format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.depot.name,fontSize:10,bold:!0,alignment:"left"}],[{text:"Producto",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Marca",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"C\xf3digo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.product.name,fontSize:10},{text:e.product.brand.name,fontSize:10,alignment:"left"},{text:e.product.upc,fontSize:10,alignment:"left"}],[{text:"Unidad de Medida",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Precio",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Perecedero",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.product.uom.abbr,fontSize:10},{text:e.product.price.toFixed(2),fontSize:10,alignment:"left"},{text:e.product.isPerishable?"Si":"No",fontSize:10,alignment:"left"}]]}},{table:{headerRows:2,widths:[30,"*",80,40,50,40,80,40],body:[[{text:"REGISTROS DE MOVIMIENTOS DEL PRODUCTO",style:"table_header",colSpan:8},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Fecha",style:"table_header",alignment:"left"},{text:"Tipo",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Final",style:"table_header"},{text:"Saldo",style:"table_header"},{text:"Firma",style:"table_header"}],...e.movements.map(l=>[{text:e.movements.indexOf(l)+1,alignment:"center",style:"table_body"},{text:`${d(l.createdAt).format("DD / MM / YY")}`,style:"table_body"},{text:l.type.toUpperCase(),alignment:"center",style:"table_body"},{text:l.initQuantity,alignment:"center",style:"table_body"},{text:l.quantity,alignment:"center",style:"table_body"},{text:l.endQuantity,alignment:"center",style:"table_body"},{text:(l.endQuantity*e.product.price).toFixed(2),alignment:"center",style:"table_body"},{text:" ",alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},marginTop:20}],footer:(l,n)=>({stack:[l===n?{layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"responsable",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Tarjeta de estiba, producto: ${e.product.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${l.toString()}/${n} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:l===n?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Tarjeta de estiba, producto: ${e.product.name}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(c).open()}generateTicketDocument(e,o,m){const n={content:[{text:o.name,style:"header"},{text:o.address,style:"header"},{text:`NIT: ${o.nit}`,style:"body"},{text:`Ticket #. ${e.no}`,style:"body"},{text:`Cobrado por: ${e.paymentMethod.name}`,style:"body"},{text:"---------------------------------------",style:"line"},{text:"Producto             Qty         Precio",style:"body"},...e.products.map(a=>[{text:a.product.name+a.quantity,styles:"body"}]),{text:`${e.currency.iso}: ${e.total.toFixed(2)}`,style:"amount"},{text:"---------------------------------------",style:"line"},{text:`Fecha ${d(e.createdAt).format("DD/MM/yyyy hh:mm:ss a")}`,style:"body"},{text:"\xa1Gracias por su comprar en nuestro negocio, disfrute su compra!",style:"body"},{text:" ",style:"body"},{text:"Este cobro fue procesado por el m\xf3dulo de cobros de balanc.app",style:"body"}],styles:{header:{alignment:"center",fontSize:8,bold:!0},subheader:{alignment:"center",fontSize:7,bold:!0,margin:[0,5,0,5]},body:{alignment:"center",bold:!1,fontSize:6,margin:[0,0,0,0]},line:{margin:[0,3,0,3]},amount:{alignment:"center",bold:!1,fontSize:15,margin:[0,3,0,0]}},pageSize:{width:150,height:300},pageMargins:[10,20,10,20]};_.createPdf(n).open()}generateReceiptDataSheetDocument(e,o,m){const n={content:[{layout:{hLineWidth:(a,r)=>.5,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*"],body:[[{text:"Ficha T\xe9cnica "+e.name,style:"table_header"}]]}},{layout:{hLineWidth:(a,r)=>.5,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*","*",50,"*","*"],body:[[{text:"Negocio",style:"table_header_simple",bold:!0,alignment:"left"},{text:o.name,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Clasificaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.classification,style:"table_body",bold:!0,alignment:"left"}],[{text:"Tama\xf1o de la porci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.portionSize+e.uom.abbr,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Moneda",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.currency.iso,style:"table_body",bold:!0,alignment:"left"}],[{text:"Tiempo de preparaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.preparationTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Costo",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.cost.toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"Tiempo de cocci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.cookingTime} minutos`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Precio",style:"table_header_simple",bold:!0,alignment:"left"},{text:e.price.toFixed(2),style:"table_body",bold:!0,alignment:"left"}],[{text:"Temperatura de servicio",style:"table_header_simple",bold:!0,alignment:"left"},{text:`${e.temperature} \xbaC`,style:"table_body",bold:!0,alignment:"left"},{text:"",border:[!1,!1,!1,!1]},{text:"Beneficio",style:"table_header_simple",bold:!0,alignment:"left"},{text:(e.price-e.cost).toFixed(2),style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,r)=>.5,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*",110,110],body:[[{text:"Ingredientes",style:"table_header_simple",bold:!0,alignment:"left"},{text:"Unidad de Medida",style:"table_header_simple",bold:!0,alignment:"center"},{text:"Cantidad",style:"table_header_simple",bold:!0,alignment:"center"}],...e.ingredients.map(a=>[{text:a.product.name,style:"table_body",bold:!0,alignment:"left"},{text:a.uom.abbr,style:"table_body",bold:!0,alignment:"center"},{text:a.quantity,style:"table_body",bold:!0,alignment:"center"}])]}},{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Descripci\xf3n del a receta",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.description,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Elaboraci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.elaboration,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Presentaci\xf3n",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.presentation,style:"table_body",bold:!0,alignment:"left"}]]}},{alignment:"justify",columns:[[{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Equipos necesarios",style:"table_header_simple",bold:!0,alignment:"left"}],[{text:e.equipments,style:"table_body",bold:!0,alignment:"left"}]]}},{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Al\xe9rgenos",style:"table_header_simple",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}],...e.allergens.map(a=>[{text:a,style:"table_body",bold:!0,border:[!1,!1,!1,!1],alignment:"left"}])]}}],{layout:{hLineWidth:(a,r)=>.5,hLineColor:(a,r)=>"#eeeeee",vLineWidth:(a,r)=>.5,vLineColor:(a,r)=>"#eeeeee"},marginTop:20,table:{headerRows:1,widths:["*"],body:[[{text:"Foto",style:"table_header_simple",bold:!0,alignment:"left"}],[{}]]}}]}],styles:{table_header_simple:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:16,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10}},pageOrientation:"portrait",pageSize:"LETTER",info:{title:`Ficha t\xe9cnica receta: ${e.name}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(n).open()}generatePeriodCloseDocument(e,o,m,c){o.stockMovements=o.stockMovements.sort((t,s)=>t.productId.localeCompare(s.productId));let l=1,n=1,a=1,r=1;const i={content:[{layout:{hLineWidth:(t,s)=>.5,vLineWidth:(t,s)=>0,hLineColor:(t,s)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Cierre de Almac\xe9n",fontSize:10,bold:!0},{text:`${d(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.depot.name,fontSize:10,bold:!0,alignment:"left"}],[{text:"Empleado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de apertura",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha de cierre",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.user.fullname,fontSize:10,alignment:"left"},{text:`${d(e.open).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,alignment:"left"},{text:`${d(e.close).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,alignment:"left"}]]}},{table:{headerRows:2,widths:[30,"*",35,50,40,40,40,50,40,50,80],body:[[{text:"LISTADO DE PRODUCTOS",style:"table_header",colSpan:11},{},{},{},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Unidad",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Entrada",style:"table_header"},{text:"Merma",style:"table_header"},{text:"Perdido",style:"table_header"},{text:"Vendido",style:"table_header"},{text:"Devuelto",style:"table_header"},{text:"Final",style:"table_header"},{text:"Importe de Venta",style:"table_header"}],...o.ipvProductsData.map(t=>[{text:o.ipvProductsData.indexOf(t)+1,alignment:"center",style:"table_body"},{text:t.productName,style:"table_body"},{text:t.uomAbbr,alignment:"center",style:"table_body"},{text:t.initialInventory,alignment:"center",style:"table_body"},{text:t.entries,alignment:"center",style:"table_body"},{text:t.shrinkages,alignment:"center",style:"table_body"},{text:t.losses,alignment:"center",style:"table_body"},{text:t.sold,alignment:"center",style:"table_body"},{text:t.returned,alignment:"center",style:"table_body"},{text:t.finalInventory,alignment:"center",style:"table_body"},{text:t.totalSales.toFixed(2),alignment:"right",margin:[0,0,10,0],style:"table_body"}]),[{text:"Totales",colSpan:2,style:"table_header",alignment:"left",margin:[10,0,0,0]},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:"",style:"table_header"},{text:o.ipvProductsData.reduce((t,s)=>t+s.shrinkages,0),style:"table_header"},{text:o.ipvProductsData.reduce((t,s)=>t+s.losses,0),style:"table_header"},{text:o.ipvProductsData.reduce((t,s)=>t+s.sold,0),style:"table_header"},{text:o.ipvProductsData.reduce((t,s)=>t+s.returned,0),style:"table_header"},{text:"",style:"table_header"},{text:o.ipvProductsData.reduce((t,s)=>t+s.totalSales,0).toFixed(2),style:"table_header",alignment:"right",margin:[0,0,10,0]}]]},layout:{hLineWidth:(t,s)=>.7,vLineWidth:(t,s)=>0,hLineColor:(t,s)=>"#eeeeee"},marginTop:20},o.shrinkageProducts.length>0?{table:{headerRows:2,widths:[25,210,50,58,"*"],body:[[{text:"PRODUCTOS MERMADOS",style:"table_header",colSpan:5},{text:""},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Clasificaci\xf3n",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...o.shrinkageProducts.map((t,s)=>{const f=o.shrinkageProducts.filter((b,y)=>y<s);let u={},x={};const g=o.ipvProductsData.find(b=>b.productId===t.productId)?.productName;if(0===f.length){const b=o.shrinkageProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},x={text:"1",style:"table_body",alignment:"center",rowSpan:b}}else if(o.shrinkageProducts[s].productId!==o.shrinkageProducts[s-1].productId){const b=o.shrinkageProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},l++,x={text:l.toString(),style:"table_body",alignment:"center",rowSpan:b}}return[x,u,{text:t.quantity.toString(),style:"table_body",alignment:"center"},{text:t.type.toUpperCase(),style:"table_body",alignment:"center"},{text:t.observation,style:"table_body"}]})]},layout:{hLineWidth:(t,s)=>.7,vLineWidth:(t,s)=>.7,hLineColor:(t,s)=>"#eeeeee",vLineColor:(t,s)=>"#eeeeee"},marginTop:30}:null,o.lossProducts.length>0?{table:{headerRows:2,widths:[25,210,58,"*"],body:[[{text:"PRODUCTOS PERDIDOS",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...o.lossProducts.map((t,s)=>{const f=o.lossProducts.filter((b,y)=>y<s);let u={},x={};const g=o.ipvProductsData.find(b=>b.productId===t.productId)?.productName;if(0===f.length){const b=o.lossProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},x={text:"1",style:"table_body",alignment:"center",rowSpan:b}}else if(o.lossProducts[s].productId!==o.lossProducts[s-1].productId){const b=o.lossProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},n++,x={text:n.toString(),style:"table_body",alignment:"center",rowSpan:b}}return[x,u,{text:t.quantity.toString(),style:"table_body",alignment:"center"},{text:t.observation,style:"table_body"}]})]},layout:{hLineWidth:(t,s)=>.7,vLineWidth:(t,s)=>.7,hLineColor:(t,s)=>"#eeeeee",vLineColor:(t,s)=>"#eeeeee"},marginTop:30}:null,o.returnSaleProducts.length>0?{table:{headerRows:2,widths:[25,"*",60,60],body:[[{text:"PRODUCTOS DEVUELTOS",style:"table_header",colSpan:4},{text:""},{text:""},{text:""}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"}],...o.returnSaleProducts.map((t,s)=>{const f=o.returnSaleProducts.filter((b,y)=>y<s);let u={},x={};const g=o.ipvProductsData.find(b=>b.productId===t.productId)?.productName;if(0===f.length){const b=o.returnSaleProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},x={text:"1",style:"table_body",alignment:"center",rowSpan:b}}else if(o.returnSaleProducts[s].productId!==o.returnSaleProducts[s-1].productId){const b=o.returnSaleProducts.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},r++,x={text:r.toString(),style:"table_body",alignment:"center",rowSpan:b}}return[x,u,{text:t.quantity.toString(),style:"table_body",alignment:"center"},{text:t.price,style:"table_body",alignment:"left"}]})]},layout:{hLineWidth:(t,s)=>.7,vLineWidth:(t,s)=>.7,hLineColor:(t,s)=>"#eeeeee",vLineColor:(t,s)=>"#eeeeee"},marginTop:30}:null,{table:{headerRows:2,widths:[25,170,45,30,40,45,40,"*"],body:[[{text:"MOVIMIENTOS EN INVENTARIO",style:"table_header",colSpan:8},{},{},{},{},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header"},{text:"Tipo",style:"table_header"},{text:"Hora",style:"table_header"},{text:"Inicial",style:"table_header"},{text:"Cantidad",style:"table_header"},{text:"Final",style:"table_header"},{text:"Observaci\xf3n",style:"table_header"}],...o.stockMovements.map((t,s)=>{const f=o.stockMovements.filter((b,y)=>y<s);let u={},x={};const g=o.ipvProductsData.find(b=>b.productId===t.productId)?.productName;if(0===f.length){const b=o.stockMovements.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},x={text:"1",style:"table_body",alignment:"center",rowSpan:b}}else if(o.stockMovements[s].productId!==o.stockMovements[s-1].productId){const b=o.stockMovements.filter(y=>y.productId===t.productId).length;u={text:g,style:"table_body",rowSpan:b},a++,x={text:a.toString(),style:"table_body",alignment:"center",rowSpan:b}}return[x,u,{text:t.type.toUpperCase(),style:"table_body",alignment:"center"},{text:d(t.createdAt).format("HH:mm"),style:"table_body",alignment:"center"},{text:t.initQuantity.toString(),style:"table_body",alignment:"center"},{text:t.quantity.toString(),style:"table_body",alignment:"center"},{text:t.endQuantity.toString(),style:"table_body",alignment:"center"},{text:t.observation,style:"table_body"}]})]},layout:{hLineWidth:(t,s)=>.7,vLineWidth:(t,s)=>.7,hLineColor:(t,s)=>"#eeeeee",vLineColor:(t,s)=>"#eeeeee"},marginTop:30,marginBottom:30}],footer:(t,s)=>({stack:[t===s?{layout:{hLineWidth:(f,u)=>.7,vLineWidth:(f,u)=>0,hLineColor:(f,u)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:c.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Cierre de almac\xe9n: ${e.depot.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${t.toString()}/${s} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:t===s?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"landscape",pageBreakBefore:(t,s)=>1===t.headlineLevel&&s.length>0,pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Cierre de almac\xe9n: ${e.depot.name}`,author:c.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:m.name}};_.createPdf(i).open()}generateIncomeReportDocument(e,o,m){const c={content:[{layout:{hLineWidth:(l,n)=>.5,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Fecha",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Almac\xe9n",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:"Entrada de Mercanc\xedas",fontSize:10,bold:!0},{text:`${d(e.createdAt).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"left"},{text:e.depot.name,fontSize:10,bold:!0,alignment:"left"}],[{text:"Empleado",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:" ",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"}],[{text:e.user.fullname,fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"},{text:" ",fontSize:10,alignment:"left"}]]}},{table:{headerRows:2,widths:[30,"*",80,80],body:[[{text:"LISTADO DE PRODUCTOS",style:"table_header",colSpan:4},{},{},{}],[{text:"N\xba",style:"table_header"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"Precio",style:"table_header"}],...e.products.map(l=>[{text:e.products.indexOf(l)+1,alignment:"center",style:"table_body"},{text:l.product.name,style:"table_body"},{text:l.quantity+" ",alignment:"center",style:"table_body"},{text:l.product.price.toFixed(2),alignment:"center",style:"table_body"}])]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},marginTop:20}],footer:(l,n)=>({stack:[l===n?{layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:`Cierre de almac\xe9n: ${e.depot.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${l.toString()}/${n} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:l===n?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Cierre de almac\xe9n: ${e.depot.name}`,author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(c).open()}generateIpvProducts(e,o,m,c,l,n,a){const r={content:[{layout:{hLineWidth:(i,t)=>.5,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},table:{headerRows:1,widths:["20%","*","35%"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Unidad Comercial",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Ventas por Productos",fontSize:10,bold:!0},{text:`${d(o.start).format("DD-MM-yyyy hh:mm a")} al ${d(o.end).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"},{text:c.map(i=>i.name).join(", "),fontSize:10,bold:!0,alignment:"center"}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.reduce((i,t)=>i+(t.Cantidad*t.Precio||0),0).toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:a.toFixed(2),fontSize:10,alignment:"center"},{text:n.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:2,widths:["*",60,70,60,100],body:[[{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"P.Promedio",style:"table_header"},{text:"Total",style:"table_header"},{text:"Cajero",style:"table_header"}],...e.map(i=>[{text:i.Producto,style:"table_body"},{text:i.Cantidad,alignment:"center",style:"table_body"},{text:i.Precio.toFixed(2),alignment:"center",style:"table_body"},{text:(i.Precio*i.Cantidad).toFixed(2),alignment:"center",style:"table_body"},{text:i.Cajero,alignment:"left",style:"table_body"}])]},layout:{hLineWidth:(i,t)=>.7,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},marginTop:20}],footer:(i,t)=>({stack:[i===t?{layout:{hLineWidth:(s,f)=>.7,vLineWidth:(s,f)=>0,hLineColor:(s,f)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:l.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Reporte de Productos Vendidos",bold:!0,fontSize:8},{text:`P\xe1gina ${i.toString()}/${t} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:i===t?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Productos Vendidos",author:l.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:m.name}};_.createPdf(r).open()}generateSalesByCategoriesProducts(e,o,m){const c={content:[{layout:{hLineWidth:(l,n)=>.5,vLineWidth:(l,n)=>0,hLineColor:(l,n)=>"#eeeeee"},table:{headerRows:1,widths:["20%","*","35%"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Unidad Comercial",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Ventas por Productos",fontSize:10,bold:!0},{text:`${d(e.openedAt).format("DD-MM-yyyy hh:mm a")} al ${d(e.closedAT).format("DD-MM-yyyy hh:mm a")}`,fontSize:10,bold:!0,alignment:"center"},{text:e.locationName,fontSize:10,bold:!0,alignment:"center"}],[{text:"Cajero",style:"table_header_simple",fontSize:8,bold:!0,colSpan:3,alignment:"left"},{},{}],[{text:e.employeeName,fontSize:10,bold:!0,alignment:"left",colSpan:3},{},{}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.total.toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:e.cardPaid.toFixed(2),fontSize:10,alignment:"center"},{text:e.cashPaid.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:2,widths:[80,60,"*",45,60,50],body:[[{text:"Categor\xeda",style:"table_header",alignment:"left"},{text:"Total",style:"table_header",alignment:"left"},{text:"Producto",style:"table_header",alignment:"left"},{text:"Cantidad",style:"table_header"},{text:"P.Promedio",style:"table_header"},{text:"Total",style:"table_header"}],...e.categoriesProducts.map((l,n)=>{const a=[];let r=0;for(const i of l.products)a.push([0===r?{text:l.categoryName,rowSpan:l.products.length,style:"table_body"}:{},0===r?{text:l.total.toFixed(2),rowSpan:l.products.length,alignment:"center",style:"table_body"}:{},{text:i.name,alignment:"left",style:"table_body"},{text:i.quantity,alignment:"center",style:"table_body"},{text:i.priceAvg.toFixed(2),alignment:"center",style:"table_body"},{text:i.total.toFixed(2),alignment:"center",style:"table_body"}]),r++;return a}).flat()]},layout:{hLineWidth:(l,n)=>.7,vLineWidth:(l,n)=>.7,hLineColor:(l,n)=>"#eeeeee",vLineColor:(l,n)=>"#eeeeee"},marginTop:20}],footer:(l,n)=>({stack:[l===n?{layout:{hLineWidth:(a,r)=>.7,vLineWidth:(a,r)=>0,hLineColor:(a,r)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:m.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Reporte de Productos Vendidos",bold:!0,fontSize:8},{text:`P\xe1gina ${l.toString()}/${n} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:l===n?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:o.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Reporte de Productos Vendidos",author:m.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:o.name}};_.createPdf(c).open()}generateIpvVentas(e,o,m,c,l,n,a){const r={content:[{layout:{hLineWidth:(i,t)=>.5,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},table:{headerRows:1,widths:["30%","*","*"],body:[[{text:"Documento",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Periodo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Unidad Comercial",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:"Ingresos por Ventas",fontSize:10,bold:!0},{text:`${d(o.start).format("DD-MM-yyyy")} al ${d(o.end).format("DD-MM-yyyy")}`,fontSize:10,bold:!0,alignment:"center"},{text:c.map(i=>i.name).join(", "),fontSize:10,alignment:"center"}],[{text:"Total",style:"table_header_simple",fontSize:8,bold:!0,alignment:"left"},{text:"Transferencia",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"},{text:"Efectivo",style:"table_header_simple",fontSize:8,bold:!0,alignment:"center"}],[{text:e.reduce((i,t)=>i+(t.Monto||0),0).toFixed(2),fontSize:10,bold:!0,alignment:"left"},{text:a.toFixed(2),fontSize:10,alignment:"center"},{text:n.toFixed(2),fontSize:10,alignment:"center"}]]}},{table:{headerRows:2,widths:[100,80,80,100,"*"],body:[[{text:"Fecha",style:"table_header",alignment:"left"},{text:"No",style:"table_header"},{text:"Importe",style:"table_header",alignment:"right"},{text:"Pago",style:"table_header"},{text:"Cajero",style:"table_header"}],...e.map(i=>[{text:i.Fecha,style:"table_body"},{text:i.No,alignment:"center",style:"table_body"},{text:i.Monto.toFixed(2),alignment:"right",style:"table_body"},{text:i.Pago,alignment:"center",style:"table_body"},{text:i.Cajero,alignment:"left",style:"table_body"}])]},layout:{hLineWidth:(i,t)=>.7,vLineWidth:(i,t)=>0,hLineColor:(i,t)=>"#eeeeee"},marginTop:20}],footer:(i,t)=>({stack:[i===t?{layout:{hLineWidth:(s,f)=>.7,vLineWidth:(s,f)=>0,hLineColor:(s,f)=>"#eeeeee"},table:{headerRows:1,widths:["*","*","*"],body:[[{style:"table_header_simple",text:"elabora",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"",fontFeatures:["c2sc","smcp"],alignment:"left"},{style:"table_header_simple",text:"revisa",fontFeatures:["c2sc","smcp"],alignment:"left"}],[{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Nombre y apellidos",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:l.employee.fullname,fontSize:10,alignment:"left",fontFeatures:["c2sc","smcp"]},{style:"table_header_simple",text:""},{style:"table_header_simple",text:""}],[{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]},{text:"Firma",bold:!0,fontSize:8,fontFeatures:["c2sc","smcp"]}],[{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "},{style:"table_header_simple",text:" "}]]},margin:[40,0,40,0]}:null,{table:{widths:["*","*"],body:[[{text:"Ingresos por Ventas",bold:!0,fontSize:8},{text:`P\xe1gina ${i.toString()}/${t} - Fecha de impresi\xf3n ${d().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:i===t?[40,15,40,0]:[40,145,40,0],layout:"noBorders",italics:!0}]}),defaultStyle:{fontSize:12},styles:{header:{fontSize:16,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header_simple:{fontSize:8,bold:!0,alignment:"center",fillColor:"#eeeeee"},table_header:{fontSize:10,margin:[0,2,0,2],bold:!0,alignment:"center",fillColor:"#eeeeee"},table_body:{fontSize:10},totals_name:{bold:!0,fillColor:"#eeeeee",alignment:"right",fontFeatures:["c2sc","smcp"],fontSize:10},totals_value:{alignment:"right",bold:!0,fontSize:11}},pageOrientation:"portrait",pageSize:"LETTER",pageMargins:[40,40,40,180],watermark:{text:m.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Ingresos por Ventas",author:l.fullname,creationDate:d().toDate(),modDate:d().toDate(),producer:m.name}};_.createPdf(r).open()}static#e=this.\u0275fac=function(o){return new(o||h)(F.LFG(w.eN))};static#t=this.\u0275prov=F.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);