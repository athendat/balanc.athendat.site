"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8566],{78566:(Ue,q,r)=>{r.r(q),r.d(q,{default:()=>Ve});var c=r(89417),h=r(49969),N=r(21413),k=r(56977),P=r(70819),A=r(13754),R=r(59640);const $=o=>o.productServices,M=((0,R.Mz)($,o=>o.productService),(0,R.Mz)($,o=>o.productServices));var X=r(42835),E=r(55364),S=r(60177),e=r(54438);let Y=(()=>{class o{constructor(t,n){this.elementRef=t,this.renderer=n,this.parallaxRatio=1,this.initialTop=0,this.initialTop=t.nativeElement.getBoundingClientRect().top}onWindowScroll(t){this.elementRef.nativeElement.style.top=this.initialTop-window.scrollY*this.parallaxRatio+"px",this.elementRef.nativeElement.style.transform="scale(1,1)"}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(e.aKT),e.rXU(e.sFG))};static#t=this.\u0275dir=e.FsC({type:o,selectors:[["","appParallax2",""]],hostBindings:function(n,a){1&n&&e.bIt("scroll",function(s){return a.onWindowScroll(s)},!1,e.tSv)},inputs:{parallaxRatio:"parallaxRatio"},standalone:!0})}return o})();var v=r(32102),y=r(99213),D=r(88834),j=r(59042),C=r(9454),T=r(82798),d=r(9159),b=r(51188),B=r(46601),V=r(22949),U=r(86600);const w=(o,i)=>({"font-medium":o,"text-secondary":i}),G=o=>({"cursor-not-allowed":o}),H=()=>["expandedDetail"],z=()=>["CUP "];function L(o,i){1&o&&e.eu8(0)}function W(o,i){if(1&o&&(e.j41(0,"div",22),e.DNE(1,L,1,0,"ng-container",24),e.k0s()),2&o){e.XpG();const t=e.sdS(36);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function J(o,i){1&o&&e.eu8(0)}function O(o,i){if(1&o&&(e.j41(0,"div",23),e.DNE(1,J,1,0,"ng-container",24),e.k0s()),2&o){e.XpG();const t=e.sdS(38);e.R7$(),e.Y8G("ngTemplateOutlet",t)}}function Z(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El nombre es obligatorio. "),e.k0s())}function K(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.k0s())}function Q(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del empleado no debe contener n\xfameros. "),e.k0s())}function ee(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Los apellidos son obligatorio. "),e.k0s())}function te(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Los apellidos deben contener entre 6 y 255 caracteres. "),e.k0s())}function oe(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Los apellidos no deben contener n\xfameros. "),e.k0s())}function ne(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe escoger la personalidad. "),e.k0s())}function ie(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.k0s())}function ae(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El correos electr\xf3nicos es obligatorio. "),e.k0s())}function re(o,i){if(1&o&&(e.j41(0,"mat-option",42)(1,"span"),e.EFF(2),e.k0s()()),2&o){const t=i.$implicit;e.Y8G("value",t),e.R7$(2),e.JRh(t.name)}}function se(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe escoger un producto o servicio "),e.k0s())}function le(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad de obligatoria "),e.k0s())}function ce(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La cantidad debe ser mayor que 0 "),e.k0s())}function me(o,i){1&o&&(e.j41(0,"mat-error"),e.EFF(1," la cantidad solo debe contener n\xfameros "),e.k0s())}function de(o,i){if(1&o&&(e.j41(0,"th",62),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2).$implicit,n=e.XpG(4);e.R7$(),e.SpI(" ",n.getFieldsTableHeaderNames(t)," ")}}function pe(o,i){if(1&o&&(e.j41(0,"td",63),e.EFF(1),e.k0s()),2&o){const t=i.$implicit,n=e.XpG(2).$implicit;e.R7$(),e.SpI("",t[n]," ")}}function ue(o,i){1&o&&(e.j41(0,"td",64),e.EFF(1,"Total de la solicitud "),e.k0s())}function _e(o,i){1&o&&(e.j41(0,"div"),e.DNE(1,de,2,1,"th",60)(2,pe,2,1,"td",55)(3,ue,2,0,"td",61),e.k0s())}function ge(o,i){if(1&o&&(e.j41(0,"th",68),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2).$implicit,n=e.XpG(4);e.R7$(),e.SpI(" ",n.getFieldsTableHeaderNames(t)," ")}}function he(o,i){if(1&o&&(e.j41(0,"td",69),e.EFF(1),e.k0s()),2&o){const t=i.$implicit,n=e.XpG(2).$implicit;e.R7$(),e.SpI(" ",t[n]," ")}}function fe(o,i){1&o&&e.nrm(0,"td",70)}function xe(o,i){1&o&&(e.j41(0,"div"),e.DNE(1,ge,2,1,"th",65)(2,he,2,1,"td",66)(3,fe,1,0,"td",67),e.k0s())}function ve(o,i){1&o&&(e.j41(0,"th",73),e.EFF(1," Acciones "),e.k0s())}function Ce(o,i){if(1&o){const t=e.RV6();e.j41(0,"td",69)(1,"div",74)(2,"button",75),e.bIt("click",function(a){const l=e.eBV(t).$implicit,s=e.XpG(6);return s.expandedElement=s.expandedElement&&s.expandedElement.goodsId===l.goodsId?null:l,a.stopPropagation(),e.Njj(s.setSelectedProductServiceDetail(l.goodsId))}),e.nrm(3,"mat-icon",76),e.k0s(),e.j41(4,"button",75),e.bIt("click",function(){const a=e.eBV(t).$implicit,l=e.XpG(6);return e.Njj(l.removeGoodsField(a.goodsId))}),e.nrm(5,"mat-icon",76),e.k0s()()()}if(2&o){const t=i.$implicit,n=e.XpG(6);e.R7$(3),e.Y8G("svgIcon",n.expandedElement&&n.expandedElement.goodsId===t.goodsId?"mat_solid:expand_more":"mat_solid:expand_less"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Fe(o,i){if(1&o&&(e.j41(0,"td",77),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&o){const t=e.XpG(6);e.R7$(),e.SpI(" ",e.i5U(2,1,t.getTotalQuantity(),e.lJ4(4,z))," ")}}function Re(o,i){1&o&&(e.j41(0,"div"),e.DNE(1,ve,2,0,"th",71)(2,Ce,6,2,"td",66)(3,Fe,3,5,"td",72),e.k0s())}function Ie(o,i){if(1&o&&(e.qex(0,53),e.DNE(1,_e,4,0,"div")(2,xe,4,0,"div")(3,Re,4,0,"div"),e.bVm()),2&o){const t=i.$implicit;e.FS9("matColumnDef",t),e.R7$(),e.vxM(1,"name"===t?1:-1),e.R7$(),e.vxM(2,"expand"!==t&&"name"!==t?2:-1),e.R7$(),e.vxM(3,"expand"===t?3:-1)}}function Ee(o,i){if(1&o&&e.nrm(0,"img",81),2&o){const t=e.XpG(6);e.Y8G("alt","No tiene conexi\xf3n o esta imagen no existe")("src",t.selectedProductServiceDetail.images[0],e.B4B)}}function be(o,i){1&o&&(e.j41(0,"div",82),e.EFF(1," SIN IMAGEN "),e.k0s())}function qe(o,i){if(1&o&&(e.j41(0,"div",78)(1,"div",79)(2,"div",80),e.DNE(3,Ee,1,2,"img",81)(4,be,2,0,"div",82),e.k0s()(),e.j41(5,"span",83),e.EFF(6),e.k0s()()),2&o){const t=e.XpG().$implicit,n=e.XpG(4);e.Y8G("@detailExpand",n.expandedElement&&t.goodsId===n.expandedElement.goodsId?"expanded":"collapsed"),e.R7$(3),e.vxM(3,n.selectedProductServiceDetail.images&&n.selectedProductServiceDetail.images[0]?3:-1),e.R7$(),e.vxM(4,n.selectedProductServiceDetail.images&&0!==n.selectedProductServiceDetail.images.length?-1:4),e.R7$(2),e.JRh(n.selectedProductServiceDetail.description)}}function ke(o,i){if(1&o&&(e.j41(0,"td",63),e.DNE(1,qe,7,4,"div",78),e.k0s()),2&o){const t=e.XpG(4);e.BMQ("colspan",t.columnsToDisplayWithExpand.length),e.R7$(),e.vxM(1,t.selectedProductServiceDetail?1:-1)}}function $e(o,i){1&o&&e.nrm(0,"tr",84)}function Se(o,i){if(1&o&&e.nrm(0,"tr",85),2&o){const t=i.$implicit,n=e.XpG(4);e.AVh("example-expanded-row",n.expandedElement===t)}}function ye(o,i){1&o&&e.nrm(0,"tr",86)}function De(o,i){1&o&&e.nrm(0,"tr",87)}function je(o,i){if(1&o&&(e.j41(0,"div",49)(1,"table",52),e.Z7z(2,Ie,4,4,"ng-container",53,e.fX1),e.qex(4,54),e.DNE(5,ke,2,2,"td",55),e.bVm(),e.DNE(6,$e,1,0,"tr",56)(7,Se,1,2,"tr",57)(8,ye,1,0,"tr",58)(9,De,1,0,"tr",59),e.k0s()()),2&o){const t=e.XpG(3);e.R7$(),e.Y8G("dataSource",t.requestForm.get("goodsData").getRawValue()),e.R7$(),e.Dyx(t.displayedColumns),e.R7$(4),e.Y8G("matHeaderRowDef",t.columnsToDisplayWithExpand),e.R7$(),e.Y8G("matRowDefColumns",t.columnsToDisplayWithExpand),e.R7$(),e.Y8G("matRowDefColumns",e.lJ4(6,H)),e.R7$(),e.Y8G("matFooterRowDef",t.displayedColumns)("matFooterRowDefSticky",!0)}}function Te(o,i){1&o&&(e.j41(0,"div",88),e.EFF(1," No ha agregado un producto o servicio a\xfan! "),e.k0s())}function we(o,i){if(1&o){const t=e.RV6();e.j41(0,"mat-accordion",25)(1,"mat-expansion-panel",26)(2,"mat-expansion-panel-header",27)(3,"mat-panel-title",28)(4,"div",29),e.EFF(5," Informaci\xf3n General "),e.k0s()()(),e.j41(6,"form",30)(7,"div",31)(8,"mat-form-field",32)(9,"mat-label"),e.EFF(10,"Nombre"),e.k0s(),e.nrm(11,"input",33),e.DNE(12,Z,2,0,"mat-error")(13,K,2,0,"mat-error")(14,Q,2,0,"mat-error"),e.k0s()(),e.j41(15,"div",31)(16,"mat-form-field",32)(17,"mat-label"),e.EFF(18,"Apellidos"),e.k0s(),e.nrm(19,"input",34),e.DNE(20,ee,2,0,"mat-error")(21,te,2,0,"mat-error")(22,oe,2,0,"mat-error"),e.k0s()(),e.j41(23,"div",31)(24,"mat-form-field",32)(25,"mat-label"),e.EFF(26,"Personalidad"),e.k0s(),e.j41(27,"mat-select",35)(28,"mat-option",36),e.EFF(29,"Natural"),e.k0s(),e.j41(30,"mat-option",37),e.EFF(31,"Jur\xeddico"),e.k0s()(),e.DNE(32,ne,2,0,"mat-error"),e.k0s()(),e.j41(33,"div",31)(34,"mat-form-field",32)(35,"mat-label"),e.EFF(36,"Correos Electr\xf3nicos"),e.k0s(),e.nrm(37,"mat-icon",38)(38,"input",39),e.DNE(39,ie,2,0,"mat-error")(40,ae,2,0,"mat-error"),e.k0s()()()(),e.j41(41,"mat-expansion-panel",26)(42,"mat-expansion-panel-header",27)(43,"mat-panel-title",28)(44,"div",29),e.EFF(45," Selecci\xf3n de Productos y Servicios "),e.k0s()()(),e.j41(46,"form",40)(47,"div",31)(48,"mat-form-field",32)(49,"mat-label"),e.EFF(50,"Productos y servicios"),e.k0s(),e.j41(51,"mat-select",41),e.Z7z(52,re,3,2,"mat-option",42,e.fX1),e.k0s(),e.DNE(54,se,2,0,"mat-error"),e.k0s()(),e.j41(55,"div",43)(56,"mat-form-field",32)(57,"mat-label"),e.EFF(58,"Cantidad"),e.k0s(),e.nrm(59,"input",44),e.DNE(60,le,2,0,"mat-error")(61,ce,2,0,"mat-error")(62,me,2,0,"mat-error"),e.k0s()(),e.j41(63,"div",45)(64,"button",46),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.addGoodsField())}),e.nrm(65,"mat-icon",47),e.j41(66,"span",48),e.EFF(67,"Agregar"),e.k0s()()(),e.DNE(68,je,10,7,"div",49)(69,Te,2,0),e.k0s()()(),e.j41(70,"div",50)(71,"button",51),e.bIt("click",function(){e.eBV(t);const a=e.XpG(2);return e.Njj(a.createRequest())}),e.nrm(72,"mat-icon",47),e.j41(73,"span",48),e.EFF(74,"Enviar"),e.k0s()()()}if(2&o){const t=e.XpG(2);e.R7$(),e.Y8G("expanded",!0),e.R7$(),e.Y8G("collapsedHeight","56px"),e.R7$(4),e.Y8G("formGroup",t.requestForm)("autocomplete","off"),e.R7$(5),e.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre"),e.R7$(),e.vxM(12,t.requestForm.get("name").hasError("required")?12:-1),e.R7$(),e.vxM(13,t.requestForm.get("name").hasError("maxlength")||t.requestForm.get("name").hasError("minlength")?13:-1),e.R7$(),e.vxM(14,t.requestForm.get("name").hasError("pattern")?14:-1),e.R7$(5),e.Y8G("type","text")("formControlName","lastname")("minlength",3)("maxlength",255),e.R7$(),e.vxM(20,t.requestForm.get("lastname").hasError("required")?20:-1),e.R7$(),e.vxM(21,t.requestForm.get("lastname").hasError("maxlength")||t.requestForm.get("lastname").hasError("minlength")?21:-1),e.R7$(),e.vxM(22,t.requestForm.get("lastname").hasError("pattern")?22:-1),e.R7$(5),e.Y8G("formControlName","personality"),e.R7$(5),e.vxM(32,t.requestForm.get("personality").hasError("required")?32:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:email"),e.R7$(),e.Y8G("formControl",t.requestForm.get("email"))("spellcheck",!1),e.R7$(),e.vxM(39,t.requestForm.get("email").hasError("email")?39:-1),e.R7$(),e.vxM(40,t.requestForm.get("email").hasError("required")?40:-1),e.R7$(),e.Y8G("expanded",!0),e.R7$(),e.Y8G("collapsedHeight","56px"),e.R7$(4),e.Y8G("formGroup",t.goodsAmountTempForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","goods"),e.R7$(),e.Dyx(t.productServices),e.R7$(2),e.vxM(54,t.goodsAmountTempForm.get("goods").hasError("required")?54:-1),e.R7$(5),e.Y8G("formControlName","amount")("min",3),e.R7$(),e.vxM(60,t.goodsAmountTempForm.get("amount").hasError("required")?60:-1),e.R7$(),e.vxM(61,t.goodsAmountTempForm.get("amount").hasError("min")?61:-1),e.R7$(),e.vxM(62,t.goodsAmountTempForm.get("amount").hasError("pattern")?62:-1),e.R7$(2),e.Y8G("disabled",t.goodsAmountTempForm.invalid)("ngClass",e.eq3(44,G,t.goodsAmountTempForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:add"),e.R7$(3),e.vxM(68,t.requestForm.get("goodsData").getRawValue().length>0?68:69),e.R7$(3),e.Y8G("disabled",t.requestForm.invalid||0===t.requestForm.get("goodsData").getRawValue().length)("ngClass",e.eq3(46,G,t.requestForm.invalid||0===t.requestForm.get("goodsData").getRawValue().length)),e.R7$(),e.Y8G("svgIcon","heroicons_outline:paper-airplane")}}function Ge(o,i){1&o&&(e.j41(0,"div",89),e.EFF(1," Cat\xe1logo de productos y servicios "),e.k0s())}function Ne(o,i){if(1&o){const t=e.RV6();e.j41(0,"div",2)(1,"div",3)(2,"div",4),e.nrm(3,"img",5),e.k0s(),e.j41(4,"div",6)(5,"div",7)(6,"div",8),e.nrm(7,"img",9),e.k0s(),e.j41(8,"div",10)(9,"div",11),e.EFF(10),e.k0s(),e.j41(11,"div",12),e.EFF(12),e.k0s()(),e.nrm(13,"div",13),e.j41(14,"div",14)(15,"div",15)(16,"span",16),e.EFF(17),e.k0s(),e.j41(18,"span",17),e.EFF(19),e.k0s()(),e.j41(20,"div",15)(21,"span",16),e.EFF(22),e.k0s(),e.j41(23,"span",17),e.EFF(24),e.k0s()()(),e.j41(25,"div",18)(26,"a",19),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedPage="catalogue")}),e.EFF(27," Cat\xe1logo "),e.k0s(),e.j41(28,"a",19),e.bIt("click",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.selectedPage="request")}),e.EFF(29," Solicitud "),e.k0s()()()()(),e.j41(30,"div",20)(31,"div",21),e.eu8(32),e.DNE(33,W,2,1,"div",22)(34,O,2,1,"div",23),e.k0s()(),e.DNE(35,we,75,48,"ng-template",null,0,e.C5r)(37,Ge,2,0,"ng-template",null,1,e.C5r),e.k0s()}if(2&o){const t=e.XpG();e.R7$(3),e.Y8G("parallaxRatio",.5)("src",t.merchant.coverUrl?t.merchant.coverUrl:"https://res.cloudinary.com/athendat/image/upload/v1711402367/Comunes/NO_LOGO_llhz8x.jpeg",e.B4B),e.R7$(4),e.Y8G("src",t.merchant.logoUrl,e.B4B),e.R7$(3),e.JRh(t.merchant.name),e.R7$(2),e.Lme("",t.merchant.state,", ",t.merchant.city,""),e.R7$(5),e.JRh(t.pCount),e.R7$(2),e.JRh(1===t.pCount?"Producto":"Productos"),e.R7$(3),e.JRh(t.sCount),e.R7$(2),e.JRh(1===t.sCount?"Servicio":"Servicios"),e.R7$(2),e.Y8G("ngClass",e.l_i(14,w,"catalogue"===t.selectedPage,"catalogue"!==t.selectedPage)),e.R7$(2),e.Y8G("ngClass",e.l_i(17,w,"request"===t.selectedPage,"request"!==t.selectedPage)),e.R7$(5),e.vxM(33,"request"===t.selectedPage?33:-1),e.R7$(),e.vxM(34,"catalogue"===t.selectedPage?34:-1)}}let Pe=(()=>{class o{constructor(t,n,a,l,s,m,u){this._activatedRoute=t,this._changeDetectorRef=n,this._router=a,this._formBuilder=l,this._fuseConfirmationService=s,this._requestsService=m,this.store=u,this.productServices=[],this.productServicesStatic=[],this.pCount=0,this.sCount=0,this.selectedPage="catalogue",this.selectedProductServiceDetail=null,this.displayedColumns=["name","type","uom","amount","price","quantity","expand"],this.columnsToDisplayWithExpand=[...this.displayedColumns],this._unsubscribeAll=new N.B}ngOnInit(){this.store.select(P.Xb).pipe((0,k.Q)(this._unsubscribeAll)).subscribe(t=>{t||this._router.navigate(["../"]),this.merchant=t}),this.productServices$=this.store.select(M),this.productServices$.pipe((0,k.Q)(this._unsubscribeAll)).subscribe(t=>{this.productServices=structuredClone(t),this.productServicesStatic=t,this.pCount=t.filter(n=>"Producto"===n.type).length,this.sCount=t.filter(n=>"Servicio"===n.type).length,this._changeDetectorRef.markForCheck()}),this.requestForm=this._formBuilder.group({merchantId:[this.merchant.id,[c.k0.required]],name:["",[c.k0.required,c.k0.minLength(3),c.k0.maxLength(255),E.t.onlyAlphabetsWithAccentPattern()]],lastname:["",[c.k0.required,c.k0.minLength(6),c.k0.maxLength(255),E.t.onlyAlphabetsWithAccentPattern()]],email:["",[c.k0.required,c.k0.email]],personality:["",[c.k0.required]],status:[X.FI.Nueva,[c.k0.required]],goodsData:this._formBuilder.array([]),slug:[""]}),this.goodsAmountTempForm=this._formBuilder.group({_id:[""],goods:[null,[c.k0.required]],amount:[0,[c.k0.required,c.k0.min(1),E.t.onlyNumbersPattern()]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,A.Gp)())}addGoodsField(){const t=this.goodsAmountTempForm.getRawValue(),n=this._formBuilder.group({goodsId:[t.goods._id],name:[t.goods.name],type:[t.goods.type],amount:[+t.amount,[c.k0.required]],price:[t.goods.price,[c.k0.required]],quantity:[t.goods.price*t.amount,[c.k0.required]],uom:[t.goods.uomId.name],description:[t.goods.description]});this.requestForm.get("goodsData").push(n);const a=this.productServices.findIndex(l=>l._id===t.goods._id);this.productServices.splice(a,1),this.goodsAmountTempForm.reset(),this._changeDetectorRef.markForCheck()}removeGoodsField(t){const n=this.requestForm.get("goodsData").getRawValue().findIndex(s=>s.goodsId===t),a=this.productServicesStatic.find(s=>s._id===t);this.requestForm.get("goodsData").removeAt(n),this.productServices.push({...a}),this._changeDetectorRef.markForCheck()}createRequest(){const t=this.requestForm.getRawValue();this._fuseConfirmationService.open({title:"Enviar solicitud",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._requestsService.createRequest(t).subscribe(l=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Su solicitud ha sido enviada. Se le enviar\xe1 un correo con una oferta. \xbfDesea enviar otra solicitud?",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"si",color:"primary"},cancel:{show:!0,label:"No"}}}).afterClosed().subscribe(m=>{"confirmed"===m?(this.requestForm.reset(),this.requestForm.get("merchantId").setValue(this.merchant.id),this.requestForm.get("status").setValue("Nueva"),this.requestForm.get("goodsData").clear(),this.productServices=[...this.productServicesStatic],this.setSelectedProductServiceDetail(null)):this._router.navigate(["../../"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()})}getTotalQuantity(){return this.requestForm.get("goodsData").getRawValue().map(t=>t.quantity).reduce((t,n)=>t+n,0)}getFieldsTableHeaderNames(t){switch(t){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}setSelectedProductServiceDetail(t){this.selectedProductServiceDetail=this.productServicesStatic.find(n=>n._id===t)}trackByFn(t,n){return n.id||t}static#e=this.\u0275fac=function(n){return new(n||o)(e.rXU(b.nX),e.rXU(e.gRc),e.rXU(b.Ix),e.rXU(c.ok),e.rXU(B.G),e.rXU(V.k),e.rXU(R.il))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["incoming-request"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["requestContent",""],["catalogueContent",""],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"h-40","bg-accent-200","lg:h-80","dark:bg-accent-700"],["appParallax2","","alt","No tiene conexi\xf3n o esta imagen no existe",1,"fixed","z-0","object-fill","h-40","lg:h-80",3,"parallaxRatio","src"],[1,"z-20","bg-white","shadow"],[1,"flex","flex-col","items-center","w-full","max-w-5xl","px-8","mx-auto","flex-0","lg:flex-row","lg:h-18","bg-card"],[1,"rounded-md","-mt-26","lg:-mt-22","bg-accent-100","dark:bg-accent-700"],["alt","No tiene conexi\xf3n o esta imagen no existe",1,"w-32","h-32","rounded-md","ring-4","ring-bg-card",3,"src"],[1,"flex","flex-col","items-center","mt-4","lg:items-start","lg:mt-0","lg:ml-8"],[1,"text-lg","font-bold","leading-none"],[1,"text-secondary"],[1,"hidden","h-8","mx-8","border-l-2","lg:flex"],[1,"items-center","hidden","mt-6","space-x-6","lg:flex","lg:mt-0"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-sm","font-medium","text-secondary"],[1,"flex","items-center","mt-8","mb-4","space-x-6","lg:m-0","lg:ml-auto"],[1,"cursor-pointer",3,"click","ngClass"],[1,"z-10","w-full","light"],[1,"flex","justify-center","flex-auto","w-full","pt-4","pb-6","mx-auto","sm:p-8"],[1,"w-[92%]","sm:w-[90%]","flex","flex-col","items-start"],[1,"w-[90%]","flex","flex-col","items-start"],[4,"ngTemplateOutlet"],["multi","",1,"w-full","bg-transparent"],[2,"--tw-shadow","0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important",3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-bold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["id","mat-select","required","",3,"formControlName"],["value","Natural"],["value","Jur\xeddico"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","spellcheck"],[1,"grid","w-full","pt-8","pb-12","pl-4","pr-4","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],["required","",3,"formControlName"],[3,"value"],[1,"sm:col-span-2","md:col-span-1"],["type","number","matInput","","required","",3,"formControlName","min"],[1,"flex","self-center","justify-center","mt-2","sm:justify-start","sm:col-span-2","md:col-span-1"],["mat-stroked-button","",1,"lg:ml-4",3,"click","disabled","ngClass"],[3,"svgIcon"],[1,"ml-2","mr-1"],["tabindex","0",1,"mt-6","overflow-auto","rounded-md","sm:col-span-4","elevation-shadow","max-h-80"],[1,"flex","justify-start","w-full","mt-10","mb-2","text-right","sm:justify-end"],["mat-raised-button","",1,"ml-4","mr-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"click","disabled","ngClass"],["mat-table","","multiTemplateDataRows","",1,"w-full",3,"dataSource"],[3,"matColumnDef"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium",4,"matFooterRowDef","matFooterRowDefSticky"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","truncate",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0"],["mat-cell",""],["mat-footer-cell","",1,"truncate"],["mat-header-cell","","class","w-10 pl-8 pr-8 text-center md:w-auto md:pr-0 md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pl-8","pr-8","text-center","md:w-auto","md:pr-0","md:pl-0"],["mat-cell","",1,"text-center"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","pl-8 pr-8 text-center md:pr-6 md:pl-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"pl-8","pr-8","text-center","md:pr-6","md:pl-0"],[1,"flex","justify-center","space-x-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-footer-cell","",1,"text-end"],[1,"flex","space-x-2","overflow-hidden"],[1,"flex","items-center","m-2"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mr-2","overflow-hidden","border","rounded","flex-0"],[3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"m-4","text-secondary"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"],["mat-footer-row","",1,"font-medium"],[1,"flex","items-center","justify-center","h-40","pl-8","pr-8","mt-8","overflow-auto","text-2xl","font-semibold","tracking-tight","border-2","border-gray-300","border-dashed","rounded-md","sm:col-span-4","md:text-3xl"],[1,"flex","items-center","justify-center","w-full","pl-8","pr-8","text-2xl","font-semibold","tracking-tight","border-2","border-gray-300","border-dashed","rounded-md","h-140","md:text-4xl","text-secondary"]],template:function(n,a){1&n&&e.DNE(0,Ne,39,20,"div",2),2&n&&e.vxM(0,a.merchant?0:-1)},dependencies:[Y,S.YU,v.RG,v.rl,v.nJ,v.TL,v.JW,y.m_,y.An,D.Hl,D.$z,j.fS,j.fg,C.MY,C.BS,C.GK,C.Z2,C.WN,T.Ve,T.VO,U.wT,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.Zq,d.xW,d.KS,d.$R,d.Qo,d.YZ,d.NB,d.iF,S.T3],styles:["incoming-request table{width:100%}incoming-request tr.example-detail-row{height:0}incoming-request tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}incoming-request tr.example-element-row:not(.example-expanded-row):active{background:#efefef}incoming-request .example-element-row td{border-bottom-width:0}incoming-request .elevation-shadow{box-shadow:0 0 3px #0000001a,0 1px 2px -1px #0000001a!important}\n"],encapsulation:2,data:{animation:[(0,h.hZ)("detailExpand",[(0,h.wk)("collapsed",(0,h.iF)({height:"0px",minHeight:"0"})),(0,h.wk)("expanded",(0,h.iF)({height:"*"})),(0,h.kY)("expanded <=> collapsed",(0,h.i0)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}})}return o})();var Ae=r(27468),Me=r(85006),F=r(21626),_=r(88141),I=r(98216),Xe=r(45312),p=r(93141),Ye=r(82341);const g=Xe.c.API_URL;let Be=(()=>{class o{constructor(t,n,a){this._httpClient=t,this.rolesService=n,this.store=a}getProductServices(t=0,n=20,a="active",l="desc",s=""){const m=(new F.Nl).append("page",t).append("size",n).append("sort",a).append("order",l).append("search",s);return this._httpClient.get(`${g}/goods/`,{params:m}).pipe((0,_.M)(u=>{this.store.dispatch((0,I.Bp)({pagination:u.pagination})),this.store.dispatch((0,p.WZ)({productServices:u.dataArr}))}))}getPublicActiveGoods(t=0,n=15,a="createdAt",l="desc",s="",m={city:"",state:"",range:{start:0,end:1e4},type:null,uomId:""},u=!1){const x=(new F.Nl).append("page",t).append("size",n).append("sort",a).append("order",l).append("search",s).append("state",m.state).append("city",m.city).append("type",m.type).append("uomId",m.uomId).append("start",m.range.start).append("end",m.range.end);return this._httpClient.get(`${g}/goods/public/active`,{params:x}).pipe((0,_.M)(f=>{this.store.dispatch((0,I.Bp)({pagination:f.pagination})),this.store.dispatch(u?(0,p.vr)({productServices:f.dataArr}):(0,p.WZ)({productServices:f.dataArr}))}))}getActiveProductServices(){return this._httpClient.get(`${g}/goods/active`).pipe((0,_.M)(t=>{this.store.dispatch((0,p.WZ)({productServices:t.dataArr}))}))}getPublicProductServicesByMerchantId(t,n=0,a=10,l="active",s="desc",m="",u=!1){const x=(new F.Nl).append("page",n).append("size",a).append("sort",l).append("order",s).append("search",m);return this._httpClient.get(`${g}/goods/public/by-merchantId/${t}`,{params:x}).pipe((0,_.M)(f=>{this.store.dispatch((0,I.Bp)({pagination:f.pagination})),this.store.dispatch(u?(0,p.vr)({productServices:f.dataArr}):(0,p.WZ)({productServices:f.dataArr}))}))}getPublicProductServiceById(t){return this._httpClient.get(`${g}/goods/public/by-id/${t}`).pipe((0,_.M)(n=>{this.store.dispatch((0,p.XB)({productService:n.data}))}))}getProductServiceById(t){return this._httpClient.get(`${g}/goods/${t}`).pipe((0,_.M)(n=>{this.store.dispatch((0,p.XB)({productService:n.data}))}))}createProductService(t){return this._httpClient.post(`${g}/goods`,t).pipe((0,_.M)(n=>{this.store.dispatch((0,p.JZ)({productService:n.data}))}))}updateProductService(t){return this._httpClient.patch(`${g}/goods/${t._id}`,t).pipe((0,_.M)(n=>{this.store.dispatch((0,p.G3)({productService:n.data}))}))}deleteProductService(t,n=0,a=20,l="active",s="desc",m=""){const u=(new F.Nl).append("page",n).append("size",a).append("sort",l).append("order",s).append("search",m);return this._httpClient.delete(`${g}/goods/${t}`,{params:u}).pipe((0,_.M)(x=>{this.store.dispatch((0,I.Bp)({pagination:x.pagination})),this.store.dispatch((0,p.WZ)({productServices:x.dataArr}))}))}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(F.Qq),e.KVO(Ye.y9),e.KVO(R.il))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const Ve=[{path:"merchant/:merchantId",component:Pe,resolve:{merchant:(()=>{class o{constructor(t,n,a){this._merchantService=t,this._productServices=n,this._router=a}resolve(t,n){const a=t.params.merchantId;if(a&&"new"!==a)return(0,Ae.p)([this._merchantService.getPublicMerchantById(a),this._productServices.getPublicProductServicesByMerchantId(a)]);this._router.navigate([""])}static#e=this.\u0275fac=function(n){return new(n||o)(e.KVO(Me.b),e.KVO(Be),e.KVO(b.Ix))};static#t=this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]}}]);