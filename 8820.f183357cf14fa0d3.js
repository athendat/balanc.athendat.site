"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8820],{23301:(Q,L,l)=>{l.d(L,{I:()=>m,p:()=>p});var e=l(54438),r=l(92581);const p=(u,C)=>(0,e.WQX)(r.v).getCurrencies(),m=(u,C)=>(0,e.WQX)(r.v).getActiveCurrency()},91401:(Q,L,l)=>{l.d(L,{y$:()=>m});var e=l(59640);const r=u=>u.currencies,m=((0,e.Mz)(r,u=>u.currency),(0,e.Mz)(r,u=>u.currencies))},92581:(Q,L,l)=>{l.d(L,{v:()=>B});var e=l(54438),r=l(96697),p=l(25558),m=l(88141),u=l(73512),C=l(59640),y=l(98216),G=l(54588),x=l(91401);const f=u.J1`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,R=u.J1`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,I=u.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,T=u.J1`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,D=u.J1`
    query FindAllCurrencies($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllCurrencies(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,X=u.J1`
    query FindAllActiveCurrencies {
        findAllActiveCurrencies {
            ok
            message

            currencies {
                id
                name
                iso
            }
        }
    }
`,c=u.J1`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;let B=(()=>{class w{constructor(){this.apolloProvider=(0,e.WQX)(u.Ic),this.store=(0,e.WQX)(C.il),this._apollo=this.apolloProvider.use("BALANC")}createCurrency(v){return this.store.select(x.y$).pipe((0,r.s)(1),(0,p.n)(h=>this._apollo.mutate({mutation:f,variables:{createCurrencyInput:v},errorPolicy:"all"}).pipe((0,m.M)(({data:$})=>{const j=structuredClone(h);j.push($.createCurrency.currency),this.store.dispatch((0,G.Ih)({currencies:j}))}))))}getCurrencies(v=1,h=20,$="name",j="asc",k=""){return this._apollo.query({query:D,variables:{offset:h*(v-1),limit:h,sort:$,order:j,search:k},errorPolicy:"all"}).pipe((0,m.M)(({data:M})=>{this.store.dispatch((0,y.Bp)({pagination:M.findAllCurrencies.pagination})),this.store.dispatch((0,G.Ih)({currencies:M.findAllCurrencies.currencies}))}))}getActiveCurrency(){return this._apollo.query({query:X,errorPolicy:"all"}).pipe((0,m.M)(({data:v})=>{v&&this.store.dispatch((0,G.Ih)({currencies:v.findAllActiveCurrencies.currencies}))}))}getCurrencyById(v){return this._apollo.query({query:c,variables:{findCurrencyByIdId:v},errorPolicy:"all"}).pipe((0,m.M)(({data:h})=>{this.store.dispatch((0,G.MN)({currency:h.findCurrencyById.currency}))}))}updateCurrency(v){return this.store.select(x.y$).pipe((0,r.s)(1),(0,p.n)(h=>this._apollo.mutate({mutation:R,variables:{updateCurrencyInput:v},errorPolicy:"all"}).pipe((0,m.M)(({data:$})=>{const j=structuredClone(h);j[h.findIndex(M=>M.id===v.id)]=$.updateCurrency.currency,this.store.dispatch((0,G.Ih)({currencies:j}))}))))}updateCurrencyStatus(v){return this.store.select(x.y$).pipe((0,r.s)(1),(0,p.n)(h=>this._apollo.mutate({mutation:I,variables:{updateEntityStatusInput:v},errorPolicy:"all"}).pipe((0,m.M)(({})=>{const j=structuredClone(h);j[h.findIndex(M=>M.id===v.id)].active=v.active,this.store.dispatch((0,G.Ih)({currencies:j}))}))))}removeCurrency(v){return this.store.select(x.y$).pipe((0,r.s)(1),(0,p.n)(h=>this._apollo.mutate({mutation:T,variables:{removeCurrencyId:v},errorPolicy:"all"}).pipe((0,m.M)(({})=>{const j=structuredClone(h),k=h.findIndex(M=>M.id===v);j.splice(k,1),this.store.dispatch((0,G.Ih)({currencies:j}))}))))}static#e=this.\u0275fac=function(h){return new(h||w)};static#t=this.\u0275prov=e.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})()},98820:(Q,L,l)=>{l.r(L),l.d(L,{default:()=>hs});var e=l(54438),r=l(89417),p=l(88834),m=l(32102),u=l(99213),C=l(59042),y=l(96695),G=l(9183),x=l(30450),f=l(2042),R=l(60177),I=l(51188),T=l(7673),D=l(21413),X=l(57786),c=l(56977),B=l(70152),w=l(25558),A=l(96354),v=l(67943),h=l(47413),$=l(63729),j=l(70819),k=l(46601),M=l(51973),b=l(94794),fe=l(36596),Ce=l(57084),g=l(75351),E=l(95416),N=l(59640);const ve=i=>({"pointer-events-none":i}),be=()=>[5,10,25,100];function ye(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",32),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateBrandStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function xe(i,a){1&i&&e.nrm(0,"mat-spinner",29),2&i&&e.Y8G("diameter",20)("color","primary")}function ke(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"div",27),e.EFF(4),e.k0s(),e.j41(5,"div",22),e.DNE(6,ye,1,2,"mat-slide-toggle",28)(7,xe,1,2,"mat-spinner",29),e.k0s(),e.j41(8,"div")(9,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.updateBrand(n))}),e.nrm(10,"mat-icon",31),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isSlideLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isSlideLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit")}}function Fe(i,a){1&i&&e.Z7z(0,ke,11,5,"div",25,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function Ge(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4,"Nombre"),e.k0s(),e.j41(5,"div",22),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",23),e.EFF(8,"Detalles"),e.k0s()(),e.DNE(9,Fe,2,0),e.nI1(10,"async"),e.k0s(),e.nrm(11,"mat-paginator",24)),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.brands$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,ve,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,be))("showFirstLastButtons",!0)}}function je(i,a){1&i&&(e.j41(0,"div",33),e.EFF(1,"\xa1No se ha creado ninguna marca!"),e.k0s())}function we(i,a){1&i&&e.DNE(0,Ge,12,13)(1,je,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Re=(()=>{class i{constructor(t,o,n,s){this._changeDetectorRef=t,this._dialog=o,this._snackBar=n,this.store=s,this.flashMessage=null,this.brands$=(0,T.of)([]),this.brands=[],this.merchantInputControl=new r.MJ,this.isLoading=!1,this.searchInputControl=new r.MJ,this.user=null,this.merchant=null,this.selectedSlide=null,this.isSlideLoading=!1,this._unsubscribeAll=new D.B,this._brandsService=(0,e.WQX)(fe.m),this._fuseConfirmationService=(0,e.WQX)(k.G)}ngOnInit(){this.store.select($.SW).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(j.Xb).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.brands$=this.store.select(v.DC),this.brands$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,w.n)(t=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,A.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){this._openDialog(new Ce.m,"add")}updateBrand(t){this._openDialog(t,"edit")}updateBrandStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._brandsService.updateBrandStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateBrandStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(M.a,{data:{brand:t,dialogMode:o},panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-brands"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","lg:block"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8"],[1,"flex","items-center"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Almac\xe9n"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Marcas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Marcas "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.createBrand()}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,we,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.brands$))?28:-1,s)}},dependencies:[R.Jj,r.YN,r.me,r.BC,p.Hl,p.$z,m.RG,m.rl,m.JW,u.m_,u.An,C.fS,C.fg,y.Ou,y.iy,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,R.YU,r.X1,r.l_,I.Wk],styles:[".brands-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.brands-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.brands-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.brands-grid{grid-template-columns:72px auto 250px 150px 72px 72px}}\n"],encapsulation:2,changeDetection:0})}return i})();var De=l(55542),$e=l(64109),ee=l(14823),V=l(47358),Te=l(45024),Me=l(52202),Ee=l(67376),te=l(87122),P=l(60850),Se=l(73779),ie=l(46252),H=l(99172),Y=l(82798),z=l(86600),oe=l(93868),ne=l(6124);const Ie=i=>({"bg-gray-200 mt-4":i}),Le=i=>({"text-center":i}),se=i=>({"cursor-not-allowed":i});function Ae(i,a){if(1&i&&(e.j41(0,"h2",4),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI("Agregar esta categor\xeda a ",t.parentCategory.name,"")}}function Ne(i,a){1&i&&(e.j41(0,"h2",4),e.EFF(1,"Agregar categor\xeda"),e.k0s())}function Xe(i,a){1&i&&(e.j41(0,"h2",4),e.EFF(1,"Editar categor\xeda"),e.k0s())}function Be(i,a){if(1&i&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("ngClass",e.eq3(3,Le,"root"===t.id))("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function Ue(i,a){if(1&i&&(e.j41(0,"mat-option",26),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t+1," ")}}function Ve(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar el orden de la categor\xeda. "),e.k0s())}function Pe(i,a){if(1&i&&(e.j41(0,"mat-form-field",15)(1,"mat-label"),e.EFF(2,"Orden"),e.k0s(),e.j41(3,"mat-select",25),e.Z7z(4,Ue,2,2,"mat-option",26,e.fX1),e.k0s(),e.DNE(6,Ve,2,0,"mat-error"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("formControlName","position")("placeholder","Orden"),e.R7$(),e.Dyx(t.positions),e.R7$(2),e.vxM(6,t.categoryForm.get("position").hasError("required")?6:-1)}}function Ye(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo de la categor\xeda es obligatorio. "),e.k0s())}function ze(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El t\xedtulo del elemento de categor\xeda debe poseer entre 3 y 255 caracteres. "),e.k0s())}function Oe(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," Tooltip no debe superar los 255 caracteres. "),e.k0s())}function Qe(i,a){1&i&&(e.j41(0,"mat-error"),e.EFF(1," El \xcdcono no debe superar los 255 caracteres. "),e.k0s())}function Je(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",27,1),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2);return e.Njj(s.openCropperDialog(n))}),e.k0s(),e.j41(3,"label",28),e.nrm(4,"mat-icon",29),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function We(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.nrm(2,"mat-icon",29),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function qe(i,a){if(1&i&&e.nrm(0,"img",24),2&i){const t=e.XpG(2);e.Y8G("src",t.categoryForm.get("imageUrl").value,e.B4B)}}function Ze(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",6)(1,"div",8)(2,"form",9)(3,"div",10)(4,"mat-form-field",11)(5,"mat-label"),e.EFF(6,"Padre"),e.k0s(),e.nrm(7,"input",12),e.j41(8,"mat-autocomplete",13,0),e.bIt("optionSelected",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.selectedCategoryOption(n))}),e.Z7z(10,Be,2,5,"mat-option",14,e.fX1),e.nI1(12,"async"),e.k0s(),e.j41(13,"mat-hint"),e.EFF(14,"Si se especifica un padre este elemento se agregar\xe1 en la ra\xedz"),e.k0s()(),e.DNE(15,Pe,7,3,"mat-form-field",15),e.qex(16),e.j41(17,"mat-form-field",15)(18,"mat-label"),e.EFF(19,"Nombre"),e.k0s(),e.nrm(20,"input",16),e.DNE(21,Ye,2,0,"mat-error")(22,ze,2,0,"mat-error"),e.k0s(),e.bVm(),e.qex(23),e.j41(24,"mat-form-field",15)(25,"mat-label"),e.EFF(26,"Tooltip"),e.k0s(),e.nrm(27,"input",17),e.DNE(28,Oe,2,0,"mat-error"),e.k0s(),e.bVm(),e.qex(29),e.j41(30,"mat-form-field",15)(31,"mat-label"),e.EFF(32,"\xcdcono"),e.k0s(),e.nrm(33,"input",18),e.DNE(34,Qe,2,0,"mat-error"),e.j41(35,"mat-hint"),e.EFF(36,"Ejemplo: heroicons_solid:information-circle"),e.k0s()(),e.bVm(),e.qex(37),e.j41(38,"div",19)(39,"span",20),e.EFF(40,"Estado"),e.k0s(),e.j41(41,"mat-slide-toggle",21),e.EFF(42),e.k0s()(),e.bVm(),e.j41(43,"div",22)(44,"div",23),e.DNE(45,Je,5,3,"div")(46,We,3,1,"div"),e.k0s(),e.DNE(47,qe,1,1,"img",24),e.k0s()()()()()}if(2&i){const t=e.sdS(9),o=e.XpG();e.R7$(2),e.Y8G("formGroup",o.categoryForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","parentId")("type","text")("matAutocomplete",t),e.R7$(),e.Y8G("displayWith",o.displayFn.bind(o)),e.R7$(2),e.Dyx(e.bMT(12,29,o.filteredCategories)),e.R7$(5),e.vxM(15,o.positions.length>1?15:-1),e.R7$(5),e.Y8G("formControlName","name")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.R7$(),e.vxM(21,o.categoryForm.get("name").hasError("required")?21:-1),e.R7$(),e.vxM(22,o.categoryForm.get("name").hasError("maxLength")||o.categoryForm.get("name").hasError("minLength")?22:-1),e.R7$(5),e.Y8G("formControlName","tooltip")("placeholder","Tooltip")("maxLength",255),e.R7$(),e.vxM(28,o.categoryForm.get("tooltip").hasError("maxLength")?28:-1),e.R7$(5),e.Y8G("formControlName","icon")("placeholder","SVG \xcdcono")("maxLength",1e3),e.R7$(),e.vxM(34,o.categoryForm.get("icon").hasError("maxLength")?34:-1),e.R7$(7),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===o.categoryForm.get("active").value?"Activo":"Inactivo"," "),e.R7$(),e.Y8G("ngClass",e.eq3(31,Ie,!o.categoryForm.get("imageUrl").value)),e.R7$(2),e.vxM(45,o.categoryForm.get("imageUrl").value?-1:45),e.R7$(),e.vxM(46,o.categoryForm.get("imageUrl").value?46:-1),e.R7$(),e.vxM(47,o.categoryForm.get("imageUrl").value?47:-1)}}function He(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateCategory())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.eq3(3,se,t.categoryForm.invalid))}}function Ke(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",33),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createCategory())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.eq3(3,se,t.categoryForm.invalid))}}function et(i,a){if(1&i&&(e.j41(0,"div",7),e.qex(1),e.j41(2,"button",31),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,He,2,5,"button",32)(5,Ke,2,5,"button",32),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let tt=(()=>{class i{constructor(t,o,n,s,d,_,F,Z,S,U){this.data=t,this._changeDetectorRef=o,this._dialogRef=n,this._formBuilder=s,this._athConfirmationService=d,this._categoriesService=_,this._snackBar=F,this._imagesService=Z,this._dialog=S,this.store=U,this.categories=[],this.allCategories=[],this.positions=[],this.position=0,this.searchMPermissionControl=new r.MJ,this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.selectedCategory=t.category,this.parentCategory=t.parentCategory}ngOnInit(){this.store.select(Se.J).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.allCategories=[...t],this.filterCategory(t),this.calcPositions(!1)}),this.categoryForm=this._formBuilder.group({id:[null],position:[this.position,[r.k0.required]],name:["",[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],tooltip:[null,[r.k0.maxLength(255)]],level:[0,[r.k0.required]],icon:[null,[r.k0.maxLength(255)]],parentId:[null,[r.k0.required]],imageUrl:[null],active:[!0]}),this._fillCategoryData(),this.filteredCategories=this.categoryForm.get("parentId").valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(100),(0,H.Z)(""),(0,w.n)(t=>!t&&this.categoryForm.get("parentId").value?(0,T.of)([]):(0,T.of)(t?this.categories.filter(o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())):this.categories)))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectedCategoryOption(t){const o=t.option.value;this.parentCategory=this.categories.find(n=>n.id===o),"root"===this.parentCategory.id&&(this.parentCategory=null),this.filterCategory(this.allCategories),this.calcPositions(!0),this.categoryForm.get("position").setValue(this.position),this._changeDetectorRef.markForCheck()}createCategory(){const t=this.categoryForm.getRawValue();delete t.id,this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Crear categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.createCategory(t).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}updateCategory(){const t=this.categoryForm.getRawValue();this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Actualizar categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.updateCategory(t).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}openCropperDialog(t){this._dialog.open(ie.u,{data:{image:t},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(n=>{if(n){if(n.size/1024/1024>1)return void this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Tama\xf1o demasiado grande. La imagen no debe superar a 1MB",title:"Confirmaci\xf3n",type:"error",svgIcon:"mat_solid:done"}});this._imagesService.uploadImage("List",n).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.categoryForm.get("imageUrl").setValue(s.imageUrl),"edit"===this.dialogMode?(this.selectedCategory.imageUrl=s.imageUrl,this.selectedCategory.imageCode=s.public_id,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:s.imageUrl,imageCode:s.public_id},this.selectedCategory).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(d=>{d&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:d.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck())})):this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}})}removeImage(){const t=this.categoryForm.get("imageUrl").value;this._athConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._imagesService.removeImage(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.categoryForm.get("imageUrl").setValue(null),"edit"===this.dialogMode&&(this.selectedCategory.imageUrl=null,this.selectedCategory.imageCode=null,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:null,imageCode:null},this.selectedCategory).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(d=>{d&&this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()}))})})}displayFn(t){const o=this.categories.find(n=>n.id===t);return o?o.name:""}closeDialog(){this._dialogRef.close()}_fillCategoryData(){"edit"===this.dialogMode&&(this.categoryForm.patchValue(this.selectedCategory),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),"add"===this.dialogMode&&(this.parentCategory&&this.categoryForm.get("parentId").setValue(this.parentCategory.id),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),this._changeDetectorRef.markForCheck()}filterCategory(t){return this.selectedCategory?"edit"===this.dialogMode&&(this.categories=[...t.filter(o=>this.selectedCategory.id!==o.id)]):this.categories=[...t],this.categories.push({level:-1,id:"root",name:"----Principal----"}),this.categories.sort((o,n)=>o.level-n.level)}calcPositions(t){if(this.positions=[],this.position=0,this.parentCategory&&this.parentCategory.children&&this.parentCategory.children.length>0){for(let o=0;o<this.parentCategory.children.length;o++)this.positions.push(o);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}if(!this.parentCategory){const o=this.allCategories.filter(n=>null===n.parentId);for(let n=0;n<o.length;n++)this.positions.push(n);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):this.positions.push(this.positions.length)}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(e.gRc),e.rXU(g.CP),e.rXU(r.ze),e.rXU(k.G),e.rXU(oe.M),e.rXU(E.UG),e.rXU(ne.M),e.rXU(g.bZ),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["category-dialog"]],standalone:!0,features:[e.aNF],decls:10,vars:5,consts:[["auto","matAutocomplete"],["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",1,"text-2xl"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2","md:grid-cols-3"],[1,"fuse-mat-no-subscript"],["matInput","","placeholder","Elemento padre","aria-label","Number",3,"formControlName","type","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected","displayWith"],[3,"ngClass","value"],[1,"w-full"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],["matInput","","require","",3,"formControlName","placeholder","maxLength"],["matInput","",3,"formControlName","placeholder","maxLength"],[1,"flex","flex-col"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,"object-cover","w-full","h-full",3,"src"],["required","",3,"formControlName","placeholder"],[3,"value"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],["mat-icon-button","",3,"click"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass"],["mat-flat-button","",3,"click","color","disabled","ngClass"]],template:function(o,n){1&o&&(e.j41(0,"div",2),e.qex(1),e.j41(2,"div",3),e.DNE(3,Ae,2,1,"h2",4)(4,Ne,2,0,"h2",4)(5,Xe,2,0,"h2",4),e.k0s(),e.bVm(),e.j41(6,"div",5),e.qex(7),e.DNE(8,Ze,48,33,"div",6),e.bVm(),e.k0s(),e.DNE(9,et,6,3,"div",7),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.dialogMode&&n.parentCategory?3:-1),e.R7$(),e.vxM(4,"add"!==n.dialogMode||n.parentCategory?-1:4),e.R7$(),e.vxM(5,"edit"===n.dialogMode?5:-1),e.R7$(3),e.vxM(8,"view"!==n.dialogMode?8:-1),e.R7$(),e.vxM(9,"view"!==n.data.dialogMode?9:-1))},dependencies:[g.BI,r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.X1,r.j4,r.JD,m.RG,m.rl,m.nJ,m.MV,m.TL,C.fS,C.fg,P.jL,P.$3,z.wT,P.pN,z.Sy,R.YU,Y.Ve,Y.VO,x.mV,x.sG,z.pZ,z.r6,u.m_,u.An,p.Hl,p.$z,p.iY,g.tx,R.Jj],encapsulation:2,changeDetection:0})}return i})();class it{}var ot=l(85943),nt=l(27115);const st=(i,a)=>({"bg-gray-800 dark:bg-white":i,"bg-gray-700 dark:bg-neutral-50":a});function at(i,a){if(1&i&&(e.j41(0,"div",35)(1,"div",45),e.nrm(2,"div",46),e.k0s(),e.j41(3,"span",47),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.item.name)}}function rt(i,a){if(1&i&&(e.j41(0,"div",35)(1,"button",48),e.nrm(2,"mat-icon",39),e.k0s(),e.j41(3,"span",49),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.BMQ("aria-label","Expandir "+t.item.name),e.R7$(),e.Y8G("svgIcon",o.treeControl.isExpanded(t)?"mat_solid:expand_more":"mat_solid:chevron_right"),e.R7$(2),e.JRh(t.item.name)}}function lt(i,a){if(1&i&&e.nrm(0,"img",38),2&i){const t=e.XpG().$implicit;e.Y8G("alt","Foto")("src",t.item.imageUrl,e.B4B)}}function ct(i,a){1&i&&e.nrm(0,"div",50)}function mt(i,a){if(1&i&&e.nrm(0,"mat-icon",39),2&i){const t=e.XpG().$implicit;e.Y8G("svgIcon",t.item.icon)}}function dt(i,a){1&i&&e.nrm(0,"span")}function pt(i,a){if(1&i&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.JRh(o.flatNodeMap.get(t).children.length)}}function ut(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",51),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))})("change",function(n){e.eBV(t);const s=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.updateCategoryStatus(n,s,s.item.id))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.item.active)("color","primary")}}function _t(i,a){1&i&&e.nrm(0,"mat-spinner",42),2&i&&e.Y8G("diameter",20)("color","primary")}function gt(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-tree-node",34),e.bIt("mouseenter",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseEnterLeave(n.item.id))})("mouseleave",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseEnterLeave(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.mouseOver(n.item.id))})("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))}),e.DNE(1,at,5,1,"div",35)(2,rt,5,3),e.j41(3,"div",36)(4,"div",37),e.DNE(5,lt,1,2,"img",38)(6,ct,1,0),e.k0s()(),e.j41(7,"div",30),e.DNE(8,mt,1,1,"mat-icon",39),e.k0s(),e.DNE(9,dt,1,0,"span")(10,pt,2,1,"span",30),e.j41(11,"div",40),e.DNE(12,ut,1,2,"mat-slide-toggle",41)(13,_t,1,2,"mat-spinner",42),e.k0s(),e.j41(14,"div",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.dobleClick(n))}),e.j41(15,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.createCategory(n))}),e.nrm(16,"mat-icon",39),e.k0s(),e.j41(17,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.editCategory(n))}),e.nrm(18,"mat-icon",39),e.k0s(),e.j41(19,"button",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.deleteCategory(s.flatNodeMap.get(n)))}),e.nrm(20,"mat-icon",39),e.k0s()()()}if(2&i){const t=a.$implicit,o=e.XpG(2);e.Y8G("ngClass",e.l_i(11,st,t.item.id===o.selectedCategoryId,t.item.id===o.overCategoryId)),e.R7$(),e.vxM(1,0===o.flatNodeMap.get(t).children.length?1:2),e.R7$(4),e.vxM(5,t.item.imageUrl?5:6),e.R7$(3),e.vxM(8,t.item.icon?8:-1),e.R7$(),e.vxM(9,0===o.flatNodeMap.get(t).children.length?9:-1),e.R7$(),e.vxM(10,o.flatNodeMap.get(t).children.length>0?10:-1),e.R7$(2),e.vxM(12,o.isLoading&&o.selectedSlide===t.item.id?-1:12),e.R7$(),e.vxM(13,o.isLoading&&o.selectedSlide===t.item.id?13:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:add"),e.R7$(2),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function ht(i,a){if(1&i&&(e.j41(0,"div",28)(1,"div",29),e.EFF(2," Nombre "),e.k0s(),e.j41(3,"div",30),e.EFF(4," Imagen "),e.k0s(),e.j41(5,"div",30),e.EFF(6," Icono "),e.k0s(),e.j41(7,"div",30),e.EFF(8," #.Elementos "),e.k0s(),e.j41(9,"div",30),e.EFF(10," Estado "),e.k0s(),e.j41(11,"div",31),e.EFF(12," Acciones "),e.k0s()(),e.j41(13,"mat-tree",32),e.DNE(14,gt,21,14,"mat-tree-node",33),e.k0s()),2&i){const t=e.XpG();e.R7$(13),e.Y8G("dataSource",t.dataSource)("treeControl",t.treeControl)}}function ft(i,a){1&i&&(e.j41(0,"div",52),e.EFF(1," \xa1No se ha creado ning\xfan elemento a\xfan!"),e.k0s())}function Ct(i,a){if(1&i&&(e.j41(0,"div",52),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha generado ninguna suscripci\xf3n a\xfan!","")}}let vt=(()=>{class i{constructor(t,o,n,s,d,_,F,Z){this.store=t,this.dialog=o,this._snackBar=n,this._categoryService=s,this._fuseConfigService=d,this._changeDetectorRef=_,this._fuseConfirmationService=F,this._fuseMediaWatcherService=Z,this.categories=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new Te.CB(!0),this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new D.B,this.getLevel=S=>S.level,this.isExpandable=S=>S.expandable,this.getChildren=S=>S.children,this.hasChild=(S,U)=>U.expandable,this.hasNoContent=(S,U)=>""===U.item.name,this.transformer=(S,U)=>{const W=this.nestedNodeMap.get(S),q=W&&W.item===S.item?W:new it;return q.item=S.item,q.level=U,q.expandable=!!S.children?.length,this.flatNodeMap.set(q,S),this.nestedNodeMap.set(S,q),q},this.treeFlattener=new V.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new $e.XW(this.getLevel,this.isExpandable),this.dataSource=new V.zw(this.treeControl,this.treeFlattener)}ngOnInit(){this._categoryService.data$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{if(this.previousTreeControl=(0,Ee.cloneDeep)(this.treeControl),this.dataSource.data=t,this.previousTreeControl&&void 0!==this.previousTreeControl.dataNodes)for(const n of this.previousTreeControl.dataNodes)if(this.previousTreeControl.isExpanded(n)){const s=this.treeControl.dataNodes.find(d=>d.item.id===n.item.id);this.treeControl.expand(s)}const o={item:null,children:t};this.categories=[],this.getCategories(o),this.store.dispatch((0,Me.zw)({categories:[...this.categories]})),this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md")}),this._fuseConfigService.config$.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.config=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(s=>this.checklistSelection.isSelected(s))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(s=>this.checklistSelection.isSelected(s))&&!this.descendantsAllSelected(t)}mouseEnterLeave(t){this.selectedCategoryId=t===this.selectedCategoryId?"":t}mouseOver(t){this.overCategoryId=t===this.overCategoryId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}refreshCategories(){this._categoryService.getRootCategoryNodes().pipe((0,c.Q)(this._unsubscribeAll)).subscribe()}updateCategoryStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._categoryService.updateCategoryStatus({id:o.item.id,active:t.checked},o.item).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck())})}createCategory(t){if(t){const o=this.categories.find(n=>n.id===t.item.id);this._openDialog(o,null,"add")}else this._openDialog(null,null,"add")}editCategory(t){let o=this.categories.find(n=>n.id===t.item.parentId);o=void 0===o?null:o,this._openDialog(o,t.item,"edit")}deleteCategory(t){this._fuseConfirmationService.open({title:"Eliminar Elemento",message:`\xbfEst\xe1 seguro que desea eliminar a ${t.item.name}? ${t.children.length>0?"Este elemento posee otros elementos":""}.`,icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._categoryService.removeCategory(t.item.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}_openDialog(t,o,n){this.dialog.open(tt,{data:{parentCategory:t,category:o,dialogMode:n},disableClose:!0,panelClass:"ath-nrp-dialog-panel"})}getCategories(t){for(const o of t.children){const n={...o.item};n.children=[...o.children],this.categories.push(n),o.children&&o.children.length>0&&this.getCategories(o)}}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(N.il),e.rXU(g.bZ),e.rXU(E.UG),e.rXU(oe.M),e.rXU(ot.V),e.rXU(e.gRc),e.rXU(k.G),e.rXU(nt.F))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["settings-category"]],standalone:!0,features:[e.aNF],decls:42,vars:6,consts:[["noSubscriptions",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","flex-row-reverse","flex-wrap","items-center","lg:justify-end","mt-2","sm:flex-row","lg:mt-0","shrink-0","lg:ml-4"],["mat-raised-button","",1,"lg:ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_solid:close_fullscreen"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_solid:expand"],["mat-icon-button","","matTooltip","Refrescar",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[1,"text-white",3,"svgIcon"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","category-tree-table","xl:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"ml-6","xl:ml-0"],[1,"text-center"],[1,"pr-4","mr-6","text-right","xl:mr-0"],[3,"dataSource","treeControl"],["class","grid category-tree-table gap-4 relative  py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],[1,"grid","category-tree-table","gap-4","relative","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"mouseenter","mouseleave","click","ngClass"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],[1,"flex","items-center","justify-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","overflow-hidden","border","rounded","flex-0"],[1,"w-8",3,"alt","src"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["matTreeNodeToggle","","mat-icon-button","","color","primary",1,"flex","items-center","justify-center","w-10","h-10"],[1,"w-2","h-2","rounded-full","bg-primary-500"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"cursor-default","whitespace-nowrap"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"click","change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"div",5)(6,"div",6)(7,"a",7),e.EFF(8,"Inicio"),e.k0s()(),e.j41(9,"div",6),e.nrm(10,"mat-icon",8),e.j41(11,"a",9),e.EFF(12,"Categor\xedas"),e.k0s()()(),e.j41(13,"div",10)(14,"a",11),e.nrm(15,"mat-icon",8),e.j41(16,"span",12),e.EFF(17,"Regresar"),e.k0s()()()(),e.j41(18,"div",13)(19,"div",14),e.EFF(20," Gesti\xf3n de Categor\xedas "),e.k0s()()(),e.j41(21,"div",15)(22,"button",16),e.bIt("click",function(){return e.eBV(s),e.Njj(n.createCategory(null))}),e.nrm(23,"mat-icon",17),e.j41(24,"span",18),e.EFF(25,"Nuevo"),e.k0s()(),e.j41(26,"button",19),e.bIt("click",function(){return e.eBV(s),e.Njj(n.collapseAll())}),e.nrm(27,"mat-icon",20),e.j41(28,"span",21),e.EFF(29,"Contraer"),e.k0s()(),e.j41(30,"button",22),e.bIt("click",function(){return e.eBV(s),e.Njj(n.expandAll())}),e.nrm(31,"mat-icon",23),e.j41(32,"span",21),e.EFF(33,"Expandir"),e.k0s()(),e.j41(34,"button",24),e.bIt("click",function(){return e.eBV(s),e.Njj(n.refreshCategories())}),e.nrm(35,"mat-icon",25),e.k0s()()(),e.j41(36,"div",26)(37,"div",27),e.DNE(38,ht,15,2)(39,ft,2,0)(40,Ct,2,1,"ng-template",null,0,e.C5r),e.k0s()()()()}2&o&&(e.R7$(10),e.Y8G("svgIcon","heroicons_solid:chevron-right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","heroicons_solid:chevron-left"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(12),e.Y8G("svgIcon","mat_solid:refresh"),e.R7$(3),e.vxM(38,n.dataSource.data&&n.dataSource.data.length>0?38:39))},dependencies:[De.uv,p.Hl,p.$z,p.iY,u.m_,u.An,G.D6,G.LG,x.mV,x.sG,ee.uc,ee.oV,V.jH,V.yI,V.yF,V.pO,V.lQ,V.d6,R.YU,I.Wk],encapsulation:2,data:{animation:te.X},changeDetection:0})}return i})(),bt=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["app-lists"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(o,n){1&o&&e.nrm(0,"router-outlet")},dependencies:[I.n3],encapsulation:2})}return i})();var ae=l(91401),O=l(67398),re=l(92581);function yt(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Moneda "),e.k0s())}function xt(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Moneda "),e.k0s())}function kt(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.currency.name||"Sin nombre")}}function Ft(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s(),e.j41(7,"mat-form-field",15)(8,"mat-label"),e.EFF(9,"Nombre en el Versat"),e.k0s(),e.nrm(10,"input",17),e.k0s(),e.j41(11,"mat-form-field",15)(12,"mat-label"),e.EFF(13,"ISO"),e.k0s(),e.nrm(14,"input",18),e.k0s(),e.j41(15,"mat-form-field",15)(16,"mat-label"),e.EFF(17,"S\xedmbolo"),e.k0s(),e.nrm(18,"input",19),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.currencyForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.R7$(4),e.Y8G("formControlName","namev")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.R7$(4),e.Y8G("formControlName","iso")("placeholder","Ejemplo: USD"),e.R7$(4),e.Y8G("formControlName","symbol")("placeholder","Ejemplo: $")}}function Gt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateCurrency())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function jt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createCurrency())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function wt(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",20),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,Gt,2,3,"button",21)(5,jt,2,3,"button",21),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Rt=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._unsubscribeAll=new D.B,this._currenciesService=(0,e.WQX)(re.v),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)(k.G),this._dialogRef=(0,e.WQX)(g.CP),this.dialogMode=t.dialogMode,this.currency=t.currency}ngOnInit(){this.currencyForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)]),namev:new r.MJ(null,[r.k0.maxLength(50)]),iso:new r.MJ(null,[r.k0.maxLength(5)]),symbol:new r.MJ(null,[r.k0.maxLength(5)])}),"edit"===this.dialogMode&&this.currencyForm.patchValue(this.currency)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createCurrency(){let t=this.currencyForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._currenciesService.createCurrency(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda creada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateCurrency(){const t=this.currencyForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._currenciesService.updateCurrency(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda actualizada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-currency-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","required","","maxlength","5",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","5",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,yt,2,0,"h2",2)(4,xt,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,kt,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Ft,19,10,"div",5),e.bVm(),e.k0s(),e.DNE(10,wt,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,p.Hl,p.$z,g.tx,m.RG,m.rl,m.nJ,C.fS,C.fg,r.X1,r.j4,r.JD],encapsulation:2,changeDetection:0})}return i})();class Dt{}const $t=(i,a)=>a.id;function Tt(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",28),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateCurrencyStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Mt(i,a){1&i&&e.nrm(0,"mat-spinner",24),2&i&&e.Y8G("diameter",20)("color","primary")}function Et(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",20)(1,"div",21),e.EFF(2),e.k0s(),e.j41(3,"div",21),e.EFF(4),e.k0s(),e.j41(5,"div",21),e.EFF(6),e.k0s(),e.j41(7,"div",21),e.EFF(8),e.k0s(),e.j41(9,"div",22),e.DNE(10,Tt,1,2,"mat-slide-toggle",23)(11,Mt,1,2,"mat-spinner",24),e.k0s(),e.j41(12,"div",25)(13,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(14,"mat-icon",27),e.k0s(),e.j41(15,"button",26),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteCurrency(n))}),e.nrm(16,"mat-icon",27),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.namev," "),e.R7$(2),e.SpI(" ",t.iso," "),e.R7$(2),e.SpI(" ",t.symbol," "),e.R7$(2),e.vxM(10,n.isSlideLoading&&n.selectedSlide===o?-1:10),e.R7$(),e.vxM(11,n.isSlideLoading&&n.selectedSlide===o?11:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function St(i,a){1&i&&e.Z7z(0,Et,17,8,"div",20,$t),2&i&&e.Dyx(a)}function It(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17)(2,"div",18),e.EFF(3," Nombre "),e.k0s(),e.j41(4,"div",18),e.EFF(5," Nombre en el Versat "),e.k0s(),e.j41(6,"div"),e.EFF(7," ISO "),e.k0s(),e.j41(8,"div"),e.EFF(9," S\xedmbolo "),e.k0s(),e.j41(10,"div",19),e.EFF(11," Activo "),e.k0s(),e.j41(12,"div",19),e.EFF(13," Acciones "),e.k0s()(),e.DNE(14,St,2,0),e.nI1(15,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(2),e.Y8G("mat-sort-header","namev"),e.R7$(10),e.vxM(14,(t=e.bMT(15,3,o.currencies$))?14:-1,t)}}function Lt(i,a){1&i&&(e.j41(0,"div",29),e.EFF(1," \xa1No hay monedas creadas para el negocio!"),e.k0s())}function At(i,a){1&i&&e.DNE(0,It,16,5,"div",16)(1,Lt,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Nt=(()=>{class i{constructor(){this.currencies$=(0,T.of)([]),this.currency=new Dt,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new D.B,this._currenciesService=(0,e.WQX)(re.v),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(g.bZ),this._fuseConfirmationService=(0,e.WQX)(k.G),this._snackBar=(0,e.WQX)(E.UG),this.store=(0,e.WQX)(N.il)}ngOnInit(){this.currencies$=this.store.select(ae.y$)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteCurrency(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la moneda: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._currenciesService.removeCurrency(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateCurrencyStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._currenciesService.updateCurrencyStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Rt,{data:{currency:t,dialogMode:o},width:"90%",panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-currencies"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","currencies-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","currencies-grid","md:px-8"],[1,"truncate"],[1,"hidden","text-center","sm:block"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Monedas"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Monedas "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.currency,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,At,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.currencies$))?25:-1,s)}},dependencies:[R.Jj,p.Hl,p.$z,u.m_,u.An,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,I.Wk],styles:[".currencies-grid{grid-template-columns:20% 20% 15% 10% 20% auto}@media (min-width: 600px){.currencies-grid{grid-template-columns:20% 20% 15% 10% 20% auto}}\n"],encapsulation:2,changeDetection:0})}return i})();var Xt=l(56501),le=l(98300);function Bt(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Combustible "),e.k0s())}function Ut(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Combustible "),e.k0s())}function Vt(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.fuel.name||"Sin nombre")}}function Pt(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.fuelForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function Yt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateFuel())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function zt(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createFuel())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function Ot(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,Yt,2,3,"button",18)(5,zt,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Qt=(()=>{class i{constructor(t,o,n,s,d,_){this.data=t,this._fuelsService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._dialogRef=_,this.dialogMode="view",this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.fuel=t.fuel}ngOnInit(){this.fuelForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(100)])}),"edit"===this.dialogMode&&this.fuelForm.patchValue(this.fuel)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createFuel(){let t=this.fuelForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._fuelsService.createFuel(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.createFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateFuel(){const t=this.fuelForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._fuelsService.updateFuel(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.updateFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(le.d),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(g.CP))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-fuel-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,Bt,2,0,"h2",2)(4,Ut,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,Vt,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Pt,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,Ot,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,p.Hl,p.$z,g.hM,g.tx,m.RG,m.rl,m.nJ,C.fS,C.fg,r.X1,r.j4,r.JD],encapsulation:2})}return i})();class Jt{}const Wt=i=>({"pointer-events-none":i}),qt=()=>[5,10,25,100];function Zt(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateFuelStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Ht(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function Kt(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,Zt,1,2,"mat-slide-toggle",24)(7,Ht,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteFuel(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function ei(i,a){1&i&&e.Z7z(0,Kt,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function ti(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,ei,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.fuels$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,Wt,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,qt))("showFirstLastButtons",!0)}}function ii(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay combustibles creados para el negocio! "),e.k0s())}function oi(i,a){1&i&&e.DNE(0,ti,12,13,"div",16)(1,ii,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let ni=(()=>{class i{constructor(t,o,n,s,d,_){this._fuelsService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=d,this.store=_,this.fuel=new Jt,this.fuels$=(0,T.of)([]),this.isLoading=!1,this.searchInputControl=new r.MJ(null),this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.fuels$=this.store.select(Xt.UC),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._fuelsService.getFuels(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteFuel(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._fuelsService.removeFuel(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeFuel.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateFuelStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._fuelsService.updateFuelStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateFuelStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Qt,{data:{fuel:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(le.d),e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-fuels"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","overflow-auto","border-b","lists-grid","md:px-8"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Combustibles"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Combustibles "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.fuel,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,oi,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.fuels$))?25:-1,s)}},dependencies:[R.Jj,p.Hl,p.$z,u.m_,u.An,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,y.Ou,y.iy,R.YU,I.Wk],encapsulation:2,changeDetection:0})}return i})();var si=l(98929),ce=l(90362);function ai(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Multiplicador "),e.k0s())}function ri(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Multiplicador "),e.k0s())}function li(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"valor"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.multiplier.value||"Sin valor")}}function ci(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"valor"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.multiplierForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","value")("placeholder","Ejemplo: 3.5")}}function mi(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateMultiplier())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function di(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createMultiplier())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function pi(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,mi,2,3,"button",18)(5,di,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let ui=(()=>{class i{constructor(t,o,n,s,d,_,F){this.data=t,this._multipliersService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._dialogRef=_,this._snackBar=F,this.dialogMode="view",this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.multiplier=t.multiplier}ngOnInit(){this.multiplierForm=this._formBuilder.group({id:new r.MJ(null),value:new r.MJ(null,[r.k0.min(1)])}),"edit"===this.dialogMode&&this.multiplierForm.patchValue(this.multiplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createMultiplier(){let t=this.multiplierForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._multipliersService.createMultiplier(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateMultiplier(){const t=this.multiplierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._multipliersService.updateMultiplier(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(ce.y),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(g.CP),e.rXU(E.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-multiplier-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","number","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,ai,2,0,"h2",2)(4,ri,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,li,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,ci,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,pi,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.Q0,r.BC,r.cb,r.YS,r.tU,p.Hl,p.$z,g.hM,g.tx,m.RG,m.rl,m.nJ,C.fS,C.fg,r.X1,r.j4,r.JD],encapsulation:2})}return i})();class _i{}const gi=i=>({"pointer-events-none":i}),hi=()=>[5,10,25,100];function fi(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateMultiplierStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Ci(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function vi(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,fi,1,2,"mat-slide-toggle",24)(7,Ci,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteMultiplier(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" x",t.value," "),e.R7$(2),e.vxM(6,n.isSlideLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isSlideLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function bi(i,a){1&i&&e.Z7z(0,vi,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function yi(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Valor "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,bi,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","value"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.multipliers$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,gi,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,hi))("showFirstLastButtons",!0)}}function xi(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay multiplicadores creados para el negocio!"),e.k0s())}function ki(i,a){1&i&&e.DNE(0,yi,12,13,"div",16)(1,xi,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Fi=(()=>{class i{constructor(t,o,n,s,d,_){this._multipliersService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=d,this.store=_,this.multiplier=new _i,this.multipliers$=(0,T.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.multipliers$=this.store.select(si.DC),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"value",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._multipliersService.getMultipliers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteMultiplier(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: x${t.value}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._multipliersService.removeMultiplier(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateMultiplierStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._multipliersService.updateMultiplierStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMultiplierStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(ui,{data:{multiplier:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(ce.y),e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-multipliers"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,""],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Multiplicadores"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Multiplicadores "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.multiplier,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,ki,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.multipliers$))?25:-1,s)}},dependencies:[R.Jj,p.Hl,p.$z,u.m_,u.An,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,y.Ou,y.iy,R.YU,I.Wk],encapsulation:2,changeDetection:0})}return i})();var Gi=l(94425),me=l(52777);function ji(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar tipo de operaci\xf3n "),e.k0s())}function wi(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar tipo de operaci\xf3n "),e.k0s())}function Ri(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.operationType.name||"Sin nombre")}}function Di(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.operationTypeForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function $i(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateOperationType())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function Ti(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createOperationType())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function Mi(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",18),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,$i,2,3,"button",19)(5,Ti,2,3,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Ei=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._unsubscribeAll=new D.B,this._fuseConfirmationService=(0,e.WQX)(k.G),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._formBuilder=(0,e.WQX)(r.ok),this._dialogRef=(0,e.WQX)(g.CP),this._snackBar=(0,e.WQX)(E.UG),this._operationTypesService=(0,e.WQX)(me.k),this.dialogMode=t.dialogMode,this.operationType=t.operationType}ngOnInit(){this.operationTypeForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)])}),"edit"===this.dialogMode&&this.operationTypeForm.patchValue(this.operationType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createOperationType(){let t=this.operationTypeForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._operationTypesService.createOperationType(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateOperationType(){const t=this.operationTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._operationTypesService.updateOperationType(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-operation-type-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,ji,2,0,"h2",2)(4,wi,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,Ri,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Di,8,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,Mi,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD,m.RG,m.rl,m.nJ,C.fS,C.fg,p.Hl,p.$z,g.tx],encapsulation:2})}return i})();class Si{}const Ii=(i,a)=>a.id,Li=()=>[p.$z,u.An,G.LG,x.sG],Ai=i=>({"pointer-events-none":i}),Ni=()=>[5,10,25,100];function Xi(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",33),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),d=s.$implicit,_=s.$index,F=e.XpG(2);return e.Njj(F.updateOperationTypeStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.active)("color","primary")}}function Bi(i,a){1&i&&e.nrm(0,"mat-spinner",29),2&i&&e.Y8G("diameter",20)("color","primary")}function Ui(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"div",26),e.EFF(4),e.k0s(),e.j41(5,"div",27),e.DNE(6,Xi,1,2,"mat-slide-toggle",28)(7,Bi,1,2,"mat-spinner",29),e.k0s(),e.j41(8,"div",30)(9,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",32),e.k0s(),e.j41(11,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(2);return e.Njj(s.deleteOperationType(n))}),e.nrm(12,"mat-icon",32),e.k0s()()()}if(2&i){const t=e.XpG(),o=t.$implicit,n=t.$index,s=e.XpG(2);e.R7$(2),e.SpI(" ",n+1," "),e.R7$(2),e.SpI(" ",o.name," "),e.R7$(2),e.vxM(6,s.isSlideLoading&&s.selectedSlide===n?-1:6),e.R7$(),e.vxM(7,s.isSlideLoading&&s.selectedSlide===n?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Vi(i,a){1&i&&e.nrm(0,"div")}function Pi(i,a){1&i&&(e.DNE(0,Ui,13,6)(1,Vi,1,0),e.nv$(2,0,Li,null,1),e.qhs(0,-1))}function Yi(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",22),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Acciones "),e.k0s()(),e.Z7z(9,Pi,4,0,null,null,Ii),e.nrm(11,"mat-paginator",24),e.k0s()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.Dyx(t.operationTypes),e.R7$(2),e.Y8G("ngClass",e.eq3(7,Ai,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(9,Ni))("showFirstLastButtons",!0)}}function zi(i,a){1&i&&(e.j41(0,"div",34),e.EFF(1," \xa1No hay ning\xfan tipo de operaci\xf3n creado hasta el momento! "),e.k0s())}let Oi=(()=>{class i{constructor(){this.isLoading=!1,this.isSlideLoading=!1,this.operationType=new Si,this.operationTypes=[],this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new D.B,this._changeDetectorRef=(0,e.WQX)(e.gRc),this._dialog=(0,e.WQX)(g.bZ),this._fuseConfirmationService=(0,e.WQX)(k.G),this._operationTypesService=(0,e.WQX)(me.k),this._snackBar=(0,e.WQX)(E.UG),this.store=(0,e.WQX)(N.il)}ngOnInit(){this.store.select(Gi.nK).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.operationTypes=t,this._changeDetectorRef.markForCheck()}),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,w.n)(t=>(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,A.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteOperationType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de operaci\xf3n: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._operationTypesService.removeOperationType(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeOperationType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateOperationTypeStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._operationTypesService.updateOperationTypeStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Ei,{data:{operationType:t,dialogMode:o},width:"90%",panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-operation-types"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","lg:flex-row","flex-0","lg:items-center","lg:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","lg:mt-0","lg:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipo de operaciones"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipos de operaciones "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.openDialog(n.operationType,"add")}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Yi,12,10,"div",19)(29,zi,2,0),e.k0s()()()),2&o&&(e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,n.operationTypes.length>0?28:29))},dependencies:[r.YN,r.me,r.BC,p.Hl,p.$z,m.RG,m.rl,m.JW,u.m_,u.An,C.fS,C.fg,y.Ou,y.iy,G.D6,x.mV,f.NQ,f.B4,f.aE,R.YU,r.X1,r.l_,I.Wk],encapsulation:2})}return i})();var Qi=l(11955),Ji=l(70672),de=l(67336),J=l(36471),K=l(53328),pe=l(30242);const Wi=i=>({"bg-gray-200":i});function qi(i,a){1&i&&(e.j41(0,"h2",5),e.EFF(1," Agregar pasarela de pago "),e.k0s())}function Zi(i,a){1&i&&(e.j41(0,"h2",5),e.EFF(1," Editar pasarela de pago "),e.k0s())}function Hi(i,a){if(1&i&&(e.j41(0,"div",7)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"h6",14),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",15),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.paymentGateway.name||"Sin nombre")}}function Ki(i,a){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.title," ")}}function eo(i,a){if(1&i&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.name," ")}}function to(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-chip",34),e.bIt("removed",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.removeCurrency(n))}),e.j41(1,"div",35),e.EFF(2),e.k0s(),e.j41(3,"button",36),e.nrm(4,"mat-icon",37),e.k0s()()}if(2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.iso),e.R7$(),e.BMQ("aria-label","Eliminar "+t.name),e.R7$(),e.Y8G("svgIcon","mat_solid:cancel")}}function io(i,a){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"input",38,2),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2);return e.Njj(s.openCropperDialog(n))}),e.k0s(),e.j41(3,"label",39),e.nrm(4,"mat-icon",40),e.k0s()()}2&i&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function oo(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",29)(1,"button",41),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.nrm(2,"mat-icon",42),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function no(i,a){if(1&i&&e.nrm(0,"img",30),2&i){const t=e.XpG(2);e.Y8G("src",t.paymentGatewayForm.get("logo").value,e.B4B)}}function so(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",8)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",19),e.k0s(),e.j41(7,"mat-form-field",18)(8,"mat-label"),e.EFF(9,"Tipo de autenticaci\xf3n"),e.k0s(),e.j41(10,"mat-select",20),e.Z7z(11,Ki,2,2,"mat-option",21,e.fX1),e.k0s()(),e.j41(13,"mat-form-field",22)(14,"mat-label"),e.EFF(15,"Api Url"),e.k0s(),e.nrm(16,"input",19),e.k0s(),e.j41(17,"mat-form-field",23)(18,"mat-label"),e.EFF(19,"Monedas"),e.k0s(),e.nrm(20,"input",24),e.j41(21,"mat-autocomplete",25,0),e.bIt("optionSelected",function(n){e.eBV(t);const s=e.XpG();return e.Njj(s.addCurrency(n.option.value))}),e.Z7z(23,eo,2,2,"mat-option",21,e.fX1),e.nI1(25,"async"),e.k0s(),e.j41(26,"mat-chip-grid",26,1),e.Z7z(28,to,5,3,"mat-chip",null,e.fX1),e.k0s()(),e.j41(30,"div",27)(31,"div",28),e.DNE(32,io,5,3,"div")(33,oo,3,1,"div",29),e.k0s(),e.DNE(34,no,1,1,"img",30),e.k0s(),e.j41(35,"div",31)(36,"span",32),e.EFF(37,"Estado"),e.k0s(),e.j41(38,"mat-slide-toggle",33),e.EFF(39),e.k0s()()()()()}if(2&i){const t=e.sdS(22),o=e.sdS(27),n=e.XpG();e.R7$(2),e.Y8G("formGroup",n.paymentGatewayForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("maxlength",50)("placeholder","Ejemplo: Transferencia"),e.R7$(4),e.Y8G("formControlName","authType"),e.R7$(),e.Dyx(n.authTypes),e.R7$(5),e.Y8G("formControlName","apiUrl")("maxlength",1e3)("placeholder","Ejemplo: https://api.balanc.app/api"),e.R7$(4),e.Y8G("formControl",n.searchCurrencyControl)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matAutocomplete",t),e.R7$(3),e.Dyx(e.bMT(25,20,n.filteredCurrencies)),e.R7$(5),e.Dyx(n.selectedCurrencies),e.R7$(2),e.Y8G("ngClass",e.eq3(22,Wi,!n.paymentGatewayForm.get("logo").value)),e.R7$(2),e.vxM(32,n.paymentGatewayForm.get("logo").value?-1:32),e.R7$(),e.vxM(33,n.paymentGatewayForm.get("logo").value?33:-1),e.R7$(),e.vxM(34,n.paymentGatewayForm.get("logo").value?34:-1),e.R7$(4),e.Y8G("formControlName","active")("color","primary"),e.R7$(),e.SpI(" ",!0===n.paymentGatewayForm.get("active").value?"Activo":"Inactivo"," ")}}function ao(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updatePaymentGateway())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentGatewayForm.invalid)}}function ro(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createPaymentGateway())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentGatewayForm.invalid)}}function lo(i,a){if(1&i&&(e.j41(0,"div",9)(1,"button",43),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,ao,2,2,"button",44)(4,ro,2,2,"button",44),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let co=(()=>{class i{constructor(t,o,n,s,d,_,F,Z,S,U){this.data=t,this._paymentGatewaysService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._dialogRef=_,this._dialog=F,this._imagesService=Z,this._snackBar=S,this.store=U,this.dialogMode="view",this.separatorKeysCodes=[de.Fm,de.KE],this.searchCurrencyControl=new r.MJ,this.selectedCurrencies=[],this.currencies=[],this.authTypes=[{title:"Ninguna",name:"none"},{title:"Basic Auth",name:"basic"},{title:"OAuth",name:"oauth"}],this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode;const W={...t.paymentGateway};delete W.__typename,this.paymentGateway=W}ngOnInit(){this.store.select(ae.y$).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{if(this.currencies=t,!K.H.IsNullOrEmpty(this.paymentGateway.currenciesId))for(const o of this.paymentGateway.currenciesId){const n=this.currencies.find(s=>s.id===o);n&&this.selectedCurrencies.push(n)}}),this.paymentGatewayForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.required,r.k0.maxLength(50)]),apiUrl:new r.MJ(null,[r.k0.required,r.k0.maxLength(1e3)]),active:[!1],currenciesId:[[]],authType:["",r.k0.required],logo:[null]}),"edit"===this.dialogMode&&this.paymentGatewayForm.patchValue(this.paymentGateway),this.filteredCurrencies=this.searchCurrencyControl.valueChanges.pipe((0,H.Z)(""),(0,B.B)(400),(0,w.n)(t=>(0,T.of)(this.currencies.filter("string"==typeof t&&t?o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&!this.selectedCurrencies.some(n=>n.id===o.id):o=>!this.selectedCurrencies.some(n=>n.id===o.id)))))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}addCurrency(t){this.searchCurrencyControl.setValue(""),this.selectedCurrencies.push(t),this.paymentGatewayForm.get("currenciesId").setValue(this.selectedCurrencies.map(o=>o.id)),this._changeDetectorRef.markForCheck()}removeCurrency(t){const o=this.selectedCurrencies.indexOf(t);o>=0&&this.selectedCurrencies.splice(o,1),this.paymentGatewayForm.get("currenciesId").setValue(this.selectedCurrencies.map(n=>n.id)),this.searchCurrencyControl.setValue("")}createPaymentGateway(){const t=this.paymentGatewayForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear pasarela de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewaysService.createPaymentGateway(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}updatePaymentGateway(){const t=this.paymentGatewayForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar pasarela de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewaysService.updatePaymentGateway(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._dialogRef.close())}),this._changeDetectorRef.markForCheck()})}openCropperDialog(t){this._dialog.open(ie.u,{data:{image:t},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(n=>{if(!K.H.IsNullOrEmpty(n)){if(n.size/1024/1024>1)return void this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Tama\xf1o demasiado grande. La imagen no debe superar a 1MB",title:"Confirmaci\xf3n",type:"error",svgIcon:"mat_solid:done"}});this._imagesService.uploadImage("List",n).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.paymentGatewayForm.get("logo").setValue(s.imageUrl),this.paymentGateway.logo=s.imageUrl,"edit"===this.dialogMode?(K.H.IsNullOrEmpty(this.paymentGateway.currencies)||delete this.paymentGateway.currencies,this._paymentGatewaysService.updatePaymentGateway(this.paymentGateway).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(d=>{d&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:d.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck())})):this._changeDetectorRef.markForCheck()},s=>{console.warn(s)})}})}removeImage(){const t=this.paymentGatewayForm.get("logo").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._imagesService.removeImage(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this.paymentGatewayForm.get("logo").setValue(null),this.paymentGateway.logo=null,"edit"===this.dialogMode&&(K.H.IsNullOrEmpty(this.paymentGateway.currencies)||delete this.paymentGateway.currencies,this._paymentGatewaysService.updatePaymentGateway(this.paymentGateway).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(d=>{d&&this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()}))})})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(pe.L),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(g.CP),e.rXU(g.bZ),e.rXU(ne.M),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["payment-gateway-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[["auto","matAutocomplete"],["currencyChipGrid",""],["thumbnailFileInput",""],[1,"relative","flex","flex-col","w-full","h-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"grid","w-full","gap-4","py-4","mt-1","sm:gap-8","sm:grid-cols-2",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","",3,"formControlName","maxlength","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"w-full","col-span-2"],["appearance","fill",1,"w-full","sm:col-span-2"],["placeholder","Agregar Moneda","required","",1,"w-full",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["aria-label","Agregar moneda"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mt-2","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,""],[1,"object-contain","w-full","h-full",3,"src"],[1,"flex","flex-col","items-center","justify-center"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[3,"removed"],[1,"truncate","max-w-16","sm:max-w-24"],["matChipRemove","",1,"w-5","h-5"],[1,"icon-size-5",3,"svgIcon"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"text-red-700",3,"svgIcon"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled"],["mat-flat-button","",3,"click","color","disabled"]],template:function(o,n){1&o&&(e.j41(0,"div",3)(1,"div",4),e.DNE(2,qi,2,0,"h2",5)(3,Zi,2,0,"h2",5),e.k0s(),e.j41(4,"div",6),e.DNE(5,Hi,9,1,"div",7)(6,so,40,24,"div",8),e.k0s(),e.DNE(7,lo,5,3,"div",9),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[R.Jj,P.jL,P.$3,z.wT,P.pN,p.Hl,p.$z,p.iY,J.YN,J.Jl,J.HW,J.D7,J.Zv,g.hM,g.tx,m.RG,m.rl,m.nJ,u.m_,u.An,C.fS,C.fg,Y.Ve,Y.VO,x.mV,x.sG,R.YU,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.l_,r.j4,r.JD],encapsulation:2})}return i})();const mo=(i,a)=>a.id,po=i=>({"pointer-events-none":i}),uo=()=>[10,25,50,100];function _o(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.createPaymentGateway())}),e.nrm(1,"mat-icon",22),e.j41(2,"span",23),e.EFF(3,"Nuevo"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("svgIcon","mat_solid:add"))}function go(i,a){if(1&i&&e.nrm(0,"img",32),2&i){const t=e.XpG().$implicit;e.Y8G("alt","PM Logo")("src",t.logo,e.B4B)}}function ho(i,a){1&i&&(e.j41(0,"div",36),e.EFF(1," SIN LOGO "),e.k0s())}function fo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",39),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updatePaymentGatewayReadyStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.isReady)("color","primary")}}function Co(i,a){1&i&&e.nrm(0,"mat-spinner",40),2&i&&e.Y8G("diameter",20)("color","primary")}function vo(i,a){if(1&i&&(e.j41(0,"div",37),e.DNE(1,fo,1,2,"mat-slide-toggle",38)(2,Co,1,2),e.k0s()),2&i){const t=e.XpG().$index,o=e.XpG(4);e.R7$(),e.vxM(1,o.isLoading&&o.selectedSlide===t?2:1)}}function bo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",39),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(2),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updatePaymentGatewayStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG(2).$implicit;e.Y8G("checked",t.active)("color","primary")}}function yo(i,a){1&i&&e.nrm(0,"mat-spinner",40),2&i&&e.Y8G("diameter",20)("color","primary")}function xo(i,a){if(1&i&&(e.j41(0,"div",37),e.DNE(1,bo,1,2,"mat-slide-toggle",38)(2,yo,1,2),e.k0s()),2&i){const t=e.XpG().$index,o=e.XpG(4);e.R7$(),e.vxM(1,o.isLoading&&o.selectedSlide===t?2:1)}}function ko(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",41)(1,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.editPaymentGateway(n))}),e.nrm(2,"mat-icon",43),e.k0s(),e.j41(3,"button",42),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,s=e.XpG(4);return e.Njj(s.deletePaymentGateway(n.id))}),e.nrm(4,"mat-icon",43),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("svgIcon","heroicons_solid:pencil"),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:trash"))}function Fo(i,a){if(1&i&&(e.j41(0,"div",29)(1,"div",30)(2,"div",31),e.DNE(3,go,1,2,"img",32)(4,ho,2,0),e.k0s()(),e.j41(5,"div",33),e.EFF(6),e.k0s(),e.DNE(7,vo,3,1,"div",34)(8,xo,3,1,"div",34)(9,ko,5,2,"div",35),e.k0s()),2&i){const t=a.$implicit,o=e.XpG(4);e.R7$(3),e.vxM(3,t.logo?3:4),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngxPermissionsOnly",o.Super),e.R7$(),e.Y8G("ngxPermissionsOnly",o.Super),e.R7$(),e.Y8G("ngxPermissionsOnly",o.Super)}}function Go(i,a){1&i&&e.Z7z(0,Fo,10,5,"div",29,mo),2&i&&e.Dyx(a)}function jo(i,a){if(1&i&&(e.j41(0,"div",24)(1,"div",25),e.nrm(2,"div"),e.j41(3,"div",26),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",27),e.EFF(6," Operativa "),e.k0s(),e.j41(7,"div",27),e.EFF(8," Activo "),e.k0s(),e.j41(9,"div",28),e.EFF(10," Acciones "),e.k0s()(),e.DNE(11,Go,2,0),e.nI1(12,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(8),e.vxM(11,(t=e.bMT(12,2,o.paymentGateways$))?11:-1,t)}}function wo(i,a){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado pasarela de pagos!":"\xa1No se ha creado creado ning\xfan pasarela de pago a\xfan!","")}}function Ro(i,a){1&i&&e.DNE(0,jo,13,4,"div",24)(1,wo,2,1),2&i&&e.vxM(0,a.length>0?0:1)}function Do(i,a){if(1&i&&(e.j41(0,"div",44),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado pasarela de pagos!":"\xa1No se ha creado creado ning\xfan pasarela de pago a\xfan!","")}}function $o(i,a){if(1&i&&e.nrm(0,"mat-paginator",20),2&i){const t=e.XpG();e.Y8G("ngClass",e.eq3(6,po,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(8,uo))("showFirstLastButtons",!0)}}let To=(()=>{class i{constructor(t,o,n,s,d,_){this._changeDetectorRef=t,this._paymentGatewayService=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=d,this.store=_,this.isLoading=!1,this.selectedSlide=null,this.searchInputControl=new r.MJ(null),this._unsubscribeAll=new D.B}ngOnInit(){this.paymentGateways$=this.store.select(Qi._J),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,H.Z)(null),(0,w.n)(t=>null!==t?(this.isLoading=!0,this._paymentGatewayService.findAllPaymentGateways(0,10,"name","desc",t)):(0,T.of)()),(0,A.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._paymentGatewayService.findAllPaymentGateways(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updatePaymentGatewayStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._paymentGatewayService.updatePaymentGatewayStatus({id:o.id,active:t.checked}).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck())})}updatePaymentGatewayReadyStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._paymentGatewayService.updatePaymentGatewayReadyStatus({id:o.id,isReady:t.checked}).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck())})}createPaymentGateway(){this._openDialog(new Ji.Z,"add")}editPaymentGateway(t){this._openDialog(t,"edit")}deletePaymentGateway(t){this._fuseConfirmationService.open({title:"Eliminar Pasarela de pago",message:"\xbfEsta seguro que desea Eliminar el pasarela de pago? Perder\xe1 el acceso a todos los datos asociados al mismo.",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentGatewayService.removePaymentGateway(t,this.pagination.page,this.pagination.size,"active","desc").pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{s&&(this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck())}),this._changeDetectorRef.markForCheck()})}_openDialog(t,o){this._dialog.open(co,{data:{paymentGateway:t,dialogMode:o},disableClose:!0,panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(pe.L),e.rXU(g.bZ),e.rXU(k.G),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["payment-gateways"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:35,vars:14,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","sm:mt-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["class","mt-4 text-white sm:mt-0 bg-gradient-to-r from-primary-500 to-primary-600 hover:to-primary-900 hover:shadow-lg","mat-raised-button","",3,"click",4,"ngxPermissionsOnlyAdministrador","ngxPermissionsOnly"],[1,"flex","flex-auto"],[1,"flex","flex-col","justify-between","flex-auto"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","five-columns-grid"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","five-columns-grid"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],[1,"w-8",3,"alt","src"],[1,"truncate"],["class","flex justify-center mr-4 text-center",4,"ngxPermissionsOnlyAdministrador","ngxPermissionsOnly"],["class","flex flex-row justify-end gap-2",4,"ngxPermissionsOnlyAdministrador","ngxPermissionsOnly"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"change","checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",4),e.nrm(9,"mat-icon",6),e.j41(10,"a",7),e.EFF(11,"Nomencladores"),e.k0s()(),e.j41(12,"div",4),e.nrm(13,"mat-icon",6),e.j41(14,"a",7),e.EFF(15,"Pasarela de pagos"),e.k0s()()(),e.j41(16,"div",8)(17,"a",9),e.nrm(18,"mat-icon",6),e.j41(19,"span",10),e.EFF(20,"Regresar"),e.k0s()()()(),e.j41(21,"div",11)(22,"div",12),e.EFF(23," Listado de Pasarela de pagos "),e.k0s()()(),e.j41(24,"div",13)(25,"mat-form-field",14),e.nrm(26,"mat-icon",15)(27,"input",16),e.k0s(),e.DNE(28,_o,4,1,"button",17),e.k0s()(),e.j41(29,"div",18)(30,"div",19),e.DNE(31,Ro,2,1),e.nI1(32,"async"),e.DNE(33,Do,2,1)(34,$o,1,9,"mat-paginator",20),e.k0s()()()),2&o){let s;e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar pasarela de pagos"),e.R7$(),e.Y8G("ngxPermissionsOnly",n.Super),e.R7$(3),e.vxM(31,(s=e.bMT(32,12,n.paymentGateways$))?31:33,s),e.R7$(3),e.vxM(34,n.pagination.length>0?34:-1)}},dependencies:[R.Jj,p.Hl,p.$z,m.RG,m.rl,m.JW,u.m_,u.An,C.fS,C.fg,y.Ou,y.iy,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,R.YU,r.X1,r.me,r.BC,r.l_,I.Wk],encapsulation:2,data:{animation:te.X},changeDetection:0})}return i})();var Mo=l(84713),ue=l(78693);function Eo(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar m\xe9todo de pago "),e.k0s())}function So(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar m\xe9todo de pago "),e.k0s())}function Io(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.paymentMethod.name||"Sin nombre")}}function Lo(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.paymentMethodForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function Ao(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updatePaymentMethod())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentMethodForm.invalid)("matDialogClose","confirmed")}}function No(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createPaymentMethod())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.paymentMethodForm.invalid)("matDialogClose","confirmed")}}function Xo(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",18),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,Ao,2,3,"button",19)(5,No,2,3,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Bo=(()=>{class i{constructor(t,o,n,s,d,_,F){this.data=t,this._paymentMethodsService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._snackBar=_,this._dialogRef=F,this.dialogMode="view",this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.paymentMethod=t.paymentMethod}ngOnInit(){this.paymentMethodForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)])}),"edit"===this.dialogMode&&this.paymentMethodForm.patchValue(this.paymentMethod)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createPaymentMethod(){let t=this.paymentMethodForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear M\xe9todo de Pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.createPaymentMethod(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createPaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updatePaymentMethod(){const t=this.paymentMethodForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar M\xe9todo de Pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.updatePaymentMethod(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updatePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(ue.q),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(E.UG),e.rXU(g.CP))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-payment-method-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,Eo,2,0,"h2",2)(4,So,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,Io,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Lo,8,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,Xo,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.X1,r.j4,r.JD,m.RG,m.rl,m.nJ,C.fS,C.fg,p.Hl,p.$z,g.tx],encapsulation:2})}return i})();class Uo{}const Vo=(i,a)=>a.id,Po=i=>({"pointer-events-none":i}),Yo=()=>[5,10,25,100];function zo(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",32),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updatePaymentMethodStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Oo(i,a){1&i&&e.nrm(0,"mat-spinner",28),2&i&&e.Y8G("diameter",20)("color","primary")}function Qo(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.k0s(),e.j41(3,"div",26),e.EFF(4),e.k0s(),e.j41(5,"div",22),e.DNE(6,zo,1,2,"mat-slide-toggle",27)(7,Oo,1,2,"mat-spinner",28),e.k0s(),e.j41(8,"div",29)(9,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",31),e.k0s(),e.j41(11,"button",30),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deletePaymentMethod(n))}),e.nrm(12,"mat-icon",31),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isSlideLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isSlideLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Jo(i,a){1&i&&e.Z7z(0,Qo,13,6,"div",25,Vo),2&i&&e.Dyx(a)}function Wo(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div"),e.j41(3,"div",21),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",22),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",23),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,Jo,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",24),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.paymentMethods$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,Po,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,Yo))("showFirstLastButtons",!0)}}function qo(i,a){1&i&&(e.j41(0,"div",33),e.EFF(1," \xa1No hay m\xe9todos de pago creadas para el negocio!"),e.k0s())}function Zo(i,a){1&i&&e.DNE(0,Wo,12,13,"div",19)(1,qo,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Ho=(()=>{class i{constructor(t,o,n,s,d,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._paymentMethodsService=s,this._snackBar=d,this.store=_,this.isLoading=!1,this.isSlideLoading=!1,this.paymentMethod=new Uo,this.paymentMethods$=(0,T.of)([]),this.searchInputControl=new r.MJ,this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.paymentMethods$=this.store.select(Mo.xi),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,w.n)(t=>(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,A.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deletePaymentMethod(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el m\xe9todo de pago: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._paymentMethodsService.removePaymentMethod(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updatePaymentMethodStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._paymentMethodsService.updatePaymentMethodStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUserStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Bo,{data:{paymentMethod:t,dialogMode:o},width:"90%",panelClass:"ath-dialog-panel",disableClose:!0})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(ue.q),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-payment-methods"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Nomencladores"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"M\xe9todos de pago"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," M\xe9todos de pago "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.openDialog(n.paymentMethod,"add")}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Zo,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.paymentMethods$))?28:-1,s)}},dependencies:[I.Wk,u.m_,u.An,m.RG,m.rl,m.JW,C.fS,C.fg,r.YN,r.me,r.BC,r.X1,r.l_,p.Hl,p.$z,f.NQ,f.B4,f.aE,x.mV,x.sG,G.D6,G.LG,y.Ou,y.iy,R.YU,R.Jj],encapsulation:2,changeDetection:0})}return i})();var Ko=l(77581),_e=l(86069);function en(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Tipo de Servicio "),e.k0s())}function tn(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Tipo de Servicio "),e.k0s())}function on(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.serviceType.name||"Sin nombre")}}function nn(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"mat-form-field",15)(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.nrm(6,"input",16),e.k0s()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.serviceTypeForm)("autocomplete","off"),e.R7$(4),e.Y8G("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function sn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateServiceType())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function an(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createServiceType())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function rn(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",17),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,sn,2,3,"button",18)(5,an,2,3,"button",18),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let ln=(()=>{class i{constructor(t,o,n,s,d,_,F){this.data=t,this._serviceTypesService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._dialogRef=_,this._snackBar=F,this.dialogMode="view",this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.serviceType=t.serviceType}ngOnInit(){this.serviceTypeForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(100)])}),"edit"===this.dialogMode&&this.serviceTypeForm.patchValue(this.serviceType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createServiceType(){let t=this.serviceTypeForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._serviceTypesService.createServiceType(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateServiceType(){const t=this.serviceTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._serviceTypesService.updateServiceType(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(_e.Q),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(g.CP),e.rXU(E.UG))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-service-type-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,en,2,0,"h2",2)(4,tn,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,on,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,nn,7,4,"div",5),e.bVm(),e.k0s(),e.DNE(10,rn,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[P.jL,p.Hl,p.$z,J.YN,g.hM,g.tx,m.RG,m.rl,m.nJ,u.m_,C.fS,C.fg,Y.Ve,x.mV,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD],encapsulation:2})}return i})();class cn{}const mn=i=>({"pointer-events-none":i}),dn=()=>[5,10,25,100];function pn(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateServiceTypeStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function un(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function _n(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"div",18),e.EFF(2),e.k0s(),e.j41(3,"div",23),e.EFF(4),e.k0s(),e.j41(5,"div",20),e.DNE(6,pn,1,2,"mat-slide-toggle",24)(7,un,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteServiceType(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function gn(i,a){1&i&&e.Z7z(0,_n,13,6,"div",22,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function hn(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div",18),e.j41(3,"div",19),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",20),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,gn,2,0),e.nI1(10,"async"),e.nrm(11,"mat-paginator",21),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,8,o.serviceTypes$))?9:-1,t),e.R7$(2),e.Y8G("ngClass",e.eq3(10,mn,o.isLoading))("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(12,dn))("showFirstLastButtons",!0)}}function fn(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay combustibles creados para el negocio!"),e.k0s())}function Cn(i,a){1&i&&e.DNE(0,hn,12,13,"div",16)(1,fn,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let vn=(()=>{class i{constructor(t,o,n,s,d,_){this._serviceTypesService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=s,this._snackBar=d,this.store=_,this.serviceType=new cn,this.serviceTypes$=(0,T.of)([]),this.isLoading=!1,this.searchInputControl=new r.MJ(null),this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.serviceTypes$=this.store.select(Ko.jr),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,H.Z)(null),(0,w.n)(t=>null!==t?(this.isLoading=!0,this._serviceTypesService.getServiceTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value)):(0,T.of)()),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteServiceType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de servicio: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._serviceTypesService.removeServiceType(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.removeServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateServiceTypeStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._serviceTypesService.updateServiceTypeStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateServiceTypeStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(ln,{data:{serviceType:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(_e.Q),e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-service-types"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,"truncate"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipo de servicio"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipo de servicio "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.serviceType,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,Cn,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.serviceTypes$))?25:-1,s)}},dependencies:[R.Jj,p.Hl,p.$z,m.RG,u.m_,u.An,C.fS,y.Ou,y.iy,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,R.YU,r.X1,I.Wk],encapsulation:2,changeDetection:0})}return i})();var bn=l(17085),ge=l(21326);function yn(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar Unidad de Medida "),e.k0s())}function xn(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar Unidad de Medida "),e.k0s())}function kn(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.uom.name||"Sin nombre")}}function Fn(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()(),e.j41(8,"div",15)(9,"mat-form-field",16)(10,"mat-label"),e.EFF(11,"Sigla"),e.k0s(),e.nrm(12,"input",17),e.k0s()(),e.j41(13,"div",15)(14,"mat-form-field",16)(15,"mat-label"),e.EFF(16,"Tipo"),e.k0s(),e.j41(17,"mat-select",18)(18,"mat-option",19),e.EFF(19,"\xc1rea"),e.k0s(),e.j41(20,"mat-option",19),e.EFF(21,"Conteo"),e.k0s(),e.j41(22,"mat-option",19),e.EFF(23,"Energ\xeda"),e.k0s(),e.j41(24,"mat-option",19),e.EFF(25,"Longitud"),e.k0s(),e.j41(26,"mat-option",19),e.EFF(27,"Peso"),e.k0s(),e.j41(28,"mat-option",19),e.EFF(29,"Tiempo"),e.k0s(),e.j41(30,"mat-option",19),e.EFF(31,"Volumen"),e.k0s()()()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.uomForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.R7$(5),e.Y8G("formControlName","abbr")("placeholder","Siglas"),e.R7$(5),e.Y8G("formControlName","type"),e.R7$(),e.Y8G("value","area"),e.R7$(2),e.Y8G("value","conteo"),e.R7$(2),e.Y8G("value","energ\xeda"),e.R7$(2),e.Y8G("value","longitud"),e.R7$(2),e.Y8G("value","peso"),e.R7$(2),e.Y8G("value","tiempo"),e.R7$(2),e.Y8G("value","volumen")}}function Gn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateUom())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function jn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",22),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createUom())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function wn(i,a){if(1&i&&(e.j41(0,"div",6),e.qex(1),e.j41(2,"button",20),e.EFF(3," Cancelar "),e.k0s(),e.bVm(),e.DNE(4,Gn,2,3,"button",21)(5,jn,2,3,"button",21),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(4,"edit"===t.data.dialogMode?4:-1),e.R7$(),e.vxM(5,"add"===t.data.dialogMode?5:-1)}}let Rn=(()=>{class i{constructor(t){this.data=t,this.dialogMode="view",this._changeDetectorRef=(0,e.WQX)(e.gRc),this._destroyRef=(0,e.WQX)(e.abz),this._dialogRef=(0,e.WQX)(g.CP),this._formBuilder=(0,e.WQX)(r.ok),this._fuseConfirmationService=(0,e.WQX)(k.G),this._snackBar=(0,e.WQX)(E.UG),this._unsubscribeAll=new D.B,this._uomService=(0,e.WQX)(ge.N),this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.uomForm=this._formBuilder.group({id:[null],name:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]],abbr:[null,[r.k0.required,r.k0.maxLength(255)]],type:[null,[r.k0.required,r.k0.minLength(3),r.k0.maxLength(255)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.createUom(t).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.createUom.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.updateUom(t).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUom.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-uom-dialog"]],standalone:!0,features:[e.aNF],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.qex(1),e.j41(2,"div",1),e.DNE(3,yn,2,0,"h2",2)(4,xn,2,0,"h2",2),e.k0s(),e.bVm(),e.j41(5,"div",3),e.qex(6),e.DNE(7,kn,9,1,"div",4),e.bVm(),e.qex(8),e.DNE(9,Fn,32,14,"div",5),e.bVm(),e.k0s(),e.DNE(10,wn,6,3,"div",6),e.k0s()),2&o&&(e.R7$(3),e.vxM(3,"add"===n.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"edit"===n.data.dialogMode?4:-1),e.R7$(3),e.vxM(7,"view"===n.data.dialogMode?7:-1),e.R7$(2),e.vxM(9,9),e.R7$(),e.vxM(10,"view"!==n.data.dialogMode?10:-1))},dependencies:[r.YN,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.X1,r.j4,r.JD,m.RG,m.rl,m.nJ,C.fS,C.fg,Y.Ve,Y.VO,z.wT,z.Sy,p.Hl,p.$z,g.tx],encapsulation:2})}return i})();class Dn{}const $n=(i,a)=>a.id,Tn=()=>[5,10,25,100];function Mn(i,a){1&i&&(e.EFF(0," m"),e.j41(1,"sup"),e.EFF(2,"3"),e.k0s())}function En(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",31),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateUomStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Sn(i,a){1&i&&e.nrm(0,"mat-spinner",28),2&i&&e.Y8G("diameter",20)("color","primary")}function In(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",24)(1,"div",25),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.EFF(4),e.DNE(5,Mn,3,0,"sup"),e.k0s(),e.j41(6,"div",22),e.EFF(7),e.k0s(),e.j41(8,"div",26),e.DNE(9,En,1,2,"mat-slide-toggle",27)(10,Sn,1,2,"mat-spinner",28),e.k0s(),e.j41(11,"div",26)(12,"button",29),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.updateUom(n))}),e.nrm(13,"mat-icon",30),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ","m3"===t.abbr?"":t.abbr," "),e.R7$(),e.vxM(5,"m3"===t.abbr?5:-1),e.R7$(2),e.SpI(" ",t.type," "),e.R7$(2),e.vxM(9,n.isSlideLoading&&n.selectedSlide===o?-1:9),e.R7$(),e.vxM(10,n.isSlideLoading&&n.selectedSlide===o?10:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit")}}function Ln(i,a){1&i&&e.Z7z(0,In,14,7,"div",24,$n),2&i&&e.Dyx(a)}function An(i,a){if(1&i&&(e.j41(0,"div",19)(1,"div",20)(2,"div",21),e.EFF(3,"Nombre"),e.k0s(),e.j41(4,"div",22),e.EFF(5," Siglas "),e.k0s(),e.j41(6,"div",22),e.EFF(7," Tipo "),e.k0s(),e.j41(8,"div",22),e.EFF(9," Activo "),e.k0s(),e.j41(10,"div",22),e.EFF(11,"Detalles"),e.k0s()(),e.DNE(12,Ln,2,0),e.nI1(13,"async"),e.k0s(),e.nrm(14,"mat-paginator",23)),2&i){let t;const o=e.XpG(2);e.R7$(2),e.Y8G("mat-sort-header","name"),e.R7$(10),e.vxM(12,(t=e.bMT(13,7,o.uoms$))?12:-1,t),e.R7$(2),e.Y8G("length",o.pagination.length)("pageIndex",o.pagination.page)("pageSize",o.pagination.size)("pageSizeOptions",e.lJ4(9,Tn))("showFirstLastButtons",!0)}}function Nn(i,a){1&i&&(e.j41(0,"div",32),e.EFF(1,"\xa1No se ha creado ninguna unidad de medida!"),e.k0s())}function Xn(i,a){1&i&&e.DNE(0,An,15,10)(1,Nn,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let Bn=(()=>{class i{constructor(t,o,n,s,d,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._uomService=s,this._snackBar=d,this.store=_,this.uoms$=(0,T.of)([]),this.searchInputControl=new r.MJ,this.isLoading=!1,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.uoms$=this.store.select(bn.Ns),this.store.select(h.D).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,c.Q)(this._unsubscribeAll),(0,B.B)(300),(0,w.n)(t=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,A.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,c.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,X.h)(this._sort.sortChange,this._paginator.page).pipe((0,w.n)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,A.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(new Dn,"add")}updateUom(t){this._openDialog(t,"edit")}updateUomStatus(t,o,n){this.isSlideLoading=!0,this.selectedSlide=n,this._uomService.updateUomStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateUomStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(Rn,{data:{uom:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(ge.N),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-uom"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:30,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-auto","sm:mb-18"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Almac\xe9n"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Unidades de Medida"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Unidades de Medida "),e.k0s()()(),e.j41(18,"div",10)(19,"mat-form-field",11),e.nrm(20,"mat-icon",12)(21,"input",13),e.k0s(),e.j41(22,"button",14),e.bIt("click",function(){return n.createUom()}),e.nrm(23,"mat-icon",15),e.j41(24,"span",16),e.EFF(25,"Agregar"),e.k0s()()()(),e.j41(26,"div",17)(27,"div",18),e.DNE(28,Xn,2,1),e.nI1(29,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(7),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.R7$(2),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(28,(s=e.bMT(29,9,n.uoms$))?28:-1,s)}},dependencies:[R.Jj,r.YN,r.me,r.BC,p.Hl,p.$z,m.RG,m.rl,m.JW,u.m_,u.An,C.fS,C.fg,y.Ou,y.iy,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,r.X1,r.l_,I.Wk],styles:[".uom-grid{grid-template-columns:auto 70px 150px 72px 72px}\n"],encapsulation:2,changeDetection:0})}return i})();var Un=l(21781),he=l(86952);function Vn(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Agregar tipo de comprobante "),e.k0s())}function Pn(i,a){1&i&&(e.j41(0,"h2",2),e.EFF(1," Editar tipo de comprobante "),e.k0s())}function Yn(i,a){if(1&i&&(e.j41(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"h6",11),e.EFF(6,"Nombre"),e.k0s(),e.j41(7,"span",12),e.EFF(8),e.k0s()()()()()()),2&i){const t=e.XpG();e.R7$(8),e.JRh(t.data.voucher.name||"Sin nombre")}}function zn(i,a){if(1&i&&(e.j41(0,"div",5)(1,"div",13)(2,"form",14)(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",17),e.k0s()()()()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("formGroup",t.voucherForm)("autocomplete","off"),e.R7$(5),e.Y8G("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function On(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.updateVoucher())}),e.EFF(1," Actualizar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function Qn(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createVoucher())}),e.EFF(1," Agregar "),e.k0s()}if(2&i){const t=e.XpG(2);e.Y8G("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function Jn(i,a){if(1&i&&(e.j41(0,"div",6)(1,"button",18),e.EFF(2," Cancelar "),e.k0s(),e.DNE(3,On,2,3,"button",19)(4,Qn,2,3,"button",19),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("matDialogClose","cancelled"),e.R7$(2),e.vxM(3,"edit"===t.data.dialogMode?3:-1),e.R7$(),e.vxM(4,"add"===t.data.dialogMode?4:-1)}}let Wn=(()=>{class i{constructor(t,o,n,s,d,_){this.data=t,this._VouchersService=o,this._changeDetectorRef=n,this._formBuilder=s,this._fuseConfirmationService=d,this._dialogRef=_,this.dialogMode="view",this._unsubscribeAll=new D.B,this.dialogMode=t.dialogMode,this.voucher=t.voucher}ngOnInit(){this.voucherForm=this._formBuilder.group({id:new r.MJ(null),name:new r.MJ(null,[r.k0.maxLength(50)])}),"edit"===this.dialogMode&&this.voucherForm.patchValue(this.voucher)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createVoucher(){let t=this.voucherForm.getRawValue();t=(0,O.A)(t,["id"]),this._fuseConfirmationService.open({title:"Crear tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._VouchersService.createVoucher(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante creado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateVoucher(){const t=this.voucherForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._VouchersService.updateVoucher(t).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(s=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante actualizado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(g.Vh),e.rXU(he.v),e.rXU(e.gRc),e.rXU(r.ok),e.rXU(k.G),e.rXU(g.CP))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-voucher-dialog"]],standalone:!0,features:[e.aNF],decls:8,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],[1,"text-2xl","text-gray-400"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose"],["mat-flat-button","",3,"click","color","disabled","matDialogClose"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Vn,2,0,"h2",2)(3,Pn,2,0,"h2",2),e.k0s(),e.j41(4,"div",3),e.DNE(5,Yn,9,1,"div",4)(6,zn,8,4,"div",5),e.k0s(),e.DNE(7,Jn,5,3,"div",6),e.k0s()),2&o&&(e.R7$(2),e.vxM(2,"add"===n.data.dialogMode?2:-1),e.R7$(),e.vxM(3,"edit"===n.data.dialogMode?3:-1),e.R7$(2),e.vxM(5,"view"===n.data.dialogMode?5:-1),e.R7$(),e.vxM(6,6),e.R7$(),e.vxM(7,"view"!==n.data.dialogMode?7:-1))},dependencies:[g.hM,g.tx,p.Hl,p.$z,m.RG,m.rl,m.nJ,u.m_,C.fS,C.fg,r.X1,r.qT,r.me,r.BC,r.cb,r.YS,r.tU,r.j4,r.JD],encapsulation:2,changeDetection:0})}return i})();class qn{}function Zn(i,a){if(1&i){const t=e.RV6();e.j41(0,"mat-slide-toggle",29),e.bIt("change",function(n){e.eBV(t);const s=e.XpG(),d=s.$implicit,_=s.$index,F=e.XpG(4);return e.Njj(F.updateVoucherStatus(n,d,_))}),e.k0s()}if(2&i){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Hn(i,a){1&i&&e.nrm(0,"mat-spinner",25),2&i&&e.Y8G("diameter",20)("color","primary")}function Kn(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",21)(1,"div",22),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.EFF(4),e.k0s(),e.j41(5,"div",23),e.DNE(6,Zn,1,2,"mat-slide-toggle",24)(7,Hn,1,2,"mat-spinner",25),e.k0s(),e.j41(8,"div",26)(9,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.openDialog(n,"edit"))}),e.nrm(10,"mat-icon",28),e.k0s(),e.j41(11,"button",27),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(4);return e.Njj(s.deleteVoucher(n))}),e.nrm(12,"mat-icon",28),e.k0s()()()}if(2&i){const t=a.$implicit,o=a.$index,n=e.XpG(4);e.R7$(2),e.SpI(" ",o+1," "),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.vxM(6,n.isLoading&&n.selectedSlide===o?-1:6),e.R7$(),e.vxM(7,n.isLoading&&n.selectedSlide===o?7:-1),e.R7$(3),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function es(i,a){1&i&&e.Z7z(0,Kn,13,6,"div",21,e.BUC().trackByFn,!0),2&i&&e.Dyx(a)}function ts(i,a){if(1&i&&(e.j41(0,"div",16)(1,"div",17),e.nrm(2,"div"),e.j41(3,"div",18),e.EFF(4," Nombre "),e.k0s(),e.j41(5,"div",19),e.EFF(6," Activo "),e.k0s(),e.j41(7,"div",20),e.EFF(8," Acciones "),e.k0s()(),e.DNE(9,es,2,0),e.nI1(10,"async"),e.k0s()),2&i){let t;const o=e.XpG(2);e.R7$(3),e.Y8G("mat-sort-header","name"),e.R7$(6),e.vxM(9,(t=e.bMT(10,2,o.vouchers$))?9:-1,t)}}function is(i,a){1&i&&(e.j41(0,"div",30),e.EFF(1," \xa1No hay tipos de comprobantes creados para la tienda! "),e.k0s())}function os(i,a){1&i&&e.DNE(0,ts,11,4,"div",16)(1,is,2,0),2&i&&e.vxM(0,a.length>0?0:1)}let ns=(()=>{class i{constructor(t,o,n,s,d,_){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._vouchersService=s,this._snackBar=d,this.store=_,this.vouchers$=(0,T.of)([]),this.voucher=new qn,this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new D.B}ngOnInit(){this.vouchers$=this.store.select(Un.gQ)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteVoucher(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de comprobante: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,c.Q)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._vouchersService.removeVoucher(t.id).pipe((0,c.Q)(this._unsubscribeAll)).subscribe(({data:s})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:s.removeVoucher.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateVoucherStatus(t,o,n){this.isLoading=!0,this.selectedSlide=n,this._vouchersService.updateVoucherStatus({id:o.id,active:t.checked}).subscribe(({data:s})=>{this._snackBar.openFromComponent(b.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateVoucherStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(Wn,{data:{voucher:t,dialogMode:o},panelClass:"ath-dialog-panel"})}static#e=this.\u0275fac=function(o){return new(o||i)(e.rXU(e.gRc),e.rXU(g.bZ),e.rXU(k.G),e.rXU(he.v),e.rXU(E.UG),e.rXU(N.il))};static#t=this.\u0275cmp=e.VBU({type:i,selectors:[["lists-vouchers"]],viewQuery:function(o,n){if(1&o&&(e.GBs(y.iy,5),e.GBs(f.B4,5)),2&o){let s;e.mGM(s=e.lsd())&&(n._paginator=s.first),e.mGM(s=e.lsd())&&(n._sort=s.first)}},standalone:!0,features:[e.aNF],decls:27,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","small-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","small-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ajustes"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Tipos de comprobantes"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Tipos de comprobantes "),e.k0s()()(),e.j41(18,"div",10)(19,"button",11),e.bIt("click",function(){return n.openDialog(n.voucher,"add")}),e.nrm(20,"mat-icon",12),e.j41(21,"span",13),e.EFF(22,"Agregar"),e.k0s()()()(),e.j41(23,"div",14)(24,"div",15),e.DNE(25,os,2,1),e.nI1(26,"async"),e.k0s()()()),2&o){let s;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(8),e.Y8G("svgIcon","mat_solid:add"),e.R7$(5),e.vxM(25,(s=e.bMT(26,4,n.vouchers$))?25:-1,s)}},dependencies:[R.Jj,p.Hl,p.$z,m.RG,u.m_,u.An,C.fS,y.Ou,G.D6,G.LG,x.mV,x.sG,f.NQ,f.B4,f.aE,r.X1],encapsulation:2,changeDetection:0})}return i})();var ss=l(47399),as=l(79451),rs=l(23301),ls=l(99433),cs=l(57981),ms=l(23285),ds=l(86779),ps=l(59013),us=l(90225),_s=l(63425),gs=l(7561);const hs=[{path:"",component:bt,children:[{path:"brands",component:Re,resolve:{brands:ss.l}},{path:"categories",component:vt,resolve:{categories:as.V7}},{path:"currencies",component:Nt,resolve:{currencies:rs.p}},{path:"fuels",component:ni,resolve:{fuels:ls.w}},{path:"multipliers",component:Fi,resolve:{multipliers:cs.d}},{path:"operations-types",component:Oi,resolve:{operationTypes:ms.h}},{path:"payment-gateways",component:To,resolve:{paymentGateways:ds.I}},{path:"payment-methods",component:Ho,resolve:{paymentMethods:ps.v}},{path:"service-types",component:vn,resolve:{serviceTypes:us.f}},{path:"uoms",component:Bn,resolve:{uoms:_s.n}},{path:"vouchers",component:ns,resolve:{vouchers:gs.Q}}]}]},63425:(Q,L,l)=>{l.d(L,{B:()=>m,n:()=>p});var e=l(54438),r=l(21326);const p=(u,C)=>(0,e.WQX)(r.N).getUoms(),m=(u,C)=>(0,e.WQX)(r.N).findActiveUoms()},17085:(Q,L,l)=>{l.d(L,{Ns:()=>m});var e=l(59640);const r=u=>u.uoms,m=((0,e.Mz)(r,u=>u.uom),(0,e.Mz)(r,u=>u.uoms))},21326:(Q,L,l)=>{l.d(L,{N:()=>B});var e=l(54438),r=l(73512),p=l(96697),m=l(25558),u=l(88141),C=l(59640),y=l(44e3),G=l(98216),x=l(17085);const f=r.J1`
    mutation CreateUom($createUomInput: CreateUomInput!) {
        createUom(createUomInput: $createUomInput) {

            ok
            message

            uom {
                id
                active
                name
                abbr
                type
            }

        }
    }
`,R=r.J1`
    mutation UpdateUom($updateUomInput: UpdateUomInput!) {
        updateUom(updateUomInput: $updateUomInput) {
            ok
            message

            uom {
                id
                active
                name
                abbr
                type
            }
        }
    }
`,I=r.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateUomStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }

    }
`,T=r.J1`
    mutation RemoveUom($removeUomId: String!) {
        removeUom(id: $removeUomId) {
            ok
            message
        }
    }
`,D=r.J1`
    query FindAllUoms($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllUoms(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            uoms {
                id
                active
                name
                abbr
                type
            }
        }
    }
`,X=r.J1`
    query FindActiveUoms {
        findActiveUoms {
            ok
            message

            uoms {
                id
                name
                abbr
            }
        }
    }
`,c=r.J1`
    query FindUomById($findUomByIdId: String!) {
        findUomById(id: $findUomByIdId) {
            ok
            message

            uom {
                id
                active
                name
                abbr
                type
            }
        }
    }
`;let B=(()=>{class w{constructor(){this.apolloProvider=(0,e.WQX)(r.Ic),this.store=(0,e.WQX)(C.il),this._apollo=this.apolloProvider.use("BALANC")}createUom(v){return this.store.select(x.Ns).pipe((0,p.s)(1),(0,m.n)(h=>this._apollo.mutate({mutation:f,variables:{createUomInput:v},errorPolicy:"all"}).pipe((0,u.M)(({data:$})=>{const j=structuredClone(h);j.push($.createUom.uom),this.store.dispatch((0,y.JR)({uoms:j}))}))))}getUoms(v=1,h=20,$="code",j="asc",k=""){return this._apollo.query({query:D,errorPolicy:"all",variables:{offset:h*(v-1),limit:h,sort:$,order:j,search:k}}).pipe((0,u.M)(({data:M})=>{this.store.dispatch((0,G.Bp)({pagination:M.findAllUoms.pagination})),this.store.dispatch((0,y.JR)({uoms:M.findAllUoms.uoms}))}))}findActiveUoms(v="",h=10){return this._apollo.query({query:X,variables:{search:v,size:h},errorPolicy:"all"}).pipe((0,u.M)(({data:$})=>{this.store.dispatch((0,y.JR)({uoms:$.findActiveUoms.uoms}))}))}getUomById(v){return this._apollo.query({query:c,variables:{findUomByIdId:v},errorPolicy:"all"}).pipe((0,u.M)(({data:h})=>{this.store.dispatch((0,y.qV)({uom:h.findUomById.uom}))}))}updateUom(v){return this.store.select(x.Ns).pipe((0,p.s)(1),(0,m.n)(h=>this._apollo.mutate({mutation:R,variables:{updateUomInput:v},errorPolicy:"all"}).pipe((0,u.M)(({data:$})=>{const j=structuredClone(h);j[h.findIndex(M=>M.id===v.id)]=$.updateUom.uom,this.store.dispatch((0,y.JR)({uoms:j}))}))))}updateUomStatus(v){return this.store.select(x.Ns).pipe((0,p.s)(1),(0,m.n)(h=>this._apollo.mutate({mutation:I,variables:{updateEntityStatusInput:v},errorPolicy:"all"}).pipe((0,u.M)(({})=>{const j=structuredClone(h);j[h.findIndex(M=>M.id===v.id)].active=v.active,this.store.dispatch((0,y.JR)({uoms:j}))}))))}removeUom(v){return this.store.select(x.Ns).pipe((0,p.s)(1),(0,m.n)(h=>this._apollo.mutate({mutation:T,variables:{removeUomId:v},errorPolicy:"all"}).pipe((0,u.M)(({errors:$})=>{if($)return;const j=structuredClone(h),k=h.findIndex(M=>M.id===v);j.splice(k,1),this.store.dispatch((0,y.JR)({uoms:j}))}))))}static#e=this.\u0275fac=function(h){return new(h||w)};static#t=this.\u0275prov=e.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})()}}]);