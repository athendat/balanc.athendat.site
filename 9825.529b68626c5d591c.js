"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9825],{19825:(L,b,a)=>{a.r(b),a.d(b,{default:()=>Nt});var h=a(99213),p=a(51188),x=a(31849),f=a(21413),l=a(56977),e=a(54438);let P=(()=>{class o{constructor(t,i,r){this._activatedRoute=t,this._changeDetectorRef=i,this._router=r,this.merchantId="",this._unsubscribeAll=new f.B}ngOnInit(){this._activatedRoute.params.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(({merchantId:t})=>{void 0!==t&&(this.merchantId=t,this._changeDetectorRef.markForCheck())})}static#e=this.\u0275fac=function(i){return new(i||o)(e.rXU(p.nX),e.rXU(e.gRc),e.rXU(p.Ix))};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["ath-crm"]],standalone:!0,features:[e.aNF],decls:38,vars:2,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],["routerLink","/dashboard",1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-2","lg:grid-cols-4","gap-y-12","sm:gap-x-4"],["routerLink","/modules/crm/customers",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"],[1,"flex","flex-col"],[1,"text-2xl","font-semibold","leading-tight"],[1,"text-md","text-secondary"],["routerLink","/modules/crm/contacts",1,"flex","items-center","justify-between","w-full","p-6","cursor-pointer","max-w-80","filter-info","hover:shadow-md"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",4),e.nrm(9,"mat-icon",6),e.j41(10,"a",7),e.EFF(11,"Gesti\xf3n de clientes"),e.k0s()()(),e.j41(12,"div",8)(13,"a",9),e.nrm(14,"mat-icon",6),e.j41(15,"span",10),e.EFF(16,"Regresar"),e.k0s()()()(),e.j41(17,"div",11)(18,"div",12),e.EFF(19," Gesti\xf3n de clientes "),e.k0s()()()(),e.j41(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",12),e.EFF(24," M\xf3dulos "),e.k0s(),e.j41(25,"div",16)(26,"fuse-card",17)(27,"div",18)(28,"div",19),e.EFF(29,"Clientes"),e.k0s(),e.j41(30,"div",20),e.EFF(31,"listado de Clientes(Negocios)"),e.k0s()()(),e.j41(32,"fuse-card",21)(33,"div",18)(34,"div",19),e.EFF(35,"Contactos"),e.k0s(),e.j41(36,"div",20),e.EFF(37,"listado de contactos"),e.k0s()()()()()()()()),2&i&&(e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(5),e.Y8G("svgIcon","mat_solid:chevron_left"))},dependencies:[p.Wk,h.m_,h.An,x.$],encapsulation:2,changeDetection:0})}return o})();var n=a(89417),E=a(95416),N=a(60177),R=a(88834),v=a(32102),G=a(59042),$=a(9454),w=a(82798),j=a(67376),A=a(59640),k=a(56808),W=a(29217),d=a(46601),u=a(94794),_=a(72797),g=a(90118),C=a(55364),F=a(5946),M=a(30450),O=a(89654),H=a(91401),S=a(82341),X=a(55542),Z=a(86600);const T=()=>["Ejecutivo"],Y=o=>({"cursor-not-allowed":o}),K=o=>({"mt:0 sm:mt-6":o}),q=o=>({"sm:0 sm:mt-6":o});function ee(o,s){1&o&&(e.j41(0,"a",11),e.EFF(1,"Nuevo"),e.k0s())}function te(o,s){if(1&o&&(e.j41(0,"a",11),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.JRh(t.selectedCustomer.name)}}function oe(o,s){1&o&&(e.j41(0,"div",16),e.EFF(1," Nuevo Cliente "),e.k0s())}function re(o,s){if(1&o&&(e.j41(0,"div",16),e.EFF(1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.SpI(" Informaci\xf3n de ",t.selectedCustomer.name," ")}}function ne(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.createCustomer())}),e.nrm(1,"mat-icon",80),e.j41(2,"span",81),e.EFF(3,"Guardar"),e.k0s()()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",t.customerForm.invalid)("ngClass",e.eq3(3,Y,t.customerForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:save")}}function ie(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.updateCustomer())}),e.nrm(1,"mat-icon",80),e.j41(2,"span",81),e.EFF(3,"Actualizar"),e.k0s()()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",t.customerForm.invalid)("ngClass",e.eq3(3,Y,t.customerForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:refresh")}}function se(o,s){if(1&o&&(e.j41(0,"div",77),e.DNE(1,ne,4,5,"button",78)(2,ie,4,5,"button",78),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(1,"edit"!==t.windowsMode?1:-1),e.R7$(),e.vxM(2,"edit"===t.windowsMode?2:-1)}}function ae(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del negocio es obligatorio. "),e.k0s())}function me(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El nombre del negocio debe contener entre 3 y 255 caracteres. "),e.k0s())}function le(o,s){if(1&o&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}function ce(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe escoger un sector. "),e.k0s())}function ue(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe escoger una personalidad. "),e.k0s())}function de(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de identificaci\xf3n tributaria debe poseer 11 d\xedgitos. "),e.k0s())}function pe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de identificaci\xf3n tributaria debe poseer solo n\xfameros. "),e.k0s())}function he(o,s){if(1&o&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.fullname," ")}}function fe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El valor del cr\xe9dito debe ser un n\xfamero positivo "),e.k0s())}function ge(o,s){if(1&o){const t=e.RV6();e.j41(0,"bank-account",82),e.bIt("remove",function(r){e.eBV(t);const m=e.XpG();return e.Njj(m.removeBankAccount(r))}),e.k0s()}if(2&o){const t=s.$implicit,i=s.$index,r=s.$index,m=s.$count,c=e.XpG();e.Y8G("bankAccountForm",t)("first",0===r)("last",r===m-1)("index",i)("currencies",c.currencies)}}function Ce(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar el pa\xeds. "),e.k0s())}function ve(o,s){if(1&o&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function _e(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar una provincia. "),e.k0s())}function Fe(o,s){if(1&o&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&o){const t=s.$implicit;e.Y8G("value",t.city),e.R7$(),e.SpI(" ",t.city," ")}}function xe(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Debe seleccionar un municipio. "),e.k0s())}function be(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El c\xf3digo postal no presenta un formato v\xe1lido. "),e.k0s())}function ke(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La direcci\xf3n es obligatoria. "),e.k0s())}function ye(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La direcci\xf3n debe contener entre 3 y 255 caracteres. "),e.k0s())}function Ee(o,s){1&o&&(e.j41(0,"mat-label"),e.EFF(1,"Tel\xe9fonos"),e.k0s())}function Re(o,s){if(1&o&&(e.j41(0,"mat-option",31)(1,"span",24),e.nrm(2,"span",87),e.j41(3,"span",88),e.EFF(4),e.k0s(),e.j41(5,"span",89),e.EFF(6),e.k0s()()()),2&o){const t=s.$implicit;e.Y8G("value",t.code),e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.code)}}function $e(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono debe contener entre 7 d\xedgitos. "),e.k0s())}function je(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono debe poseer solo n\xfameros. "),e.k0s())}function Ie(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El c\xf3digo de tel\xe9fono es obligatorio. "),e.k0s())}function Ne(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El n\xfamero de tel\xe9fono es obligatorio. "),e.k0s())}function Ge(o,s){1&o&&(e.j41(0,"mat-label"),e.EFF(1,"Etiqueta"),e.k0s())}function Te(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.k0s())}function De(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",61)(1,"mat-form-field",83),e.DNE(2,Ee,2,0,"mat-label"),e.nrm(3,"input",84),e.j41(4,"mat-select",85)(5,"mat-select-trigger")(6,"span",24)(7,"span",86),e.EFF(8),e.k0s()()(),e.j41(9,"mat-option",31)(10,"span",24),e.nrm(11,"span",87),e.j41(12,"span",88),e.EFF(13),e.nI1(14,"titlecase"),e.k0s(),e.j41(15,"span",89),e.EFF(16),e.k0s()()(),e.Z7z(17,Re,7,3,"mat-option",31,e.BUC().trackByFn,!0),e.k0s(),e.DNE(19,$e,2,0,"mat-error")(20,je,2,0,"mat-error")(21,Ie,2,0,"mat-error")(22,Ne,2,0,"mat-error"),e.k0s(),e.j41(23,"mat-form-field",90),e.DNE(24,Ge,2,0,"mat-label"),e.nrm(25,"mat-icon",44)(26,"input",91),e.DNE(27,Te,2,0,"mat-error"),e.k0s(),e.qex(28),e.j41(29,"div",92)(30,"button",93),e.bIt("click",function(){const r=e.eBV(t).$index,m=e.XpG();return e.Njj(m.removePhoneNumberField(r))}),e.nrm(31,"mat-icon",51),e.k0s()(),e.bVm(),e.k0s()}if(2&o){const t=s.$implicit,i=s.$index,r=s.$index,m=e.XpG();e.R7$(2),e.vxM(2,0===r?2:-1),e.R7$(),e.Y8G("type","tel")("formControl",t.get("phoneNumber"))("placeholder","Tel\xe9fono")("minlength",7)("maxlength",7),e.R7$(),e.Y8G("formControl",t.get("stateCode")),e.R7$(4),e.JRh(m.customerForm.get("phoneNumbers").value[i].stateCode),e.R7$(),e.Y8G("value","+535"),e.R7$(4),e.JRh(e.bMT(14,24,"celular")),e.R7$(3),e.JRh("+535"),e.R7$(),e.Dyx(m.statesCodes),e.R7$(2),e.vxM(19,t.get("phoneNumber").hasError("minlength")||t.get("phoneNumber").hasError("maxlength")?19:-1),e.R7$(),e.vxM(20,t.get("phoneNumber").hasError("pattern")?20:-1),e.R7$(),e.vxM(21,t.get("stateCode").hasError("required")?21:-1),e.R7$(),e.vxM(22,t.get("phoneNumber").hasError("required")?22:-1),e.R7$(2),e.vxM(24,0===r?24:-1),e.R7$(),e.Y8G("svgIcon","heroicons_solid:tag"),e.R7$(),e.Y8G("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.R7$(),e.vxM(27,t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")?27:-1),e.R7$(2),e.Y8G("ngClass",e.eq3(26,K,0===r)),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function we(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",94),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.addPhoneNumberField())}),e.nrm(1,"mat-icon",51),e.j41(2,"span",52),e.EFF(3,"Agregar tel\xe9fono"),e.k0s()()}2&o&&(e.R7$(),e.Y8G("svgIcon","mat_solid:add_circle"))}function Ae(o,s){1&o&&(e.j41(0,"mat-label"),e.EFF(1,"Correos Electr\xf3nicos"),e.k0s())}function Me(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El correo electr\xf3nicos no posee un formato v\xe1lido. "),e.k0s())}function Se(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El correo electr\xf3nicos es obligatorio. "),e.k0s())}function Ye(o,s){1&o&&(e.j41(0,"mat-label"),e.EFF(1,"Etiqueta"),e.k0s())}function Be(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," La etiqueta debe contener entre 3 y 255 caracteres. "),e.k0s())}function Le(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",63)(1,"mat-form-field",83),e.DNE(2,Ae,2,0,"mat-label"),e.nrm(3,"mat-icon",44)(4,"input",95),e.DNE(5,Me,2,0,"mat-error")(6,Se,2,0,"mat-error"),e.k0s(),e.j41(7,"mat-form-field",90),e.DNE(8,Ye,2,0,"mat-label"),e.nrm(9,"mat-icon",44)(10,"input",91),e.DNE(11,Be,2,0,"mat-error"),e.k0s(),e.qex(12),e.j41(13,"div",92)(14,"button",96),e.bIt("click",function(){const r=e.eBV(t).$index,m=e.XpG();return e.Njj(m.removeEmailField(r))}),e.nrm(15,"mat-icon",51),e.k0s()(),e.bVm(),e.k0s()}if(2&o){const t=s.$implicit,i=s.$index;e.R7$(2),e.vxM(2,0===i?2:-1),e.R7$(),e.Y8G("svgIcon","mat_solid:alternate_email"),e.R7$(),e.Y8G("formControl",t.get("email"))("spellcheck",!1),e.R7$(),e.vxM(5,t.get("email").hasError("email")?5:-1),e.R7$(),e.vxM(6,t.get("email").hasError("required")?6:-1),e.R7$(2),e.vxM(8,0===i?8:-1),e.R7$(),e.Y8G("svgIcon","heroicons_solid:tag"),e.R7$(),e.Y8G("formControl",t.get("label"))("placeholder","Etiqueta")("minLength",3)("maxLength",255),e.R7$(),e.vxM(11,t.get("label").hasError("maxlength")||t.get("label").hasError("minlength")?11:-1),e.R7$(2),e.Y8G("ngClass",e.eq3(15,q,0===i)),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function Pe(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",94),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.addEmailField())}),e.nrm(1,"mat-icon",51),e.j41(2,"span",52),e.EFF(3,"Agregar correo electr\xf3nico"),e.k0s()()}2&o&&(e.R7$(),e.Y8G("svgIcon","mat_solid:add_circle"))}function ze(o,s){1&o&&(e.j41(0,"mat-error"),e.EFF(1," El sitio web no presenta un formato v\xe1lido. "),e.k0s())}function Xe(o,s){if(1&o&&e.nrm(0,"img",68),2&o){const t=e.XpG();e.Y8G("src",t.customerForm.get("logoUrl").value,e.B4B)}}function Ue(o,s){1&o&&(e.j41(0,"div",97),e.EFF(1,"Logo"),e.k0s())}function Ve(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"input",99,0),e.bIt("change",function(r){e.eBV(t);const m=e.sdS(2),c=e.XpG(2);return e.Njj(c.selectImage(r,m.files,"logoUrl"))}),e.k0s(),e.j41(3,"label",100),e.nrm(4,"mat-icon",80),e.k0s()()}2&o&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function Qe(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"button",101),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.removeImage("logoUrl"))}),e.nrm(2,"mat-icon",80),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function Je(o,s){if(1&o&&(e.j41(0,"div",98),e.DNE(1,Ve,5,3,"div")(2,Qe,3,1,"div"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(1,t.customerForm.get("logoUrl").value?-1:1),e.R7$(),e.vxM(2,t.customerForm.get("logoUrl").value?2:-1)}}function We(o,s){if(1&o&&e.nrm(0,"img",74),2&o){const t=e.XpG();e.Y8G("src",t.customerForm.get("coverUrl").value,e.B4B)}}function Oe(o,s){1&o&&(e.j41(0,"div",97),e.EFF(1,"Cover"),e.k0s())}function He(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"input",102,1),e.bIt("change",function(r){e.eBV(t);const m=e.sdS(2),c=e.XpG(2);return e.Njj(c.selectImage(r,m.files,"coverUrl"))}),e.k0s(),e.j41(3,"label",103),e.nrm(4,"mat-icon",80),e.k0s()()}2&o&&(e.R7$(),e.Y8G("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.R7$(3),e.Y8G("svgIcon","mat_solid:photo_camera"))}function Ze(o,s){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"button",101),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.removeImage("coverUrl"))}),e.nrm(2,"mat-icon",80),e.k0s()()}2&o&&(e.R7$(2),e.Y8G("svgIcon","mat_solid:delete"))}function Ke(o,s){if(1&o&&(e.j41(0,"div",98),e.DNE(1,He,5,3,"div")(2,Ze,3,1,"div"),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(1,t.customerForm.get("coverUrl").value?-1:1),e.R7$(),e.vxM(2,t.customerForm.get("coverUrl").value?2:-1)}}function qe(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.createCustomer())}),e.nrm(1,"mat-icon",105),e.j41(2,"span",81),e.EFF(3,"Guardar"),e.k0s()()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",t.customerForm.invalid)("ngClass",e.eq3(3,Y,t.customerForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:save")}}function et(o,s){if(1&o){const t=e.RV6();e.j41(0,"button",79),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.updateCustomer())}),e.nrm(1,"mat-icon",105),e.j41(2,"span",81),e.EFF(3,"Actualizar"),e.k0s()()}if(2&o){const t=e.XpG(2);e.Y8G("disabled",t.customerForm.invalid)("ngClass",e.eq3(3,Y,t.customerForm.invalid)),e.R7$(),e.Y8G("svgIcon","mat_solid:refresh")}}function tt(o,s){if(1&o&&(e.j41(0,"div",104),e.DNE(1,qe,4,5,"button",78)(2,et,4,5,"button",78),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(1,"edit"!==t.windowsMode?1:-1),e.R7$(),e.vxM(2,"edit"===t.windowsMode?2:-1)}}let ot=(()=>{class o{constructor(){this.customerId=e.hFB.required(),this.selectedCustomer=null,this.domains=[],this.stateCode="",this.domainCode="",this.states=[],this.statesCodes=[],this.stateSelected="",this.cities=[],this.commercials=[],this.currencies=[],this._changeDetectorRef=(0,e.WQX)(e.gRc),this._customersService=(0,e.WQX)(_.h),this._formBuilder=(0,e.WQX)(n.ok),this._fuseConfirmationService=(0,e.WQX)(d.G),this._locationService=(0,e.WQX)(g.N),this._router=(0,e.WQX)(p.Ix),this._snackBar=(0,e.WQX)(E.UG),this._unsubscribeAll=new f.B,this._imagesService=(0,e.WQX)(F.M),this.store=(0,e.WQX)(A.il)}ngOnInit(){this.store.select(W.OB).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.commercials=r,this._changeDetectorRef.markForCheck()}),this.store.select(H.y$).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.currencies=r}),this.store.select(k.hQ).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.selectedCustomer=r}),this._customersService.domains$.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.domains=r,this._changeDetectorRef.markForCheck()}),this._locationService.states$.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.states=r,this._changeDetectorRef.markForCheck()}),this._locationService.statesCodes$.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.statesCodes=r,this._changeDetectorRef.markForCheck()}),this.customerForm=this._formBuilder.group({id:new n.MJ(this.customerId),active:[!0],name:new n.MJ(null,[n.k0.required,n.k0.minLength(2),n.k0.maxLength(255)]),domain:new n.MJ(null,[n.k0.minLength(3),n.k0.maxLength(255)]),nit:new n.MJ(null,[n.k0.maxLength(11),n.k0.minLength(11)]),type:new n.MJ(null,[n.k0.required]),commercialId:new n.MJ(null),description:["",[n.k0.maxLength(1e3)]],phoneNumbers:this._formBuilder.array([]),website:["",[n.k0.maxLength(255),n.k0.pattern("^(http://www.|https://www.|http://|https://)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}")]],emails:this._formBuilder.array([]),credit:new n.MJ(0,[n.k0.required,n.k0.min(0)]),bankAccounts:this._formBuilder.array([]),address:new n.MJ(null,[n.k0.minLength(3),n.k0.maxLength(255)]),country:new n.MJ({value:"Cuba",disabled:!0},[n.k0.required]),state:new n.MJ(null),city:new n.MJ({disabled:!1,value:null}),zip:new n.MJ(null,[n.k0.minLength(4),n.k0.maxLength(5),n.k0.pattern("^[0-9]{5}(?:-[0-9]{4})?$")]),logoUrl:[null],coverUrl:[null]}),this.customerForm.get("state").valueChanges.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this._getCitiesByState(r),this._changeDetectorRef.markForCheck()}),"new"!==this.customerId()&&(this.windowsMode="edit",this._fillCustomerData())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addBankAccount(){const t=this._formBuilder.group({bank:[null,[n.k0.maxLength(255)]],beneficiary:[null,[n.k0.maxLength(255),C.t.onlyAlphabetsWithAccentPattern()]],no:[null,[n.k0.required,n.k0.minLength(16),n.k0.maxLength(24)]],currency:[null],cardType:[""]});this.customerForm.get("bankAccounts").push(t),this._changeDetectorRef.markForCheck()}removeBankAccount(t){this.customerForm.get("bankAccounts").removeAt(t),this._changeDetectorRef.markForCheck()}addEmailField(){const t=this._formBuilder.group({email:["",[n.k0.email,n.k0.maxLength(255)]],label:["",[n.k0.minLength(3),n.k0.maxLength(255)]]});this.customerForm.get("emails").push(t),this._changeDetectorRef.markForCheck()}removeEmailField(t){this.customerForm.get("emails").removeAt(t),this._changeDetectorRef.markForCheck()}addPhoneNumberField(){const t=this._formBuilder.group({stateCode:["+535",[n.k0.required]],phoneNumber:["",[n.k0.minLength(7),n.k0.maxLength(7),C.t.onlyNumbersPattern()]],label:["",[n.k0.minLength(3),n.k0.maxLength(255)]]});this.customerForm.get("phoneNumbers").push(t),this._changeDetectorRef.markForCheck()}removePhoneNumberField(t){this.customerForm.get("phoneNumbers").removeAt(t),this._changeDetectorRef.markForCheck()}createCustomer(){let t=this.customerForm.getRawValue();t.phoneNumber=null,t.phoneNumbers.length>0&&(t.phoneNumber=t.phoneNumbers[0]),delete t.phoneNumbers,t.email=null,t.emails.length>0&&(t.email=t.emails[0]),delete t.emails,delete t.id,t=j(t).omitBy(j.isNull).omitBy(j.isEmpty).value(),this._fuseConfirmationService.open({title:"Crear cliente",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._customersService.createCustomer(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&(this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/modules/crm/customers"))})})}updateCustomer(){let t=this.customerForm.getRawValue();delete t.logoUrl,delete t.coverUrl,t=j(t).omitBy(j.isNull).value(),t.phoneNumber=null,t.phoneNumbers.length>0&&(t.phoneNumber=t.phoneNumbers[0]),delete t.phoneNumbers,t.email=null,t.emails.length>0&&(t.email=t.emails[0]),delete t.emails,this._fuseConfirmationService.open({title:"Actualizar cliente",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{"confirmed"===r&&this._customersService.updateCustomer(t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&(this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("/modules/crm/customers"))})})}selectImage(t,i,r){if(!i.length)return;const m=i[0];this._imagesService.validMaxMBSize(m,2)&&this._imagesService.validImageType(m)&&("logoUrl"===r&&this._imagesService.openCropperDialog(t,!1).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(c=>{c&&this.uploadImage(c,r)}),"coverUrl"===r&&this.uploadImage(m,r))}uploadImage(t,i){this._imagesService.uploadImage("CRM",t).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(r=>{this.customerForm.get(i).setValue(r.imageUrl),this._changeDetectorRef.markForCheck(),"edit"===this.windowsMode&&this._customersService.updateCustomerImage(i,{id:this.selectedCustomer.id,imageUrl:r.imageUrl}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{m&&this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()},r=>{console.warn(r)})}removeImage(t){const i=this.customerForm.get(t).value;this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la imagen del  ${"logoUrl"===t?" logo":" cover"}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.Q)(this._unsubscribeAll)).subscribe(m=>{"confirmed"===m&&(this._changeDetectorRef.markForCheck(),this._imagesService.removeImage(i).subscribe(c=>{this.customerForm.get(t).setValue(null),this._customersService.updateCustomerImage(t,{id:this.selectedCustomer.id,imageUrl:null}).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(y=>{y&&this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:y.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()},y=>{console.log(y)})}))})}trackByFn(t,i){return i.id||t}_fillCustomerData(){"new"!==this.windowsMode&&(this.customerForm.get("emails").clear(),this.customerForm.get("phoneNumbers").clear(),this.customerForm.get("bankAccounts").clear(),this._setCustomerDataOnForm(this.selectedCustomer),this._changeDetectorRef.markForCheck())}_setCustomerDataOnForm(t){this.customerForm.patchValue(t),this._getCitiesByState(t.state);const i=[];t.email&&t.email.email&&i.push(this._formBuilder.group({email:[t.email.email,[n.k0.email,n.k0.maxLength(255)]],label:[t.email.label,[n.k0.minLength(3),n.k0.maxLength(255)]]})),i.forEach(c=>{this.customerForm.get("emails").push(c)});const r=[];t.phoneNumber&&t.phoneNumber.phoneNumber&&r.push(this._formBuilder.group({stateCode:[t.phoneNumber.stateCode,[n.k0.required]],phoneNumber:[t.phoneNumber.phoneNumber,[n.k0.minLength(7),n.k0.maxLength(7),C.t.onlyNumbersPattern()]],label:[t.phoneNumber.label,[n.k0.minLength(3),n.k0.maxLength(255)]]})),r.forEach(c=>{this.customerForm.get("phoneNumbers").push(c)});const m=[];t.bankAccounts.length>0&&(t.bankAccounts.forEach(c=>{m.push(this._formBuilder.group({bank:[c.bank,[n.k0.maxLength(255)]],beneficiary:[c.beneficiary,[C.t.onlyAlphabetsWithAccentPattern()]],no:[c.no,[n.k0.required,n.k0.minLength(16),n.k0.maxLength(24)]],currency:[c.currency],cardType:[c.cardType]}))}),m.forEach(c=>{this.customerForm.get("bankAccounts").push(c)}))}_getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).subscribe(i=>{this.cities=i,this._changeDetectorRef.markForCheck()})}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["customer-form"]],inputs:{customerId:[e.Mj6.SignalBased,"customerId"]},standalone:!0,features:[e.aNF],decls:205,vars:84,consts:[["logoFileInput",""],["coverFileInput",""],["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/dashboard",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500","hover:underline"],["routerLink","/modules/crm/customers",1,"ml-1","text-primary-500","hover:underline"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],["class","flex items-center flex-shrink-0 mt-6 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],["autocomplete","off",3,"formGroup"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","gap-y-3","gap-x-6","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"sm:col-span-2","lg:col-span-1"],["value","natural"],["value","juridica"],["matInput","",3,"type","formControlName","maxlength","minlength"],[1,""],[3,"formControlName"],["type","number","matInput","",3,"formControlName","min"],[1,"flex","flex-col","sm:col-span-2","lg:col-span-1"],[1,"items-start","font-medium"],[1,"mt-1","sm:mt-3",3,"color","formControlName"],[1,"sm:col-span-4","mt-4"],[1,"w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","maxlength","spellcheck"],[1,"text-right"],[1,"pt-8","pb-8","pl-4","pr-4","border-t-2"],[1,"flex","flex-col","space-y-6"],[3,"bankAccountForm","first","last","index","currencies"],[1,"inline-flex","items-center","px-4","py-2","mt-4","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["value","Cuba"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"w-full","fuse-mat-emphasized-affix"],["type","text","matInput","",1,"mat-fuse-dense",3,"formControlName","max"],[1,"sm:col-span-4"],["matInput","","required","",3,"formControlName","minLength","maxlength"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","gap-y-6","gap-x-6","sm:grid-cols-2","md:grid-cols-4"],[1,"space-y-4"],[1,"relative","flex","flex-col","sm:flex-row"],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group"],[1,"flex","flex-col","sm:flex-row"],["matInput","",1,"mat-fuse-dense",3,"formControlName"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","overflow-x-auto","border-t-2","gap-y-3","gap-x-6","sm:grid-cols-4"],[1,"flex","items-end","flex-auto"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-xl","ring-4","ring-bg-card"],["alt","IMAGEN",1,"object-cover","rounded","bg-hover",3,"src"],[1,"absolute","inset-0","z-10","flex","items-center","justify-center","text-white","bg-black","bg-opacity-50"],["class","text-xl mt-15",4,"ngxPermissionsExcept"],["class","absolute inset-0 z-20 flex items-center justify-center",4,"ngxPermissionsExcept"],[1,"sm:col-span-3"],[1,"relative","flex","items-center","justify-center","h-64","overflow-hidden","w-256","rounded-xl","ring-4","ring-bg-card"],["alt","IMAGEN",1,"object-fill","h-full","rounded","w-256","bg-hover",3,"src"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],["class","flex items-center flex-shrink-0 mt-6 text-right sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","hover:bg-gradient-to-l","from-primary-500","to-primary-900","hover:shadow-lg",3,"disabled","ngClass"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","hover:bg-gradient-to-l","from-primary-500","to-primary-900","hover:shadow-lg",3,"click","disabled","ngClass"],[1,"text-white",3,"svgIcon"],[1,"ml-2","mr-1","text-white"],[3,"remove","bankAccountForm","first","last","index","currencies"],[1,"flex-auto"],["matInput","","required","",3,"type","formControl","placeholder","minlength","maxlength"],["matPrefix","",1,"mr-1.5",3,"formControl"],[1,"sm:mx-0.5","font-medium","text-default"],[1,"w-6","h-4","overflow-hidden"],[1,"ml-2"],[1,"ml-2","font-medium"],[1,"flex-auto","w-full","mt-1","sm:mt-0","sm:max-w-50","sm:ml-4"],["matInput","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar tel\xe9fono",1,"w-8","h-8","min-h-8",3,"click"],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],["matInput","","required","",3,"formControl","spellcheck"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"text-xl","mt-15"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["id","logo-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","logo-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],["mat-icon-button","",3,"click"],["id","cover-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"change","multiple","accept"],["for","cover-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","rounded-xl","hover:bg-hover"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[3,"svgIcon"]],template:function(i,r){if(1&i&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"div",5)(5,"div",6)(6,"a",7),e.EFF(7,"Inicio"),e.k0s()(),e.j41(8,"div",6),e.nrm(9,"mat-icon",8),e.j41(10,"a",9),e.EFF(11,"Ventas"),e.k0s()(),e.j41(12,"div",6),e.nrm(13,"mat-icon",8),e.j41(14,"a",10),e.EFF(15,"Clientes"),e.k0s()(),e.j41(16,"div",6),e.nrm(17,"mat-icon",8),e.DNE(18,ee,2,0,"a",11)(19,te,2,1,"a",11),e.k0s()(),e.j41(20,"div",12)(21,"a",13),e.nrm(22,"mat-icon",8),e.j41(23,"span",14),e.EFF(24,"Regresar"),e.k0s()()()(),e.j41(25,"div",15),e.DNE(26,oe,2,0,"div",16)(27,re,2,1,"div",16),e.k0s()(),e.DNE(28,se,3,2,"div",17),e.k0s(),e.j41(29,"div",18)(30,"div",19)(31,"form",20)(32,"mat-accordion",21)(33,"mat-expansion-panel",22)(34,"mat-expansion-panel-header",23)(35,"mat-panel-title",24)(36,"div",25),e.EFF(37," Informaci\xf3n General "),e.k0s()()(),e.j41(38,"div",26)(39,"div",27)(40,"mat-form-field",28)(41,"mat-label"),e.EFF(42,"Nombre"),e.k0s(),e.nrm(43,"input",29),e.DNE(44,ae,2,0,"mat-error")(45,me,2,0,"mat-error"),e.k0s()(),e.j41(46,"div",27)(47,"mat-form-field",28)(48,"mat-label"),e.EFF(49,"Giro del cliente"),e.k0s(),e.j41(50,"mat-select",30),e.Z7z(51,le,2,2,"mat-option",31,e.fX1),e.k0s(),e.j41(53,"mat-hint"),e.EFF(54,"Nomenclador de la Organizaci\xf3n Internacional del Trabajo OIT"),e.k0s(),e.DNE(55,ce,2,0,"mat-error"),e.k0s()(),e.j41(56,"div",32)(57,"mat-form-field",28)(58,"mat-label"),e.EFF(59,"Personalidad"),e.k0s(),e.j41(60,"mat-select",30)(61,"mat-option",33),e.EFF(62,"Natural"),e.k0s(),e.j41(63,"mat-option",34),e.EFF(64,"Jur\xeddica"),e.k0s()(),e.DNE(65,ue,2,0,"mat-error"),e.k0s()(),e.j41(66,"div",32)(67,"mat-form-field",28)(68,"mat-label"),e.EFF(69,"NIT"),e.k0s(),e.nrm(70,"input",35),e.DNE(71,de,2,0,"mat-error")(72,pe,2,0,"mat-error"),e.j41(73,"mat-hint")(74,"mat-label"),e.EFF(75,"N\xfamero de Identificaci\xf3n Tributaria"),e.k0s()()()(),e.j41(76,"div",36)(77,"mat-form-field",28)(78,"mat-label"),e.EFF(79,"Comercial"),e.k0s(),e.j41(80,"mat-select",37),e.Z7z(81,he,2,2,"mat-option",31,e.fX1),e.k0s()()(),e.j41(83,"div",36)(84,"mat-form-field",28)(85,"mat-label"),e.EFF(86,"Cr\xe9dito"),e.k0s(),e.nrm(87,"input",38),e.DNE(88,fe,2,0,"mat-error"),e.k0s()(),e.j41(89,"div",39)(90,"span",40),e.EFF(91,"Estado"),e.k0s(),e.j41(92,"mat-slide-toggle",41),e.EFF(93," Activo "),e.k0s()(),e.j41(94,"div",42)(95,"mat-form-field",43)(96,"mat-label"),e.EFF(97,"Descripci\xf3n del Cliente"),e.k0s(),e.nrm(98,"mat-icon",44)(99,"textarea",45),e.j41(100,"mat-hint",46),e.EFF(101),e.k0s()()()()(),e.j41(102,"mat-expansion-panel")(103,"mat-expansion-panel-header",23)(104,"mat-panel-title",24)(105,"div",25),e.EFF(106," Cuentas de banco "),e.k0s()()(),e.j41(107,"div",47)(108,"div",48),e.Z7z(109,ge,1,5,"bank-account",49,r.trackByFn,!0),e.k0s(),e.j41(111,"div",50),e.bIt("click",function(){return r.addBankAccount()}),e.nrm(112,"mat-icon",51),e.j41(113,"span",52),e.EFF(114," Agregar Cuenta "),e.k0s()()()(),e.j41(115,"mat-expansion-panel",22)(116,"mat-expansion-panel-header",23)(117,"mat-panel-title",24)(118,"div",25),e.EFF(119," Domicilio "),e.k0s()()(),e.j41(120,"div",26)(121,"div",27)(122,"mat-form-field",28)(123,"mat-label"),e.EFF(124,"Pa\xeds"),e.k0s(),e.j41(125,"mat-select",30)(126,"mat-option",53),e.EFF(127,"Cuba"),e.k0s()(),e.nrm(128,"mat-icon",54),e.DNE(129,Ce,2,0,"mat-error"),e.k0s()(),e.j41(130,"div",27)(131,"mat-form-field",28)(132,"mat-label"),e.EFF(133,"Provincia"),e.k0s(),e.nrm(134,"mat-icon",54),e.j41(135,"mat-select",30),e.Z7z(136,ve,2,2,"mat-option",31,r.trackByFn,!0),e.k0s(),e.DNE(138,_e,2,0,"mat-error"),e.k0s()(),e.j41(139,"div",27)(140,"mat-form-field",28)(141,"mat-label"),e.EFF(142,"Municipio"),e.k0s(),e.nrm(143,"mat-icon",54),e.j41(144,"mat-select",30),e.Z7z(145,Fe,2,2,"mat-option",31,e.fX1),e.k0s(),e.DNE(147,xe,2,0,"mat-error"),e.k0s()(),e.j41(148,"mat-form-field",55)(149,"mat-label"),e.EFF(150,"C\xf3digo Postal"),e.k0s(),e.nrm(151,"input",56),e.DNE(152,be,2,0,"mat-error"),e.k0s(),e.j41(153,"div",57)(154,"mat-form-field",43)(155,"mat-label"),e.EFF(156,"Direcci\xf3n"),e.k0s(),e.nrm(157,"mat-icon",44)(158,"textarea",58),e.DNE(159,ke,2,0,"mat-error")(160,ye,2,0,"mat-error"),e.k0s()()()(),e.j41(161,"mat-expansion-panel")(162,"mat-expansion-panel-header",23)(163,"mat-panel-title",24)(164,"div",25),e.EFF(165," Informaci\xf3n de contacto "),e.k0s()()(),e.j41(166,"div",59)(167,"div",27)(168,"div",60),e.Z7z(169,De,32,28,"div",61,r.trackByFn,!0),e.k0s(),e.DNE(171,we,4,1,"div",62),e.k0s(),e.j41(172,"div",27)(173,"div",60),e.Z7z(174,Le,16,17,"div",63,r.trackByFn,!0),e.k0s(),e.DNE(176,Pe,4,1,"div",62),e.k0s(),e.j41(177,"mat-form-field",28),e.nrm(178,"input",64),e.j41(179,"mat-label"),e.EFF(180,"Sitio Web"),e.k0s(),e.nrm(181,"mat-icon",54),e.DNE(182,ze,2,0,"mat-error"),e.k0s()()(),e.j41(183,"mat-expansion-panel")(184,"mat-expansion-panel-header",23)(185,"mat-panel-title",24)(186,"div",25),e.EFF(187," Im\xe1genes "),e.k0s()()(),e.j41(188,"div",65)(189,"div",36)(190,"div",66)(191,"div",67),e.DNE(192,Xe,1,1,"img",68),e.j41(193,"div",69),e.DNE(194,Ue,2,0,"div",70),e.k0s(),e.DNE(195,Je,3,2,"div",71),e.k0s()()(),e.j41(196,"div",72)(197,"div",66)(198,"div",73),e.DNE(199,We,1,1,"img",74),e.j41(200,"div",69),e.DNE(201,Oe,2,0,"div",70),e.k0s(),e.DNE(202,Ke,3,2,"div",71),e.k0s()()()()()()()()(),e.j41(203,"div",75),e.DNE(204,tt,3,2,"div",76),e.k0s()()),2&i){let m;e.R7$(9),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(),e.vxM(18,"edit"!==r.windowsMode?18:-1),e.R7$(),e.vxM(19,"edit"===r.windowsMode?19:-1),e.R7$(2),e.Y8G("routerLink","./.."),e.R7$(),e.Y8G("svgIcon","mat_solid:chevron_left"),e.R7$(4),e.vxM(26,"edit"!==r.windowsMode?26:-1),e.R7$(),e.vxM(27,"edit"===r.windowsMode?27:-1),e.R7$(),e.Y8G("ngxPermissionsExcept",e.lJ4(78,T)),e.R7$(3),e.Y8G("formGroup",r.customerForm),e.R7$(2),e.Y8G("expanded",!0),e.R7$(),e.Y8G("collapsedHeight","56px"),e.R7$(9),e.Y8G("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del negocio"),e.R7$(),e.vxM(44,r.customerForm.get("name").hasError("required")?44:-1),e.R7$(),e.vxM(45,r.customerForm.get("name").hasError("maxlength")||r.customerForm.get("name").hasError("minlength")?45:-1),e.R7$(5),e.Y8G("formControlName","domain"),e.R7$(),e.Dyx(r.domains),e.R7$(4),e.vxM(55,r.customerForm.get("domain").hasError("required")?55:-1),e.R7$(5),e.Y8G("formControlName","type"),e.R7$(5),e.vxM(65,r.customerForm.get("type").hasError("required")?65:-1),e.R7$(5),e.Y8G("type","text")("formControlName","nit")("maxlength",11)("minlength",11),e.R7$(),e.vxM(71,r.customerForm.get("nit").hasError("maxlength")||r.customerForm.get("nit").hasError("minlength")?71:-1),e.R7$(),e.vxM(72,r.customerForm.get("nit").hasError("pattern")?72:-1),e.R7$(8),e.Y8G("formControlName","commercialId"),e.R7$(),e.Dyx(r.commercials),e.R7$(6),e.Y8G("formControlName","credit")("min",0),e.R7$(),e.vxM(88,r.customerForm.get("credit").hasError("min")?88:-1),e.R7$(4),e.Y8G("color","primary")("formControlName","active"),e.R7$(6),e.Y8G("svgIcon","mat_solid:subject"),e.R7$(),e.Y8G("formControlName","description")("rows",5)("maxlength",1e3)("spellcheck",!1),e.R7$(2),e.SpI("",(null==(m=r.customerForm.get("description").value)?null:m.length)||0,"/1000"),e.R7$(2),e.Y8G("collapsedHeight","56px"),e.R7$(6),e.Dyx(r.customerForm.get("bankAccounts").controls),e.R7$(3),e.Y8G("svgIcon","mat_solid:add_circle"),e.R7$(3),e.Y8G("expanded",!0),e.R7$(),e.Y8G("collapsedHeight","56px"),e.R7$(9),e.Y8G("formControlName","country"),e.R7$(3),e.Y8G("svgIcon","mat_solid:public"),e.R7$(),e.vxM(129,r.customerForm.get("country").hasError("required")?129:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:map"),e.R7$(),e.Y8G("formControlName","state"),e.R7$(),e.Dyx(r.states),e.R7$(2),e.vxM(138,r.customerForm.get("state").hasError("required")?138:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:location_on"),e.R7$(),e.Y8G("formControlName","city"),e.R7$(),e.Dyx(r.cities),e.R7$(2),e.vxM(147,r.customerForm.get("city").hasError("required")?147:-1),e.R7$(4),e.Y8G("formControlName","zip")("max",99999),e.R7$(),e.vxM(152,r.customerForm.get("zip").hasError("pattern")?152:-1),e.R7$(5),e.Y8G("svgIcon","mat_solid:home"),e.R7$(),e.Y8G("formControlName","address")("minLength",3)("maxlength",255),e.R7$(),e.vxM(159,r.customerForm.get("address").hasError("required")?159:-1),e.R7$(),e.vxM(160,r.customerForm.get("address").hasError("maxlength")||r.customerForm.get("address").hasError("minlength")?160:-1),e.R7$(2),e.Y8G("collapsedHeight","56px"),e.R7$(7),e.Dyx(r.customerForm.get("phoneNumbers").controls),e.R7$(2),e.vxM(171,r.customerForm.get("phoneNumbers").value.length<1?171:-1),e.R7$(3),e.Dyx(r.customerForm.get("emails").controls),e.R7$(2),e.vxM(176,r.customerForm.get("emails").value.length<1?176:-1),e.R7$(2),e.Y8G("formControlName","website"),e.R7$(3),e.Y8G("svgIcon","mat_solid:language"),e.R7$(),e.vxM(182,r.customerForm.get("website").hasError("pattern")?182:-1),e.R7$(2),e.Y8G("collapsedHeight","56px"),e.R7$(8),e.vxM(192,r.customerForm.get("logoUrl").value?192:-1),e.R7$(2),e.Y8G("ngxPermissionsExcept",e.lJ4(79,T)),e.R7$(),e.Y8G("ngxPermissionsExcept",e.lJ4(80,T)),e.R7$(4),e.vxM(199,r.customerForm.get("coverUrl").value?199:-1),e.R7$(2),e.Y8G("ngxPermissionsExcept",e.lJ4(81,T)),e.R7$(),e.Y8G("ngxPermissionsExcept",e.lJ4(82,T)),e.R7$(2),e.Y8G("ngxPermissionsExcept",e.lJ4(83,T))}},dependencies:[R.Hl,R.$z,R.iY,$.MY,$.BS,$.GK,$.Z2,$.WN,v.RG,v.rl,v.nJ,v.MV,v.TL,v.JW,h.m_,h.An,G.fS,G.fg,w.Ve,X.uv,w.VO,w.$2,Z.wT,N.YU,n.X1,n.qT,n.me,n.Q0,n.BC,n.cb,n.YS,n.xh,n.tU,n.VZ,n.l_,n.j4,n.JD,p.Wk,M.mV,M.sG,N.PV,O.n,S.Ov,S.f6],encapsulation:2,changeDetection:0})}return o})();var z=a(96695),B=a(2042),rt=a(7673),nt=a(57786),it=a(70152),U=a(25558),V=a(96354),D=a(97586),st=a(77235),I=a(82643),at=a(47413),mt=a(63729),lt=a(70819),ct=a(59115),Q=a(9183);const ut=()=>["Super Administrador"],dt=()=>["new"],pt=o=>[o],ht=o=>({"pointer-events-none":o}),ft=()=>[10,25,50,100];function gt(o,s){if(1&o&&(e.j41(0,"div",14)(1,"mat-form-field",15),e.nrm(2,"mat-icon",16)(3,"input",17),e.k0s(),e.j41(4,"button",18),e.nrm(5,"mat-icon",19),e.j41(6,"span",20),e.EFF(7,"Nuevo"),e.k0s()()()),2&o){const t=e.XpG();e.R7$(),e.Y8G("subscriptSizing","dynamic"),e.R7$(),e.Y8G("svgIcon","mat_solid:search"),e.R7$(),e.Y8G("formControl",t.searchInputControl)("autocomplete","off")("placeholder","Buscar clientes"),e.R7$(),e.Y8G("routerLink",e.lJ4(7,dt)),e.R7$(),e.Y8G("svgIcon","mat_solid:add")}}function Ct(o,s){if(1&o&&e.nrm(0,"img",31),2&o){const t=e.XpG().$implicit;e.Y8G("alt","Foto")("src",t.logoUrl,e.B4B)}}function vt(o,s){1&o&&(e.j41(0,"div",32),e.EFF(1," SIN FOTO "),e.k0s())}function _t(o,s){if(1&o){const t=e.RV6();e.j41(0,"mat-slide-toggle",42),e.bIt("change",function(r){e.eBV(t);const m=e.XpG(),c=m.$implicit,y=m.$index,Gt=e.XpG(4);return e.Njj(Gt.updateCustomerStatus(r,c,y))}),e.k0s()}if(2&o){const t=e.XpG().$implicit;e.Y8G("checked",t.active)("color","primary")}}function Ft(o,s){1&o&&e.nrm(0,"mat-spinner",37),2&o&&e.Y8G("diameter",20)("color","primary")}function xt(o,s){if(1&o){const t=e.RV6();e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.DNE(3,Ct,1,2,"img",31)(4,vt,2,0,"div",32),e.k0s()(),e.j41(5,"div",33),e.EFF(6),e.k0s(),e.j41(7,"div",34),e.EFF(8),e.k0s(),e.j41(9,"div",34),e.EFF(10),e.k0s(),e.j41(11,"div",35),e.DNE(12,_t,1,2,"mat-slide-toggle",36)(13,Ft,1,2,"mat-spinner",37),e.k0s(),e.j41(14,"div",38)(15,"button",39),e.nrm(16,"mat-icon",40),e.k0s(),e.j41(17,"button",41),e.bIt("click",function(){const r=e.eBV(t).$implicit,m=e.XpG(4);return e.Njj(m.removeCustomer(r.id))}),e.nrm(18,"mat-icon",40),e.k0s()()()}if(2&o){const t=s.$implicit,i=s.$index,r=e.XpG(4);e.R7$(3),e.vxM(3,t.logoUrl?3:-1),e.R7$(),e.vxM(4,t.logoUrl?-1:4),e.R7$(2),e.SpI(" ",t.name," "),e.R7$(2),e.SpI(" ",t.nit," "),e.R7$(2),e.Lme(" ",null==t.phoneNumber?null:t.phoneNumber.stateCode," ",null==t.phoneNumber?null:t.phoneNumber.phoneNumber," "),e.R7$(2),e.vxM(12,r.isLoading&&r.selectedSlide===i?-1:12),e.R7$(),e.vxM(13,r.isLoading&&r.selectedSlide===i?13:-1),e.R7$(2),e.Y8G("routerLink",e.eq3(11,pt,t.id)),e.R7$(),e.Y8G("svgIcon","mat_solid:edit"),e.R7$(2),e.Y8G("svgIcon","mat_solid:delete")}}function bt(o,s){1&o&&e.Z7z(0,xt,19,13,"div",28,e.BUC().trackByFn,!0),2&o&&e.Dyx(s)}function kt(o,s){if(1&o&&(e.j41(0,"div",21)(1,"div",22)(2,"div",23),e.EFF(3," Foto "),e.k0s(),e.j41(4,"div",24)(5,"span"),e.EFF(6," Nombre"),e.k0s()(),e.j41(7,"div",25),e.EFF(8," CI \xf3 NIT "),e.k0s(),e.j41(9,"div",25),e.EFF(10," Tel\xe9fono "),e.k0s(),e.j41(11,"div",26)(12,"span"),e.EFF(13,"Activo"),e.k0s()(),e.j41(14,"div",27),e.EFF(15," Acciones "),e.k0s()(),e.DNE(16,bt,2,0),e.nI1(17,"async"),e.k0s()),2&o){let t;const i=e.XpG(2);e.R7$(4),e.Y8G("mat-sort-header","name"),e.R7$(7),e.Y8G("mat-sort-header","active"),e.R7$(5),e.vxM(16,(t=e.bMT(17,3,i.customers$))?16:-1,t)}}function yt(o,s){if(1&o&&(e.j41(0,"div",43),e.EFF(1),e.k0s()),2&o){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.searchInputControl.value?"\xa1No se han encontrado clientes!":"\xa1No se ha creado ning\xfan cliente a\xfan!"," ")}}function Et(o,s){1&o&&e.DNE(0,kt,18,5,"div",21)(1,yt,2,1),2&o&&e.vxM(0,s.length>0?0:1)}function Rt(o,s){if(1&o&&e.nrm(0,"mat-paginator",13),2&o){const t=e.XpG();e.Y8G("ngClass",e.eq3(6,ht,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.lJ4(8,ft))("showFirstLastButtons",!0)}}I.vfs=st.b.vfs;let $t=(()=>{class o{constructor(){this.customers$=(0,rt.of)([]),this.isLoading=!1,this.searchInputControl=new n.MJ,this.isSlideLoading=!1,this.selectedSlide=null,this.user=null,this.merchant=null,this._unsubscribeAll=new f.B,this._customersService=(0,e.WQX)(_.h),this._changeDetectorRef=(0,e.WQX)(e.gRc),this._fuseConfirmationService=(0,e.WQX)(d.G),this._snackBar=(0,e.WQX)(E.UG),this.store=(0,e.WQX)(A.il)}ngOnInit(){this.store.select(mt.SW).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(lt.Xb).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.customers$=this.store.select(k.wQ),this.store.select(at.D).pipe((0,l.Q)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,l.Q)(this._unsubscribeAll),(0,it.B)(300),(0,U.n)(t=>(this.isLoading=!0,this._customersService.findAllCustomers(this.pagination.page,this.pagination.size,"name","asc",t))),(0,V.T)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,l.Q)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,nt.h)(this._sort.sortChange,this._paginator.page).pipe((0,U.n)(()=>(this.isLoading=!0,this._customersService.findAllCustomers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,V.T)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updateCustomerStatus(t,i,r){this.isSlideLoading=!0,this.selectedSlide=r,this._customersService.updateCustomerStatus({id:i.id,active:t.checked}).subscribe(({data:m})=>{this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:m.updatedCustomer,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}removeCustomer(t){this._fuseConfirmationService.open({title:"Eliminar cliente",message:"\xbfEst\xe1s seguro de que deseas eliminar este cliente?",actions:{confirm:{label:"S\xed",color:"warn"},cancel:{label:"No"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._customersService.removeCustomer(t).subscribe(({data:m})=>{this._snackBar.openFromComponent(u.p,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:3e3,data:{message:m.removeCustomer.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})})})}generateReport(t){}generatePDF(t="open",i,r){let m={header:{text:`Listado de clientes ${i?"activos":"inactivos"}.`,style:"header",marginTop:5},content:[{lineHeight:1.3,table:{headerRows:1,widths:[80,"*",100,100,100,100],body:[[{text:"C\xf3d.",style:"table_header"},{text:"Clientes",style:"table_header",alignment:"left"},{text:"NIT",style:"table_header",alignment:"center"},{text:"Tel\xe9fono",style:"table_header"},{text:"Correo",style:"table_header"},{text:"Tipo",style:"table_header"}],...r.map(c=>[{style:"table_body",text:c.code,alignment:"center"},{style:"table_body",text:c.name},{style:"table_body",text:c.nit},{style:"table_body",text:" item.phone",alignment:"center"},{style:"table_body",text:c.email,alignment:"center"},{style:"table_body",text:c.type,alignment:"center"}])]},layout:"lightHorizontalLines"}],footer:(c,y)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${this.user.fullname} | Esta informaci\xf3n es exclusiva de ${this.merchant.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${c.toString()}/${y} - Fecha de impresi\xf3n ${D().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10}},pageOrientation:"landscape",pageSize:"LETTER",watermark:{text:this.merchant.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:`Listado de clientes ${i?"activos":"inactivos"}.`,author:`${this.user.fullname}`,creationDate:D().toDate(),modDate:D().toDate(),producer:this.merchant.name}};switch(t){case t="download":I.createPdf(m).download();break;case t="open":I.createPdf(m).open();break;case t="print":I.createPdf(m).print()}}printCustomerDataSheet(t="open",i){let r={header:{text:"Ficha de cliente",style:"header",marginTop:5},content:[{lineHeight:1.3,table:{headerRows:1,widths:["*","*","*","*","*","*"],body:[[{style:"table_header",alignment:"left",text:"Nombre del Cliente: "+i.name,colSpan:6},{},{},{},{},{}],[{},{style:"table_header",alignment:"left",text:"NIT: "+i.nit,colSpan:2},{},{}],[{},{style:"table_header",alignment:"left",text:"Correo electr\xf3nico: "+i.email,colSpan:4},{},{},{}],[{style:"table_header",text:"Personas de contacto",colSpan:6},{},{},{},{},{}],[{style:"table_header",text:"Cargo"},{style:"table_header",text:"Nombre y Apellidos"},{style:"table_header",text:"N\xfamero de Identidad"},{style:"table_header",text:"Tel\xe9fono"},{style:"table_header",text:"Correo"},{style:"table_header",text:"Puede"}]]}}],footer:(m,c)=>({table:{widths:["*","*"],body:[[{text:`Reporte generador por: ${this.user.fullname} | Esta informaci\xf3n es exclusiva de ${this.merchant.name}`,bold:!0,fontSize:8},{text:`P\xe1gina ${m.toString()}/${c} - Fecha de impresi\xf3n ${D().format("DD/MM/yyyy HH:mm:ss")}`,bold:!0,fontSize:8,alignment:"right"}]]},margin:[30,0,30,0],layout:"noBorders",italics:!0}),defaultStyle:{fontSize:12},styles:{header:{fontSize:18,bold:!0,marginBottom:5,alignment:"center",fontFeatures:["c2sc","smcp"]},table_header:{fontSize:11,bold:!0,alignment:"center",fontFeatures:["c2sc","smcp"]},table_body:{fontSize:10}},pageOrientation:"landscape",pageSize:"LETTER",watermark:{text:this.merchant.name,color:"#fff",opacity:.07,angle:-35,bold:!0,italics:!1},info:{title:"Ficha de cliente",author:`${this.user.fullname}`,creationDate:D().toDate(),modDate:D().toDate(),producer:this.merchant.name}};switch(t){case t="download":I.createPdf(r).download();break;case t="open":I.createPdf(r).open();break;case t="print":I.createPdf(r).print()}}trackByFn(t,i){return t||i.id}_abilities(t){let i="";return t.forEach(r=>i=i+r.toUpperCase()+", "),i}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.VBU({type:o,selectors:[["customers"]],viewQuery:function(i,r){if(1&i&&(e.GBs(z.iy,5),e.GBs(B.B4,5)),2&i){let m;e.mGM(m=e.lsd())&&(r._paginator=m.first),e.mGM(m=e.lsd())&&(r._sort=m.first)}},standalone:!0,features:[e.aNF],decls:24,vars:8,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],["class","flex flex-wrap items-center mt-2 shrink-0 sm:mt-0 sm:ml-4",4,"ngxPermissionsExcept"],[1,"flex","flex-auto"],[1,"flex","flex-col","justify-between","flex-auto"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"flex","flex-wrap","items-center","mt-2","shrink-0","sm:mt-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64",3,"subscriptSizing"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"routerLink"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5","customers-table"],[1,"text-center"],[3,"mat-sort-header"],[1,"text-center","hiddem","sm:block"],[1,"flex","items-center","justify-center",3,"mat-sort-header"],[1,"pr-4","text-right"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","md:px-8","customers-table"],[1,"items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"truncate"],[1,"truncate","text-center"],[1,"flex","justify-center","mr-4","text-center"],[3,"checked","color"],[3,"diameter","color"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[3,"change","checked","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e.EFF(6,"Inicio"),e.k0s()(),e.j41(7,"div",5),e.nrm(8,"mat-icon",6),e.j41(9,"a",7),e.EFF(10,"Ventas"),e.k0s()(),e.j41(11,"div",5),e.nrm(12,"mat-icon",6),e.j41(13,"a",7),e.EFF(14,"Clientes"),e.k0s()()(),e.j41(15,"div",8)(16,"h2",9),e.EFF(17," Clientes "),e.k0s()()(),e.DNE(18,gt,8,8,"div",10),e.k0s(),e.j41(19,"div",11)(20,"div",12),e.DNE(21,Et,2,1),e.nI1(22,"async"),e.DNE(23,Rt,1,9,"mat-paginator",13),e.k0s()()()),2&i){let m;e.R7$(8),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(4),e.Y8G("svgIcon","mat_solid:chevron_right"),e.R7$(6),e.Y8G("ngxPermissionsExcept",e.lJ4(7,ut)),e.R7$(3),e.vxM(21,(m=e.bMT(22,5,r.customers$))?21:-1,m),e.R7$(2),e.vxM(23,r.pagination.length>0?23:-1)}},dependencies:[N.Jj,R.Hl,R.$z,v.RG,v.rl,v.JW,h.m_,h.An,G.fS,G.fg,z.Ou,z.iy,B.NQ,B.B4,B.aE,ct.Cn,X.uv,M.mV,M.sG,Q.D6,Q.LG,N.YU,n.X1,n.me,n.BC,n.l_,p.Wk,S.Ov,S.f6],encapsulation:2,changeDetection:0})}return o})();var J=a(36646),jt=a(23301),It=a(34413);const Nt=[{path:"",component:P},{path:"",loadChildren:()=>Promise.all([a.e(2076),a.e(4507)]).then(a.bind(a,64507))},{path:"customers",component:$t,resolve:{customers:J.AZ}},{path:"customers/:customerId",component:ot,resolve:{currencies:jt.p,employee:It.MI,customer:J.FD}}]},23301:(L,b,a)=>{a.d(b,{I:()=>f,p:()=>x});var h=a(54438),p=a(92581);const x=(l,e)=>(0,h.WQX)(p.v).getCurrencies(),f=(l,e)=>(0,h.WQX)(p.v).getActiveCurrency()},91401:(L,b,a)=>{a.d(b,{y$:()=>f});var h=a(59640);const p=l=>l.currencies,f=((0,h.Mz)(p,l=>l.currency),(0,h.Mz)(p,l=>l.currencies))},92581:(L,b,a)=>{a.d(b,{v:()=>A});var h=a(54438),p=a(96697),x=a(25558),f=a(88141),l=a(73512),e=a(59640),P=a(98216),n=a(54588),E=a(91401);const N=l.J1`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,R=l.J1`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,v=l.J1`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,G=l.J1`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,$=l.J1`
    query FindAllCurrencies($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllCurrencies(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,w=l.J1`
    query FindAllActiveCurrencies {
        findAllActiveCurrencies {
            ok
            message

            currencies {
                id
                name
                iso
            }
        }
    }
`,j=l.J1`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;let A=(()=>{class k{constructor(){this.apolloProvider=(0,h.WQX)(l.Ic),this.store=(0,h.WQX)(e.il),this._apollo=this.apolloProvider.use("BALANC")}createCurrency(d){return this.store.select(E.y$).pipe((0,p.s)(1),(0,x.n)(u=>this._apollo.mutate({mutation:N,variables:{createCurrencyInput:d},errorPolicy:"all"}).pipe((0,f.M)(({data:_})=>{const g=structuredClone(u);g.push(_.createCurrency.currency),this.store.dispatch((0,n.Ih)({currencies:g}))}))))}getCurrencies(d=1,u=20,_="name",g="asc",C=""){return this._apollo.query({query:$,variables:{offset:u*(d-1),limit:u,sort:_,order:g,search:C},errorPolicy:"all"}).pipe((0,f.M)(({data:F})=>{this.store.dispatch((0,P.Bp)({pagination:F.findAllCurrencies.pagination})),this.store.dispatch((0,n.Ih)({currencies:F.findAllCurrencies.currencies}))}))}getActiveCurrency(){return this._apollo.query({query:w,errorPolicy:"all"}).pipe((0,f.M)(({data:d})=>{d&&this.store.dispatch((0,n.Ih)({currencies:d.findAllActiveCurrencies.currencies}))}))}getCurrencyById(d){return this._apollo.query({query:j,variables:{findCurrencyByIdId:d},errorPolicy:"all"}).pipe((0,f.M)(({data:u})=>{this.store.dispatch((0,n.MN)({currency:u.findCurrencyById.currency}))}))}updateCurrency(d){return this.store.select(E.y$).pipe((0,p.s)(1),(0,x.n)(u=>this._apollo.mutate({mutation:R,variables:{updateCurrencyInput:d},errorPolicy:"all"}).pipe((0,f.M)(({data:_})=>{const g=structuredClone(u);g[u.findIndex(F=>F.id===d.id)]=_.updateCurrency.currency,this.store.dispatch((0,n.Ih)({currencies:g}))}))))}updateCurrencyStatus(d){return this.store.select(E.y$).pipe((0,p.s)(1),(0,x.n)(u=>this._apollo.mutate({mutation:v,variables:{updateEntityStatusInput:d},errorPolicy:"all"}).pipe((0,f.M)(({})=>{const g=structuredClone(u);g[u.findIndex(F=>F.id===d.id)].active=d.active,this.store.dispatch((0,n.Ih)({currencies:g}))}))))}removeCurrency(d){return this.store.select(E.y$).pipe((0,p.s)(1),(0,x.n)(u=>this._apollo.mutate({mutation:G,variables:{removeCurrencyId:d},errorPolicy:"all"}).pipe((0,f.M)(({})=>{const g=structuredClone(u),C=u.findIndex(F=>F.id===d);g.splice(C,1),this.store.dispatch((0,n.Ih)({currencies:g}))}))))}static#e=this.\u0275fac=function(u){return new(u||k)};static#t=this.\u0275prov=h.jDH({token:k,factory:k.\u0275fac,providedIn:"root"})}return k})()}}]);